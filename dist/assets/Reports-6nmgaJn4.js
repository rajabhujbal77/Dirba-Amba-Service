import{_ as L}from"./vendor-pdf-DRk-497H.js";import{r as h,j as e}from"./vendor-radix-BK0gN1wx.js";import{r as f,j as U}from"./index-lxF1Xzjf.js";import"./vendor-react-BRY8hXab.js";import"./vendor-state-B-0uGrSJ.js";function H({assignedDepotId:b}){const[p,$]=h.useState({from:"",to:""}),[T,S]=h.useState("bookings"),[O,R]=h.useState(!0),[l,E]=h.useState({totalBookings:0,bookedCount:0,inTransitCount:0,deliveredCount:0,pendingCount:0,totalRevenue:0,totalPackages:0,revenueByMethod:{cash:0,online:0,to_pay:0,credit:0}}),[c,D]=h.useState({totalTrips:0,completedTrips:0,activeTrips:0,pendingTrips:0,totalTripCost:0}),[y,B]=h.useState([]),[j,F]=h.useState([]),[o,A]=h.useState({accounts:[],totalCredit:0,totalAdvancePaid:0,totalNetOutstanding:0}),[d,M]=h.useState({depots:[],grandTotalPackages:0,grandTotalRevenue:0,allSizes:[]});h.useEffect(()=>{C()},[]);const C=async()=>{R(!0);try{const s=p.from||void 0,t=p.to||void 0,[x,a,N,m,u,w]=await Promise.all([f.getBookingSummary(s,t,b),f.getTripSummary(s,t,b),f.getTopCustomers(5,s,t,b),f.getTopRoutes(5,s,t,b),U.getCreditSummary(b),f.getOriginDepotReport(s,t)]);E(x),D(a),B(N.customers),F(m.routes),A(u),M(w)}catch(s){console.error("Error loading reports:",s)}finally{R(!1)}},_=()=>{C()},i=s=>s>=1e5?`₹${(s/1e5).toFixed(2)}L`:`₹${s.toLocaleString("en-IN")}`,z=async()=>{const{jsPDF:s}=await L(async()=>{const{jsPDF:m}=await import("./vendor-pdf-DRk-497H.js").then(u=>u.j);return{jsPDF:m}},[]),t=new s,x=t.internal.pageSize.getWidth();let a=20;t.setFontSize(20),t.setFont("helvetica","bold"),t.text("Dirba Amba Service - Reports",x/2,a,{align:"center"}),a+=10,t.setFontSize(10),t.setFont("helvetica","normal");const N=p.from&&p.to?`Period: ${p.from} to ${p.to}`:"Period: All Time";t.text(N,x/2,a,{align:"center"}),a+=15,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Booking Summary",14,a),a+=8,t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Total Bookings: ${l.totalBookings}`,14,a),a+=6,t.text(`Delivered: ${l.deliveredCount}`,14,a),a+=6,t.text(`In Transit: ${l.inTransitCount}`,14,a),a+=6,t.text(`Booked (Pending): ${l.bookedCount}`,14,a),a+=6,t.text(`Total Revenue: ${i(l.totalRevenue)}`,14,a),a+=6,t.text(`Total Packages: ${l.totalPackages}`,14,a),a+=12,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Trip Summary",14,a),a+=8,t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Total Trips: ${c.totalTrips}`,14,a),a+=6,t.text(`Completed: ${c.completedTrips}`,14,a),a+=6,t.text(`Active: ${c.activeTrips}`,14,a),a+=6,t.text(`Total Trip Cost: ${i(c.totalTripCost)}`,14,a),a+=12,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Revenue by Payment Method",14,a),a+=8,t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Cash: ${i(l.revenueByMethod.cash)}`,14,a),a+=6,t.text(`Online: ${i(l.revenueByMethod.online)}`,14,a),a+=6,t.text(`To Pay: ${i(l.revenueByMethod.to_pay)}`,14,a),a+=6,t.text(`Credit: ${i(l.revenueByMethod.credit)}`,14,a),a+=12,y.length>0&&(t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Top Customers",14,a),a+=8,t.setFontSize(10),t.setFont("helvetica","normal"),y.forEach((m,u)=>{t.text(`${u+1}. ${m.name} - ${m.bookings} bookings - ${i(m.revenue)}`,14,a),a+=6}),a+=6),j.length>0&&(t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Top Routes",14,a),a+=8,t.setFontSize(10),t.setFont("helvetica","normal"),j.forEach((m,u)=>{t.text(`${u+1}. ${m.route} - ${m.trips} bookings - ${i(m.revenue)}`,14,a),a+=6})),t.setFontSize(8),t.text(`Generated on: ${new Date().toLocaleString("en-IN")}`,14,285),t.save(`DRT_Report_${new Date().toISOString().split("T")[0]}.pdf`)},I=()=>{let t="",x="DRT_Report";const a=p.from&&p.to?`Period: ${p.from} to ${p.to}`:"Period: All Time";switch(T){case"bookings":t=`BOOKINGS REPORT
`,t+=`${a}

`,t+=`BOOKING SUMMARY
`,t+=`Total Bookings,${l.totalBookings}
`,t+=`Delivered,${l.deliveredCount}
`,t+=`In Transit,${l.inTransitCount}
`,t+=`Booked (Pending),${l.bookedCount}
`,t+=`Total Packages,${l.totalPackages}
`,t+=`Total Revenue,${l.totalRevenue}
`,x="Bookings_Report";break;case"trips":t=`TRIPS REPORT
`,t+=`${a}

`,t+=`TRIP SUMMARY
`,t+=`Total Trips,${c.totalTrips}
`,t+=`Completed,${c.completedTrips}
`,t+=`Active,${c.activeTrips}
`,t+=`Pending,${c.pendingTrips}
`,t+=`Total Trip Cost,${c.totalTripCost}
`,x="Trips_Report";break;case"revenue":t=`REVENUE REPORT
`,t+=`${a}

`,t+=`TOTAL REVENUE
`,t+=`Total Revenue,${l.totalRevenue}
`,t+=`Total Trip Cost,${c.totalTripCost}
`,t+=`Net Profit,${l.totalRevenue-c.totalTripCost}

`,t+=`REVENUE BY PAYMENT METHOD
`,t+=`Payment Method,Amount
`,t+=`Cash,${l.revenueByMethod.cash}
`,t+=`Online,${l.revenueByMethod.online}
`,t+=`To Pay,${l.revenueByMethod.to_pay}
`,t+=`Credit,${l.revenueByMethod.credit}
`,x="Revenue_Report";break;case"customers":t=`CUSTOMER REPORT
`,t+=`${a}

`,t+=`TOP CUSTOMERS
`,t+=`Rank,Customer Name,Phone,Total Bookings,Total Revenue
`,y.forEach((r,n)=>{t+=`${n+1},"${r.name}",${r.phone},${r.bookings},${r.revenue}
`}),t+=`
`,t+=`TOP ROUTES
`,t+=`Rank,Route,Total Bookings,Total Revenue
`,j.forEach((r,n)=>{const g=r.route.replace(/→/g,"to");t+=`${n+1},"${g}",${r.trips},${r.revenue}
`}),x="Customer_Report";break;case"credit":t=`CREDIT CUSTOMERS DETAILED REPORT
`,t+=`${a}

`,t+=`SUMMARY
`,t+=`Total Credit Issued,${o.totalCredit}
`,t+=`Total Advance Paid,${o.totalAdvancePaid}
`,t+=`Total Outstanding,${o.totalNetOutstanding}
`,t+=`Total Credit Customers,${o.accounts.length}

`,t+=`CUSTOMER SUMMARY
`,t+=`Customer Name,Phone,Bookings,Total Credit,Advance Paid,Outstanding,Status
`,[...o.accounts].sort((r,n)=>n.netOutstanding-r.netOutstanding).forEach(r=>{const n=r.netOutstanding===0?"Cleared":r.advancePaid/r.totalCredit>=.5?"Partial":"Pending";t+=`"${r.customer}",${r.phone},${r.bookingCount},${r.totalCredit},${r.advancePaid},${r.netOutstanding},${n}
`}),t+=`
`,t+=`DETAILED BOOKINGS
`,t+=`Customer Name,Phone,Receipt No,Date,Origin,Destination,Package,Qty,Rate,Amount,Payment Method
`,[...o.accounts].sort((r,n)=>n.netOutstanding-r.netOutstanding).forEach(r=>{r.bookings&&r.bookings.length>0&&r.bookings.forEach(n=>{const g=n.date?new Date(n.date).toLocaleDateString("en-IN"):"-",k=n.origin||"-",P=n.destination||"-";n.packages&&n.packages.length>0?n.packages.forEach(v=>{t+=`"${r.customer}",${r.phone},${n.receiptNumber||"-"},${g},"${k}","${P}",${v.size||"-"},${v.quantity||0},${v.price||0},${(v.quantity||0)*(v.price||0)},credit
`}):t+=`"${r.customer}",${r.phone},${n.receiptNumber||"-"},${g},"${k}","${P}",-,-,-,${n.amount||0},credit
`})}),t+=`
`,t+=`ADVANCE PAYMENTS
`,t+=`Customer Name,Phone,Receipt No,Date,Amount,Payment Method,Notes
`,[...o.accounts].sort((r,n)=>n.netOutstanding-r.netOutstanding).forEach(r=>{r.payments&&r.payments.length>0&&r.payments.forEach(n=>{const g=n.date?new Date(n.date).toLocaleDateString("en-IN"):"-";t+=`"${r.customer}",${r.phone},${n.receiptNumber||"-"},${g},${n.amount||0},${n.method||"cash"},"${n.notes||""}"
`})}),x="Credit_Customers_Detailed_Report";break;case"origin_depot":t=`ORIGIN DEPOT COLLECTION REPORT
`,t+=`${a}

`,t+=`SUMMARY
`,t+=`Total Depots,${d.depots.length}
`,t+=`Total Packages,${d.grandTotalPackages}
`,t+=`Total Revenue,${d.grandTotalRevenue}

`,t+=`DEPOT COLLECTION DETAILS
`;const u=d.allSizes.join(",");t+=`Depot Name,Total Packages,${u},Revenue
`,d.depots.forEach(r=>{const n=d.allSizes.map(g=>r.sizeBreakdown[g]||0).join(",");t+=`"${r.depotName}",${r.totalPackages},${n},${r.totalRevenue}
`});const w=d.allSizes.map(r=>d.depots.reduce((n,g)=>n+(g.sizeBreakdown[r]||0),0)).join(",");t+=`"GRAND TOTAL",${d.grandTotalPackages},${w},${d.grandTotalRevenue}
`,x="Origin_Depot_Collection_Report";break;default:t=`Dirba Amba Service - Reports

`,t+=`${a}
`,x="DRT_Report"}const N=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a");m.href=URL.createObjectURL(N),m.download=`${x}_${new Date().toISOString().split("T")[0]}.csv`,m.click()};return O?e.jsx("div",{className:"p-4 md:p-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading reports..."})]})}):e.jsxs("div",{className:"p-4 md:p-8 overflow-x-hidden",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reports"}),e.jsx("p",{className:"text-gray-600",children:"Analytics and business insights"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 md:p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),e.jsxs("select",{id:"reportType",value:T,onChange:s=>S(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"bookings",children:"Bookings Report"}),e.jsx("option",{value:"trips",children:"Trips Report"}),e.jsx("option",{value:"revenue",children:"Revenue Report"}),e.jsx("option",{value:"customers",children:"Customer Report"}),e.jsx("option",{value:"origin_depot",children:"Origin Depot Collection"}),e.jsx("option",{value:"credit",children:"Credit Customers Report"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),e.jsx("input",{id:"dateFrom",type:"date",value:p.from,onChange:s=>$({...p,from:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),e.jsx("input",{id:"dateTo",type:"date",value:p.to,onChange:s=>$({...p,to:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:_,className:"w-full px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Generate Report"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"font-bold text-gray-900",children:"Booking Summary"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Bookings"}),e.jsx("span",{className:"font-bold text-gray-900",children:l.totalBookings})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Delivered"}),e.jsx("span",{className:"font-bold text-green-600",children:l.deliveredCount})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"In Transit"}),e.jsx("span",{className:"font-bold text-blue-600",children:l.inTransitCount})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Booked (Pending)"}),e.jsx("span",{className:"font-bold text-yellow-600",children:l.bookedCount})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Total Revenue"}),e.jsx("span",{className:"font-bold text-orange-600",children:i(l.totalRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Packages"}),e.jsx("span",{className:"font-bold text-gray-900",children:l.totalPackages})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"font-bold text-gray-900",children:"Trip Summary"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Trips"}),e.jsx("span",{className:"font-bold text-gray-900",children:c.totalTrips})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Completed"}),e.jsx("span",{className:"font-bold text-green-600",children:c.completedTrips})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Active"}),e.jsx("span",{className:"font-bold text-blue-600",children:c.activeTrips})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Pending"}),e.jsx("span",{className:"font-bold text-yellow-600",children:c.pendingTrips})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Total Trip Cost"}),e.jsx("span",{className:"font-bold text-orange-600",children:i(c.totalTripCost)})]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 mb-6",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"font-bold text-gray-900",children:"Revenue by Payment Method"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cash"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:i(l.revenueByMethod.cash)})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Online"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:i(l.revenueByMethod.online)})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"To Pay"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:i(l.revenueByMethod.to_pay)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Credit"}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:i(l.revenueByMethod.credit)})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"font-bold text-gray-900",children:"Top Customers"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:y.length>0?y.map((s,t)=>e.jsxs("div",{className:"p-4 md:p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-orange-600",children:t+1})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-900 block truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone})]})]}),e.jsx("span",{className:"font-bold text-orange-600 whitespace-nowrap text-sm md:text-base",children:i(s.revenue)})]}),e.jsx("div",{className:"ml-11",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[s.bookings," bookings"]})})]},t)):e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No customers found"})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"font-bold text-gray-900",children:"Top Routes"})}),e.jsx("div",{className:"divide-y divide-gray-200",children:j.length>0?j.map((s,t)=>e.jsxs("div",{className:"p-4 md:p-6 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"font-bold text-blue-600",children:t+1})}),e.jsx("span",{className:"font-medium text-gray-900 break-words text-sm md:text-base",children:s.route})]}),e.jsx("span",{className:"font-bold text-orange-600 whitespace-nowrap text-sm md:text-base",children:i(s.revenue)})]}),e.jsx("div",{className:"ml-11",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[s.trips," bookings"]})})]},t)):e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No routes found"})})]})]}),T==="credit"&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Credit Issued"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i(o.totalCredit)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.accounts.length," credit customers"]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Paid"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i(o.totalAdvancePaid)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.totalCredit>0?`${Math.round(o.totalAdvancePaid/o.totalCredit*100)}% collected`:"0% collected"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:i(o.totalNetOutstanding)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.accounts.filter(s=>s.netOutstanding>0).length," customers with balance"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 hidden md:block",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"font-bold text-gray-900",children:"Credit Customers"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Customers with credit payment method bookings"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bookings"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Credit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outstanding"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.accounts.length>0?[...o.accounts].sort((s,t)=>t.netOutstanding-s.netOutstanding).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.customer}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:s.bookingCount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 font-medium",children:i(s.totalCredit)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600 font-medium",children:i(s.advancePaid)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-bold",children:i(s.netOutstanding)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.netOutstanding===0?"bg-green-100 text-green-800":s.totalCredit>0&&s.advancePaid/s.totalCredit>=.5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.netOutstanding===0?"Cleared":s.totalCredit>0&&s.advancePaid/s.totalCredit>=.5?"Partial":"Pending"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No credit customers found"})})})]})})]}),e.jsxs("div",{className:"md:hidden",children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 mb-4",children:e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"font-bold text-gray-900",children:"Credit Customers"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Customers with credit bookings"})]})}),e.jsx("div",{className:"space-y-4",children:o.accounts.length>0?[...o.accounts].sort((s,t)=>t.netOutstanding-s.netOutstanding).map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:s.customer}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone})]}),e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${s.netOutstanding===0?"bg-green-100 text-green-800":s.totalCredit>0&&s.advancePaid/s.totalCredit>=.5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.netOutstanding===0?"Cleared":s.totalCredit>0&&s.advancePaid/s.totalCredit>=.5?"Partial":"Pending"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Bookings"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.bookingCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Credit"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:i(s.totalCredit)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Paid"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:i(s.advancePaid)})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Outstanding"}),e.jsx("span",{className:"text-sm font-bold text-orange-600",children:i(s.netOutstanding)})]})]})]},s.id)):e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-500",children:"No credit customers found"})})]})]}),T==="origin_depot"&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Depots"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.depots.length})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Packages Collected"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.grandTotalPackages.toLocaleString("en-IN")})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 md:p-6 border border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i(d.grandTotalRevenue)})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 hidden md:block",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"font-bold text-gray-900",children:"Package Collection by Origin Depot"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Breakdown by package size"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Depot Name"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Packages"}),d.allSizes.map(s=>e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s},s)),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Revenue"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.depots.length>0?e.jsxs(e.Fragment,{children:[d.depots.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:s.depotName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-700 font-bold",children:s.totalPackages}),d.allSizes.map(t=>e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right text-gray-600",children:s.sizeBreakdown[t]||0},t)),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right font-bold text-green-600",children:i(s.totalRevenue)})]},s.depotId)),e.jsxs("tr",{className:"bg-orange-50 font-bold",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900",children:"GRAND TOTAL"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-gray-900",children:d.grandTotalPackages}),d.allSizes.map(s=>e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right text-gray-700",children:d.depots.reduce((t,x)=>t+(x.sizeBreakdown[s]||0),0)},s)),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-orange-600",children:i(d.grandTotalRevenue)})]})]}):e.jsx("tr",{children:e.jsx("td",{colSpan:3+d.allSizes.length,className:"px-6 py-8 text-center text-gray-500",children:"No depot collection data found"})})})]})})]}),e.jsx("div",{className:"md:hidden space-y-4",children:d.depots.length>0?d.depots.map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("p",{className:"font-bold text-gray-900",children:s.depotName}),e.jsx("span",{className:"text-green-600 font-bold",children:i(s.totalRevenue)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Packages"}),e.jsx("span",{className:"text-sm font-bold text-gray-900",children:s.totalPackages})]}),d.allSizes.map(t=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:t}),e.jsx("span",{className:"text-sm text-gray-700",children:s.sizeBreakdown[t]||0})]},t))]})]},s.depotId)):e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-500",children:"No depot collection data found"})})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:z,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Export as PDF"}),e.jsx("button",{onClick:I,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Export as Excel"})]})]})}export{H as default};
//# sourceMappingURL=Reports-6nmgaJn4.js.map
