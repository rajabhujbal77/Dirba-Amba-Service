{"version":3,"file":"Settings-DT2M7iVl.js","sources":["../../src/app/components/Settings.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  usersApi,\r\n  depotsApi,\r\n  depotRoutesApi,\r\n  packagesApi,\r\n  depotPricingApi,\r\n  seasonApi,\r\n  backupApi,\r\n} from '../utils/api';\r\n\r\ninterface SettingsProps {\r\n  userRole: 'owner' | 'booking_clerk' | 'depot_manager';\r\n}\r\n\r\nexport default function Settings({ userRole }: SettingsProps) {\r\n  const [activeTab, setActiveTab] = useState('users');\r\n\r\n  // Only allow admin (owner) to access settings\r\n  if (userRole !== 'owner') {\r\n    return (\r\n      <div className=\"p-8\">\r\n        <div className=\"bg-red-50 border border-red-200 rounded-xl p-6\">\r\n          <p className=\"text-red-700\">You don't have permission to access Settings.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      <div className=\"mb-8 flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Settings</h1>\r\n          <p className=\"text-gray-600\">Manage system configuration and preferences</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex gap-2 mb-6 border-b border-gray-200 overflow-x-auto\">\r\n        <TabButton active={activeTab === 'users'} onClick={() => setActiveTab('users')}>\r\n          User Management\r\n        </TabButton>\r\n        <TabButton active={activeTab === 'depots'} onClick={() => setActiveTab('depots')}>\r\n          Depots\r\n        </TabButton>\r\n        <TabButton active={activeTab === 'routes'} onClick={() => setActiveTab('routes')}>\r\n          Depot Routes\r\n        </TabButton>\r\n        <TabButton active={activeTab === 'pricing'} onClick={() => setActiveTab('pricing')}>\r\n          Packages & Pricing\r\n        </TabButton>\r\n        <TabButton active={activeTab === 'season'} onClick={() => setActiveTab('season')}>\r\n          Season\r\n        </TabButton>\r\n        <TabButton active={activeTab === 'backup'} onClick={() => setActiveTab('backup')}>\r\n          Backup & Restore\r\n        </TabButton>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'users' && <UserManagement />}\r\n      {activeTab === 'depots' && <DepotManagement />}\r\n      {activeTab === 'routes' && <DepotRoutes />}\r\n      {activeTab === 'pricing' && <PackagesPricing />}\r\n      {activeTab === 'season' && <SeasonManagement />}\r\n      {activeTab === 'backup' && <BackupRestore />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction TabButton({ active, onClick, children }: { active: boolean; onClick: () => void; children: React.ReactNode }) {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className={`px-6 py-3 font-medium border-b-2 transition-colors whitespace-nowrap ${active\r\n        ? 'border-orange-500 text-orange-600'\r\n        : 'border-transparent text-gray-600 hover:text-gray-900'\r\n        }`}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n}\r\n\r\n// ============ User Management ============\r\nfunction UserManagement() {\r\n  const [users, setUsers] = useState<any[]>([]);\r\n  const [depots, setDepots] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingUser, setEditingUser] = useState<any>(null);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n    role: 'booking_clerk' as 'booking_clerk' | 'depot_manager',\r\n    assignedDepot: '',\r\n    status: 'active',\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      const [usersRes, depotsRes] = await Promise.all([\r\n        usersApi.getAll(),\r\n        depotsApi.getAll(),\r\n      ]);\r\n      setUsers(usersRes.users || []);\r\n      setDepots(depotsRes.depots || []);\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingUser) {\r\n        // When editing, don't send password if it's empty\r\n        const updateData = { ...formData };\r\n        if (!updateData.password) {\r\n          delete updateData.password;\r\n        }\r\n        await usersApi.update(editingUser.id, updateData);\r\n      } else {\r\n        // When creating, password is required\r\n        if (!formData.password) {\r\n          alert('Password is required for new users');\r\n          return;\r\n        }\r\n        await usersApi.create(formData);\r\n      }\r\n      setShowForm(false);\r\n      setEditingUser(null);\r\n      setFormData({ name: '', email: '', password: '', role: 'booking_clerk', assignedDepot: '', status: 'active' });\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error saving user:', error);\r\n      alert('Failed to save user');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (user: any) => {\r\n    setEditingUser(user);\r\n    setFormData({\r\n      name: user.name,\r\n      email: user.email,\r\n      password: '', // Don't populate password when editing\r\n      role: user.role === 'owner' ? 'booking_clerk' : user.role, // Don't allow editing to owner\r\n      assignedDepot: user.assignedDepot || '',\r\n      status: user.status,\r\n    });\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Are you sure you want to delete this user?')) return;\r\n    try {\r\n      await usersApi.delete(id);\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error deleting user:', error);\r\n      alert('Failed to delete user');\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-6\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"font-bold text-gray-900\">Users</h2>\r\n        <button\r\n          onClick={() => {\r\n            setShowForm(true);\r\n            setEditingUser(null);\r\n            setFormData({ name: '', email: '', password: '', role: 'booking_clerk', assignedDepot: '', status: 'active' });\r\n          }}\r\n          className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n        >\r\n          Add User\r\n        </button>\r\n      </div>\r\n\r\n      {showForm && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">{editingUser ? 'Edit User' : 'New User'}</h3>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Name *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.name}\r\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email *</label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={formData.email}\r\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required\r\n                  disabled={!!editingUser}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Password {editingUser ? '(leave blank to keep current)' : '*'}\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={formData.password}\r\n                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required={!editingUser}\r\n                  placeholder={editingUser ? 'Leave blank to keep current password' : ''}\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Role *</label>\r\n                <select\r\n                  value={formData.role}\r\n                  onChange={(e) => setFormData({ ...formData, role: e.target.value as any })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required\r\n                >\r\n                  <option value=\"booking_clerk\">Booking Clerk</option>\r\n                  <option value=\"depot_manager\">Depot Manager</option>\r\n                </select>\r\n              </div>\r\n              {formData.role === 'depot_manager' && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Assigned Depot *</label>\r\n                  <select\r\n                    value={formData.assignedDepot}\r\n                    onChange={(e) => setFormData({ ...formData, assignedDepot: e.target.value })}\r\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select a depot</option>\r\n                    {depots.map(depot => (\r\n                      <option key={depot.id} value={depot.name}>{depot.number}. {depot.name} ({depot.type?.replace('_', ' ')})</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button type=\"submit\" className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600\">\r\n                {editingUser ? 'Update' : 'Create'} User\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setShowForm(false);\r\n                  setEditingUser(null);\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Name</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Email</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Role</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Assigned Depot</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {users.map((user) => (\r\n              <tr key={user.id} className=\"hover:bg-gray-50\">\r\n                <td className=\"px-6 py-4\">{user.name}</td>\r\n                <td className=\"px-6 py-4\">{user.email}</td>\r\n                <td className=\"px-6 py-4\">\r\n                  <span className=\"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs capitalize\">\r\n                    {user.role?.replace('_', ' ')}\r\n                  </span>\r\n                </td>\r\n                <td className=\"px-6 py-4\">\r\n                  {user.assignedDepot\r\n                    ? depots.find(d => d.id === user.assignedDepot)?.name || user.assignedDepot\r\n                    : '-'}\r\n                </td>\r\n                <td className=\"px-6 py-4\">\r\n                  <span className={`px-2 py-1 rounded text-xs ${user.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'}`}>\r\n                    {user.status}\r\n                  </span>\r\n                </td>\r\n                <td className=\"px-6 py-4\">\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      onClick={() => handleEdit(user)}\r\n                      className=\"text-sm text-orange-600 hover:text-orange-700 font-medium\"\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDelete(user.id)}\r\n                      className=\"text-sm text-red-600 hover:text-red-700 font-medium\"\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {users.length === 0 && (\r\n              <tr>\r\n                <td colSpan={6} className=\"px-6 py-8 text-center text-gray-500\">\r\n                  No users found. Click \"Add User\" to create one.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============ Depot Management ============\r\nfunction DepotManagement() {\r\n  const [depots, setDepots] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingDepot, setEditingDepot] = useState<any>(null);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    type: 'origin' as 'origin' | 'managed' | 'direct_pickup',\r\n    address: '',\r\n    contactPerson: '',\r\n    contactPhone: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadDepots();\r\n  }, []);\r\n\r\n  const loadDepots = async () => {\r\n    try {\r\n      const response = await depotsApi.getAll();\r\n      setDepots(response.depots || []);\r\n    } catch (error) {\r\n      console.error('Error loading depots:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingDepot) {\r\n        await depotsApi.update(editingDepot.id, formData);\r\n      } else {\r\n        await depotsApi.create(formData);\r\n      }\r\n      setShowForm(false);\r\n      setEditingDepot(null);\r\n      setFormData({ name: '', type: 'origin', address: '', contactPerson: '', contactPhone: '' });\r\n      loadDepots();\r\n    } catch (error) {\r\n      console.error('Error saving depot:', error);\r\n      alert('Failed to save depot');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (depot: any) => {\r\n    setEditingDepot(depot);\r\n    setFormData({\r\n      name: depot.name,\r\n      type: depot.type,\r\n      address: depot.address || '',\r\n      contactPerson: depot.contactPerson || '',\r\n      contactPhone: depot.contactPhone || '',\r\n    });\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Are you sure you want to delete this depot?')) return;\r\n    try {\r\n      await depotsApi.delete(id);\r\n      loadDepots();\r\n    } catch (error) {\r\n      console.error('Error deleting depot:', error);\r\n      alert('Failed to delete depot');\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-6\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"font-bold text-gray-900\">Depots</h2>\r\n        <button\r\n          onClick={() => {\r\n            setShowForm(true);\r\n            setEditingDepot(null);\r\n            setFormData({ name: '', type: 'origin', address: '', contactPerson: '', contactPhone: '' });\r\n          }}\r\n          className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n        >\r\n          Add Depot\r\n        </button>\r\n      </div>\r\n\r\n      {showForm && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">{editingDepot ? 'Edit Depot' : 'New Depot'}</h3>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Depot Name *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.name}\r\n                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  placeholder=\"e.g., Devgad\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Type *</label>\r\n                <select\r\n                  value={formData.type}\r\n                  onChange={(e) => setFormData({ ...formData, type: e.target.value as any })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required\r\n                >\r\n                  <option value=\"origin\">Origin Depot</option>\r\n                  <option value=\"managed\">Managed Depot</option>\r\n                  <option value=\"direct_pickup\">Direct Pickup by Customer</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Address</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.address}\r\n                  onChange={(e) => setFormData({ ...formData, address: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  placeholder=\"Full address\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Contact Person</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.contactPerson}\r\n                  onChange={(e) => setFormData({ ...formData, contactPerson: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Contact Phone</label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={formData.contactPhone}\r\n                  onChange={(e) => setFormData({ ...formData, contactPhone: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button type=\"submit\" className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600\">\r\n                {editingDepot ? 'Update' : 'Create'} Depot\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setShowForm(false);\r\n                  setEditingDepot(null);\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white rounded-xl border border-gray-200 overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Number</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Name</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Type</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Contact</th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {depots.map((depot) => (\r\n              <tr key={depot.id} className=\"hover:bg-gray-50\">\r\n                <td className=\"px-6 py-4 font-medium\">{depot.number}</td>\r\n                <td className=\"px-6 py-4 font-medium\">{depot.name}</td>\r\n                <td className=\"px-6 py-4\">\r\n                  <span className={`px-2 py-1 rounded text-xs ${depot.type === 'origin' ? 'bg-purple-100 text-purple-700' :\r\n                    depot.type === 'managed' ? 'bg-blue-100 text-blue-700' :\r\n                      'bg-green-100 text-green-700'\r\n                    }`}>\r\n                    {depot.type?.replace('_', ' ')}\r\n                  </span>\r\n                </td>\r\n                <td className=\"px-6 py-4 text-sm\">\r\n                  {depot.contactPerson && <div>{depot.contactPerson}</div>}\r\n                  {depot.contactPhone && <div className=\"text-gray-500\">{depot.contactPhone}</div>}\r\n                  {!depot.contactPerson && !depot.contactPhone && '-'}\r\n                </td>\r\n                <td className=\"px-6 py-4\">\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      onClick={() => handleEdit(depot)}\r\n                      className=\"text-sm text-orange-600 hover:text-orange-700 font-medium\"\r\n                    >\r\n                      Edit\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDelete(depot.id)}\r\n                      className=\"text-sm text-red-600 hover:text-red-700 font-medium\"\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {depots.length === 0 && (\r\n              <tr>\r\n                <td colSpan={5} className=\"px-6 py-8 text-center text-gray-500\">\r\n                  No depots found. Click \"Add Depot\" to create one.\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============ Depot Routes ============\r\nfunction DepotRoutes() {\r\n  const [routes, setRoutes] = useState<any[]>([]);\r\n  const [depots, setDepots] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingRoute, setEditingRoute] = useState<any>(null);\r\n  const [formData, setFormData] = useState({\r\n    originDepotId: '',\r\n    forwardingDepotIds: [] as string[],\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      const [routesRes, depotsRes] = await Promise.all([\r\n        depotRoutesApi.getAll(),\r\n        depotsApi.getAll(),\r\n      ]);\r\n      setRoutes(routesRes.routes || []);\r\n      setDepots(depotsRes.depots || []);\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingRoute) {\r\n        await depotRoutesApi.update(editingRoute.id, formData);\r\n      } else {\r\n        await depotRoutesApi.create(formData);\r\n      }\r\n      setShowForm(false);\r\n      setEditingRoute(null);\r\n      setFormData({ originDepotId: '', forwardingDepotIds: [] });\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error saving route:', error);\r\n      alert('Failed to save route');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Are you sure you want to delete this route?')) return;\r\n    try {\r\n      await depotRoutesApi.delete(id);\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error deleting route:', error);\r\n      alert('Failed to delete route');\r\n    }\r\n  };\r\n\r\n  const managedDepots = depots.filter(d => d.type === 'managed');\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-6\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n        <p className=\"text-sm text-blue-800\">\r\n          <strong>Info:</strong> Depot Routes allow managed depots to forward packages to other depots.\r\n          When configured, packages meant for forwarded depots will appear in the origin depot manager's dashboard.\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"font-bold text-gray-900\">Depot Routes</h2>\r\n        <button\r\n          onClick={() => {\r\n            setShowForm(true);\r\n            setEditingRoute(null);\r\n            setFormData({ originDepotId: '', forwardingDepotIds: [] });\r\n          }}\r\n          className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n        >\r\n          Add Route\r\n        </button>\r\n      </div>\r\n\r\n      {showForm && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">{editingRoute ? 'Edit Route' : 'New Route'}</h3>\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Origin Depot (Managed) *</label>\r\n              <select\r\n                value={formData.originDepotId}\r\n                onChange={(e) => setFormData({ ...formData, originDepotId: e.target.value })}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                required\r\n              >\r\n                <option value=\"\">Select a managed depot</option>\r\n                {managedDepots.map(depot => (\r\n                  <option key={depot.id} value={depot.id}>{depot.name}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Forwarding Depots *</label>\r\n              <div className=\"border border-gray-300 rounded-lg p-4 space-y-2 max-h-64 overflow-y-auto\">\r\n                {depots.filter(d => d.id !== formData.originDepotId).map(depot => (\r\n                  <label key={depot.id} className=\"flex items-center gap-2 cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={formData.forwardingDepotIds.includes(depot.id)}\r\n                      onChange={(e) => {\r\n                        if (e.target.checked) {\r\n                          setFormData({ ...formData, forwardingDepotIds: [...formData.forwardingDepotIds, depot.id] });\r\n                        } else {\r\n                          setFormData({ ...formData, forwardingDepotIds: formData.forwardingDepotIds.filter(id => id !== depot.id) });\r\n                        }\r\n                      }}\r\n                      className=\"w-4 h-4 text-orange-500 border-gray-300 rounded\"\r\n                    />\r\n                    <span className=\"text-sm\">{depot.name} ({depot.type?.replace('_', ' ')})</span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <button type=\"submit\" className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600\">\r\n                {editingRoute ? 'Update' : 'Create'} Route\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setShowForm(false);\r\n                  setEditingRoute(null);\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"space-y-4\">\r\n        {routes.map((route) => {\r\n          const originDepot = depots.find(d => d.id === route.originDepotId);\r\n          const forwardingDepots = depots.filter(d => route.forwardingDepotIds?.includes(d.id));\r\n\r\n          return (\r\n            <div key={route.id} className=\"bg-white rounded-xl border border-gray-200 p-6\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div>\r\n                  <h3 className=\"font-bold text-gray-900\">{originDepot?.name || 'Unknown'}</h3>\r\n                  <p className=\"text-sm text-gray-500\">Origin Depot</p>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleDelete(route.id)}\r\n                  className=\"text-sm text-red-600 hover:text-red-700 font-medium\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n\r\n              <div>\r\n                <p className=\"text-sm font-medium text-gray-700 mb-2\">Forwards to:</p>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {forwardingDepots.map(depot => (\r\n                    <span key={depot.id} className=\"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm\">\r\n                      {depot.name}\r\n                    </span>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        {routes.length === 0 && (\r\n          <div className=\"bg-white rounded-xl border border-gray-200 p-12 text-center\">\r\n            <p className=\"text-gray-500\">No depot routes configured. Click \"Add Route\" to create one.</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============ Packages & Pricing ============\r\nfunction PackagesPricing() {\r\n  const [packages, setPackages] = useState<any[]>([]);\r\n  const [depots, setDepots] = useState<any[]>([]);\r\n  const [pricing, setPricing] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [showPackageForm, setShowPackageForm] = useState(false);\r\n  const [editingPackage, setEditingPackage] = useState<any>(null);\r\n  const [packageFormData, setPackageFormData] = useState({\r\n    name: '',\r\n    basePrice: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      const [packagesRes, depotsRes, pricingRes] = await Promise.all([\r\n        packagesApi.getAll(),\r\n        depotsApi.getAll(),\r\n        depotPricingApi.getAll(),\r\n      ]);\r\n      setPackages(packagesRes.packages || []);\r\n      setDepots(depotsRes.depots || []);\r\n      setPricing(pricingRes.pricing || []);\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePackageSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (editingPackage) {\r\n        await packagesApi.update(editingPackage.id, packageFormData);\r\n      } else {\r\n        await packagesApi.create(packageFormData);\r\n      }\r\n      setShowPackageForm(false);\r\n      setEditingPackage(null);\r\n      setPackageFormData({ name: '', basePrice: 0 });\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error saving package:', error);\r\n      alert('Failed to save package');\r\n    }\r\n  };\r\n\r\n  const handleDeletePackage = async (id: string) => {\r\n    if (!confirm('Are you sure you want to delete this package?')) return;\r\n    try {\r\n      await packagesApi.delete(id);\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error deleting package:', error);\r\n      alert('Failed to delete package');\r\n    }\r\n  };\r\n\r\n  const handlePriceUpdate = async (packageId: string, depotId: string, price: string) => {\r\n    const priceNum = parseFloat(price);\r\n    if (isNaN(priceNum)) return;\r\n\r\n    try {\r\n      await depotPricingApi.update(packageId, depotId, priceNum);\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error updating price:', error);\r\n      alert('Failed to update price');\r\n    }\r\n  };\r\n\r\n  const getDepotPrice = (packageId: string, depotId: string) => {\r\n    const depotPrice = pricing.find(p => p.packageId === packageId && p.depotId === depotId);\r\n    if (depotPrice) return depotPrice.price;\r\n\r\n    const pkg = packages.find(p => p.id === packageId);\r\n    return pkg?.basePrice || 0;\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-6\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"font-bold text-gray-900\">Packages & Pricing</h2>\r\n        <button\r\n          onClick={() => {\r\n            setShowPackageForm(true);\r\n            setEditingPackage(null);\r\n            setPackageFormData({ name: '', basePrice: 0 });\r\n          }}\r\n          className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors\"\r\n        >\r\n          Add Package Size\r\n        </button>\r\n      </div>\r\n\r\n      {showPackageForm && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 p-6\">\r\n          <h3 className=\"font-bold text-gray-900 mb-4\">{editingPackage ? 'Edit Package' : 'New Package'}</h3>\r\n          <form onSubmit={handlePackageSubmit} className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Package Size Name *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={packageFormData.name}\r\n                  onChange={(e) => setPackageFormData({ ...packageFormData, name: e.target.value })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  placeholder=\"e.g., 1 Dz\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Base Price (‚Çπ) *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={packageFormData.basePrice}\r\n                  onChange={(e) => setPackageFormData({ ...packageFormData, basePrice: Number(e.target.value) })}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  placeholder=\"e.g., 50\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <button type=\"submit\" className=\"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600\">\r\n                {editingPackage ? 'Update' : 'Create'} Package\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  setShowPackageForm(false);\r\n                  setEditingPackage(null);\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Pricing Overview Table */}\r\n      <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm\" style={{ width: 0, minWidth: '100%' }}>\r\n        <div className=\"p-6 border-b border-gray-200 bg-gray-50\">\r\n          <h3 className=\"font-bold text-gray-900\">Pricing Overview</h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Base prices can be overridden per depot. Use horizontal scroll to view all depots.</p>\r\n        </div>\r\n\r\n        <div style={{\r\n          overflowX: 'auto',\r\n          maxHeight: '70vh',\r\n          border: '2px solid #e5e7eb',\r\n          borderRadius: '8px',\r\n          backgroundColor: 'white'\r\n        }}>\r\n          <table className=\"w-full text-sm\" style={{ minWidth: '1200px' }}>\r\n            <thead style={{ position: 'sticky', top: 0, zIndex: 40 }}>\r\n              <tr className=\"bg-gray-100\">\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase\" style={{\r\n                  position: 'sticky',\r\n                  left: 0,\r\n                  zIndex: 30,\r\n                  backgroundColor: '#f3f4f6',\r\n                  minWidth: '180px',\r\n                  borderRight: '2px solid #e5e7eb'\r\n                }}>\r\n                  Package Size\r\n                </th>\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase\" style={{\r\n                  position: 'sticky',\r\n                  left: '180px',\r\n                  zIndex: 30,\r\n                  backgroundColor: '#f3f4f6',\r\n                  minWidth: '130px',\r\n                  borderRight: '2px solid #e5e7eb'\r\n                }}>\r\n                  Base Price\r\n                </th>\r\n                {depots.filter(depot => !['Devgad', 'Shirgaon'].includes(depot.name)).map(depot => (\r\n                  <th key={depot.id} className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase whitespace-nowrap\" style={{ minWidth: '130px' }}>\r\n                    <div className=\"flex flex-col\">\r\n                      <span>{depot.name}</span>\r\n                      <span className=\"text-[10px] text-gray-500 font-normal lowercase\">{depot.type?.replace('_', ' ')}</span>\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n                <th className=\"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase\" style={{ minWidth: '130px' }}>\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {packages.map((pkg) => (\r\n                <tr key={pkg.id} className=\"hover:bg-amber-50 transition-colors border-b border-gray-200\">\r\n                  <td className=\"px-6 py-4 font-medium text-gray-900\" style={{\r\n                    position: 'sticky',\r\n                    left: 0,\r\n                    zIndex: 20,\r\n                    backgroundColor: 'white',\r\n                    minWidth: '180px',\r\n                    borderRight: '2px solid #e5e7eb'\r\n                  }}>\r\n                    {pkg.name}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 font-bold text-orange-600\" style={{\r\n                    position: 'sticky',\r\n                    left: '180px',\r\n                    zIndex: 20,\r\n                    backgroundColor: 'white',\r\n                    minWidth: '130px',\r\n                    borderRight: '2px solid #e5e7eb'\r\n                  }}>\r\n                    ‚Çπ{pkg.basePrice}\r\n                  </td>\r\n                  {depots.filter(depot => !['Devgad', 'Shirgaon'].includes(depot.name)).map(depot => {\r\n                    const currentPrice = getDepotPrice(pkg.id, depot.id);\r\n                    const isCustom = pricing.some(p => p.packageId === pkg.id && p.depotId === depot.id);\r\n\r\n                    return (\r\n                      <td key={depot.id} className=\"px-6 py-4 border-r border-gray-100\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-gray-500 text-xs\">‚Çπ</span>\r\n                          <input\r\n                            type=\"number\"\r\n                            defaultValue={currentPrice}\r\n                            onBlur={(e) => {\r\n                              const newPrice = e.target.value;\r\n                              if (newPrice && parseFloat(newPrice) !== currentPrice) {\r\n                                handlePriceUpdate(pkg.id, depot.id, newPrice);\r\n                              }\r\n                            }}\r\n                            className={`w-20 px-2 py-1 border rounded text-sm transition-all focus:ring-2 focus:ring-orange-500 focus:border-transparent ${isCustom\r\n                              ? 'border-orange-500 bg-orange-50 text-orange-900 font-medium'\r\n                              : 'border-gray-200 text-gray-600 bg-gray-50 hover:bg-white hover:border-gray-300'\r\n                              }`}\r\n                            placeholder={String(pkg.basePrice)}\r\n                          />\r\n                        </div>\r\n                        {isCustom && (\r\n                          <span className=\"text-[10px] text-orange-600 block mt-1 font-medium\">Custom Price</span>\r\n                        )}\r\n                      </td>\r\n                    );\r\n                  })}\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex gap-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setEditingPackage(pkg);\r\n                          setPackageFormData({ name: pkg.name, basePrice: pkg.basePrice });\r\n                          setShowPackageForm(true);\r\n                        }}\r\n                        className=\"text-xs font-medium text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded transition-colors\"\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDeletePackage(pkg.id)}\r\n                        className=\"text-xs font-medium text-red-600 hover:text-red-800 bg-red-50 hover:bg-red-100 px-3 py-1.5 rounded transition-colors\"\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {packages.length === 0 && (\r\n                <tr>\r\n                  <td colSpan={depots.length + 3} className=\"px-6 py-12 text-center text-gray-500\">\r\n                    <div className=\"flex flex-col items-center justify-center\">\r\n                      <span className=\"text-4xl mb-4\">üì¶</span>\r\n                      <p className=\"text-lg font-medium text-gray-900\">No packages found</p>\r\n                      <p className=\"text-sm\">Click \"Add Package Size\" above to create your first package.</p>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ============ Season Management ============\r\nfunction SeasonManagement() {\r\n  const [season, setSeason] = useState<any>({ startDate: '', endDate: '', year: new Date().getFullYear() });\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [showEditForm, setShowEditForm] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadSeason();\r\n  }, []);\r\n\r\n  const loadSeason = async () => {\r\n    try {\r\n      const response = await seasonApi.get();\r\n      if (response.season && Object.keys(response.season).length > 0) {\r\n        setSeason(response.season);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading season:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsSaving(true);\r\n    try {\r\n      await seasonApi.update(season);\r\n      await loadSeason(); // Reload to get the latest data\r\n      setShowEditForm(false); // Hide form after successful save\r\n      alert('Season updated successfully!');\r\n    } catch (error) {\r\n      console.error('Error updating season:', error);\r\n      alert('Failed to update season');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const isSeasonActive = () => {\r\n    if (!season.startDate || !season.endDate) {\r\n      return false;\r\n    }\r\n\r\n    // Get current date without time\r\n    const now = new Date();\r\n    now.setHours(0, 0, 0, 0);\r\n\r\n    // Parse dates - add time component to avoid timezone issues\r\n    const start = new Date(season.startDate + 'T00:00:00');\r\n    const end = new Date(season.endDate + 'T23:59:59');\r\n\r\n    // Check if dates are valid before using them\r\n    if (isNaN(start.getTime()) || isNaN(end.getTime())) {\r\n      console.error('Invalid season dates:', { startDate: season.startDate, endDate: season.endDate });\r\n      return false;\r\n    }\r\n\r\n    return now >= start && now <= end;\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    if (!dateString) return '';\r\n    const date = new Date(dateString + 'T00:00:00');\r\n    return date.toLocaleDateString('en-IN', { day: '2-digit', month: '2-digit', year: 'numeric' });\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div className=\"p-6\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className={`rounded-xl border p-6 ${isSeasonActive() ? 'bg-green-50 border-green-200' : 'bg-orange-50 border-orange-200'\r\n        }`}>\r\n        <div className=\"flex items-center gap-3 mb-2\">\r\n          <span className=\"text-2xl\">{isSeasonActive() ? 'ü•≠' : '‚è∞'}</span>\r\n          <h3 className=\"font-bold text-gray-900\">\r\n            Season Status: {isSeasonActive() ? 'Active' : 'Inactive'}\r\n          </h3>\r\n        </div>\r\n        <p className=\"text-sm text-gray-700\">\r\n          {isSeasonActive()\r\n            ? `The mango season is currently active. Bookings and trips can be created.${season.startDate && season.endDate ? ` Current season is from ${formatDate(season.startDate)} to ${formatDate(season.endDate)}.` : ''}`\r\n            : `The season is currently inactive. No bookings or trips can be created outside the season dates.${season.startDate && season.endDate ? ` Season dates: ${formatDate(season.startDate)} to ${formatDate(season.endDate)}.` : ''}`}\r\n        </p>\r\n\r\n        {!showEditForm && (\r\n          <button\r\n            onClick={() => setShowEditForm(true)}\r\n            className=\"mt-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium text-sm\"\r\n          >\r\n            Edit Season\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {showEditForm && (\r\n        <div className=\"bg-white rounded-xl border border-gray-200 p-8 max-w-2xl\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h2 className=\"font-bold text-gray-900\">Season Configuration</h2>\r\n            <button\r\n              onClick={() => setShowEditForm(false)}\r\n              className=\"text-gray-500 hover:text-gray-700\"\r\n            >\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Season Year *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  value={season.year}\r\n                  onChange={(e) => setSeason({ ...season, year: Number(e.target.value) })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Start Date *</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={season.startDate}\r\n                  onChange={(e) => setSeason({ ...season, startDate: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">End Date *</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={season.endDate}\r\n                  onChange={(e) => setSeason({ ...season, endDate: e.target.value })}\r\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n              <p className=\"text-sm text-yellow-800\">\r\n                <strong>Warning:</strong> After the end date, no new bookings or trips can be created until the next season is configured.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isSaving}\r\n                className=\"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50\"\r\n              >\r\n                {isSaving ? 'Saving...' : 'Update Season'}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowEditForm(false)}\r\n                className=\"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// ============ Backup & Restore ============\r\nfunction BackupRestore() {\r\n  const [isCreatingBackup, setIsCreatingBackup] = useState(false);\r\n  const [isRestoring, setIsRestoring] = useState(false);\r\n  const [backupData, setBackupData] = useState<any>(null);\r\n  const [backupPreview, setBackupPreview] = useState<any>(null);\r\n\r\n  const handleCreateBackup = async () => {\r\n    setIsCreatingBackup(true);\r\n    try {\r\n      const response = await backupApi.create();\r\n      const backup = response.backup;\r\n\r\n      // Download backup as JSON file\r\n      const blob = new Blob([JSON.stringify(backup, null, 2)], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `mango-transport-backup-${new Date().toISOString().split('T')[0]}.json`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n\r\n      alert('Backup created and downloaded successfully!');\r\n    } catch (error) {\r\n      console.error('Error creating backup:', error);\r\n      alert('Failed to create backup. Check console for details.');\r\n    } finally {\r\n      setIsCreatingBackup(false);\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (event) => {\r\n      try {\r\n        const backup = JSON.parse(event.target?.result as string);\r\n        setBackupData(backup);\r\n\r\n        // Generate preview\r\n        const preview = backupApi.getPreview(backup);\r\n        setBackupPreview(preview);\r\n      } catch (error) {\r\n        console.error('Error parsing backup file:', error);\r\n        alert('Invalid backup file format');\r\n        setBackupData(null);\r\n        setBackupPreview(null);\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  const handleRestore = async () => {\r\n    if (!backupData) {\r\n      alert('Please select a backup file first');\r\n      return;\r\n    }\r\n\r\n    if (!confirm('‚ö†Ô∏è WARNING: This will DELETE all current data and replace it with the backup data.\\n\\nAre you absolutely sure you want to proceed?')) {\r\n      return;\r\n    }\r\n\r\n    // Second confirmation\r\n    if (!confirm('Final confirmation: Type OK in the next prompt to proceed with restore.')) {\r\n      return;\r\n    }\r\n\r\n    setIsRestoring(true);\r\n    try {\r\n      await backupApi.restore(backupData.data);\r\n      alert('‚úÖ Data restored successfully! The page will now refresh.');\r\n      setBackupData(null);\r\n      setBackupPreview(null);\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error('Error restoring backup:', error);\r\n      alert('‚ùå Failed to restore backup. Check console for details.');\r\n    } finally {\r\n      setIsRestoring(false);\r\n    }\r\n  };\r\n\r\n  const clearBackup = () => {\r\n    setBackupData(null);\r\n    setBackupPreview(null);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 max-w-3xl\">\r\n      <h2 className=\"font-bold text-gray-900\">Backup & Restore</h2>\r\n\r\n      {/* Create Backup */}\r\n      <div className=\"bg-white rounded-xl border border-gray-200 p-8\">\r\n        <div className=\"flex items-start gap-4\">\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"font-bold text-gray-900 mb-2\">üì• Create Backup</h3>\r\n            <p className=\"text-sm text-gray-600 mb-4\">\r\n              Download a complete backup of all system data including bookings, trips, receivers, packages, users, depots, contacts, credit data, and settings.\r\n            </p>\r\n            <button\r\n              onClick={handleCreateBackup}\r\n              disabled={isCreatingBackup}\r\n              className=\"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50\"\r\n            >\r\n              {isCreatingBackup ? '‚è≥ Creating Backup...' : 'üíæ Download Backup'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Restore Backup */}\r\n      <div className=\"bg-white rounded-xl border border-gray-200 p-8\">\r\n        <div className=\"flex-1\">\r\n          <h3 className=\"font-bold text-gray-900 mb-2\">üì§ Restore Backup</h3>\r\n          <p className=\"text-sm text-gray-600 mb-4\">\r\n            Upload a backup file to restore all data. <strong className=\"text-red-600\">This will delete all current data!</strong>\r\n          </p>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block\">\r\n                <span className=\"sr-only\">Choose backup file</span>\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\".json\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"block w-full text-sm text-gray-500\r\n                    file:mr-4 file:py-2 file:px-4\r\n                    file:rounded-lg file:border-0\r\n                    file:bg-orange-50 file:text-orange-700\r\n                    hover:file:bg-orange-100\r\n                    file:cursor-pointer cursor-pointer\"\r\n                />\r\n              </label>\r\n            </div>\r\n\r\n            {/* Backup Preview */}\r\n            {backupPreview && (\r\n              <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div>\r\n                    <p className=\"font-medium text-blue-900\">üìã Backup Preview</p>\r\n                    <p className=\"text-xs text-blue-700\">\r\n                      Version: {backupPreview.version} ‚Ä¢ Created: {new Date(backupPreview.timestamp).toLocaleString('en-IN')}\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={clearBackup}\r\n                    className=\"text-blue-600 hover:text-blue-800 text-sm\"\r\n                  >\r\n                    ‚úï Clear\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-3 gap-2 text-sm\">\r\n                  <div className=\"bg-white rounded p-2\">\r\n                    <span className=\"text-gray-500\">Bookings:</span>\r\n                    <span className=\"font-bold text-gray-900 ml-1\">{backupPreview.counts.bookings}</span>\r\n                  </div>\r\n                  <div className=\"bg-white rounded p-2\">\r\n                    <span className=\"text-gray-500\">Trips:</span>\r\n                    <span className=\"font-bold text-gray-900 ml-1\">{backupPreview.counts.trips}</span>\r\n                  </div>\r\n                  <div className=\"bg-white rounded p-2\">\r\n                    <span className=\"text-gray-500\">Receivers:</span>\r\n                    <span className=\"font-bold text-gray-900 ml-1\">{backupPreview.counts.receivers}</span>\r\n                  </div>\r\n                  <div className=\"bg-white rounded p-2\">\r\n                    <span className=\"text-gray-500\">Packages:</span>\r\n                    <span className=\"font-bold text-gray-900 ml-1\">{backupPreview.counts.packages}</span>\r\n                  </div>\r\n                  <div className=\"bg-white rounded p-2\">\r\n                    <span className=\"text-gray-500\">Contacts:</span>\r\n                    <span className=\"font-bold text-gray-900 ml-1\">{backupPreview.counts.contacts}</span>\r\n                  </div>\r\n                  <div className=\"bg-white rounded p-2\">\r\n                    <span className=\"text-gray-500\">Credit Customers:</span>\r\n                    <span className=\"font-bold text-gray-900 ml-1\">{backupPreview.counts.credit_customers}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <button\r\n              onClick={handleRestore}\r\n              disabled={isRestoring || !backupData}\r\n              className=\"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium disabled:opacity-50\"\r\n            >\r\n              {isRestoring ? '‚è≥ Restoring...' : '‚ö†Ô∏è Restore Backup'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Warning */}\r\n      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n        <p className=\"text-sm text-red-800\">\r\n          <strong>‚ö†Ô∏è Critical Warning:</strong> Restoring a backup will <strong>permanently delete</strong> all current bookings, trips, receivers, and packages, replacing them with data from the backup file.\r\n          Always create a fresh backup before restoring!\r\n        </p>\r\n      </div>\r\n\r\n      {/* Info */}\r\n      <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\r\n        <p className=\"text-sm text-gray-700\">\r\n          <strong>‚ÑπÔ∏è Note:</strong> Depots, Package Sizes, and User accounts are not overwritten during restore to preserve your system configuration.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["Settings","userRole","activeTab","setActiveTab","useState","jsx","jsxs","TabButton","UserManagement","DepotManagement","DepotRoutes","PackagesPricing","SeasonManagement","BackupRestore","active","onClick","children","users","setUsers","depots","setDepots","isLoading","setIsLoading","showForm","setShowForm","editingUser","setEditingUser","formData","setFormData","useEffect","loadData","usersRes","depotsRes","usersApi","depotsApi","error","handleSubmit","e","updateData","handleEdit","user","handleDelete","id","depot","_a","_b","d","editingDepot","setEditingDepot","loadDepots","response","routes","setRoutes","editingRoute","setEditingRoute","routesRes","depotRoutesApi","managedDepots","route","originDepot","forwardingDepots","packages","setPackages","pricing","setPricing","showPackageForm","setShowPackageForm","editingPackage","setEditingPackage","packageFormData","setPackageFormData","packagesRes","pricingRes","packagesApi","depotPricingApi","handlePackageSubmit","handleDeletePackage","handlePriceUpdate","packageId","depotId","price","priceNum","getDepotPrice","depotPrice","p","pkg","currentPrice","isCustom","newPrice","season","setSeason","isSaving","setIsSaving","showEditForm","setShowEditForm","loadSeason","seasonApi","isSeasonActive","now","start","end","formatDate","dateString","isCreatingBackup","setIsCreatingBackup","isRestoring","setIsRestoring","backupData","setBackupData","backupPreview","setBackupPreview","handleCreateBackup","backup","backupApi","blob","url","a","handleFileUpload","file","reader","event","preview","handleRestore","clearBackup"],"mappings":"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"}