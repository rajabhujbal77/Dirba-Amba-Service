{"version":3,"mappings":"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","names":["Reports","assignedDepotId","dateRange","setDateRange","useState","reportType","setReportType","isLoading","setIsLoading","bookingSummary","setBookingSummary","tripSummary","setTripSummary","topCustomers","setTopCustomers","topRoutes","setTopRoutes","creditSummary","setCreditSummary","useEffect","loadReportsData","fromDate","toDate","bookingRes","tripRes","customersRes","routesRes","creditRes","reportsApi","creditApi","error","handleGenerateReport","formatCurrency","amount","exportToPDF","jsPDF","__vitePreload","n","doc","pageWidth","y","dateText","i","r","exportToExcel","csv","filename","c","routeClean","a","b","account","status","booking","bookingDate","origin","destination","pkg","payment","paymentDate","blob","link","jsxs","jsx","e","customer","index","route"],"ignoreList":[],"sources":["../../src/app/components/Reports.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { reportsApi, creditApi } from '../utils/api';\r\n// jsPDF is dynamically imported when needed to reduce bundle size\r\n\r\ninterface BookingSummary {\r\n  totalBookings: number;\r\n  bookedCount: number;\r\n  inTransitCount: number;\r\n  deliveredCount: number;\r\n  pendingCount: number;\r\n  totalRevenue: number;\r\n  totalPackages: number;\r\n  revenueByMethod: {\r\n    cash: number;\r\n    online: number;\r\n    to_pay: number;\r\n    credit: number;\r\n  };\r\n}\r\n\r\ninterface TripSummary {\r\n  totalTrips: number;\r\n  completedTrips: number;\r\n  activeTrips: number;\r\n  pendingTrips: number;\r\n  totalTripCost: number;\r\n}\r\n\r\ninterface Customer {\r\n  name: string;\r\n  phone: string;\r\n  bookings: number;\r\n  revenue: number;\r\n}\r\n\r\ninterface Route {\r\n  route: string;\r\n  trips: number;\r\n  revenue: number;\r\n}\r\n\r\ninterface CreditAccount {\r\n  id: string;\r\n  customer: string;\r\n  phone: string;\r\n  totalCredit: number;\r\n  advancePaid: number;\r\n  netOutstanding: number;\r\n  bookingCount: number;\r\n  lastPayment: string | null;\r\n  bookings?: any[];\r\n  payments?: any[];\r\n}\r\n\r\ninterface CreditSummary {\r\n  accounts: CreditAccount[];\r\n  totalCredit: number;\r\n  totalAdvancePaid: number;\r\n  totalNetOutstanding: number;\r\n}\r\n\r\ninterface ReportsProps {\r\n  assignedDepotId?: string | null;\r\n}\r\n\r\nexport default function Reports({ assignedDepotId }: ReportsProps) {\r\n  const [dateRange, setDateRange] = useState({ from: '', to: '' });\r\n  const [reportType, setReportType] = useState('bookings');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const [bookingSummary, setBookingSummary] = useState<BookingSummary>({\r\n    totalBookings: 0,\r\n    bookedCount: 0,\r\n    inTransitCount: 0,\r\n    deliveredCount: 0,\r\n    pendingCount: 0,\r\n    totalRevenue: 0,\r\n    totalPackages: 0,\r\n    revenueByMethod: { cash: 0, online: 0, to_pay: 0, credit: 0 }\r\n  });\r\n\r\n  const [tripSummary, setTripSummary] = useState<TripSummary>({\r\n    totalTrips: 0,\r\n    completedTrips: 0,\r\n    activeTrips: 0,\r\n    pendingTrips: 0,\r\n    totalTripCost: 0\r\n  });\r\n\r\n  const [topCustomers, setTopCustomers] = useState<Customer[]>([]);\r\n  const [topRoutes, setTopRoutes] = useState<Route[]>([]);\r\n  const [creditSummary, setCreditSummary] = useState<CreditSummary>({\r\n    accounts: [],\r\n    totalCredit: 0,\r\n    totalAdvancePaid: 0,\r\n    totalNetOutstanding: 0\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadReportsData();\r\n  }, []);\r\n\r\n  const loadReportsData = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const fromDate = dateRange.from || undefined;\r\n      const toDate = dateRange.to || undefined;\r\n\r\n      const [bookingRes, tripRes, customersRes, routesRes, creditRes] = await Promise.all([\r\n        reportsApi.getBookingSummary(fromDate, toDate, assignedDepotId),\r\n        reportsApi.getTripSummary(fromDate, toDate, assignedDepotId),\r\n        reportsApi.getTopCustomers(5, fromDate, toDate, assignedDepotId),\r\n        reportsApi.getTopRoutes(5, fromDate, toDate, assignedDepotId),\r\n        creditApi.getCreditSummary(assignedDepotId)\r\n      ]);\r\n\r\n      setBookingSummary(bookingRes);\r\n      setTripSummary(tripRes);\r\n      setTopCustomers(customersRes.customers);\r\n      setTopRoutes(routesRes.routes);\r\n      setCreditSummary(creditRes);\r\n    } catch (error) {\r\n      console.error('Error loading reports:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleGenerateReport = () => {\r\n    loadReportsData();\r\n  };\r\n\r\n  const formatCurrency = (amount: number) => {\r\n    if (amount >= 100000) {\r\n      return `₹${(amount / 100000).toFixed(2)}L`;\r\n    }\r\n    return `₹${amount.toLocaleString('en-IN')}`;\r\n  };\r\n\r\n  const exportToPDF = async () => {\r\n    // Dynamically import jsPDF to reduce bundle size\r\n    const { jsPDF } = await import('jspdf');\r\n    const doc = new jsPDF();\r\n    const pageWidth = doc.internal.pageSize.getWidth();\r\n    let y = 20;\r\n\r\n    // Title\r\n    doc.setFontSize(20);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('DRT Mango Transport - Reports', pageWidth / 2, y, { align: 'center' });\r\n    y += 10;\r\n\r\n    // Date range\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n    const dateText = dateRange.from && dateRange.to\r\n      ? `Period: ${dateRange.from} to ${dateRange.to}`\r\n      : 'Period: All Time';\r\n    doc.text(dateText, pageWidth / 2, y, { align: 'center' });\r\n    y += 15;\r\n\r\n    // Booking Summary\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Booking Summary', 14, y);\r\n    y += 8;\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Total Bookings: ${bookingSummary.totalBookings}`, 14, y); y += 6;\r\n    doc.text(`Delivered: ${bookingSummary.deliveredCount}`, 14, y); y += 6;\r\n    doc.text(`In Transit: ${bookingSummary.inTransitCount}`, 14, y); y += 6;\r\n    doc.text(`Booked (Pending): ${bookingSummary.bookedCount}`, 14, y); y += 6;\r\n    doc.text(`Total Revenue: ${formatCurrency(bookingSummary.totalRevenue)}`, 14, y); y += 6;\r\n    doc.text(`Total Packages: ${bookingSummary.totalPackages}`, 14, y); y += 12;\r\n\r\n    // Trip Summary\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Trip Summary', 14, y);\r\n    y += 8;\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Total Trips: ${tripSummary.totalTrips}`, 14, y); y += 6;\r\n    doc.text(`Completed: ${tripSummary.completedTrips}`, 14, y); y += 6;\r\n    doc.text(`Active: ${tripSummary.activeTrips}`, 14, y); y += 6;\r\n    doc.text(`Total Trip Cost: ${formatCurrency(tripSummary.totalTripCost)}`, 14, y); y += 12;\r\n\r\n    // Revenue by Payment Method\r\n    doc.setFontSize(14);\r\n    doc.setFont('helvetica', 'bold');\r\n    doc.text('Revenue by Payment Method', 14, y);\r\n    y += 8;\r\n    doc.setFontSize(10);\r\n    doc.setFont('helvetica', 'normal');\r\n    doc.text(`Cash: ${formatCurrency(bookingSummary.revenueByMethod.cash)}`, 14, y); y += 6;\r\n    doc.text(`Online: ${formatCurrency(bookingSummary.revenueByMethod.online)}`, 14, y); y += 6;\r\n    doc.text(`To Pay: ${formatCurrency(bookingSummary.revenueByMethod.to_pay)}`, 14, y); y += 6;\r\n    doc.text(`Credit: ${formatCurrency(bookingSummary.revenueByMethod.credit)}`, 14, y); y += 12;\r\n\r\n    // Top Customers\r\n    if (topCustomers.length > 0) {\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Top Customers', 14, y);\r\n      y += 8;\r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'normal');\r\n      topCustomers.forEach((c, i) => {\r\n        doc.text(`${i + 1}. ${c.name} - ${c.bookings} bookings - ${formatCurrency(c.revenue)}`, 14, y);\r\n        y += 6;\r\n      });\r\n      y += 6;\r\n    }\r\n\r\n    // Top Routes\r\n    if (topRoutes.length > 0) {\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Top Routes', 14, y);\r\n      y += 8;\r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'normal');\r\n      topRoutes.forEach((r, i) => {\r\n        doc.text(`${i + 1}. ${r.route} - ${r.trips} bookings - ${formatCurrency(r.revenue)}`, 14, y);\r\n        y += 6;\r\n      });\r\n    }\r\n\r\n    // Footer\r\n    doc.setFontSize(8);\r\n    doc.text(`Generated on: ${new Date().toLocaleString('en-IN')}`, 14, 285);\r\n\r\n    doc.save(`DRT_Report_${new Date().toISOString().split('T')[0]}.pdf`);\r\n  };\r\n\r\n  const exportToExcel = () => {\r\n    // Add UTF-8 BOM for Excel to recognize encoding\r\n    const BOM = '\\uFEFF';\r\n    let csv = '';\r\n    let filename = 'DRT_Report';\r\n\r\n    const dateText = dateRange.from && dateRange.to\r\n      ? `Period: ${dateRange.from} to ${dateRange.to}`\r\n      : 'Period: All Time';\r\n\r\n    switch (reportType) {\r\n      case 'bookings':\r\n        csv = 'BOOKINGS REPORT\\n';\r\n        csv += `${dateText}\\n\\n`;\r\n        csv += 'BOOKING SUMMARY\\n';\r\n        csv += `Total Bookings,${bookingSummary.totalBookings}\\n`;\r\n        csv += `Delivered,${bookingSummary.deliveredCount}\\n`;\r\n        csv += `In Transit,${bookingSummary.inTransitCount}\\n`;\r\n        csv += `Booked (Pending),${bookingSummary.bookedCount}\\n`;\r\n        csv += `Total Packages,${bookingSummary.totalPackages}\\n`;\r\n        csv += `Total Revenue,${bookingSummary.totalRevenue}\\n`;\r\n        filename = 'Bookings_Report';\r\n        break;\r\n\r\n      case 'trips':\r\n        csv = 'TRIPS REPORT\\n';\r\n        csv += `${dateText}\\n\\n`;\r\n        csv += 'TRIP SUMMARY\\n';\r\n        csv += `Total Trips,${tripSummary.totalTrips}\\n`;\r\n        csv += `Completed,${tripSummary.completedTrips}\\n`;\r\n        csv += `Active,${tripSummary.activeTrips}\\n`;\r\n        csv += `Pending,${tripSummary.pendingTrips}\\n`;\r\n        csv += `Total Trip Cost,${tripSummary.totalTripCost}\\n`;\r\n        filename = 'Trips_Report';\r\n        break;\r\n\r\n      case 'revenue':\r\n        csv = 'REVENUE REPORT\\n';\r\n        csv += `${dateText}\\n\\n`;\r\n        csv += 'TOTAL REVENUE\\n';\r\n        csv += `Total Revenue,${bookingSummary.totalRevenue}\\n`;\r\n        csv += `Total Trip Cost,${tripSummary.totalTripCost}\\n`;\r\n        csv += `Net Profit,${bookingSummary.totalRevenue - tripSummary.totalTripCost}\\n\\n`;\r\n        csv += 'REVENUE BY PAYMENT METHOD\\n';\r\n        csv += 'Payment Method,Amount\\n';\r\n        csv += `Cash,${bookingSummary.revenueByMethod.cash}\\n`;\r\n        csv += `Online,${bookingSummary.revenueByMethod.online}\\n`;\r\n        csv += `To Pay,${bookingSummary.revenueByMethod.to_pay}\\n`;\r\n        csv += `Credit,${bookingSummary.revenueByMethod.credit}\\n`;\r\n        filename = 'Revenue_Report';\r\n        break;\r\n\r\n      case 'customers':\r\n        csv = 'CUSTOMER REPORT\\n';\r\n        csv += `${dateText}\\n\\n`;\r\n        csv += 'TOP CUSTOMERS\\n';\r\n        csv += 'Rank,Customer Name,Phone,Total Bookings,Total Revenue\\n';\r\n        topCustomers.forEach((c, i) => {\r\n          csv += `${i + 1},\"${c.name}\",${c.phone},${c.bookings},${c.revenue}\\n`;\r\n        });\r\n        csv += '\\n';\r\n        csv += 'TOP ROUTES\\n';\r\n        csv += 'Rank,Route,Total Bookings,Total Revenue\\n';\r\n        topRoutes.forEach((r, i) => {\r\n          const routeClean = r.route.replace(/→/g, 'to');\r\n          csv += `${i + 1},\"${routeClean}\",${r.trips},${r.revenue}\\n`;\r\n        });\r\n        filename = 'Customer_Report';\r\n        break;\r\n\r\n      case 'credit':\r\n        csv = 'CREDIT CUSTOMERS DETAILED REPORT\\n';\r\n        csv += `${dateText}\\n\\n`;\r\n        csv += 'SUMMARY\\n';\r\n        csv += `Total Credit Issued,${creditSummary.totalCredit}\\n`;\r\n        csv += `Total Advance Paid,${creditSummary.totalAdvancePaid}\\n`;\r\n        csv += `Total Outstanding,${creditSummary.totalNetOutstanding}\\n`;\r\n        csv += `Total Credit Customers,${creditSummary.accounts.length}\\n\\n`;\r\n\r\n        // Customer summary section\r\n        csv += 'CUSTOMER SUMMARY\\n';\r\n        csv += 'Customer Name,Phone,Bookings,Total Credit,Advance Paid,Outstanding,Status\\n';\r\n        [...creditSummary.accounts]\r\n          .sort((a, b) => b.netOutstanding - a.netOutstanding)\r\n          .forEach((account) => {\r\n            const status = account.netOutstanding === 0 ? 'Cleared' :\r\n              (account.advancePaid / account.totalCredit) >= 0.5 ? 'Partial' : 'Pending';\r\n            csv += `\"${account.customer}\",${account.phone},${account.bookingCount},${account.totalCredit},${account.advancePaid},${account.netOutstanding},${status}\\n`;\r\n          });\r\n        csv += '\\n';\r\n\r\n        // Detailed bookings section\r\n        csv += 'DETAILED BOOKINGS\\n';\r\n        csv += 'Customer Name,Phone,Receipt No,Date,Origin,Destination,Package,Qty,Rate,Amount,Payment Method\\n';\r\n        [...creditSummary.accounts]\r\n          .sort((a, b) => b.netOutstanding - a.netOutstanding)\r\n          .forEach((account) => {\r\n            if (account.bookings && account.bookings.length > 0) {\r\n              account.bookings.forEach((booking: any) => {\r\n                const bookingDate = booking.date ? new Date(booking.date).toLocaleDateString('en-IN') : '-';\r\n                const origin = booking.origin || '-';\r\n                const destination = booking.destination || '-';\r\n\r\n                // If booking has package details, output each package as a row\r\n                if (booking.packages && booking.packages.length > 0) {\r\n                  booking.packages.forEach((pkg: any) => {\r\n                    csv += `\"${account.customer}\",${account.phone},${booking.receiptNumber || '-'},${bookingDate},\"${origin}\",\"${destination}\",${pkg.size || '-'},${pkg.quantity || 0},${pkg.price || 0},${(pkg.quantity || 0) * (pkg.price || 0)},credit\\n`;\r\n                  });\r\n                } else {\r\n                  // No package details, output as single row\r\n                  csv += `\"${account.customer}\",${account.phone},${booking.receiptNumber || '-'},${bookingDate},\"${origin}\",\"${destination}\",-,-,-,${booking.amount || 0},credit\\n`;\r\n                }\r\n              });\r\n            }\r\n          });\r\n        csv += '\\n';\r\n\r\n        // Advance payments section\r\n        csv += 'ADVANCE PAYMENTS\\n';\r\n        csv += 'Customer Name,Phone,Receipt No,Date,Amount,Payment Method,Notes\\n';\r\n        [...creditSummary.accounts]\r\n          .sort((a, b) => b.netOutstanding - a.netOutstanding)\r\n          .forEach((account) => {\r\n            if (account.payments && account.payments.length > 0) {\r\n              account.payments.forEach((payment: any) => {\r\n                const paymentDate = payment.date ? new Date(payment.date).toLocaleDateString('en-IN') : '-';\r\n                csv += `\"${account.customer}\",${account.phone},${payment.receiptNumber || '-'},${paymentDate},${payment.amount || 0},${payment.method || 'cash'},\"${payment.notes || ''}\"\\n`;\r\n              });\r\n            }\r\n          });\r\n\r\n        filename = 'Credit_Customers_Detailed_Report';\r\n        break;\r\n\r\n      default:\r\n        csv = 'DRT Mango Transport - Reports\\n\\n';\r\n        csv += `${dateText}\\n`;\r\n        filename = 'DRT_Report';\r\n    }\r\n\r\n    const blob = new Blob([BOM + csv], { type: 'text/csv;charset=utf-8;' });\r\n    const link = document.createElement('a');\r\n    link.href = URL.createObjectURL(blob);\r\n    link.download = `${filename}_${new Date().toISOString().split('T')[0]}.csv`;\r\n    link.click();\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"p-4 md:p-8\">\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading reports...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 md:p-8 overflow-x-hidden\">\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Reports</h1>\r\n        <p className=\"text-gray-600\">Analytics and business insights</p>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white rounded-xl border border-gray-200 p-4 md:p-6 mb-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          <div>\r\n            <label htmlFor=\"reportType\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Report Type\r\n            </label>\r\n            <select\r\n              id=\"reportType\"\r\n              value={reportType}\r\n              onChange={(e) => setReportType(e.target.value)}\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"bookings\">Bookings Report</option>\r\n              <option value=\"trips\">Trips Report</option>\r\n              <option value=\"revenue\">Revenue Report</option>\r\n              <option value=\"customers\">Customer Report</option>\r\n              <option value=\"credit\">Credit Customers Report</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"dateFrom\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              From Date\r\n            </label>\r\n            <input\r\n              id=\"dateFrom\"\r\n              type=\"date\"\r\n              value={dateRange.from}\r\n              onChange={(e) => setDateRange({ ...dateRange, from: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"dateTo\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              To Date\r\n            </label>\r\n            <input\r\n              id=\"dateTo\"\r\n              type=\"date\"\r\n              value={dateRange.to}\r\n              onChange={(e) => setDateRange({ ...dateRange, to: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n          <div className=\"flex items-end\">\r\n            <button\r\n              onClick={handleGenerateReport}\r\n              className=\"w-full px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium\"\r\n            >\r\n              Generate Report\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\r\n        {/* Booking Summary */}\r\n        <div className=\"bg-white rounded-xl border border-gray-200\">\r\n          <div className=\"p-6 border-b border-gray-200\">\r\n            <h2 className=\"font-bold text-gray-900\">Booking Summary</h2>\r\n          </div>\r\n          <div className=\"p-6 space-y-4\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">Total Bookings</span>\r\n              <span className=\"font-bold text-gray-900\">{bookingSummary.totalBookings}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">Delivered</span>\r\n              <span className=\"font-bold text-green-600\">{bookingSummary.deliveredCount}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">In Transit</span>\r\n              <span className=\"font-bold text-blue-600\">{bookingSummary.inTransitCount}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">Booked (Pending)</span>\r\n              <span className=\"font-bold text-yellow-600\">{bookingSummary.bookedCount}</span>\r\n            </div>\r\n            <div className=\"pt-4 border-t border-gray-200\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <span className=\"text-gray-600\">Total Revenue</span>\r\n                <span className=\"font-bold text-orange-600\">\r\n                  {formatCurrency(bookingSummary.totalRevenue)}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-gray-600\">Total Packages</span>\r\n                <span className=\"font-bold text-gray-900\">\r\n                  {bookingSummary.totalPackages}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Trip Summary */}\r\n        <div className=\"bg-white rounded-xl border border-gray-200\">\r\n          <div className=\"p-6 border-b border-gray-200\">\r\n            <h2 className=\"font-bold text-gray-900\">Trip Summary</h2>\r\n          </div>\r\n          <div className=\"p-6 space-y-4\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">Total Trips</span>\r\n              <span className=\"font-bold text-gray-900\">{tripSummary.totalTrips}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">Completed</span>\r\n              <span className=\"font-bold text-green-600\">{tripSummary.completedTrips}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">Active</span>\r\n              <span className=\"font-bold text-blue-600\">{tripSummary.activeTrips}</span>\r\n            </div>\r\n            <div className=\"flex justify-between items-center\">\r\n              <span className=\"text-gray-600\">Pending</span>\r\n              <span className=\"font-bold text-yellow-600\">{tripSummary.pendingTrips}</span>\r\n            </div>\r\n            <div className=\"pt-4 border-t border-gray-200\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-gray-600\">Total Trip Cost</span>\r\n                <span className=\"font-bold text-orange-600\">{formatCurrency(tripSummary.totalTripCost)}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Revenue by Payment Method */}\r\n      <div className=\"bg-white rounded-xl border border-gray-200 mb-6\">\r\n        <div className=\"p-6 border-b border-gray-200\">\r\n          <h2 className=\"font-bold text-gray-900\">Revenue by Payment Method</h2>\r\n        </div>\r\n        <div className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 md:gap-4\">\r\n            <div className=\"bg-green-50 rounded-lg p-4 text-center\">\r\n              <p className=\"text-sm text-gray-600 mb-1\">Cash</p>\r\n              <p className=\"text-xl font-bold text-green-600\">{formatCurrency(bookingSummary.revenueByMethod.cash)}</p>\r\n            </div>\r\n            <div className=\"bg-blue-50 rounded-lg p-4 text-center\">\r\n              <p className=\"text-sm text-gray-600 mb-1\">Online</p>\r\n              <p className=\"text-xl font-bold text-blue-600\">{formatCurrency(bookingSummary.revenueByMethod.online)}</p>\r\n            </div>\r\n            <div className=\"bg-yellow-50 rounded-lg p-4 text-center\">\r\n              <p className=\"text-sm text-gray-600 mb-1\">To Pay</p>\r\n              <p className=\"text-xl font-bold text-yellow-600\">{formatCurrency(bookingSummary.revenueByMethod.to_pay)}</p>\r\n            </div>\r\n            <div className=\"bg-purple-50 rounded-lg p-4 text-center\">\r\n              <p className=\"text-sm text-gray-600 mb-1\">Credit</p>\r\n              <p className=\"text-xl font-bold text-purple-600\">{formatCurrency(bookingSummary.revenueByMethod.credit)}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Top Customers */}\r\n        <div className=\"bg-white rounded-xl border border-gray-200\">\r\n          <div className=\"p-6 border-b border-gray-200\">\r\n            <h2 className=\"font-bold text-gray-900\">Top Customers</h2>\r\n          </div>\r\n          <div className=\"divide-y divide-gray-200\">\r\n            {topCustomers.length > 0 ? topCustomers.map((customer, index) => (\r\n              <div key={index} className=\"p-4 md:p-6 hover:bg-gray-50 transition-colors\">\r\n                <div className=\"flex items-center justify-between gap-2 mb-2\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center\">\r\n                      <span className=\"font-bold text-orange-600\">{index + 1}</span>\r\n                    </div>\r\n                    <div className=\"min-w-0\">\r\n                      <span className=\"font-medium text-gray-900 block truncate\">{customer.name}</span>\r\n                      <p className=\"text-xs text-gray-500\">{customer.phone}</p>\r\n                    </div>\r\n                  </div>\r\n                  <span className=\"font-bold text-orange-600 whitespace-nowrap text-sm md:text-base\">\r\n                    {formatCurrency(customer.revenue)}\r\n                  </span>\r\n                </div>\r\n                <div className=\"ml-11\">\r\n                  <span className=\"text-sm text-gray-600\">{customer.bookings} bookings</span>\r\n                </div>\r\n              </div>\r\n            )) : (\r\n              <div className=\"p-6 text-center text-gray-500\">\r\n                No customers found\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Top Routes */}\r\n        <div className=\"bg-white rounded-xl border border-gray-200\">\r\n          <div className=\"p-6 border-b border-gray-200\">\r\n            <h2 className=\"font-bold text-gray-900\">Top Routes</h2>\r\n          </div>\r\n          <div className=\"divide-y divide-gray-200\">\r\n            {topRoutes.length > 0 ? topRoutes.map((route, index) => (\r\n              <div key={index} className=\"p-4 md:p-6 hover:bg-gray-50 transition-colors\">\r\n                <div className=\"flex items-center justify-between gap-2 mb-2\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                      <span className=\"font-bold text-blue-600\">{index + 1}</span>\r\n                    </div>\r\n                    <span className=\"font-medium text-gray-900 break-words text-sm md:text-base\">{route.route}</span>\r\n                  </div>\r\n                  <span className=\"font-bold text-orange-600 whitespace-nowrap text-sm md:text-base\">\r\n                    {formatCurrency(route.revenue)}\r\n                  </span>\r\n                </div>\r\n                <div className=\"ml-11\">\r\n                  <span className=\"text-sm text-gray-600\">{route.trips} bookings</span>\r\n                </div>\r\n              </div>\r\n            )) : (\r\n              <div className=\"p-6 text-center text-gray-500\">\r\n                No routes found\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Credit Customers Report - Show when credit report type is selected */}\r\n      {reportType === 'credit' && (\r\n        <div className=\"mt-6\">\r\n          {/* Credit Summary Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6\">\r\n            <div className=\"bg-white rounded-xl p-4 md:p-6 border border-gray-200\">\r\n              <p className=\"text-sm text-gray-600 mb-1\">Total Credit Issued</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{formatCurrency(creditSummary.totalCredit)}</p>\r\n              <p className=\"text-xs text-gray-500 mt-1\">{creditSummary.accounts.length} credit customers</p>\r\n            </div>\r\n            <div className=\"bg-white rounded-xl p-4 md:p-6 border border-gray-200\">\r\n              <p className=\"text-sm text-gray-600 mb-1\">Advance Paid</p>\r\n              <p className=\"text-2xl font-bold text-green-600\">{formatCurrency(creditSummary.totalAdvancePaid)}</p>\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                {creditSummary.totalCredit > 0\r\n                  ? `${Math.round((creditSummary.totalAdvancePaid / creditSummary.totalCredit) * 100)}% collected`\r\n                  : '0% collected'}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-white rounded-xl p-4 md:p-6 border border-gray-200\">\r\n              <p className=\"text-sm text-gray-600 mb-1\">Net Outstanding</p>\r\n              <p className=\"text-2xl font-bold text-orange-600\">{formatCurrency(creditSummary.totalNetOutstanding)}</p>\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                {creditSummary.accounts.filter(a => a.netOutstanding > 0).length} customers with balance\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Credit Customers Table - Desktop */}\r\n          <div className=\"bg-white rounded-xl border border-gray-200 hidden md:block\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <h2 className=\"font-bold text-gray-900\">Credit Customers</h2>\r\n              <p className=\"text-sm text-gray-500 mt-1\">Customers with credit payment method bookings</p>\r\n            </div>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Customer</th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Bookings</th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Total Credit</th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Paid</th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Outstanding</th>\r\n                    <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200\">\r\n                  {creditSummary.accounts.length > 0 ? (\r\n                    [...creditSummary.accounts]\r\n                      .sort((a, b) => b.netOutstanding - a.netOutstanding)\r\n                      .map((account) => (\r\n                        <tr key={account.id} className=\"hover:bg-gray-50\">\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div>\r\n                              <p className=\"font-medium text-gray-900\">{account.customer}</p>\r\n                              <p className=\"text-xs text-gray-500\">{account.phone}</p>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\r\n                            {account.bookingCount}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 font-medium\">\r\n                            {formatCurrency(account.totalCredit)}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600 font-medium\">\r\n                            {formatCurrency(account.advancePaid)}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-bold\">\r\n                            {formatCurrency(account.netOutstanding)}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${account.netOutstanding === 0\r\n                              ? 'bg-green-100 text-green-800'\r\n                              : account.totalCredit > 0 && (account.advancePaid / account.totalCredit) >= 0.5\r\n                                ? 'bg-yellow-100 text-yellow-800'\r\n                                : 'bg-red-100 text-red-800'\r\n                              }`}>\r\n                              {account.netOutstanding === 0\r\n                                ? 'Cleared'\r\n                                : account.totalCredit > 0 && (account.advancePaid / account.totalCredit) >= 0.5\r\n                                  ? 'Partial'\r\n                                  : 'Pending'}\r\n                            </span>\r\n                          </td>\r\n                        </tr>\r\n                      ))\r\n                  ) : (\r\n                    <tr>\r\n                      <td colSpan={6} className=\"px-6 py-8 text-center text-gray-500\">\r\n                        No credit customers found\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Credit Customers Cards - Mobile */}\r\n          <div className=\"md:hidden\">\r\n            <div className=\"bg-white rounded-xl border border-gray-200 mb-4\">\r\n              <div className=\"p-4 border-b border-gray-200\">\r\n                <h2 className=\"font-bold text-gray-900\">Credit Customers</h2>\r\n                <p className=\"text-sm text-gray-500\">Customers with credit bookings</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-4\">\r\n              {creditSummary.accounts.length > 0 ? (\r\n                [...creditSummary.accounts]\r\n                  .sort((a, b) => b.netOutstanding - a.netOutstanding)\r\n                  .map((account) => (\r\n                    <div key={account.id} className=\"bg-white rounded-xl border border-gray-200 p-4\">\r\n                      <div className=\"flex justify-between items-start mb-3\">\r\n                        <div>\r\n                          <p className=\"font-bold text-gray-900\">{account.customer}</p>\r\n                          <p className=\"text-xs text-gray-500\">{account.phone}</p>\r\n                        </div>\r\n                        <span className={`px-2.5 py-0.5 rounded-full text-xs font-medium ${account.netOutstanding === 0\r\n                          ? 'bg-green-100 text-green-800'\r\n                          : account.totalCredit > 0 && (account.advancePaid / account.totalCredit) >= 0.5\r\n                            ? 'bg-yellow-100 text-yellow-800'\r\n                            : 'bg-red-100 text-red-800'\r\n                          }`}>\r\n                          {account.netOutstanding === 0\r\n                            ? 'Cleared'\r\n                            : account.totalCredit > 0 && (account.advancePaid / account.totalCredit) >= 0.5\r\n                              ? 'Partial'\r\n                              : 'Pending'}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-sm text-gray-600\">Bookings</span>\r\n                          <span className=\"text-sm font-medium text-gray-900\">{account.bookingCount}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-sm text-gray-600\">Total Credit</span>\r\n                          <span className=\"text-sm font-medium text-gray-900\">{formatCurrency(account.totalCredit)}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"text-sm text-gray-600\">Paid</span>\r\n                          <span className=\"text-sm font-medium text-green-600\">{formatCurrency(account.advancePaid)}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between pt-2 border-t border-gray-100\">\r\n                          <span className=\"text-sm font-medium text-gray-900\">Outstanding</span>\r\n                          <span className=\"text-sm font-bold text-orange-600\">{formatCurrency(account.netOutstanding)}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n              ) : (\r\n                <div className=\"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-500\">\r\n                  No credit customers found\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Export Button */}\r\n      <div className=\"mt-6 flex justify-end gap-3\">\r\n        <button\r\n          onClick={exportToPDF}\r\n          className=\"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium\"\r\n        >\r\n          Export as PDF\r\n        </button>\r\n        <button\r\n          onClick={exportToExcel}\r\n          className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium\"\r\n        >\r\n          Export as Excel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"file":"assets/Reports-DRI9j9ha.js"}