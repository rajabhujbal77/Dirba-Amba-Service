{"version":3,"file":"Dashboard-lU2ozLy9.js","sources":["../../src/app/components/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { bookingsApi, tripsApi } from '../utils/api';\r\n\r\ninterface DashboardProps {\r\n  userRole: 'owner' | 'booking_clerk' | 'depot_manager';\r\n  assignedDepotId?: string | null;\r\n}\r\n\r\nexport default function Dashboard({ userRole, assignedDepotId }: DashboardProps) {\r\n  const [stats, setStats] = useState([\r\n    { label: \"Today's Bookings\", value: '0', icon: 'üìù' },\r\n    { label: \"Today's Revenue\", value: '‚Çπ0', icon: 'üíµ' },\r\n    { label: 'Total Revenue', value: '‚Çπ0', icon: 'üí∞' },\r\n    { label: 'Total Trips', value: '0', icon: 'üöö' },\r\n  ]);\r\n  const [recentBookings, setRecentBookings] = useState<any[]>([]);\r\n  const [activeTrips, setActiveTrips] = useState<any[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      const [bookingsRes, tripsRes] = await Promise.all([\r\n        bookingsApi.getAll(),\r\n        tripsApi.getAll()\r\n      ]);\r\n\r\n      const bookings = bookingsRes.bookings || [];\r\n      const trips = tripsRes.trips || [];\r\n\r\n      // Filter data for depot managers based on assigned depot\r\n      // Depot managers should ONLY see bookings that have been added to trips (not \"booked\" status)\r\n      const filteredBookings = userRole === 'depot_manager' && assignedDepotId\r\n        ? bookings.filter((b: any) =>\r\n          (b.destination_depot_id === assignedDepotId ||\r\n            b.origin_depot_id === assignedDepotId) &&\r\n          b.status !== 'booked' // Exclude bookings not yet in trips\r\n        )\r\n        : bookings;\r\n\r\n      const filteredTrips = userRole === 'depot_manager' && assignedDepotId\r\n        ? trips.filter((t: any) =>\r\n          t.origin_depot_id === assignedDepotId ||\r\n          t.destination_depot_id === assignedDepotId\r\n        )\r\n        : trips;\r\n\r\n      // Get today's date (start of day)\r\n      const today = new Date();\r\n      today.setHours(0, 0, 0, 0);\r\n      const todayTime = today.getTime();\r\n\r\n      // Filter today's bookings\r\n      const todaysBookings = filteredBookings.filter((b: any) => {\r\n        const bookingDate = new Date(b.created_at);\r\n        bookingDate.setHours(0, 0, 0, 0);\r\n        return bookingDate.getTime() === todayTime;\r\n      });\r\n\r\n      // Calculate Stats\r\n      const todaysBookingsCount = todaysBookings.length;\r\n      const totalTrips = filteredTrips.length;\r\n      const activeTrips = filteredTrips.filter((t: any) => t.status === 'in_transit' || t.status === 'loading').length;\r\n      const pendingDeliveries = filteredBookings.filter((b: any) => b.status !== 'delivered').length;\r\n\r\n      // Today's Revenue\r\n      const todaysRevenue = todaysBookings.reduce((sum: number, b: any) => sum + (Number(b.total_amount) || 0), 0);\r\n      const formattedTodaysRevenue = todaysRevenue > 100000\r\n        ? `‚Çπ${(todaysRevenue / 100000).toFixed(1)}L`\r\n        : `‚Çπ${todaysRevenue.toLocaleString('en-IN')}`;\r\n\r\n      // Total Revenue (all bookings)\r\n      const totalRevenue = filteredBookings.reduce((sum: number, b: any) => sum + (Number(b.total_amount) || 0), 0);\r\n      const formattedTotalRevenue = totalRevenue > 100000\r\n        ? `‚Çπ${(totalRevenue / 100000).toFixed(1)}L`\r\n        : `‚Çπ${totalRevenue.toLocaleString('en-IN')}`;\r\n\r\n      // Calculate depot-specific metrics for depot managers\r\n\r\n      // PENDING TO-PAY\r\n      // Total pending To-Pay amount (all undelivered To-Pay receipts at this depot)\r\n      const pendingToPayBookings = filteredBookings.filter((b: any) =>\r\n        b.payment_method === 'to_pay' && b.status !== 'delivered'\r\n      );\r\n      const totalPendingToPayAmount = pendingToPayBookings.reduce((sum: number, b: any) =>\r\n        sum + (Number(b.total_amount) || 0), 0\r\n      );\r\n\r\n      // Today's pending To-Pay amount\r\n      const todaysPendingToPayBookings = todaysBookings.filter((b: any) =>\r\n        b.payment_method === 'to_pay' && b.status !== 'delivered'\r\n      );\r\n      const todaysPendingToPayAmount = todaysPendingToPayBookings.reduce((sum: number, b: any) =>\r\n        sum + (Number(b.total_amount) || 0), 0\r\n      );\r\n\r\n      // TO-PAY COLLECTED\r\n      // Total To-Pay collected (all delivered To-Pay bookings)\r\n      const toPayCollected = filteredBookings\r\n        .filter((b: any) => b.payment_method === 'to_pay' && b.status === 'delivered')\r\n        .reduce((sum: number, b: any) => sum + (Number(b.total_amount) || 0), 0);\r\n\r\n      // Today's To-Pay collected (use actual collection date from to_pay_collected_at)\r\n      const todaysToPayCollected = filteredBookings\r\n        .filter((b: any) => {\r\n          if (b.payment_method !== 'to_pay' || !b.to_pay_collected_at) return false;\r\n          const collectionDate = new Date(b.to_pay_collected_at);\r\n          collectionDate.setHours(0, 0, 0, 0);\r\n          return collectionDate.getTime() === todayTime;\r\n        })\r\n        .reduce((sum: number, b: any) => sum + (Number(b.total_amount) || 0), 0);\r\n\r\n      // Total packages count for today\r\n      const todaysPackages = todaysBookings.reduce((sum: number, b: any) => {\r\n        return sum + (b.receivers?.reduce((pSum: number, r: any) => {\r\n          return pSum + (r.packages?.reduce((pkgSum: number, p: any) => pkgSum + (p.quantity || 0), 0) || 0);\r\n        }, 0) || 0);\r\n      }, 0);\r\n\r\n      // Set different stats based on user role\r\n      if (userRole === 'booking_clerk') {\r\n        // Booking clerk sees only non-revenue metrics\r\n        setStats([\r\n          { label: \"Today's Bookings\", value: String(todaysBookingsCount), icon: 'üìù' },\r\n          { label: 'Active Trips', value: String(activeTrips), icon: 'üöö' },\r\n          { label: 'Pending Deliveries', value: String(pendingDeliveries), icon: 'üì¶' },\r\n          { label: 'Total Trips', value: String(totalTrips), icon: 'üöõ' },\r\n        ]);\r\n      } else if (userRole === 'depot_manager') {\r\n        // Depot manager sees depot-specific operational metrics (NO REVENUE)\r\n        setStats([\r\n          { label: \"Today's Packages\", value: String(todaysPackages), icon: 'üì¶' },\r\n          {\r\n            label: \"Pending To-Pay\",\r\n            value: `Today: ‚Çπ${todaysPendingToPayAmount.toLocaleString('en-IN')}\\nTotal: ‚Çπ${totalPendingToPayAmount.toLocaleString('en-IN')}`,\r\n            icon: 'üíµ'\r\n          },\r\n          {\r\n            label: 'To-Pay Collected',\r\n            value: `Today: ‚Çπ${todaysToPayCollected.toLocaleString('en-IN')}\\nTotal: ‚Çπ${toPayCollected.toLocaleString('en-IN')}`,\r\n            icon: 'üí∞'\r\n          },\r\n          { label: 'Pending Deliveries', value: String(pendingDeliveries), icon: 'üöö' },\r\n        ]);\r\n      } else {\r\n        // Owner sees revenue metrics\r\n        setStats([\r\n          { label: \"Today's Bookings\", value: String(todaysBookingsCount), icon: 'üìù' },\r\n          { label: \"Today's Revenue\", value: formattedTodaysRevenue, icon: 'üíµ' },\r\n          { label: 'Total Revenue', value: formattedTotalRevenue, icon: 'üí∞' },\r\n          { label: 'Total Trips', value: String(totalTrips), icon: 'üöö' },\r\n        ]);\r\n      }\r\n\r\n      // Recent Bookings (Top 5)\r\n      setRecentBookings(filteredBookings.slice(0, 5).map((b: any) => {\r\n        // Calculate total packages from receivers\r\n        const totalPackages = b.receivers?.reduce((sum: number, r: any) => {\r\n          return sum + (r.packages?.reduce((pSum: number, p: any) => pSum + (p.quantity || 0), 0) || 0);\r\n        }, 0) || 0;\r\n\r\n        return {\r\n          id: b.id || b.receipt_number,\r\n          customer: b.sender_name || b.customer_name || 'N/A',\r\n          origin: b.origin_depot_name || b.origin_location || 'N/A',\r\n          destination: b.destination_depot_name || b.destination_location || 'N/A',\r\n          quantity: totalPackages > 0 ? `${totalPackages} pkg` : (b.quantity || '0'),\r\n          status: b.status,\r\n          total: b.total_amount || 0\r\n        };\r\n      }));\r\n\r\n      // Active Trips (Top 5)\r\n      setActiveTrips(trips.filter((t: any) => t.status !== 'completed' && t.status !== 'cancelled').slice(0, 5).map((t: any) => ({\r\n        id: t.id,\r\n        route: `${t.origin_depot?.name || 'Origin'} ‚Üí ${t.destination_depot?.name || 'Dest'}`,\r\n        driver: t.driver_name,\r\n        vehicle: t.vehicle_number,\r\n        status: t.status,\r\n        bookings: 0 // Need a join or count to get actual bookings count per trip\r\n      })));\r\n\r\n    } catch (error) {\r\n      console.error('Error loading dashboard data:', error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) return <div className=\"p-8\">Loading dashboard...</div>;\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Dashboard</h1>\r\n        <p className=\"text-gray-600\">Welcome back! Here's your logistics overview.</p>\r\n      </div>\r\n\r\n      {/* Stats Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n        {stats.map((stat, index) => (\r\n          <div key={index} className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <span className=\"text-2xl\">{stat.icon}</span>\r\n              {/* Change indicator removed for now as we don't have historical data comparison yet */}\r\n            </div>\r\n            <p className=\"text-sm text-gray-600 mb-1\">{stat.label}</p>\r\n            <p className=\"text-2xl font-bold text-gray-900 whitespace-pre-line\">{stat.value}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Recent Bookings */}\r\n        <div className=\"bg-white rounded-xl border border-gray-200\">\r\n          <div className=\"p-6 border-b border-gray-200\">\r\n            <h2 className=\"font-bold text-gray-900\">Recent Bookings</h2>\r\n          </div>\r\n          <div className=\"divide-y divide-gray-200\">\r\n            {recentBookings.length === 0 ? (\r\n              <div className=\"p-6 text-gray-500 text-center\">No bookings found.</div>\r\n            ) : (\r\n              recentBookings.map((booking) => (\r\n                <div key={booking.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900\">{booking.customer}</p>\r\n                      <p className=\"text-sm text-gray-600\">{booking.id}</p>\r\n                    </div>\r\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${booking.status === 'booked' ? 'bg-blue-100 text-blue-700' :\r\n                      booking.status === 'delivered' ? 'bg-green-100 text-green-700' :\r\n                        'bg-yellow-100 text-yellow-700'\r\n                      }`}>\r\n                      {booking.status?.replace('_', ' ')}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    {booking.origin} ‚Üí {booking.destination} ‚Ä¢ {booking.quantity}\r\n                  </p>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Active Trips */}\r\n        <div className=\"bg-white rounded-xl border border-gray-200\">\r\n          <div className=\"p-6 border-b border-gray-200\">\r\n            <h2 className=\"font-bold text-gray-900\">Active Trips</h2>\r\n          </div>\r\n          <div className=\"divide-y divide-gray-200\">\r\n            {activeTrips.length === 0 ? (\r\n              <div className=\"p-6 text-gray-500 text-center\">No active trips.</div>\r\n            ) : (\r\n              activeTrips.map((trip) => (\r\n                <div key={trip.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900\">{trip.route}</p>\r\n                      <p className=\"text-sm text-gray-600\">{trip.id}</p>\r\n                    </div>\r\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${trip.status === 'in_transit' ? 'bg-blue-100 text-blue-700' :\r\n                      'bg-orange-100 text-orange-700'\r\n                      }`}>\r\n                      {trip.status?.replace('_', ' ')}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600 mb-1\">\r\n                    Driver: {trip.driver}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    {trip.vehicle}\r\n                  </p>\r\n                </div>\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["Dashboard","userRole","assignedDepotId","stats","setStats","useState","recentBookings","setRecentBookings","activeTrips","setActiveTrips","isLoading","setIsLoading","useEffect","loadData","bookingsRes","tripsRes","bookingsApi","tripsApi","bookings","trips","filteredBookings","b","filteredTrips","t","today","todayTime","todaysBookings","bookingDate","todaysBookingsCount","totalTrips","pendingDeliveries","todaysRevenue","sum","formattedTodaysRevenue","totalRevenue","formattedTotalRevenue","totalPendingToPayAmount","todaysPendingToPayAmount","toPayCollected","todaysToPayCollected","collectionDate","todaysPackages","_a","pSum","r","pkgSum","p","totalPackages","_b","error","jsx","jsxs","stat","index","booking","trip"],"mappings":"4MAQA,SAAwBA,EAAU,CAAE,SAAAC,EAAU,gBAAAC,GAAmC,CAC/E,KAAM,CAACC,EAAOC,CAAQ,EAAIC,WAAS,CACjC,CAAE,MAAO,mBAAoB,MAAO,IAAK,KAAM,IAAA,EAC/C,CAAE,MAAO,kBAAmB,MAAO,KAAM,KAAM,IAAA,EAC/C,CAAE,MAAO,gBAAiB,MAAO,KAAM,KAAM,IAAA,EAC7C,CAAE,MAAO,cAAe,MAAO,IAAK,KAAM,IAAA,CAAK,CAChD,EACK,CAACC,EAAgBC,CAAiB,EAAIF,EAAAA,SAAgB,CAAA,CAAE,EACxD,CAACG,EAAaC,CAAc,EAAIJ,EAAAA,SAAgB,CAAA,CAAE,EAClD,CAACK,EAAWC,CAAY,EAAIN,EAAAA,SAAS,EAAI,EAE/CO,EAAAA,UAAU,IAAM,CACdC,EAAA,CACF,EAAG,CAAA,CAAE,EAEL,MAAMA,EAAW,SAAY,CAC3B,GAAI,CACF,KAAM,CAACC,EAAaC,CAAQ,EAAI,MAAM,QAAQ,IAAI,CAChDC,EAAY,OAAA,EACZC,EAAS,OAAA,CAAO,CACjB,EAEKC,EAAWJ,EAAY,UAAY,CAAA,EACnCK,EAAQJ,EAAS,OAAS,CAAA,EAI1BK,EAAmBnB,IAAa,iBAAmBC,EACrDgB,EAAS,OAAQG,IAChBA,EAAE,uBAAyBnB,GAC1BmB,EAAE,kBAAoBnB,IACxBmB,EAAE,SAAW,QAAA,EAEbH,EAEEI,EAAgBrB,IAAa,iBAAmBC,EAClDiB,EAAM,OAAQI,GACdA,EAAE,kBAAoBrB,GACtBqB,EAAE,uBAAyBrB,CAAA,EAE3BiB,EAGEK,MAAY,KAClBA,EAAM,SAAS,EAAG,EAAG,EAAG,CAAC,EACzB,MAAMC,EAAYD,EAAM,QAAA,EAGlBE,EAAiBN,EAAiB,OAAQC,GAAW,CACzD,MAAMM,EAAc,IAAI,KAAKN,EAAE,UAAU,EACzC,OAAAM,EAAY,SAAS,EAAG,EAAG,EAAG,CAAC,EACxBA,EAAY,YAAcF,CACnC,CAAC,EAGKG,EAAsBF,EAAe,OACrCG,EAAaP,EAAc,OAC3Bd,EAAcc,EAAc,OAAQC,GAAWA,EAAE,SAAW,cAAgBA,EAAE,SAAW,SAAS,EAAE,OACpGO,EAAoBV,EAAiB,OAAQC,GAAWA,EAAE,SAAW,WAAW,EAAE,OAGlFU,EAAgBL,EAAe,OAAO,CAACM,EAAaX,IAAWW,GAAO,OAAOX,EAAE,YAAY,GAAK,GAAI,CAAC,EACrGY,EAAyBF,EAAgB,IAC3C,KAAKA,EAAgB,KAAQ,QAAQ,CAAC,CAAC,IACvC,IAAIA,EAAc,eAAe,OAAO,CAAC,GAGvCG,EAAed,EAAiB,OAAO,CAACY,EAAaX,IAAWW,GAAO,OAAOX,EAAE,YAAY,GAAK,GAAI,CAAC,EACtGc,EAAwBD,EAAe,IACzC,KAAKA,EAAe,KAAQ,QAAQ,CAAC,CAAC,IACtC,IAAIA,EAAa,eAAe,OAAO,CAAC,GAStCE,EAHuBhB,EAAiB,OAAQC,GACpDA,EAAE,iBAAmB,UAAYA,EAAE,SAAW,WAAA,EAEK,OAAO,CAACW,EAAaX,IACxEW,GAAO,OAAOX,EAAE,YAAY,GAAK,GAAI,CAAA,EAOjCgB,EAH6BX,EAAe,OAAQL,GACxDA,EAAE,iBAAmB,UAAYA,EAAE,SAAW,WAAA,EAEY,OAAO,CAACW,EAAaX,IAC/EW,GAAO,OAAOX,EAAE,YAAY,GAAK,GAAI,CAAA,EAKjCiB,EAAiBlB,EACpB,OAAQC,GAAWA,EAAE,iBAAmB,UAAYA,EAAE,SAAW,WAAW,EAC5E,OAAO,CAACW,EAAaX,IAAWW,GAAO,OAAOX,EAAE,YAAY,GAAK,GAAI,CAAC,EAGnEkB,EAAuBnB,EAC1B,OAAQC,GAAW,CAClB,GAAIA,EAAE,iBAAmB,UAAY,CAACA,EAAE,oBAAqB,MAAO,GACpE,MAAMmB,EAAiB,IAAI,KAAKnB,EAAE,mBAAmB,EACrD,OAAAmB,EAAe,SAAS,EAAG,EAAG,EAAG,CAAC,EAC3BA,EAAe,YAAcf,CACtC,CAAC,EACA,OAAO,CAACO,EAAaX,IAAWW,GAAO,OAAOX,EAAE,YAAY,GAAK,GAAI,CAAC,EAGnEoB,EAAiBf,EAAe,OAAO,CAACM,EAAaX,IAAW,OACpE,OAAOW,KAAOU,EAAArB,EAAE,YAAF,YAAAqB,EAAa,OAAO,CAACC,EAAcC,IAAW,OAC1D,OAAOD,KAAQD,EAAAE,EAAE,WAAF,YAAAF,EAAY,OAAO,CAACG,EAAgBC,IAAWD,GAAUC,EAAE,UAAY,GAAI,KAAM,EAClG,EAAG,KAAM,EACX,EAAG,CAAC,EAKF1C,EAFEH,IAAa,gBAEN,CACP,CAAE,MAAO,mBAAoB,MAAO,OAAO2B,CAAmB,EAAG,KAAM,IAAA,EACvE,CAAE,MAAO,eAAgB,MAAO,OAAOpB,CAAW,EAAG,KAAM,IAAA,EAC3D,CAAE,MAAO,qBAAsB,MAAO,OAAOsB,CAAiB,EAAG,KAAM,IAAA,EACvE,CAAE,MAAO,cAAe,MAAO,OAAOD,CAAU,EAAG,KAAM,IAAA,CAAK,EAEvD5B,IAAa,gBAEb,CACP,CAAE,MAAO,mBAAoB,MAAO,OAAOwC,CAAc,EAAG,KAAM,IAAA,EAClE,CACE,MAAO,iBACP,MAAO,WAAWJ,EAAyB,eAAe,OAAO,CAAC;AAAA,UAAaD,EAAwB,eAAe,OAAO,CAAC,GAC9H,KAAM,IAAA,EAER,CACE,MAAO,mBACP,MAAO,WAAWG,EAAqB,eAAe,OAAO,CAAC;AAAA,UAAaD,EAAe,eAAe,OAAO,CAAC,GACjH,KAAM,IAAA,EAER,CAAE,MAAO,qBAAsB,MAAO,OAAOR,CAAiB,EAAG,KAAM,IAAA,CAAK,EAIrE,CACP,CAAE,MAAO,mBAAoB,MAAO,OAAOF,CAAmB,EAAG,KAAM,IAAA,EACvE,CAAE,MAAO,kBAAmB,MAAOK,EAAwB,KAAM,IAAA,EACjE,CAAE,MAAO,gBAAiB,MAAOE,EAAuB,KAAM,IAAA,EAC9D,CAAE,MAAO,cAAe,MAAO,OAAON,CAAU,EAAG,KAAM,IAAA,CAAK,CAvB/D,EA4BHtB,EAAkBa,EAAiB,MAAM,EAAG,CAAC,EAAE,IAAKC,GAAW,OAE7D,MAAM0B,IAAgBL,EAAArB,EAAE,YAAF,YAAAqB,EAAa,OAAO,CAACV,EAAaY,IAAW,OACjE,OAAOZ,KAAOU,EAAAE,EAAE,WAAF,YAAAF,EAAY,OAAO,CAACC,EAAcG,IAAWH,GAAQG,EAAE,UAAY,GAAI,KAAM,EAC7F,EAAG,KAAM,EAET,MAAO,CACL,GAAIzB,EAAE,IAAMA,EAAE,eACd,SAAUA,EAAE,aAAeA,EAAE,eAAiB,MAC9C,OAAQA,EAAE,mBAAqBA,EAAE,iBAAmB,MACpD,YAAaA,EAAE,wBAA0BA,EAAE,sBAAwB,MACnE,SAAU0B,EAAgB,EAAI,GAAGA,CAAa,OAAU1B,EAAE,UAAY,IACtE,OAAQA,EAAE,OACV,MAAOA,EAAE,cAAgB,CAAA,CAE7B,CAAC,CAAC,EAGFZ,EAAeU,EAAM,OAAQI,GAAWA,EAAE,SAAW,aAAeA,EAAE,SAAW,WAAW,EAAE,MAAM,EAAG,CAAC,EAAE,IAAKA,GAAA,SAAY,OACzH,GAAIA,EAAE,GACN,MAAO,KAAGmB,EAAAnB,EAAE,eAAF,YAAAmB,EAAgB,OAAQ,QAAQ,QAAMM,EAAAzB,EAAE,oBAAF,YAAAyB,EAAqB,OAAQ,MAAM,GACnF,OAAQzB,EAAE,YACV,QAASA,EAAE,eACX,OAAQA,EAAE,OACV,SAAU,CAAA,EACV,CAAC,CAEL,OAAS0B,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,QAAA,CACEtC,EAAa,EAAK,CACpB,CACF,EAEA,OAAID,EAAkBwC,EAAAA,IAAC,MAAA,CAAI,UAAU,MAAM,SAAA,uBAAoB,EAG7DC,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,YAAS,EAC/DA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,+CAAA,CAA6C,CAAA,EAC5E,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,4DACZ,SAAA/C,EAAM,IAAI,CAACiD,EAAMC,IAChBF,EAAAA,KAAC,MAAA,CAAgB,UAAU,2DACzB,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,yCACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,WAAY,SAAAE,EAAK,IAAA,CAAK,CAAA,CAExC,EACAF,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA8B,WAAK,MAAM,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,uDAAwD,WAAK,KAAA,CAAM,CAAA,GANxEG,CAOV,CACD,EACH,EAEAF,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,0BAA0B,2BAAe,CAAA,CACzD,EACAA,EAAAA,IAAC,OAAI,UAAU,2BACZ,WAAe,SAAW,QACxB,MAAA,CAAI,UAAU,gCAAgC,SAAA,oBAAA,CAAkB,EAEjE5C,EAAe,IAAKgD,UAClBH,OAAAA,EAAAA,KAAC,MAAA,CAAqB,UAAU,yCAC9B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAI,EAAQ,SAAS,EAC3DJ,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAQ,EAAA,CAAG,CAAA,EACnD,QACC,OAAA,CAAK,UAAW,8CAA8CI,EAAQ,SAAW,SAAW,4BAC3FA,EAAQ,SAAW,YAAc,8BAC/B,+BACF,GACC,UAAAZ,EAAAY,EAAQ,SAAR,YAAAZ,EAAgB,QAAQ,IAAK,IAAG,CACnC,CAAA,EACF,EACAS,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAG,EAAQ,OAAO,MAAIA,EAAQ,YAAY,MAAIA,EAAQ,QAAA,CAAA,CACtD,CAAA,GAfQA,EAAQ,EAgBlB,EACD,CAAA,CAEL,CAAA,EACF,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,0BAA0B,wBAAY,CAAA,CACtD,EACAA,EAAAA,IAAC,OAAI,UAAU,2BACZ,WAAY,SAAW,QACrB,MAAA,CAAI,UAAU,gCAAgC,SAAA,kBAAA,CAAgB,EAE/D1C,EAAY,IAAK+C,UACfJ,OAAAA,EAAAA,KAAC,MAAA,CAAkB,UAAU,yCAC3B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAD,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAAK,EAAK,MAAM,EACrDL,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAK,EAAA,CAAG,CAAA,EAChD,EACAA,EAAAA,IAAC,OAAA,CAAK,UAAW,8CAA8CK,EAAK,SAAW,aAAe,4BAC5F,+BACA,GACC,UAAAb,EAAAa,EAAK,SAAL,YAAAb,EAAa,QAAQ,IAAK,IAAG,CAChC,CAAA,EACF,EACAS,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,WAC/BI,EAAK,MAAA,EAChB,EACAL,EAAAA,IAAC,IAAA,CAAE,UAAU,wBACV,WAAK,OAAA,CACR,CAAA,GAjBQK,EAAK,EAkBf,EACD,CAAA,CAEL,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}