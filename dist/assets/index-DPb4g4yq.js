var z1=Object.defineProperty;var W1=(r,e,t)=>e in r?z1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var pr=(r,e,t)=>W1(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function H1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dh={exports:{}},uu={},Fh={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function V1(){if(a0)return Gt;a0=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.iterator;function N(V){return V===null||typeof V!="object"?null:(V=_&&V[_]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,A={};function C(V,P,K){this.props=V,this.context=P,this.refs=A,this.updater=K||y}C.prototype.isReactComponent={},C.prototype.setState=function(V,P){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,P,"setState")},C.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function L(){}L.prototype=C.prototype;function R(V,P,K){this.props=V,this.context=P,this.refs=A,this.updater=K||y}var E=R.prototype=new L;E.constructor=R,k(E,C.prototype),E.isPureReactComponent=!0;var T=Array.isArray,te=Object.prototype.hasOwnProperty,B={current:null},H={key:!0,ref:!0,__self:!0,__source:!0};function Y(V,P,K){var ee,le={},ue=null,se=null;if(P!=null)for(ee in P.ref!==void 0&&(se=P.ref),P.key!==void 0&&(ue=""+P.key),P)te.call(P,ee)&&!H.hasOwnProperty(ee)&&(le[ee]=P[ee]);var ce=arguments.length-2;if(ce===1)le.children=K;else if(1<ce){for(var me=Array(ce),Ne=0;Ne<ce;Ne++)me[Ne]=arguments[Ne+2];le.children=me}if(V&&V.defaultProps)for(ee in ce=V.defaultProps,ce)le[ee]===void 0&&(le[ee]=ce[ee]);return{$$typeof:r,type:V,key:ue,ref:se,props:le,_owner:B.current}}function J(V,P){return{$$typeof:r,type:V.type,key:P,ref:V.ref,props:V.props,_owner:V._owner}}function he(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function U(V){var P={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(K){return P[K]})}var q=/\/+/g;function D(V,P){return typeof V=="object"&&V!==null&&V.key!=null?U(""+V.key):P.toString(36)}function G(V,P,K,ee,le){var ue=typeof V;(ue==="undefined"||ue==="boolean")&&(V=null);var se=!1;if(V===null)se=!0;else switch(ue){case"string":case"number":se=!0;break;case"object":switch(V.$$typeof){case r:case e:se=!0}}if(se)return se=V,le=le(se),V=ee===""?"."+D(se,0):ee,T(le)?(K="",V!=null&&(K=V.replace(q,"$&/")+"/"),G(le,P,K,"",function(Ne){return Ne})):le!=null&&(he(le)&&(le=J(le,K+(!le.key||se&&se.key===le.key?"":(""+le.key).replace(q,"$&/")+"/")+V)),P.push(le)),1;if(se=0,ee=ee===""?".":ee+":",T(V))for(var ce=0;ce<V.length;ce++){ue=V[ce];var me=ee+D(ue,ce);se+=G(ue,P,K,me,le)}else if(me=N(V),typeof me=="function")for(V=me.call(V),ce=0;!(ue=V.next()).done;)ue=ue.value,me=ee+D(ue,ce++),se+=G(ue,P,K,me,le);else if(ue==="object")throw P=String(V),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return se}function ge(V,P,K){if(V==null)return V;var ee=[],le=0;return G(V,ee,"","",function(ue){return P.call(K,ue,le++)}),ee}function ae(V){if(V._status===-1){var P=V._result;P=P(),P.then(function(K){(V._status===0||V._status===-1)&&(V._status=1,V._result=K)},function(K){(V._status===0||V._status===-1)&&(V._status=2,V._result=K)}),V._status===-1&&(V._status=0,V._result=P)}if(V._status===1)return V._result.default;throw V._result}var we={current:null},ie={transition:null},ne={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:ie,ReactCurrentOwner:B};function ve(){throw Error("act(...) is not supported in production builds of React.")}return Gt.Children={map:ge,forEach:function(V,P,K){ge(V,function(){P.apply(this,arguments)},K)},count:function(V){var P=0;return ge(V,function(){P++}),P},toArray:function(V){return ge(V,function(P){return P})||[]},only:function(V){if(!he(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Gt.Component=C,Gt.Fragment=t,Gt.Profiler=a,Gt.PureComponent=R,Gt.StrictMode=s,Gt.Suspense=h,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Gt.act=ve,Gt.cloneElement=function(V,P,K){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var ee=k({},V.props),le=V.key,ue=V.ref,se=V._owner;if(P!=null){if(P.ref!==void 0&&(ue=P.ref,se=B.current),P.key!==void 0&&(le=""+P.key),V.type&&V.type.defaultProps)var ce=V.type.defaultProps;for(me in P)te.call(P,me)&&!H.hasOwnProperty(me)&&(ee[me]=P[me]===void 0&&ce!==void 0?ce[me]:P[me])}var me=arguments.length-2;if(me===1)ee.children=K;else if(1<me){ce=Array(me);for(var Ne=0;Ne<me;Ne++)ce[Ne]=arguments[Ne+2];ee.children=ce}return{$$typeof:r,type:V.type,key:le,ref:ue,props:ee,_owner:se}},Gt.createContext=function(V){return V={$$typeof:u,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:o,_context:V},V.Consumer=V},Gt.createElement=Y,Gt.createFactory=function(V){var P=Y.bind(null,V);return P.type=V,P},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(V){return{$$typeof:d,render:V}},Gt.isValidElement=he,Gt.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ae}},Gt.memo=function(V,P){return{$$typeof:g,type:V,compare:P===void 0?null:P}},Gt.startTransition=function(V){var P=ie.transition;ie.transition={};try{V()}finally{ie.transition=P}},Gt.unstable_act=ve,Gt.useCallback=function(V,P){return we.current.useCallback(V,P)},Gt.useContext=function(V){return we.current.useContext(V)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(V){return we.current.useDeferredValue(V)},Gt.useEffect=function(V,P){return we.current.useEffect(V,P)},Gt.useId=function(){return we.current.useId()},Gt.useImperativeHandle=function(V,P,K){return we.current.useImperativeHandle(V,P,K)},Gt.useInsertionEffect=function(V,P){return we.current.useInsertionEffect(V,P)},Gt.useLayoutEffect=function(V,P){return we.current.useLayoutEffect(V,P)},Gt.useMemo=function(V,P){return we.current.useMemo(V,P)},Gt.useReducer=function(V,P,K){return we.current.useReducer(V,P,K)},Gt.useRef=function(V){return we.current.useRef(V)},Gt.useState=function(V){return we.current.useState(V)},Gt.useSyncExternalStore=function(V,P,K){return we.current.useSyncExternalStore(V,P,K)},Gt.useTransition=function(){return we.current.useTransition()},Gt.version="18.3.1",Gt}var o0;function Gf(){return o0||(o0=1,Fh.exports=V1()),Fh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0;function G1(){if(l0)return uu;l0=1;var r=Gf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,g){var v,_={},N=null,y=null;g!==void 0&&(N=""+g),h.key!==void 0&&(N=""+h.key),h.ref!==void 0&&(y=h.ref);for(v in h)s.call(h,v)&&!o.hasOwnProperty(v)&&(_[v]=h[v]);if(d&&d.defaultProps)for(v in h=d.defaultProps,h)_[v]===void 0&&(_[v]=h[v]);return{$$typeof:e,type:d,key:N,ref:y,props:_,_owner:a.current}}return uu.Fragment=t,uu.jsx=u,uu.jsxs=u,uu}var c0;function K1(){return c0||(c0=1,Dh.exports=G1()),Dh.exports}var c=K1(),yd={},Bh={exports:{}},Ps={},Mh={exports:{}},Uh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function J1(){return u0||(u0=1,(function(r){function e(ie,ne){var ve=ie.length;ie.push(ne);e:for(;0<ve;){var V=ve-1>>>1,P=ie[V];if(0<a(P,ne))ie[V]=ne,ie[ve]=P,ve=V;else break e}}function t(ie){return ie.length===0?null:ie[0]}function s(ie){if(ie.length===0)return null;var ne=ie[0],ve=ie.pop();if(ve!==ne){ie[0]=ve;e:for(var V=0,P=ie.length,K=P>>>1;V<K;){var ee=2*(V+1)-1,le=ie[ee],ue=ee+1,se=ie[ue];if(0>a(le,ve))ue<P&&0>a(se,le)?(ie[V]=se,ie[ue]=ve,V=ue):(ie[V]=le,ie[ee]=ve,V=ee);else if(ue<P&&0>a(se,ve))ie[V]=se,ie[ue]=ve,V=ue;else break e}}return ne}function a(ie,ne){var ve=ie.sortIndex-ne.sortIndex;return ve!==0?ve:ie.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var h=[],g=[],v=1,_=null,N=3,y=!1,k=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(ie){for(var ne=t(g);ne!==null;){if(ne.callback===null)s(g);else if(ne.startTime<=ie)s(g),ne.sortIndex=ne.expirationTime,e(h,ne);else break;ne=t(g)}}function T(ie){if(A=!1,E(ie),!k)if(t(h)!==null)k=!0,ae(te);else{var ne=t(g);ne!==null&&we(T,ne.startTime-ie)}}function te(ie,ne){k=!1,A&&(A=!1,L(Y),Y=-1),y=!0;var ve=N;try{for(E(ne),_=t(h);_!==null&&(!(_.expirationTime>ne)||ie&&!U());){var V=_.callback;if(typeof V=="function"){_.callback=null,N=_.priorityLevel;var P=V(_.expirationTime<=ne);ne=r.unstable_now(),typeof P=="function"?_.callback=P:_===t(h)&&s(h),E(ne)}else s(h);_=t(h)}if(_!==null)var K=!0;else{var ee=t(g);ee!==null&&we(T,ee.startTime-ne),K=!1}return K}finally{_=null,N=ve,y=!1}}var B=!1,H=null,Y=-1,J=5,he=-1;function U(){return!(r.unstable_now()-he<J)}function q(){if(H!==null){var ie=r.unstable_now();he=ie;var ne=!0;try{ne=H(!0,ie)}finally{ne?D():(B=!1,H=null)}}else B=!1}var D;if(typeof R=="function")D=function(){R(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ge=G.port2;G.port1.onmessage=q,D=function(){ge.postMessage(null)}}else D=function(){C(q,0)};function ae(ie){H=ie,B||(B=!0,D())}function we(ie,ne){Y=C(function(){ie(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ie){ie.callback=null},r.unstable_continueExecution=function(){k||y||(k=!0,ae(te))},r.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<ie?Math.floor(1e3/ie):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return t(h)},r.unstable_next=function(ie){switch(N){case 1:case 2:case 3:var ne=3;break;default:ne=N}var ve=N;N=ne;try{return ie()}finally{N=ve}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ve=N;N=ie;try{return ne()}finally{N=ve}},r.unstable_scheduleCallback=function(ie,ne,ve){var V=r.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?V+ve:V):ve=V,ie){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ve+P,ie={id:v++,callback:ne,priorityLevel:ie,startTime:ve,expirationTime:P,sortIndex:-1},ve>V?(ie.sortIndex=ve,e(g,ie),t(h)===null&&ie===t(g)&&(A?(L(Y),Y=-1):A=!0,we(T,ve-V))):(ie.sortIndex=P,e(h,ie),k||y||(k=!0,ae(te))),ie},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(ie){var ne=N;return function(){var ve=N;N=ne;try{return ie.apply(this,arguments)}finally{N=ve}}}})(Uh)),Uh}var d0;function Y1(){return d0||(d0=1,Mh.exports=J1()),Mh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function X1(){if(h0)return Ps;h0=1;var r=Gf(),e=Y1();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function o(n,i){u(n,i),u(n+"Capture",i)}function u(n,i){for(a[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},_={};function N(n){return h.call(_,n)?!0:h.call(v,n)?!1:g.test(n)?_[n]=!0:(v[n]=!0,!1)}function y(n,i,l,p){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k(n,i,l,p){if(i===null||typeof i>"u"||y(n,i,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function A(n,i,l,p,w,S,F){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=p,this.attributeNamespace=w,this.mustUseProperty=l,this.propertyName=n,this.type=i,this.sanitizeURL=S,this.removeEmptyString=F}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){C[n]=new A(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];C[i]=new A(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){C[n]=new A(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){C[n]=new A(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){C[n]=new A(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){C[n]=new A(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){C[n]=new A(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){C[n]=new A(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){C[n]=new A(n,5,!1,n.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(L,R);C[i]=new A(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(L,R);C[i]=new A(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(L,R);C[i]=new A(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){C[n]=new A(n,1,!1,n.toLowerCase(),null,!1,!1)}),C.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){C[n]=new A(n,1,!1,n.toLowerCase(),null,!0,!0)});function E(n,i,l,p){var w=C.hasOwnProperty(i)?C[i]:null;(w!==null?w.type!==0:p||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(k(i,l,w,p)&&(l=null),p||w===null?N(i)&&(l===null?n.removeAttribute(i):n.setAttribute(i,""+l)):w.mustUseProperty?n[w.propertyName]=l===null?w.type===3?!1:"":l:(i=w.attributeName,p=w.attributeNamespace,l===null?n.removeAttribute(i):(w=w.type,l=w===3||w===4&&l===!0?"":""+l,p?n.setAttributeNS(p,i,l):n.setAttribute(i,l))))}var T=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,te=Symbol.for("react.element"),B=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),U=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ne(n){return n===null||typeof n!="object"?null:(n=ie&&n[ie]||n["@@iterator"],typeof n=="function"?n:null)}var ve=Object.assign,V;function P(n){if(V===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+n}var K=!1;function ee(n,i){if(!n||K)return"";K=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(Ce){var p=Ce}Reflect.construct(n,[],i)}else{try{i.call()}catch(Ce){p=Ce}n.call(i.prototype)}else{try{throw Error()}catch(Ce){p=Ce}n()}}catch(Ce){if(Ce&&p&&typeof Ce.stack=="string"){for(var w=Ce.stack.split(`
`),S=p.stack.split(`
`),F=w.length-1,oe=S.length-1;1<=F&&0<=oe&&w[F]!==S[oe];)oe--;for(;1<=F&&0<=oe;F--,oe--)if(w[F]!==S[oe]){if(F!==1||oe!==1)do if(F--,oe--,0>oe||w[F]!==S[oe]){var pe=`
`+w[F].replace(" at new "," at ");return n.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",n.displayName)),pe}while(1<=F&&0<=oe);break}}}finally{K=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?P(n):""}function le(n){switch(n.tag){case 5:return P(n.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return n=ee(n.type,!1),n;case 11:return n=ee(n.type.render,!1),n;case 1:return n=ee(n.type,!0),n;default:return""}}function ue(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case H:return"Fragment";case B:return"Portal";case J:return"Profiler";case Y:return"StrictMode";case D:return"Suspense";case G:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case U:return(n.displayName||"Context")+".Consumer";case he:return(n._context.displayName||"Context")+".Provider";case q:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ge:return i=n.displayName||null,i!==null?i:ue(n.type)||"Memo";case ae:i=n._payload,n=n._init;try{return ue(n(i))}catch{}}return null}function se(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(i);case 8:return i===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ce(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function me(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ne(n){var i=me(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),p=""+n[i];if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var w=l.get,S=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return w.call(this)},set:function(F){p=""+F,S.call(this,F)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(F){p=""+F},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ie(n){n._valueTracker||(n._valueTracker=Ne(n))}function He(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),p="";return n&&(p=me(n)?n.checked?"true":"false":n.value),n=p,n!==l?(i.setValue(n),!0):!1}function Me(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Xe(n,i){var l=i.checked;return ve({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function X(n,i){var l=i.defaultValue==null?"":i.defaultValue,p=i.checked!=null?i.checked:i.defaultChecked;l=ce(i.value!=null?i.value:l),n._wrapperState={initialChecked:p,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Ye(n,i){i=i.checked,i!=null&&E(n,"checked",i,!1)}function dt(n,i){Ye(n,i);var l=ce(i.value),p=i.type;if(l!=null)p==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(p==="submit"||p==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?qe(n,i.type,l):i.hasOwnProperty("defaultValue")&&qe(n,i.type,ce(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function bt(n,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var p=i.type;if(!(p!=="submit"&&p!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,l||i===n.value||(n.value=i),n.defaultValue=i}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function qe(n,i,l){(i!=="number"||Me(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var pt=Array.isArray;function Qe(n,i,l,p){if(n=n.options,i){i={};for(var w=0;w<l.length;w++)i["$"+l[w]]=!0;for(l=0;l<n.length;l++)w=i.hasOwnProperty("$"+n[l].value),n[l].selected!==w&&(n[l].selected=w),w&&p&&(n[l].defaultSelected=!0)}else{for(l=""+ce(l),i=null,w=0;w<n.length;w++){if(n[w].value===l){n[w].selected=!0,p&&(n[w].defaultSelected=!0);return}i!==null||n[w].disabled||(i=n[w])}i!==null&&(i.selected=!0)}}function vt(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ve({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function gt(n,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(t(92));if(pt(l)){if(1<l.length)throw Error(t(93));l=l[0]}i=l}i==null&&(i=""),l=i}n._wrapperState={initialValue:ce(l)}}function Jt(n,i){var l=ce(i.value),p=ce(i.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),i.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),p!=null&&(n.defaultValue=""+p)}function zt(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Lt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Lt(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ae,Be=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,p,w){MSApp.execUnsafeLocalFunction(function(){return n(i,l,p,w)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Ae=Ae||document.createElement("div"),Ae.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Ae.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Ue(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Ge={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ze=["Webkit","ms","Moz","O"];Object.keys(Ge).forEach(function(n){Ze.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Ge[i]=Ge[n]})});function At(n,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Ge.hasOwnProperty(n)&&Ge[n]?(""+i).trim():i+"px"}function yt(n,i){n=n.style;for(var l in i)if(i.hasOwnProperty(l)){var p=l.indexOf("--")===0,w=At(l,i[l],p);l==="float"&&(l="cssFloat"),p?n.setProperty(l,w):n[l]=w}}var qt=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mr(n,i){if(i){if(qt[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function wt(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function _t(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var It=null,sr=null,Bt=null;function Nt(n){if(n=ko(n)){if(typeof It!="function")throw Error(t(280));var i=n.stateNode;i&&(i=fl(i),It(n.stateNode,n.type,i))}}function Qt(n){sr?Bt?Bt.push(n):Bt=[n]:sr=n}function Gi(){if(sr){var n=sr,i=Bt;if(Bt=sr=null,Nt(n),i)for(n=0;n<i.length;n++)Nt(i[n])}}function mn(n,i){return n(i)}function ti(){}var ps=!1;function St(n,i,l){if(ps)return n(i,l);ps=!0;try{return mn(n,i,l)}finally{ps=!1,(sr!==null||Bt!==null)&&(ti(),Gi())}}function ts(n,i){var l=n.stateNode;if(l===null)return null;var p=fl(l);if(p===null)return null;l=p[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(n=n.type,p=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!p;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,i,typeof l));return l}var Ts=!1;if(d)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Ts=!1}function gs(n,i,l,p,w,S,F,oe,pe){var Ce=Array.prototype.slice.call(arguments,3);try{i.apply(l,Ce)}catch(We){this.onError(We)}}var vr=!1,Dr=null,Hr=!1,wi=null,Ki={onError:function(n){vr=!0,Dr=n}};function Os(n,i,l,p,w,S,F,oe,pe){vr=!1,Dr=null,gs.apply(Ki,arguments)}function ri(n,i,l,p,w,S,F,oe,pe){if(Os.apply(this,arguments),vr){if(vr){var Ce=Dr;vr=!1,Dr=null}else throw Error(t(198));Hr||(Hr=!0,wi=Ce)}}function vn(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function ms(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function rs(n){if(vn(n)!==n)throw Error(t(188))}function va(n){var i=n.alternate;if(!i){if(i=vn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var l=n,p=i;;){var w=l.return;if(w===null)break;var S=w.alternate;if(S===null){if(p=w.return,p!==null){l=p;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===l)return rs(w),n;if(S===p)return rs(w),i;S=S.sibling}throw Error(t(188))}if(l.return!==p.return)l=w,p=S;else{for(var F=!1,oe=w.child;oe;){if(oe===l){F=!0,l=w,p=S;break}if(oe===p){F=!0,p=w,l=S;break}oe=oe.sibling}if(!F){for(oe=S.child;oe;){if(oe===l){F=!0,l=S,p=w;break}if(oe===p){F=!0,p=S,l=w;break}oe=oe.sibling}if(!F)throw Error(t(189))}}if(l.alternate!==p)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:i}function Is(n){return n=va(n),n!==null?Ji(n):null}function Ji(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ji(n);if(i!==null)return i;n=n.sibling}return null}var ya=e.unstable_scheduleCallback,xa=e.unstable_cancelCallback,ro=e.unstable_shouldYield,Fc=e.unstable_requestPaint,wr=e.unstable_now,ql=e.unstable_getCurrentPriorityLevel,no=e.unstable_ImmediatePriority,ns=e.unstable_UserBlockingPriority,Yi=e.unstable_NormalPriority,zl=e.unstable_LowPriority,so=e.unstable_IdlePriority,wa=null,ss=null;function Wl(n){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(wa,n,void 0,(n.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:Gr,io=Math.log,Bc=Math.LN2;function Gr(n){return n>>>=0,n===0?32:31-(io(n)/Bc|0)|0}var ba=64,is=4194304;function ni(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function _a(n,i){var l=n.pendingLanes;if(l===0)return 0;var p=0,w=n.suspendedLanes,S=n.pingedLanes,F=l&268435455;if(F!==0){var oe=F&~w;oe!==0?p=ni(oe):(S&=F,S!==0&&(p=ni(S)))}else F=l&~w,F!==0?p=ni(F):S!==0&&(p=ni(S));if(p===0)return 0;if(i!==0&&i!==p&&(i&w)===0&&(w=p&-p,S=i&-i,w>=S||w===16&&(S&4194240)!==0))return i;if((p&4)!==0&&(p|=l&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=p;0<i;)l=31-Vr(i),w=1<<l,p|=n[l],i&=~w;return p}function vs(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rn(n,i){for(var l=n.suspendedLanes,p=n.pingedLanes,w=n.expirationTimes,S=n.pendingLanes;0<S;){var F=31-Vr(S),oe=1<<F,pe=w[F];pe===-1?((oe&l)===0||(oe&p)!==0)&&(w[F]=vs(oe,i)):pe<=i&&(n.expiredLanes|=oe),S&=~oe}}function Rs(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Jo(){var n=ba;return ba<<=1,(ba&4194240)===0&&(ba=64),n}function Yo(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Na(n,i,l){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Vr(i),n[i]=l}function si(n,i){var l=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var p=n.eventTimes;for(n=n.expirationTimes;0<l;){var w=31-Vr(l),S=1<<w;i[w]=0,p[w]=-1,n[w]=-1,l&=~S}}function ao(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var p=31-Vr(l),w=1<<p;w&i|n[p]&i&&(n[p]|=i),l&=~w}}var Xt=0;function Sa(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Xi,Xo,Hl,Vl,oo,lo=!1,Un=[],ii=null,$n=null,ys=null,ka=new Map,Et=new Map,ai=[],Mc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gl(n,i){switch(n){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":ka.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(i.pointerId)}}function as(n,i,l,p,w,S){return n===null||n.nativeEvent!==S?(n={blockedOn:i,domEventName:l,eventSystemFlags:p,nativeEvent:S,targetContainers:[w]},i!==null&&(i=ko(i),i!==null&&Xo(i)),n):(n.eventSystemFlags|=p,i=n.targetContainers,w!==null&&i.indexOf(w)===-1&&i.push(w),n)}function bi(n,i,l,p,w){switch(i){case"focusin":return ii=as(ii,n,i,l,p,w),!0;case"dragenter":return $n=as($n,n,i,l,p,w),!0;case"mouseover":return ys=as(ys,n,i,l,p,w),!0;case"pointerover":var S=w.pointerId;return ka.set(S,as(ka.get(S)||null,n,i,l,p,w)),!0;case"gotpointercapture":return S=w.pointerId,Et.set(S,as(Et.get(S)||null,n,i,l,p,w)),!0}return!1}function Kl(n){var i=la(n.target);if(i!==null){var l=vn(i);if(l!==null){if(i=l.tag,i===13){if(i=ms(l),i!==null){n.blockedOn=i,oo(n.priority,function(){Hl(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function co(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=Ea(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var p=new l.constructor(l.type,l);ar=p,l.target.dispatchEvent(p),ar=null}else return i=ko(l),i!==null&&Xo(i),n.blockedOn=l,!1;i.shift()}return!0}function ja(n,i,l){co(n)&&l.delete(i)}function Qo(){lo=!1,ii!==null&&co(ii)&&(ii=null),$n!==null&&co($n)&&($n=null),ys!==null&&co(ys)&&(ys=null),ka.forEach(ja),Et.forEach(ja)}function Ds(n,i){n.blockedOn===i&&(n.blockedOn=null,lo||(lo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qo)))}function Aa(n){function i(w){return Ds(w,n)}if(0<Un.length){Ds(Un[0],n);for(var l=1;l<Un.length;l++){var p=Un[l];p.blockedOn===n&&(p.blockedOn=null)}}for(ii!==null&&Ds(ii,n),$n!==null&&Ds($n,n),ys!==null&&Ds(ys,n),ka.forEach(i),Et.forEach(i),l=0;l<ai.length;l++)p=ai[l],p.blockedOn===n&&(p.blockedOn=null);for(;0<ai.length&&(l=ai[0],l.blockedOn===null);)Kl(l),l.blockedOn===null&&ai.shift()}var qn=T.ReactCurrentBatchConfig,uo=!0;function Zo(n,i,l,p){var w=Xt,S=qn.transition;qn.transition=null;try{Xt=1,ho(n,i,l,p)}finally{Xt=w,qn.transition=S}}function el(n,i,l,p){var w=Xt,S=qn.transition;qn.transition=null;try{Xt=4,ho(n,i,l,p)}finally{Xt=w,qn.transition=S}}function ho(n,i,l,p){if(uo){var w=Ea(n,i,l,p);if(w===null)ul(n,i,p,xs,l),Gl(n,p);else if(bi(w,n,i,l,p))p.stopPropagation();else if(Gl(n,p),i&4&&-1<Mc.indexOf(n)){for(;w!==null;){var S=ko(w);if(S!==null&&Xi(S),S=Ea(n,i,l,p),S===null&&ul(n,i,p,xs,l),S===w)break;w=S}w!==null&&p.stopPropagation()}else ul(n,i,p,null,l)}}var xs=null;function Ea(n,i,l,p){if(xs=null,n=_t(p),n=la(n),n!==null)if(i=vn(n),i===null)n=null;else if(l=i.tag,l===13){if(n=ms(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return xs=n,null}function Ca(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case no:return 1;case ns:return 4;case Yi:case zl:return 16;case so:return 536870912;default:return 16}default:return 16}}var ws=null,_i=null,Qi=null;function tl(){if(Qi)return Qi;var n,i=_i,l=i.length,p,w="value"in ws?ws.value:ws.textContent,S=w.length;for(n=0;n<l&&i[n]===w[n];n++);var F=l-n;for(p=1;p<=F&&i[l-p]===w[S-p];p++);return Qi=w.slice(n,1<p?1-p:void 0)}function Pa(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function bs(){return!0}function oi(){return!1}function jn(n){function i(l,p,w,S,F){this._reactName=l,this._targetInst=w,this.type=p,this.nativeEvent=S,this.target=F,this.currentTarget=null;for(var oe in n)n.hasOwnProperty(oe)&&(l=n[oe],this[oe]=l?l(S):S[oe]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?bs:oi,this.isPropagationStopped=oi,this}return ve(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),i}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=jn(_s),x=ve({},_s,{view:0,detail:0}),I=jn(x),re,de,be,Re=ve({},x,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==be&&(be&&n.type==="mousemove"?(re=n.screenX-be.screenX,de=n.screenY-be.screenY):de=re=0,be=n),re)},movementY:function(n){return"movementY"in n?n.movementY:de}}),$e=jn(Re),it=ve({},Re,{dataTransfer:0}),ht=jn(it),Ot=ve({},x,{relatedTarget:0}),Ft=jn(Ot),Yt=ve({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),Ar=jn(Yt),Kr=ve({},_s,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),yr=jn(Kr),nn=ve({},_s,{data:0}),Fr=jn(nn),yn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ni={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Fs[n])?!!i[n]:!1}function La(){return Si}var po=ve({},x,{key:function(n){if(n.key){var i=yn[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Pa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ni[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(n){return n.type==="keypress"?Pa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zi=jn(po),Ta=ve({},Re,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ea=jn(Ta),ta=ve({},x,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),xn=jn(ta),Oa=ve({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ia=jn(Oa),rl=ve({},Re,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nl=jn(rl),On=[9,13,27,32],Bs=d&&"CompositionEvent"in window,li=null;d&&"documentMode"in document&&(li=document.documentMode);var Jl=d&&"TextEvent"in window&&!li,os=d&&(!Bs||li&&8<li&&11>=li),ra=" ",go=!1;function mo(n,i){switch(n){case"keyup":return On.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ki(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ns=!1;function ls(n,i){switch(n){case"compositionend":return ki(i);case"keypress":return i.which!==32?null:(go=!0,ra);case"textInput":return n=i.data,n===ra&&go?null:n;default:return null}}function cs(n,i){if(Ns)return n==="compositionend"||!Bs&&mo(n,i)?(n=tl(),Qi=_i=ws=null,Ns=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return os&&i.locale!=="ko"?null:i.data;default:return null}}var na={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ci(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!na[n.type]:i==="textarea"}function ji(n,i,l,p){Qt(p),i=ec(i,"onChange"),0<i.length&&(l=new fo("onChange","change",null,l,p),n.push({event:l,listeners:i}))}var Ai=null,ui=null;function Br(n){ll(n,0)}function Ra(n){var i=Ha(n);if(He(i))return n}function di(n,i){if(n==="change")return i}var Ms=!1;if(d){var Da;if(d){var Fa="oninput"in document;if(!Fa){var vo=document.createElement("div");vo.setAttribute("oninput","return;"),Fa=typeof vo.oninput=="function"}Da=Fa}else Da=!1;Ms=Da&&(!document.documentMode||9<document.documentMode)}function yo(){Ai&&(Ai.detachEvent("onpropertychange",Ei),ui=Ai=null)}function Ei(n){if(n.propertyName==="value"&&Ra(ui)){var i=[];ji(i,ui,n,_t(n)),St(Br,i)}}function sa(n,i,l){n==="focusin"?(yo(),Ai=i,ui=l,Ai.attachEvent("onpropertychange",Ei)):n==="focusout"&&yo()}function ia(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ra(ui)}function Ba(n,i){if(n==="click")return Ra(i)}function aa(n,i){if(n==="input"||n==="change")return Ra(i)}function Ma(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Pr=typeof Object.is=="function"?Object.is:Ma;function zn(n,i){if(Pr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),p=Object.keys(i);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var w=l[p];if(!h.call(i,w)||!Pr(n[w],i[w]))return!1}return!0}function Zt(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function or(n,i){var l=Zt(n);n=0;for(var p;l;){if(l.nodeType===3){if(p=n+l.textContent.length,n<=i&&p>=i)return{node:l,offset:i-n};n=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Zt(l)}}function Lr(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Lr(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Jr(){for(var n=window,i=Me();i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Me(n.document)}return i}function Us(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function sl(n){var i=Jr(),l=n.focusedElem,p=n.selectionRange;if(i!==l&&l&&l.ownerDocument&&Lr(l.ownerDocument.documentElement,l)){if(p!==null&&Us(l)){if(i=p.start,n=p.end,n===void 0&&(n=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(n,l.value.length);else if(n=(i=l.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var w=l.textContent.length,S=Math.min(p.start,w);p=p.end===void 0?S:Math.min(p.end,w),!n.extend&&S>p&&(w=p,p=S,S=w),w=or(l,S);var F=or(l,p);w&&F&&(n.rangeCount!==1||n.anchorNode!==w.node||n.anchorOffset!==w.offset||n.focusNode!==F.node||n.focusOffset!==F.offset)&&(i=i.createRange(),i.setStart(w.node,w.offset),n.removeAllRanges(),S>p?(n.addRange(i),n.extend(F.node,F.offset)):(i.setEnd(F.node,F.offset),n.addRange(i)))}}for(i=[],n=l;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)n=i[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xo=d&&"documentMode"in document&&11>=document.documentMode,Ci=null,Yl=null,wo=null,Xl=!1;function Uc(n,i,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Xl||Ci==null||Ci!==Me(p)||(p=Ci,"selectionStart"in p&&Us(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),wo&&zn(wo,p)||(wo=p,p=ec(Yl,"onSelect"),0<p.length&&(i=new fo("onSelect","select",null,i,l),n.push({event:i,listeners:p}),i.target=Ci)))}function il(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var Ua={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},$a={},$c={};d&&($c=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function al(n){if($a[n])return $a[n];if(!Ua[n])return n;var i=Ua[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in $c)return $a[n]=i[l];return n}var qc=al("animationend"),zc=al("animationiteration"),Wc=al("animationstart"),Hc=al("transitionend"),Vc=new Map,Gc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(n,i){Vc.set(n,i),o(i,[n])}for(var bo=0;bo<Gc.length;bo++){var In=Gc[bo],Ss=In.toLowerCase(),Ql=In[0].toUpperCase()+In.slice(1);hi(Ss,"on"+Ql)}hi(qc,"onAnimationEnd"),hi(zc,"onAnimationIteration"),hi(Wc,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(Hc,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bu=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function ol(n,i,l){var p=n.type||"unknown-event";n.currentTarget=l,ri(p,i,void 0,n),n.currentTarget=null}function ll(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var p=n[l],w=p.event;p=p.listeners;e:{var S=void 0;if(i)for(var F=p.length-1;0<=F;F--){var oe=p[F],pe=oe.instance,Ce=oe.currentTarget;if(oe=oe.listener,pe!==S&&w.isPropagationStopped())break e;ol(w,oe,Ce),S=pe}else for(F=0;F<p.length;F++){if(oe=p[F],pe=oe.instance,Ce=oe.currentTarget,oe=oe.listener,pe!==S&&w.isPropagationStopped())break e;ol(w,oe,Ce),S=pe}}}if(Hr)throw n=wi,Hr=!1,wi=null,n}function ur(n,i){var l=i[Hn];l===void 0&&(l=i[Hn]=new Set);var p=n+"__bubble";l.has(p)||(cl(i,n,2,!1),l.add(p))}function Zl(n,i,l){var p=0;i&&(p|=4),cl(l,n,p,i)}var _o="_reactListening"+Math.random().toString(36).slice(2);function qa(n){if(!n[_o]){n[_o]=!0,s.forEach(function(l){l!=="selectionchange"&&(Bu.has(l)||Zl(l,!1,n),Zl(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_o]||(i[_o]=!0,Zl("selectionchange",!1,i))}}function cl(n,i,l,p){switch(Ca(i)){case 1:var w=Zo;break;case 4:w=el;break;default:w=ho}l=w.bind(null,i,l,n),w=void 0,!Ts||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(w=!0),p?w!==void 0?n.addEventListener(i,l,{capture:!0,passive:w}):n.addEventListener(i,l,!0):w!==void 0?n.addEventListener(i,l,{passive:w}):n.addEventListener(i,l,!1)}function ul(n,i,l,p,w){var S=p;if((i&1)===0&&(i&2)===0&&p!==null)e:for(;;){if(p===null)return;var F=p.tag;if(F===3||F===4){var oe=p.stateNode.containerInfo;if(oe===w||oe.nodeType===8&&oe.parentNode===w)break;if(F===4)for(F=p.return;F!==null;){var pe=F.tag;if((pe===3||pe===4)&&(pe=F.stateNode.containerInfo,pe===w||pe.nodeType===8&&pe.parentNode===w))return;F=F.return}for(;oe!==null;){if(F=la(oe),F===null)return;if(pe=F.tag,pe===5||pe===6){p=S=F;continue e}oe=oe.parentNode}}p=p.return}St(function(){var Ce=S,We=_t(l),Ve=[];e:{var ze=Vc.get(n);if(ze!==void 0){var tt=fo,lt=n;switch(n){case"keypress":if(Pa(l)===0)break e;case"keydown":case"keyup":tt=Zi;break;case"focusin":lt="focus",tt=Ft;break;case"focusout":lt="blur",tt=Ft;break;case"beforeblur":case"afterblur":tt=Ft;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=$e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=ht;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=xn;break;case qc:case zc:case Wc:tt=Ar;break;case Hc:tt=Ia;break;case"scroll":tt=I;break;case"wheel":tt=nl;break;case"copy":case"cut":case"paste":tt=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=ea}var ut=(i&4)!==0,on=!ut&&n==="scroll",ke=ut?ze!==null?ze+"Capture":null:ze;ut=[];for(var xe=Ce,Ee;xe!==null;){Ee=xe;var Ke=Ee.stateNode;if(Ee.tag===5&&Ke!==null&&(Ee=Ke,ke!==null&&(Ke=ts(xe,ke),Ke!=null&&ut.push(dl(xe,Ke,Ee)))),on)break;xe=xe.return}0<ut.length&&(ze=new tt(ze,lt,null,l,We),Ve.push({event:ze,listeners:ut}))}}if((i&7)===0){e:{if(ze=n==="mouseover"||n==="pointerover",tt=n==="mouseout"||n==="pointerout",ze&&l!==ar&&(lt=l.relatedTarget||l.fromElement)&&(la(lt)||lt[An]))break e;if((tt||ze)&&(ze=We.window===We?We:(ze=We.ownerDocument)?ze.defaultView||ze.parentWindow:window,tt?(lt=l.relatedTarget||l.toElement,tt=Ce,lt=lt?la(lt):null,lt!==null&&(on=vn(lt),lt!==on||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(tt=null,lt=Ce),tt!==lt)){if(ut=$e,Ke="onMouseLeave",ke="onMouseEnter",xe="mouse",(n==="pointerout"||n==="pointerover")&&(ut=ea,Ke="onPointerLeave",ke="onPointerEnter",xe="pointer"),on=tt==null?ze:Ha(tt),Ee=lt==null?ze:Ha(lt),ze=new ut(Ke,xe+"leave",tt,l,We),ze.target=on,ze.relatedTarget=Ee,Ke=null,la(We)===Ce&&(ut=new ut(ke,xe+"enter",lt,l,We),ut.target=Ee,ut.relatedTarget=on,Ke=ut),on=Ke,tt&&lt)t:{for(ut=tt,ke=lt,xe=0,Ee=ut;Ee;Ee=za(Ee))xe++;for(Ee=0,Ke=ke;Ke;Ke=za(Ke))Ee++;for(;0<xe-Ee;)ut=za(ut),xe--;for(;0<Ee-xe;)ke=za(ke),Ee--;for(;xe--;){if(ut===ke||ke!==null&&ut===ke.alternate)break t;ut=za(ut),ke=za(ke)}ut=null}else ut=null;tt!==null&&Mu(Ve,ze,tt,ut,!1),lt!==null&&on!==null&&Mu(Ve,on,lt,ut,!0)}}e:{if(ze=Ce?Ha(Ce):window,tt=ze.nodeName&&ze.nodeName.toLowerCase(),tt==="select"||tt==="input"&&ze.type==="file")var mt=di;else if(ci(ze))if(Ms)mt=aa;else{mt=ia;var kt=sa}else(tt=ze.nodeName)&&tt.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(mt=Ba);if(mt&&(mt=mt(n,Ce))){ji(Ve,mt,l,We);break e}kt&&kt(n,ze,Ce),n==="focusout"&&(kt=ze._wrapperState)&&kt.controlled&&ze.type==="number"&&qe(ze,"number",ze.value)}switch(kt=Ce?Ha(Ce):window,n){case"focusin":(ci(kt)||kt.contentEditable==="true")&&(Ci=kt,Yl=Ce,wo=null);break;case"focusout":wo=Yl=Ci=null;break;case"mousedown":Xl=!0;break;case"contextmenu":case"mouseup":case"dragend":Xl=!1,Uc(Ve,l,We);break;case"selectionchange":if(xo)break;case"keydown":case"keyup":Uc(Ve,l,We)}var jt;if(Bs)e:{switch(n){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else Ns?mo(n,l)&&(Rt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Rt="onCompositionStart");Rt&&(os&&l.locale!=="ko"&&(Ns||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&Ns&&(jt=tl()):(ws=We,_i="value"in ws?ws.value:ws.textContent,Ns=!0)),kt=ec(Ce,Rt),0<kt.length&&(Rt=new Fr(Rt,n,null,l,We),Ve.push({event:Rt,listeners:kt}),jt?Rt.data=jt:(jt=ki(l),jt!==null&&(Rt.data=jt)))),(jt=Jl?ls(n,l):cs(n,l))&&(Ce=ec(Ce,"onBeforeInput"),0<Ce.length&&(We=new Fr("onBeforeInput","beforeinput",null,l,We),Ve.push({event:We,listeners:Ce}),We.data=jt))}ll(Ve,i)})}function dl(n,i,l){return{instance:n,listener:i,currentTarget:l}}function ec(n,i){for(var l=i+"Capture",p=[];n!==null;){var w=n,S=w.stateNode;w.tag===5&&S!==null&&(w=S,S=ts(n,l),S!=null&&p.unshift(dl(n,S,w)),S=ts(n,i),S!=null&&p.push(dl(n,S,w))),n=n.return}return p}function za(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Mu(n,i,l,p,w){for(var S=i._reactName,F=[];l!==null&&l!==p;){var oe=l,pe=oe.alternate,Ce=oe.stateNode;if(pe!==null&&pe===p)break;oe.tag===5&&Ce!==null&&(oe=Ce,w?(pe=ts(l,S),pe!=null&&F.unshift(dl(l,pe,oe))):w||(pe=ts(l,S),pe!=null&&F.push(dl(l,pe,oe)))),l=l.return}F.length!==0&&n.push({event:i,listeners:F})}var Yd=/\r\n?/g,Xd=/\u0000|\uFFFD/g;function Uu(n){return(typeof n=="string"?n:""+n).replace(Yd,`
`).replace(Xd,"")}function tc(n,i,l){if(i=Uu(i),Uu(n)!==i&&l)throw Error(t(425))}function No(){}var hl=null,Wa=null;function Kc(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jc=typeof setTimeout=="function"?setTimeout:void 0,$u=typeof clearTimeout=="function"?clearTimeout:void 0,qu=typeof Promise=="function"?Promise:void 0,Qd=typeof queueMicrotask=="function"?queueMicrotask:typeof qu<"u"?function(n){return qu.resolve(null).then(n).catch(Zd)}:Jc;function Zd(n){setTimeout(function(){throw n})}function Yc(n,i){var l=i,p=0;do{var w=l.nextSibling;if(n.removeChild(l),w&&w.nodeType===8)if(l=w.data,l==="/$"){if(p===0){n.removeChild(w),Aa(i);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=w}while(l);Aa(i)}function Rn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function ks(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return n;i--}else l==="/$"&&i++}n=n.previousSibling}return null}var Wn=Math.random().toString(36).slice(2),fi="__reactFiber$"+Wn,So="__reactProps$"+Wn,An="__reactContainer$"+Wn,Hn="__reactEvents$"+Wn,eh="__reactListeners$"+Wn,th="__reactHandles$"+Wn;function la(n){var i=n[fi];if(i)return i;for(var l=n.parentNode;l;){if(i=l[An]||l[fi]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=ks(n);n!==null;){if(l=n[fi])return l;n=ks(n)}return i}n=l,l=n.parentNode}return null}function ko(n){return n=n[fi]||n[An],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ha(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function fl(n){return n[So]||null}var Xc=[],Pi=-1;function $s(n){return{current:n}}function ir(n){0>Pi||(n.current=Xc[Pi],Xc[Pi]=null,Pi--)}function lr(n,i){Pi++,Xc[Pi]=n.current,n.current=i}var ca={},wn=$s(ca),Vn=$s(!1),Va=ca;function jo(n,i){var l=n.type.contextTypes;if(!l)return ca;var p=n.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===i)return p.__reactInternalMemoizedMaskedChildContext;var w={},S;for(S in l)w[S]=i[S];return p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=w),w}function Gn(n){return n=n.childContextTypes,n!=null}function rc(){ir(Vn),ir(wn)}function zu(n,i,l){if(wn.current!==ca)throw Error(t(168));lr(wn,i),lr(Vn,l)}function Qc(n,i,l){var p=n.stateNode;if(i=i.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var w in p)if(!(w in i))throw Error(t(108,se(n)||"Unknown",w));return ve({},l,p)}function Ga(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ca,Va=wn.current,lr(wn,n),lr(Vn,Vn.current),!0}function Wu(n,i,l){var p=n.stateNode;if(!p)throw Error(t(169));l?(n=Qc(n,i,Va),p.__reactInternalMemoizedMergedChildContext=n,ir(Vn),ir(wn),lr(wn,n)):ir(Vn),lr(Vn,l)}var Li=null,pl=!1,f=!1;function m(n){Li===null?Li=[n]:Li.push(n)}function b(n){pl=!0,m(n)}function j(){if(!f&&Li!==null){f=!0;var n=0,i=Xt;try{var l=Li;for(Xt=1;n<l.length;n++){var p=l[n];do p=p(!0);while(p!==null)}Li=null,pl=!1}catch(w){throw Li!==null&&(Li=Li.slice(n+1)),ya(no,j),w}finally{Xt=i,f=!1}}return null}var O=[],M=0,$=null,z=0,W=[],Q=0,fe=null,Se=1,Z="";function ye(n,i){O[M++]=z,O[M++]=$,$=n,z=i}function _e(n,i,l){W[Q++]=Se,W[Q++]=Z,W[Q++]=fe,fe=n;var p=Se;n=Z;var w=32-Vr(p)-1;p&=~(1<<w),l+=1;var S=32-Vr(i)+w;if(30<S){var F=w-w%5;S=(p&(1<<F)-1).toString(32),p>>=F,w-=F,Se=1<<32-Vr(i)+w|l<<w|p,Z=S+n}else Se=1<<S|l<<w|p,Z=n}function Oe(n){n.return!==null&&(ye(n,1),_e(n,1,0))}function je(n){for(;n===$;)$=O[--M],O[M]=null,z=O[--M],O[M]=null;for(;n===fe;)fe=W[--Q],W[Q]=null,Z=W[--Q],W[Q]=null,Se=W[--Q],W[Q]=null}var Le=null,Te=null,De=!1,Fe=null;function ft(n,i){var l=yi(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=n,i=n.deletions,i===null?(n.deletions=[l],n.flags|=16):i.push(l)}function rt(n,i){switch(n.tag){case 5:var l=n.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,Le=n,Te=Rn(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,Le=n,Te=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=fe!==null?{id:Se,overflow:Z}:null,n.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=yi(18,null,null,0),l.stateNode=i,l.return=n,n.child=l,Le=n,Te=null,!0):!1;default:return!1}}function Mt(n){return(n.mode&1)!==0&&(n.flags&128)===0}function at(n){if(De){var i=Te;if(i){var l=i;if(!rt(n,i)){if(Mt(n))throw Error(t(418));i=Rn(l.nextSibling);var p=Le;i&&rt(n,i)?ft(p,l):(n.flags=n.flags&-4097|2,De=!1,Le=n)}}else{if(Mt(n))throw Error(t(418));n.flags=n.flags&-4097|2,De=!1,Le=n}}}function Vt(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Le=n}function Tr(n){if(n!==Le)return!1;if(!De)return Vt(n),De=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Kc(n.type,n.memoizedProps)),i&&(i=Te)){if(Mt(n))throw Ut(),Error(t(418));for(;i;)ft(n,i),i=Rn(i.nextSibling)}if(Vt(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(i===0){Te=Rn(n.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}n=n.nextSibling}Te=null}}else Te=Le?Rn(n.stateNode.nextSibling):null;return!0}function Ut(){for(var n=Te;n;)n=Rn(n.nextSibling)}function nt(){Te=Le=null,De=!1}function Je(n){Fe===null?Fe=[n]:Fe.push(n)}var Mr=T.ReactCurrentBatchConfig;function Tt(n,i,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var p=l.stateNode}if(!p)throw Error(t(147,n));var w=p,S=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===S?i.ref:(i=function(F){var oe=w.refs;F===null?delete oe[S]:oe[S]=F},i._stringRef=S,i)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function Ht(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function xr(n){var i=n._init;return i(n._payload)}function dn(n){function i(ke,xe){if(n){var Ee=ke.deletions;Ee===null?(ke.deletions=[xe],ke.flags|=16):Ee.push(xe)}}function l(ke,xe){if(!n)return null;for(;xe!==null;)i(ke,xe),xe=xe.sibling;return null}function p(ke,xe){for(ke=new Map;xe!==null;)xe.key!==null?ke.set(xe.key,xe):ke.set(xe.index,xe),xe=xe.sibling;return ke}function w(ke,xe){return ke=Do(ke,xe),ke.index=0,ke.sibling=null,ke}function S(ke,xe,Ee){return ke.index=Ee,n?(Ee=ke.alternate,Ee!==null?(Ee=Ee.index,Ee<xe?(ke.flags|=2,xe):Ee):(ke.flags|=2,xe)):(ke.flags|=1048576,xe)}function F(ke){return n&&ke.alternate===null&&(ke.flags|=2),ke}function oe(ke,xe,Ee,Ke){return xe===null||xe.tag!==6?(xe=Ph(Ee,ke.mode,Ke),xe.return=ke,xe):(xe=w(xe,Ee),xe.return=ke,xe)}function pe(ke,xe,Ee,Ke){var mt=Ee.type;return mt===H?We(ke,xe,Ee.props.children,Ke,Ee.key):xe!==null&&(xe.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===ae&&xr(mt)===xe.type)?(Ke=w(xe,Ee.props),Ke.ref=Tt(ke,xe,Ee),Ke.return=ke,Ke):(Ke=ud(Ee.type,Ee.key,Ee.props,null,ke.mode,Ke),Ke.ref=Tt(ke,xe,Ee),Ke.return=ke,Ke)}function Ce(ke,xe,Ee,Ke){return xe===null||xe.tag!==4||xe.stateNode.containerInfo!==Ee.containerInfo||xe.stateNode.implementation!==Ee.implementation?(xe=Lh(Ee,ke.mode,Ke),xe.return=ke,xe):(xe=w(xe,Ee.children||[]),xe.return=ke,xe)}function We(ke,xe,Ee,Ke,mt){return xe===null||xe.tag!==7?(xe=_l(Ee,ke.mode,Ke,mt),xe.return=ke,xe):(xe=w(xe,Ee),xe.return=ke,xe)}function Ve(ke,xe,Ee){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return xe=Ph(""+xe,ke.mode,Ee),xe.return=ke,xe;if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case te:return Ee=ud(xe.type,xe.key,xe.props,null,ke.mode,Ee),Ee.ref=Tt(ke,null,xe),Ee.return=ke,Ee;case B:return xe=Lh(xe,ke.mode,Ee),xe.return=ke,xe;case ae:var Ke=xe._init;return Ve(ke,Ke(xe._payload),Ee)}if(pt(xe)||ne(xe))return xe=_l(xe,ke.mode,Ee,null),xe.return=ke,xe;Ht(ke,xe)}return null}function ze(ke,xe,Ee,Ke){var mt=xe!==null?xe.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return mt!==null?null:oe(ke,xe,""+Ee,Ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case te:return Ee.key===mt?pe(ke,xe,Ee,Ke):null;case B:return Ee.key===mt?Ce(ke,xe,Ee,Ke):null;case ae:return mt=Ee._init,ze(ke,xe,mt(Ee._payload),Ke)}if(pt(Ee)||ne(Ee))return mt!==null?null:We(ke,xe,Ee,Ke,null);Ht(ke,Ee)}return null}function tt(ke,xe,Ee,Ke,mt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return ke=ke.get(Ee)||null,oe(xe,ke,""+Ke,mt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case te:return ke=ke.get(Ke.key===null?Ee:Ke.key)||null,pe(xe,ke,Ke,mt);case B:return ke=ke.get(Ke.key===null?Ee:Ke.key)||null,Ce(xe,ke,Ke,mt);case ae:var kt=Ke._init;return tt(ke,xe,Ee,kt(Ke._payload),mt)}if(pt(Ke)||ne(Ke))return ke=ke.get(Ee)||null,We(xe,ke,Ke,mt,null);Ht(xe,Ke)}return null}function lt(ke,xe,Ee,Ke){for(var mt=null,kt=null,jt=xe,Rt=xe=0,Tn=null;jt!==null&&Rt<Ee.length;Rt++){jt.index>Rt?(Tn=jt,jt=null):Tn=jt.sibling;var nr=ze(ke,jt,Ee[Rt],Ke);if(nr===null){jt===null&&(jt=Tn);break}n&&jt&&nr.alternate===null&&i(ke,jt),xe=S(nr,xe,Rt),kt===null?mt=nr:kt.sibling=nr,kt=nr,jt=Tn}if(Rt===Ee.length)return l(ke,jt),De&&ye(ke,Rt),mt;if(jt===null){for(;Rt<Ee.length;Rt++)jt=Ve(ke,Ee[Rt],Ke),jt!==null&&(xe=S(jt,xe,Rt),kt===null?mt=jt:kt.sibling=jt,kt=jt);return De&&ye(ke,Rt),mt}for(jt=p(ke,jt);Rt<Ee.length;Rt++)Tn=tt(jt,ke,Rt,Ee[Rt],Ke),Tn!==null&&(n&&Tn.alternate!==null&&jt.delete(Tn.key===null?Rt:Tn.key),xe=S(Tn,xe,Rt),kt===null?mt=Tn:kt.sibling=Tn,kt=Tn);return n&&jt.forEach(function(Fo){return i(ke,Fo)}),De&&ye(ke,Rt),mt}function ut(ke,xe,Ee,Ke){var mt=ne(Ee);if(typeof mt!="function")throw Error(t(150));if(Ee=mt.call(Ee),Ee==null)throw Error(t(151));for(var kt=mt=null,jt=xe,Rt=xe=0,Tn=null,nr=Ee.next();jt!==null&&!nr.done;Rt++,nr=Ee.next()){jt.index>Rt?(Tn=jt,jt=null):Tn=jt.sibling;var Fo=ze(ke,jt,nr.value,Ke);if(Fo===null){jt===null&&(jt=Tn);break}n&&jt&&Fo.alternate===null&&i(ke,jt),xe=S(Fo,xe,Rt),kt===null?mt=Fo:kt.sibling=Fo,kt=Fo,jt=Tn}if(nr.done)return l(ke,jt),De&&ye(ke,Rt),mt;if(jt===null){for(;!nr.done;Rt++,nr=Ee.next())nr=Ve(ke,nr.value,Ke),nr!==null&&(xe=S(nr,xe,Rt),kt===null?mt=nr:kt.sibling=nr,kt=nr);return De&&ye(ke,Rt),mt}for(jt=p(ke,jt);!nr.done;Rt++,nr=Ee.next())nr=tt(jt,ke,Rt,nr.value,Ke),nr!==null&&(n&&nr.alternate!==null&&jt.delete(nr.key===null?Rt:nr.key),xe=S(nr,xe,Rt),kt===null?mt=nr:kt.sibling=nr,kt=nr);return n&&jt.forEach(function(q1){return i(ke,q1)}),De&&ye(ke,Rt),mt}function on(ke,xe,Ee,Ke){if(typeof Ee=="object"&&Ee!==null&&Ee.type===H&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case te:e:{for(var mt=Ee.key,kt=xe;kt!==null;){if(kt.key===mt){if(mt=Ee.type,mt===H){if(kt.tag===7){l(ke,kt.sibling),xe=w(kt,Ee.props.children),xe.return=ke,ke=xe;break e}}else if(kt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===ae&&xr(mt)===kt.type){l(ke,kt.sibling),xe=w(kt,Ee.props),xe.ref=Tt(ke,kt,Ee),xe.return=ke,ke=xe;break e}l(ke,kt);break}else i(ke,kt);kt=kt.sibling}Ee.type===H?(xe=_l(Ee.props.children,ke.mode,Ke,Ee.key),xe.return=ke,ke=xe):(Ke=ud(Ee.type,Ee.key,Ee.props,null,ke.mode,Ke),Ke.ref=Tt(ke,xe,Ee),Ke.return=ke,ke=Ke)}return F(ke);case B:e:{for(kt=Ee.key;xe!==null;){if(xe.key===kt)if(xe.tag===4&&xe.stateNode.containerInfo===Ee.containerInfo&&xe.stateNode.implementation===Ee.implementation){l(ke,xe.sibling),xe=w(xe,Ee.children||[]),xe.return=ke,ke=xe;break e}else{l(ke,xe);break}else i(ke,xe);xe=xe.sibling}xe=Lh(Ee,ke.mode,Ke),xe.return=ke,ke=xe}return F(ke);case ae:return kt=Ee._init,on(ke,xe,kt(Ee._payload),Ke)}if(pt(Ee))return lt(ke,xe,Ee,Ke);if(ne(Ee))return ut(ke,xe,Ee,Ke);Ht(ke,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,xe!==null&&xe.tag===6?(l(ke,xe.sibling),xe=w(xe,Ee),xe.return=ke,ke=xe):(l(ke,xe),xe=Ph(Ee,ke.mode,Ke),xe.return=ke,ke=xe),F(ke)):l(ke,xe)}return on}var Yr=dn(!0),Er=dn(!1),sn=$s(null),hn=null,Nr=null,Kt=null;function er(){Kt=Nr=hn=null}function Sr(n){var i=sn.current;ir(sn),n._currentValue=i}function tr(n,i,l){for(;n!==null;){var p=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,p!==null&&(p.childLanes|=i)):p!==null&&(p.childLanes&i)!==i&&(p.childLanes|=i),n===l)break;n=n.return}}function Or(n,i){hn=n,Kt=Nr=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(As=!0),n.firstContext=null)}function Ir(n){var i=n._currentValue;if(Kt!==n)if(n={context:n,memoizedValue:i,next:null},Nr===null){if(hn===null)throw Error(t(308));Nr=n,hn.dependencies={lanes:0,firstContext:n}}else Nr=Nr.next=n;return i}var dr=null;function En(n){dr===null?dr=[n]:dr.push(n)}function cr(n,i,l,p){var w=i.interleaved;return w===null?(l.next=l,En(i)):(l.next=w.next,w.next=l),i.interleaved=l,hr(n,p)}function hr(n,i){n.lanes|=i;var l=n.alternate;for(l!==null&&(l.lanes|=i),l=n,n=n.return;n!==null;)n.childLanes|=i,l=n.alternate,l!==null&&(l.childLanes|=i),l=n,n=n.return;return l.tag===3?l.stateNode:null}var Xr=!1;function bn(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kn(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ur(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function $r(n,i,l){var p=n.updateQueue;if(p===null)return null;if(p=p.shared,(rr&2)!==0){var w=p.pending;return w===null?i.next=i:(i.next=w.next,w.next=i),p.pending=i,hr(n,l)}return w=p.interleaved,w===null?(i.next=i,En(p)):(i.next=w.next,w.next=i),p.interleaved=i,hr(n,l)}function Cn(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var p=i.lanes;p&=n.pendingLanes,l|=p,i.lanes=l,ao(n,l)}}function fr(n,i){var l=n.updateQueue,p=n.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var w=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var F={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};S===null?w=S=F:S=S.next=F,l=l.next}while(l!==null);S===null?w=S=i:S=S.next=i}else w=S=i;l={baseState:p.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:p.shared,effects:p.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}function Pn(n,i,l,p){var w=n.updateQueue;Xr=!1;var S=w.firstBaseUpdate,F=w.lastBaseUpdate,oe=w.shared.pending;if(oe!==null){w.shared.pending=null;var pe=oe,Ce=pe.next;pe.next=null,F===null?S=Ce:F.next=Ce,F=pe;var We=n.alternate;We!==null&&(We=We.updateQueue,oe=We.lastBaseUpdate,oe!==F&&(oe===null?We.firstBaseUpdate=Ce:oe.next=Ce,We.lastBaseUpdate=pe))}if(S!==null){var Ve=w.baseState;F=0,We=Ce=pe=null,oe=S;do{var ze=oe.lane,tt=oe.eventTime;if((p&ze)===ze){We!==null&&(We=We.next={eventTime:tt,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var lt=n,ut=oe;switch(ze=i,tt=l,ut.tag){case 1:if(lt=ut.payload,typeof lt=="function"){Ve=lt.call(tt,Ve,ze);break e}Ve=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=ut.payload,ze=typeof lt=="function"?lt.call(tt,Ve,ze):lt,ze==null)break e;Ve=ve({},Ve,ze);break e;case 2:Xr=!0}}oe.callback!==null&&oe.lane!==0&&(n.flags|=64,ze=w.effects,ze===null?w.effects=[oe]:ze.push(oe))}else tt={eventTime:tt,lane:ze,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},We===null?(Ce=We=tt,pe=Ve):We=We.next=tt,F|=ze;if(oe=oe.next,oe===null){if(oe=w.shared.pending,oe===null)break;ze=oe,oe=ze.next,ze.next=null,w.lastBaseUpdate=ze,w.shared.pending=null}}while(!0);if(We===null&&(pe=Ve),w.baseState=pe,w.firstBaseUpdate=Ce,w.lastBaseUpdate=We,i=w.shared.interleaved,i!==null){w=i;do F|=w.lane,w=w.next;while(w!==i)}else S===null&&(w.shared.lanes=0);yl|=F,n.lanes=F,n.memoizedState=Ve}}function js(n,i,l){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var p=n[i],w=p.callback;if(w!==null){if(p.callback=null,p=l,typeof w!="function")throw Error(t(191,w));w.call(p)}}}var qs={},fn=$s(qs),qr=$s(qs),ua=$s(qs);function Ti(n){if(n===qs)throw Error(t(174));return n}function Ao(n,i){switch(lr(ua,i),lr(qr,n),lr(fn,qs),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Wt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=Wt(i,n)}ir(fn),lr(fn,i)}function pi(){ir(fn),ir(qr),ir(ua)}function Hu(n){Ti(ua.current);var i=Ti(fn.current),l=Wt(i,n.type);i!==l&&(lr(qr,n),lr(fn,l))}function Zc(n){qr.current===n&&(ir(fn),ir(qr))}var br=$s(0);function zs(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var eu=[];function tu(){for(var n=0;n<eu.length;n++)eu[n]._workInProgressVersionPrimary=null;eu.length=0}var nc=T.ReactCurrentDispatcher,sc=T.ReactCurrentBatchConfig,gi=0,kr=null,Qr=null,zr=null,Eo=!1,Oi=!1,Co=0,rh=0;function an(){throw Error(t(321))}function ic(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!Pr(n[l],i[l]))return!1;return!0}function gl(n,i,l,p,w,S){if(gi=S,kr=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,nc.current=n===null||n.memoizedState===null?p1:g1,n=l(p,w),Oi){S=0;do{if(Oi=!1,Co=0,25<=S)throw Error(t(301));S+=1,zr=Qr=null,i.updateQueue=null,nc.current=m1,n=l(p,w)}while(Oi)}if(nc.current=Yu,i=Qr!==null&&Qr.next!==null,gi=0,zr=Qr=kr=null,Eo=!1,i)throw Error(t(300));return n}function mi(){var n=Co!==0;return Co=0,n}function Ws(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?kr.memoizedState=zr=n:zr=zr.next=n,zr}function us(){if(Qr===null){var n=kr.alternate;n=n!==null?n.memoizedState:null}else n=Qr.next;var i=zr===null?kr.memoizedState:zr.next;if(i!==null)zr=i,Qr=n;else{if(n===null)throw Error(t(310));Qr=n,n={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},zr===null?kr.memoizedState=zr=n:zr=zr.next=n}return zr}function ml(n,i){return typeof i=="function"?i(n):i}function ac(n){var i=us(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var p=Qr,w=p.baseQueue,S=l.pending;if(S!==null){if(w!==null){var F=w.next;w.next=S.next,S.next=F}p.baseQueue=w=S,l.pending=null}if(w!==null){S=w.next,p=p.baseState;var oe=F=null,pe=null,Ce=S;do{var We=Ce.lane;if((gi&We)===We)pe!==null&&(pe=pe.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),p=Ce.hasEagerState?Ce.eagerState:n(p,Ce.action);else{var Ve={lane:We,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};pe===null?(oe=pe=Ve,F=p):pe=pe.next=Ve,kr.lanes|=We,yl|=We}Ce=Ce.next}while(Ce!==null&&Ce!==S);pe===null?F=p:pe.next=oe,Pr(p,i.memoizedState)||(As=!0),i.memoizedState=p,i.baseState=F,i.baseQueue=pe,l.lastRenderedState=p}if(n=l.interleaved,n!==null){w=n;do S=w.lane,kr.lanes|=S,yl|=S,w=w.next;while(w!==n)}else w===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function da(n){var i=us(),l=i.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var p=l.dispatch,w=l.pending,S=i.memoizedState;if(w!==null){l.pending=null;var F=w=w.next;do S=n(S,F.action),F=F.next;while(F!==w);Pr(S,i.memoizedState)||(As=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),l.lastRenderedState=S}return[S,p]}function Vu(){}function ru(n,i){var l=kr,p=us(),w=i(),S=!Pr(p.memoizedState,w);if(S&&(p.memoizedState=w,As=!0),p=p.queue,cc(Ku.bind(null,l,p,n),[n]),p.getSnapshot!==i||S||zr!==null&&zr.memoizedState.tag&1){if(l.flags|=2048,ds(9,nu.bind(null,l,p,w,i),void 0,null),Ln===null)throw Error(t(349));(gi&30)!==0||Gu(l,i,w)}return w}function Gu(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=kr.updateQueue,i===null?(i={lastEffect:null,stores:null},kr.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function nu(n,i,l,p){i.value=l,i.getSnapshot=p,Po(i)&&oc(n)}function Ku(n,i,l){return l(function(){Po(i)&&oc(n)})}function Po(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!Pr(n,l)}catch{return!0}}function oc(n){var i=hr(n,1);i!==null&&Bi(i,n,1,-1)}function vl(n){var i=Ws();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:n},i.queue=n,n=n.dispatch=f1.bind(null,kr,n),[i.memoizedState,n]}function ds(n,i,l,p){return n={tag:n,create:i,destroy:l,deps:p,next:null},i=kr.updateQueue,i===null?(i={lastEffect:null,stores:null},kr.updateQueue=i,i.lastEffect=n.next=n):(l=i.lastEffect,l===null?i.lastEffect=n.next=n:(p=l.next,l.next=n,n.next=p,i.lastEffect=n)),n}function Ii(){return us().memoizedState}function Hs(n,i,l,p){var w=Ws();kr.flags|=n,w.memoizedState=ds(1|i,l,void 0,p===void 0?null:p)}function Ka(n,i,l,p){var w=us();p=p===void 0?null:p;var S=void 0;if(Qr!==null){var F=Qr.memoizedState;if(S=F.destroy,p!==null&&ic(p,F.deps)){w.memoizedState=ds(i,l,S,p);return}}kr.flags|=n,w.memoizedState=ds(1|i,l,S,p)}function lc(n,i){return Hs(8390656,8,n,i)}function cc(n,i){return Ka(2048,8,n,i)}function Ju(n,i){return Ka(4,2,n,i)}function uc(n,i){return Ka(4,4,n,i)}function dc(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function sp(n,i,l){return l=l!=null?l.concat([n]):null,Ka(4,4,dc.bind(null,i,n),l)}function nh(){}function ip(n,i){var l=us();i=i===void 0?null:i;var p=l.memoizedState;return p!==null&&i!==null&&ic(i,p[1])?p[0]:(l.memoizedState=[n,i],n)}function ap(n,i){var l=us();i=i===void 0?null:i;var p=l.memoizedState;return p!==null&&i!==null&&ic(i,p[1])?p[0]:(n=n(),l.memoizedState=[n,i],n)}function op(n,i,l){return(gi&21)===0?(n.baseState&&(n.baseState=!1,As=!0),n.memoizedState=l):(Pr(l,i)||(l=Jo(),kr.lanes|=l,yl|=l,n.baseState=!0),i)}function d1(n,i){var l=Xt;Xt=l!==0&&4>l?l:4,n(!0);var p=sc.transition;sc.transition={};try{n(!1),i()}finally{Xt=l,sc.transition=p}}function lp(){return us().memoizedState}function h1(n,i,l){var p=Io(n);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},cp(n))up(i,l);else if(l=cr(n,i,l,p),l!==null){var w=fs();Bi(l,n,p,w),dp(l,i,p)}}function f1(n,i,l){var p=Io(n),w={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(cp(n))up(i,w);else{var S=n.alternate;if(n.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var F=i.lastRenderedState,oe=S(F,l);if(w.hasEagerState=!0,w.eagerState=oe,Pr(oe,F)){var pe=i.interleaved;pe===null?(w.next=w,En(i)):(w.next=pe.next,pe.next=w),i.interleaved=w;return}}catch{}finally{}l=cr(n,i,w,p),l!==null&&(w=fs(),Bi(l,n,p,w),dp(l,i,p))}}function cp(n){var i=n.alternate;return n===kr||i!==null&&i===kr}function up(n,i){Oi=Eo=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function dp(n,i,l){if((l&4194240)!==0){var p=i.lanes;p&=n.pendingLanes,l|=p,i.lanes=l,ao(n,l)}}var Yu={readContext:Ir,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},p1={readContext:Ir,useCallback:function(n,i){return Ws().memoizedState=[n,i===void 0?null:i],n},useContext:Ir,useEffect:lc,useImperativeHandle:function(n,i,l){return l=l!=null?l.concat([n]):null,Hs(4194308,4,dc.bind(null,i,n),l)},useLayoutEffect:function(n,i){return Hs(4194308,4,n,i)},useInsertionEffect:function(n,i){return Hs(4,2,n,i)},useMemo:function(n,i){var l=Ws();return i=i===void 0?null:i,n=n(),l.memoizedState=[n,i],n},useReducer:function(n,i,l){var p=Ws();return i=l!==void 0?l(i):i,p.memoizedState=p.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},p.queue=n,n=n.dispatch=h1.bind(null,kr,n),[p.memoizedState,n]},useRef:function(n){var i=Ws();return n={current:n},i.memoizedState=n},useState:vl,useDebugValue:nh,useDeferredValue:function(n){return Ws().memoizedState=n},useTransition:function(){var n=vl(!1),i=n[0];return n=d1.bind(null,n[1]),Ws().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,l){var p=kr,w=Ws();if(De){if(l===void 0)throw Error(t(407));l=l()}else{if(l=i(),Ln===null)throw Error(t(349));(gi&30)!==0||Gu(p,i,l)}w.memoizedState=l;var S={value:l,getSnapshot:i};return w.queue=S,lc(Ku.bind(null,p,S,n),[n]),p.flags|=2048,ds(9,nu.bind(null,p,S,l,i),void 0,null),l},useId:function(){var n=Ws(),i=Ln.identifierPrefix;if(De){var l=Z,p=Se;l=(p&~(1<<32-Vr(p)-1)).toString(32)+l,i=":"+i+"R"+l,l=Co++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=rh++,i=":"+i+"r"+l.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},g1={readContext:Ir,useCallback:ip,useContext:Ir,useEffect:cc,useImperativeHandle:sp,useInsertionEffect:Ju,useLayoutEffect:uc,useMemo:ap,useReducer:ac,useRef:Ii,useState:function(){return ac(ml)},useDebugValue:nh,useDeferredValue:function(n){var i=us();return op(i,Qr.memoizedState,n)},useTransition:function(){var n=ac(ml)[0],i=us().memoizedState;return[n,i]},useMutableSource:Vu,useSyncExternalStore:ru,useId:lp,unstable_isNewReconciler:!1},m1={readContext:Ir,useCallback:ip,useContext:Ir,useEffect:cc,useImperativeHandle:sp,useInsertionEffect:Ju,useLayoutEffect:uc,useMemo:ap,useReducer:da,useRef:Ii,useState:function(){return da(ml)},useDebugValue:nh,useDeferredValue:function(n){var i=us();return Qr===null?i.memoizedState=n:op(i,Qr.memoizedState,n)},useTransition:function(){var n=da(ml)[0],i=us().memoizedState;return[n,i]},useMutableSource:Vu,useSyncExternalStore:ru,useId:lp,unstable_isNewReconciler:!1};function Ri(n,i){if(n&&n.defaultProps){i=ve({},i),n=n.defaultProps;for(var l in n)i[l]===void 0&&(i[l]=n[l]);return i}return i}function sh(n,i,l,p){i=n.memoizedState,l=l(p,i),l=l==null?i:ve({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Xu={isMounted:function(n){return(n=n._reactInternals)?vn(n)===n:!1},enqueueSetState:function(n,i,l){n=n._reactInternals;var p=fs(),w=Io(n),S=Ur(p,w);S.payload=i,l!=null&&(S.callback=l),i=$r(n,S,w),i!==null&&(Bi(i,n,w,p),Cn(i,n,w))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var p=fs(),w=Io(n),S=Ur(p,w);S.tag=1,S.payload=i,l!=null&&(S.callback=l),i=$r(n,S,w),i!==null&&(Bi(i,n,w,p),Cn(i,n,w))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=fs(),p=Io(n),w=Ur(l,p);w.tag=2,i!=null&&(w.callback=i),i=$r(n,w,p),i!==null&&(Bi(i,n,p,l),Cn(i,n,p))}};function hp(n,i,l,p,w,S,F){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(p,S,F):i.prototype&&i.prototype.isPureReactComponent?!zn(l,p)||!zn(w,S):!0}function fp(n,i,l){var p=!1,w=ca,S=i.contextType;return typeof S=="object"&&S!==null?S=Ir(S):(w=Gn(i)?Va:wn.current,p=i.contextTypes,S=(p=p!=null)?jo(n,w):ca),i=new i(l,S),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Xu,n.stateNode=i,i._reactInternals=n,p&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=w,n.__reactInternalMemoizedMaskedChildContext=S),i}function pp(n,i,l,p){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,p),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,p),i.state!==n&&Xu.enqueueReplaceState(i,i.state,null)}function ih(n,i,l,p){var w=n.stateNode;w.props=l,w.state=n.memoizedState,w.refs={},bn(n);var S=i.contextType;typeof S=="object"&&S!==null?w.context=Ir(S):(S=Gn(i)?Va:wn.current,w.context=jo(n,S)),w.state=n.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(sh(n,i,S,l),w.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(i=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),i!==w.state&&Xu.enqueueReplaceState(w,w.state,null),Pn(n,l,w,p),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308)}function hc(n,i){try{var l="",p=i;do l+=le(p),p=p.return;while(p);var w=l}catch(S){w=`
Error generating stack: `+S.message+`
`+S.stack}return{value:n,source:i,stack:w,digest:null}}function ah(n,i,l){return{value:n,source:null,stack:l??null,digest:i??null}}function oh(n,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var v1=typeof WeakMap=="function"?WeakMap:Map;function gp(n,i,l){l=Ur(-1,l),l.tag=3,l.payload={element:null};var p=i.value;return l.callback=function(){sd||(sd=!0,_h=p),oh(n,i)},l}function mp(n,i,l){l=Ur(-1,l),l.tag=3;var p=n.type.getDerivedStateFromError;if(typeof p=="function"){var w=i.value;l.payload=function(){return p(w)},l.callback=function(){oh(n,i)}}var S=n.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(l.callback=function(){oh(n,i),typeof p!="function"&&(To===null?To=new Set([this]):To.add(this));var F=i.stack;this.componentDidCatch(i.value,{componentStack:F!==null?F:""})}),l}function vp(n,i,l){var p=n.pingCache;if(p===null){p=n.pingCache=new v1;var w=new Set;p.set(i,w)}else w=p.get(i),w===void 0&&(w=new Set,p.set(i,w));w.has(l)||(w.add(l),n=L1.bind(null,n,i,l),i.then(n,n))}function yp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function xp(n,i,l,p,w){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=Ur(-1,1),i.tag=2,$r(l,i,1))),l.lanes|=1),n):(n.flags|=65536,n.lanes=w,n)}var y1=T.ReactCurrentOwner,As=!1;function hs(n,i,l,p){i.child=n===null?Er(i,null,l,p):Yr(i,n.child,l,p)}function wp(n,i,l,p,w){l=l.render;var S=i.ref;return Or(i,w),p=gl(n,i,l,p,S,w),l=mi(),n!==null&&!As?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~w,Ja(n,i,w)):(De&&l&&Oe(i),i.flags|=1,hs(n,i,p,w),i.child)}function bp(n,i,l,p,w){if(n===null){var S=l.type;return typeof S=="function"&&!Ch(S)&&S.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=S,_p(n,i,S,p,w)):(n=ud(l.type,null,p,i,i.mode,w),n.ref=i.ref,n.return=i,i.child=n)}if(S=n.child,(n.lanes&w)===0){var F=S.memoizedProps;if(l=l.compare,l=l!==null?l:zn,l(F,p)&&n.ref===i.ref)return Ja(n,i,w)}return i.flags|=1,n=Do(S,p),n.ref=i.ref,n.return=i,i.child=n}function _p(n,i,l,p,w){if(n!==null){var S=n.memoizedProps;if(zn(S,p)&&n.ref===i.ref)if(As=!1,i.pendingProps=p=S,(n.lanes&w)!==0)(n.flags&131072)!==0&&(As=!0);else return i.lanes=n.lanes,Ja(n,i,w)}return lh(n,i,l,p,w)}function Np(n,i,l){var p=i.pendingProps,w=p.children,S=n!==null?n.memoizedState:null;if(p.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(pc,Vs),Vs|=l;else{if((l&1073741824)===0)return n=S!==null?S.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,lr(pc,Vs),Vs|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=S!==null?S.baseLanes:l,lr(pc,Vs),Vs|=p}else S!==null?(p=S.baseLanes|l,i.memoizedState=null):p=l,lr(pc,Vs),Vs|=p;return hs(n,i,w,l),i.child}function Sp(n,i){var l=i.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function lh(n,i,l,p,w){var S=Gn(l)?Va:wn.current;return S=jo(i,S),Or(i,w),l=gl(n,i,l,p,S,w),p=mi(),n!==null&&!As?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~w,Ja(n,i,w)):(De&&p&&Oe(i),i.flags|=1,hs(n,i,l,w),i.child)}function kp(n,i,l,p,w){if(Gn(l)){var S=!0;Ga(i)}else S=!1;if(Or(i,w),i.stateNode===null)Zu(n,i),fp(i,l,p),ih(i,l,p,w),p=!0;else if(n===null){var F=i.stateNode,oe=i.memoizedProps;F.props=oe;var pe=F.context,Ce=l.contextType;typeof Ce=="object"&&Ce!==null?Ce=Ir(Ce):(Ce=Gn(l)?Va:wn.current,Ce=jo(i,Ce));var We=l.getDerivedStateFromProps,Ve=typeof We=="function"||typeof F.getSnapshotBeforeUpdate=="function";Ve||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(oe!==p||pe!==Ce)&&pp(i,F,p,Ce),Xr=!1;var ze=i.memoizedState;F.state=ze,Pn(i,p,F,w),pe=i.memoizedState,oe!==p||ze!==pe||Vn.current||Xr?(typeof We=="function"&&(sh(i,l,We,p),pe=i.memoizedState),(oe=Xr||hp(i,l,oe,p,ze,pe,Ce))?(Ve||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(i.flags|=4194308)):(typeof F.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=p,i.memoizedState=pe),F.props=p,F.state=pe,F.context=Ce,p=oe):(typeof F.componentDidMount=="function"&&(i.flags|=4194308),p=!1)}else{F=i.stateNode,Kn(n,i),oe=i.memoizedProps,Ce=i.type===i.elementType?oe:Ri(i.type,oe),F.props=Ce,Ve=i.pendingProps,ze=F.context,pe=l.contextType,typeof pe=="object"&&pe!==null?pe=Ir(pe):(pe=Gn(l)?Va:wn.current,pe=jo(i,pe));var tt=l.getDerivedStateFromProps;(We=typeof tt=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(oe!==Ve||ze!==pe)&&pp(i,F,p,pe),Xr=!1,ze=i.memoizedState,F.state=ze,Pn(i,p,F,w);var lt=i.memoizedState;oe!==Ve||ze!==lt||Vn.current||Xr?(typeof tt=="function"&&(sh(i,l,tt,p),lt=i.memoizedState),(Ce=Xr||hp(i,l,Ce,p,ze,lt,pe)||!1)?(We||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(p,lt,pe),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(p,lt,pe)),typeof F.componentDidUpdate=="function"&&(i.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof F.componentDidUpdate!="function"||oe===n.memoizedProps&&ze===n.memoizedState||(i.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&ze===n.memoizedState||(i.flags|=1024),i.memoizedProps=p,i.memoizedState=lt),F.props=p,F.state=lt,F.context=pe,p=Ce):(typeof F.componentDidUpdate!="function"||oe===n.memoizedProps&&ze===n.memoizedState||(i.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||oe===n.memoizedProps&&ze===n.memoizedState||(i.flags|=1024),p=!1)}return ch(n,i,l,p,S,w)}function ch(n,i,l,p,w,S){Sp(n,i);var F=(i.flags&128)!==0;if(!p&&!F)return w&&Wu(i,l,!1),Ja(n,i,S);p=i.stateNode,y1.current=i;var oe=F&&typeof l.getDerivedStateFromError!="function"?null:p.render();return i.flags|=1,n!==null&&F?(i.child=Yr(i,n.child,null,S),i.child=Yr(i,null,oe,S)):hs(n,i,oe,S),i.memoizedState=p.state,w&&Wu(i,l,!0),i.child}function jp(n){var i=n.stateNode;i.pendingContext?zu(n,i.pendingContext,i.pendingContext!==i.context):i.context&&zu(n,i.context,!1),Ao(n,i.containerInfo)}function Ap(n,i,l,p,w){return nt(),Je(w),i.flags|=256,hs(n,i,l,p),i.child}var uh={dehydrated:null,treeContext:null,retryLane:0};function dh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Ep(n,i,l){var p=i.pendingProps,w=br.current,S=!1,F=(i.flags&128)!==0,oe;if((oe=F)||(oe=n!==null&&n.memoizedState===null?!1:(w&2)!==0),oe?(S=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(w|=1),lr(br,w&1),n===null)return at(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(F=p.children,n=p.fallback,S?(p=i.mode,S=i.child,F={mode:"hidden",children:F},(p&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=F):S=dd(F,p,0,null),n=_l(n,p,l,null),S.return=i,n.return=i,S.sibling=n,i.child=S,i.child.memoizedState=dh(l),i.memoizedState=uh,n):hh(i,F));if(w=n.memoizedState,w!==null&&(oe=w.dehydrated,oe!==null))return x1(n,i,F,p,oe,w,l);if(S){S=p.fallback,F=i.mode,w=n.child,oe=w.sibling;var pe={mode:"hidden",children:p.children};return(F&1)===0&&i.child!==w?(p=i.child,p.childLanes=0,p.pendingProps=pe,i.deletions=null):(p=Do(w,pe),p.subtreeFlags=w.subtreeFlags&14680064),oe!==null?S=Do(oe,S):(S=_l(S,F,l,null),S.flags|=2),S.return=i,p.return=i,p.sibling=S,i.child=p,p=S,S=i.child,F=n.child.memoizedState,F=F===null?dh(l):{baseLanes:F.baseLanes|l,cachePool:null,transitions:F.transitions},S.memoizedState=F,S.childLanes=n.childLanes&~l,i.memoizedState=uh,p}return S=n.child,n=S.sibling,p=Do(S,{mode:"visible",children:p.children}),(i.mode&1)===0&&(p.lanes=l),p.return=i,p.sibling=null,n!==null&&(l=i.deletions,l===null?(i.deletions=[n],i.flags|=16):l.push(n)),i.child=p,i.memoizedState=null,p}function hh(n,i){return i=dd({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Qu(n,i,l,p){return p!==null&&Je(p),Yr(i,n.child,null,l),n=hh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function x1(n,i,l,p,w,S,F){if(l)return i.flags&256?(i.flags&=-257,p=ah(Error(t(422))),Qu(n,i,F,p)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(S=p.fallback,w=i.mode,p=dd({mode:"visible",children:p.children},w,0,null),S=_l(S,w,F,null),S.flags|=2,p.return=i,S.return=i,p.sibling=S,i.child=p,(i.mode&1)!==0&&Yr(i,n.child,null,F),i.child.memoizedState=dh(F),i.memoizedState=uh,S);if((i.mode&1)===0)return Qu(n,i,F,null);if(w.data==="$!"){if(p=w.nextSibling&&w.nextSibling.dataset,p)var oe=p.dgst;return p=oe,S=Error(t(419)),p=ah(S,p,void 0),Qu(n,i,F,p)}if(oe=(F&n.childLanes)!==0,As||oe){if(p=Ln,p!==null){switch(F&-F){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(p.suspendedLanes|F))!==0?0:w,w!==0&&w!==S.retryLane&&(S.retryLane=w,hr(n,w),Bi(p,n,w,-1))}return Eh(),p=ah(Error(t(421))),Qu(n,i,F,p)}return w.data==="$?"?(i.flags|=128,i.child=n.child,i=T1.bind(null,n),w._reactRetry=i,null):(n=S.treeContext,Te=Rn(w.nextSibling),Le=i,De=!0,Fe=null,n!==null&&(W[Q++]=Se,W[Q++]=Z,W[Q++]=fe,Se=n.id,Z=n.overflow,fe=i),i=hh(i,p.children),i.flags|=4096,i)}function Cp(n,i,l){n.lanes|=i;var p=n.alternate;p!==null&&(p.lanes|=i),tr(n.return,i,l)}function fh(n,i,l,p,w){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:w}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=p,S.tail=l,S.tailMode=w)}function Pp(n,i,l){var p=i.pendingProps,w=p.revealOrder,S=p.tail;if(hs(n,i,p.children,l),p=br.current,(p&2)!==0)p=p&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Cp(n,l,i);else if(n.tag===19)Cp(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}p&=1}if(lr(br,p),(i.mode&1)===0)i.memoizedState=null;else switch(w){case"forwards":for(l=i.child,w=null;l!==null;)n=l.alternate,n!==null&&zs(n)===null&&(w=l),l=l.sibling;l=w,l===null?(w=i.child,i.child=null):(w=l.sibling,l.sibling=null),fh(i,!1,w,l,S);break;case"backwards":for(l=null,w=i.child,i.child=null;w!==null;){if(n=w.alternate,n!==null&&zs(n)===null){i.child=w;break}n=w.sibling,w.sibling=l,l=w,w=n}fh(i,!0,l,null,S);break;case"together":fh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Zu(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ja(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),yl|=i.lanes,(l&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,l=Do(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Do(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function w1(n,i,l){switch(i.tag){case 3:jp(i),nt();break;case 5:Hu(i);break;case 1:Gn(i.type)&&Ga(i);break;case 4:Ao(i,i.stateNode.containerInfo);break;case 10:var p=i.type._context,w=i.memoizedProps.value;lr(sn,p._currentValue),p._currentValue=w;break;case 13:if(p=i.memoizedState,p!==null)return p.dehydrated!==null?(lr(br,br.current&1),i.flags|=128,null):(l&i.child.childLanes)!==0?Ep(n,i,l):(lr(br,br.current&1),n=Ja(n,i,l),n!==null?n.sibling:null);lr(br,br.current&1);break;case 19:if(p=(l&i.childLanes)!==0,(n.flags&128)!==0){if(p)return Pp(n,i,l);i.flags|=128}if(w=i.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),lr(br,br.current),p)break;return null;case 22:case 23:return i.lanes=0,Np(n,i,l)}return Ja(n,i,l)}var Lp,ph,Tp,Op;Lp=function(n,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},ph=function(){},Tp=function(n,i,l,p){var w=n.memoizedProps;if(w!==p){n=i.stateNode,Ti(fn.current);var S=null;switch(l){case"input":w=Xe(n,w),p=Xe(n,p),S=[];break;case"select":w=ve({},w,{value:void 0}),p=ve({},p,{value:void 0}),S=[];break;case"textarea":w=vt(n,w),p=vt(n,p),S=[];break;default:typeof w.onClick!="function"&&typeof p.onClick=="function"&&(n.onclick=No)}mr(l,p);var F;l=null;for(Ce in w)if(!p.hasOwnProperty(Ce)&&w.hasOwnProperty(Ce)&&w[Ce]!=null)if(Ce==="style"){var oe=w[Ce];for(F in oe)oe.hasOwnProperty(F)&&(l||(l={}),l[F]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(a.hasOwnProperty(Ce)?S||(S=[]):(S=S||[]).push(Ce,null));for(Ce in p){var pe=p[Ce];if(oe=w!=null?w[Ce]:void 0,p.hasOwnProperty(Ce)&&pe!==oe&&(pe!=null||oe!=null))if(Ce==="style")if(oe){for(F in oe)!oe.hasOwnProperty(F)||pe&&pe.hasOwnProperty(F)||(l||(l={}),l[F]="");for(F in pe)pe.hasOwnProperty(F)&&oe[F]!==pe[F]&&(l||(l={}),l[F]=pe[F])}else l||(S||(S=[]),S.push(Ce,l)),l=pe;else Ce==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,oe=oe?oe.__html:void 0,pe!=null&&oe!==pe&&(S=S||[]).push(Ce,pe)):Ce==="children"?typeof pe!="string"&&typeof pe!="number"||(S=S||[]).push(Ce,""+pe):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(a.hasOwnProperty(Ce)?(pe!=null&&Ce==="onScroll"&&ur("scroll",n),S||oe===pe||(S=[])):(S=S||[]).push(Ce,pe))}l&&(S=S||[]).push("style",l);var Ce=S;(i.updateQueue=Ce)&&(i.flags|=4)}},Op=function(n,i,l,p){l!==p&&(i.flags|=4)};function su(n,i){if(!De)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:p.sibling=null}}function Jn(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,p=0;if(i)for(var w=n.child;w!==null;)l|=w.lanes|w.childLanes,p|=w.subtreeFlags&14680064,p|=w.flags&14680064,w.return=n,w=w.sibling;else for(w=n.child;w!==null;)l|=w.lanes|w.childLanes,p|=w.subtreeFlags,p|=w.flags,w.return=n,w=w.sibling;return n.subtreeFlags|=p,n.childLanes=l,i}function b1(n,i,l){var p=i.pendingProps;switch(je(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(i),null;case 1:return Gn(i.type)&&rc(),Jn(i),null;case 3:return p=i.stateNode,pi(),ir(Vn),ir(wn),tu(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(n===null||n.child===null)&&(Tr(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Fe!==null&&(kh(Fe),Fe=null))),ph(n,i),Jn(i),null;case 5:Zc(i);var w=Ti(ua.current);if(l=i.type,n!==null&&i.stateNode!=null)Tp(n,i,l,p,w),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!p){if(i.stateNode===null)throw Error(t(166));return Jn(i),null}if(n=Ti(fn.current),Tr(i)){p=i.stateNode,l=i.type;var S=i.memoizedProps;switch(p[fi]=i,p[So]=S,n=(i.mode&1)!==0,l){case"dialog":ur("cancel",p),ur("close",p);break;case"iframe":case"object":case"embed":ur("load",p);break;case"video":case"audio":for(w=0;w<oa.length;w++)ur(oa[w],p);break;case"source":ur("error",p);break;case"img":case"image":case"link":ur("error",p),ur("load",p);break;case"details":ur("toggle",p);break;case"input":X(p,S),ur("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!S.multiple},ur("invalid",p);break;case"textarea":gt(p,S),ur("invalid",p)}mr(l,S),w=null;for(var F in S)if(S.hasOwnProperty(F)){var oe=S[F];F==="children"?typeof oe=="string"?p.textContent!==oe&&(S.suppressHydrationWarning!==!0&&tc(p.textContent,oe,n),w=["children",oe]):typeof oe=="number"&&p.textContent!==""+oe&&(S.suppressHydrationWarning!==!0&&tc(p.textContent,oe,n),w=["children",""+oe]):a.hasOwnProperty(F)&&oe!=null&&F==="onScroll"&&ur("scroll",p)}switch(l){case"input":Ie(p),bt(p,S,!0);break;case"textarea":Ie(p),zt(p);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(p.onclick=No)}p=w,i.updateQueue=p,p!==null&&(i.flags|=4)}else{F=w.nodeType===9?w:w.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Lt(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=F.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof p.is=="string"?n=F.createElement(l,{is:p.is}):(n=F.createElement(l),l==="select"&&(F=n,p.multiple?F.multiple=!0:p.size&&(F.size=p.size))):n=F.createElementNS(n,l),n[fi]=i,n[So]=p,Lp(n,i,!1,!1),i.stateNode=n;e:{switch(F=wt(l,p),l){case"dialog":ur("cancel",n),ur("close",n),w=p;break;case"iframe":case"object":case"embed":ur("load",n),w=p;break;case"video":case"audio":for(w=0;w<oa.length;w++)ur(oa[w],n);w=p;break;case"source":ur("error",n),w=p;break;case"img":case"image":case"link":ur("error",n),ur("load",n),w=p;break;case"details":ur("toggle",n),w=p;break;case"input":X(n,p),w=Xe(n,p),ur("invalid",n);break;case"option":w=p;break;case"select":n._wrapperState={wasMultiple:!!p.multiple},w=ve({},p,{value:void 0}),ur("invalid",n);break;case"textarea":gt(n,p),w=vt(n,p),ur("invalid",n);break;default:w=p}mr(l,w),oe=w;for(S in oe)if(oe.hasOwnProperty(S)){var pe=oe[S];S==="style"?yt(n,pe):S==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,pe!=null&&Be(n,pe)):S==="children"?typeof pe=="string"?(l!=="textarea"||pe!=="")&&Ue(n,pe):typeof pe=="number"&&Ue(n,""+pe):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(a.hasOwnProperty(S)?pe!=null&&S==="onScroll"&&ur("scroll",n):pe!=null&&E(n,S,pe,F))}switch(l){case"input":Ie(n),bt(n,p,!1);break;case"textarea":Ie(n),zt(n);break;case"option":p.value!=null&&n.setAttribute("value",""+ce(p.value));break;case"select":n.multiple=!!p.multiple,S=p.value,S!=null?Qe(n,!!p.multiple,S,!1):p.defaultValue!=null&&Qe(n,!!p.multiple,p.defaultValue,!0);break;default:typeof w.onClick=="function"&&(n.onclick=No)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Jn(i),null;case 6:if(n&&i.stateNode!=null)Op(n,i,n.memoizedProps,p);else{if(typeof p!="string"&&i.stateNode===null)throw Error(t(166));if(l=Ti(ua.current),Ti(fn.current),Tr(i)){if(p=i.stateNode,l=i.memoizedProps,p[fi]=i,(S=p.nodeValue!==l)&&(n=Le,n!==null))switch(n.tag){case 3:tc(p.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&tc(p.nodeValue,l,(n.mode&1)!==0)}S&&(i.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[fi]=i,i.stateNode=p}return Jn(i),null;case 13:if(ir(br),p=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(De&&Te!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ut(),nt(),i.flags|=98560,S=!1;else if(S=Tr(i),p!==null&&p.dehydrated!==null){if(n===null){if(!S)throw Error(t(318));if(S=i.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(t(317));S[fi]=i}else nt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Jn(i),S=!1}else Fe!==null&&(kh(Fe),Fe=null),S=!0;if(!S)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=l,i):(p=p!==null,p!==(n!==null&&n.memoizedState!==null)&&p&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(br.current&1)!==0?_n===0&&(_n=3):Eh())),i.updateQueue!==null&&(i.flags|=4),Jn(i),null);case 4:return pi(),ph(n,i),n===null&&qa(i.stateNode.containerInfo),Jn(i),null;case 10:return Sr(i.type._context),Jn(i),null;case 17:return Gn(i.type)&&rc(),Jn(i),null;case 19:if(ir(br),S=i.memoizedState,S===null)return Jn(i),null;if(p=(i.flags&128)!==0,F=S.rendering,F===null)if(p)su(S,!1);else{if(_n!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(F=zs(n),F!==null){for(i.flags|=128,su(S,!1),p=F.updateQueue,p!==null&&(i.updateQueue=p,i.flags|=4),i.subtreeFlags=0,p=l,l=i.child;l!==null;)S=l,n=p,S.flags&=14680066,F=S.alternate,F===null?(S.childLanes=0,S.lanes=n,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=F.childLanes,S.lanes=F.lanes,S.child=F.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=F.memoizedProps,S.memoizedState=F.memoizedState,S.updateQueue=F.updateQueue,S.type=F.type,n=F.dependencies,S.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return lr(br,br.current&1|2),i.child}n=n.sibling}S.tail!==null&&wr()>gc&&(i.flags|=128,p=!0,su(S,!1),i.lanes=4194304)}else{if(!p)if(n=zs(F),n!==null){if(i.flags|=128,p=!0,l=n.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),su(S,!0),S.tail===null&&S.tailMode==="hidden"&&!F.alternate&&!De)return Jn(i),null}else 2*wr()-S.renderingStartTime>gc&&l!==1073741824&&(i.flags|=128,p=!0,su(S,!1),i.lanes=4194304);S.isBackwards?(F.sibling=i.child,i.child=F):(l=S.last,l!==null?l.sibling=F:i.child=F,S.last=F)}return S.tail!==null?(i=S.tail,S.rendering=i,S.tail=i.sibling,S.renderingStartTime=wr(),i.sibling=null,l=br.current,lr(br,p?l&1|2:l&1),i):(Jn(i),null);case 22:case 23:return Ah(),p=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==p&&(i.flags|=8192),p&&(i.mode&1)!==0?(Vs&1073741824)!==0&&(Jn(i),i.subtreeFlags&6&&(i.flags|=8192)):Jn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function _1(n,i){switch(je(i),i.tag){case 1:return Gn(i.type)&&rc(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return pi(),ir(Vn),ir(wn),tu(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Zc(i),null;case 13:if(ir(br),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));nt()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ir(br),null;case 4:return pi(),null;case 10:return Sr(i.type._context),null;case 22:case 23:return Ah(),null;case 24:return null;default:return null}}var ed=!1,Yn=!1,N1=typeof WeakSet=="function"?WeakSet:Set,st=null;function fc(n,i){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){Zr(n,i,p)}else l.current=null}function gh(n,i,l){try{l()}catch(p){Zr(n,i,p)}}var Ip=!1;function S1(n,i){if(hl=uo,n=Jr(),Us(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var w=p.anchorOffset,S=p.focusNode;p=p.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var F=0,oe=-1,pe=-1,Ce=0,We=0,Ve=n,ze=null;t:for(;;){for(var tt;Ve!==l||w!==0&&Ve.nodeType!==3||(oe=F+w),Ve!==S||p!==0&&Ve.nodeType!==3||(pe=F+p),Ve.nodeType===3&&(F+=Ve.nodeValue.length),(tt=Ve.firstChild)!==null;)ze=Ve,Ve=tt;for(;;){if(Ve===n)break t;if(ze===l&&++Ce===w&&(oe=F),ze===S&&++We===p&&(pe=F),(tt=Ve.nextSibling)!==null)break;Ve=ze,ze=Ve.parentNode}Ve=tt}l=oe===-1||pe===-1?null:{start:oe,end:pe}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wa={focusedElem:n,selectionRange:l},uo=!1,st=i;st!==null;)if(i=st,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,st=n;else for(;st!==null;){i=st;try{var lt=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var ut=lt.memoizedProps,on=lt.memoizedState,ke=i.stateNode,xe=ke.getSnapshotBeforeUpdate(i.elementType===i.type?ut:Ri(i.type,ut),on);ke.__reactInternalSnapshotBeforeUpdate=xe}break;case 3:var Ee=i.stateNode.containerInfo;Ee.nodeType===1?Ee.textContent="":Ee.nodeType===9&&Ee.documentElement&&Ee.removeChild(Ee.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ke){Zr(i,i.return,Ke)}if(n=i.sibling,n!==null){n.return=i.return,st=n;break}st=i.return}return lt=Ip,Ip=!1,lt}function iu(n,i,l){var p=i.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&n)===n){var S=w.destroy;w.destroy=void 0,S!==void 0&&gh(i,l,S)}w=w.next}while(w!==p)}}function td(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&n)===n){var p=l.create;l.destroy=p()}l=l.next}while(l!==i)}}function mh(n){var i=n.ref;if(i!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof i=="function"?i(n):i.current=n}}function Rp(n){var i=n.alternate;i!==null&&(n.alternate=null,Rp(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[fi],delete i[So],delete i[Hn],delete i[eh],delete i[th])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Dp(n){return n.tag===5||n.tag===3||n.tag===4}function Fp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Dp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vh(n,i,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(n,i):l.insertBefore(n,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(n,l)):(i=l,i.appendChild(n)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=No));else if(p!==4&&(n=n.child,n!==null))for(vh(n,i,l),n=n.sibling;n!==null;)vh(n,i,l),n=n.sibling}function yh(n,i,l){var p=n.tag;if(p===5||p===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(p!==4&&(n=n.child,n!==null))for(yh(n,i,l),n=n.sibling;n!==null;)yh(n,i,l),n=n.sibling}var Dn=null,Di=!1;function Lo(n,i,l){for(l=l.child;l!==null;)Bp(n,i,l),l=l.sibling}function Bp(n,i,l){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(wa,l)}catch{}switch(l.tag){case 5:Yn||fc(l,i);case 6:var p=Dn,w=Di;Dn=null,Lo(n,i,l),Dn=p,Di=w,Dn!==null&&(Di?(n=Dn,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Dn.removeChild(l.stateNode));break;case 18:Dn!==null&&(Di?(n=Dn,l=l.stateNode,n.nodeType===8?Yc(n.parentNode,l):n.nodeType===1&&Yc(n,l),Aa(n)):Yc(Dn,l.stateNode));break;case 4:p=Dn,w=Di,Dn=l.stateNode.containerInfo,Di=!0,Lo(n,i,l),Dn=p,Di=w;break;case 0:case 11:case 14:case 15:if(!Yn&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){w=p=p.next;do{var S=w,F=S.destroy;S=S.tag,F!==void 0&&((S&2)!==0||(S&4)!==0)&&gh(l,i,F),w=w.next}while(w!==p)}Lo(n,i,l);break;case 1:if(!Yn&&(fc(l,i),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(oe){Zr(l,i,oe)}Lo(n,i,l);break;case 21:Lo(n,i,l);break;case 22:l.mode&1?(Yn=(p=Yn)||l.memoizedState!==null,Lo(n,i,l),Yn=p):Lo(n,i,l);break;default:Lo(n,i,l)}}function Mp(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new N1),i.forEach(function(p){var w=O1.bind(null,n,p);l.has(p)||(l.add(p),p.then(w,w))})}}function Fi(n,i){var l=i.deletions;if(l!==null)for(var p=0;p<l.length;p++){var w=l[p];try{var S=n,F=i,oe=F;e:for(;oe!==null;){switch(oe.tag){case 5:Dn=oe.stateNode,Di=!1;break e;case 3:Dn=oe.stateNode.containerInfo,Di=!0;break e;case 4:Dn=oe.stateNode.containerInfo,Di=!0;break e}oe=oe.return}if(Dn===null)throw Error(t(160));Bp(S,F,w),Dn=null,Di=!1;var pe=w.alternate;pe!==null&&(pe.return=null),w.return=null}catch(Ce){Zr(w,i,Ce)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Up(i,n),i=i.sibling}function Up(n,i){var l=n.alternate,p=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fi(i,n),ha(n),p&4){try{iu(3,n,n.return),td(3,n)}catch(ut){Zr(n,n.return,ut)}try{iu(5,n,n.return)}catch(ut){Zr(n,n.return,ut)}}break;case 1:Fi(i,n),ha(n),p&512&&l!==null&&fc(l,l.return);break;case 5:if(Fi(i,n),ha(n),p&512&&l!==null&&fc(l,l.return),n.flags&32){var w=n.stateNode;try{Ue(w,"")}catch(ut){Zr(n,n.return,ut)}}if(p&4&&(w=n.stateNode,w!=null)){var S=n.memoizedProps,F=l!==null?l.memoizedProps:S,oe=n.type,pe=n.updateQueue;if(n.updateQueue=null,pe!==null)try{oe==="input"&&S.type==="radio"&&S.name!=null&&Ye(w,S),wt(oe,F);var Ce=wt(oe,S);for(F=0;F<pe.length;F+=2){var We=pe[F],Ve=pe[F+1];We==="style"?yt(w,Ve):We==="dangerouslySetInnerHTML"?Be(w,Ve):We==="children"?Ue(w,Ve):E(w,We,Ve,Ce)}switch(oe){case"input":dt(w,S);break;case"textarea":Jt(w,S);break;case"select":var ze=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!S.multiple;var tt=S.value;tt!=null?Qe(w,!!S.multiple,tt,!1):ze!==!!S.multiple&&(S.defaultValue!=null?Qe(w,!!S.multiple,S.defaultValue,!0):Qe(w,!!S.multiple,S.multiple?[]:"",!1))}w[So]=S}catch(ut){Zr(n,n.return,ut)}}break;case 6:if(Fi(i,n),ha(n),p&4){if(n.stateNode===null)throw Error(t(162));w=n.stateNode,S=n.memoizedProps;try{w.nodeValue=S}catch(ut){Zr(n,n.return,ut)}}break;case 3:if(Fi(i,n),ha(n),p&4&&l!==null&&l.memoizedState.isDehydrated)try{Aa(i.containerInfo)}catch(ut){Zr(n,n.return,ut)}break;case 4:Fi(i,n),ha(n);break;case 13:Fi(i,n),ha(n),w=n.child,w.flags&8192&&(S=w.memoizedState!==null,w.stateNode.isHidden=S,!S||w.alternate!==null&&w.alternate.memoizedState!==null||(bh=wr())),p&4&&Mp(n);break;case 22:if(We=l!==null&&l.memoizedState!==null,n.mode&1?(Yn=(Ce=Yn)||We,Fi(i,n),Yn=Ce):Fi(i,n),ha(n),p&8192){if(Ce=n.memoizedState!==null,(n.stateNode.isHidden=Ce)&&!We&&(n.mode&1)!==0)for(st=n,We=n.child;We!==null;){for(Ve=st=We;st!==null;){switch(ze=st,tt=ze.child,ze.tag){case 0:case 11:case 14:case 15:iu(4,ze,ze.return);break;case 1:fc(ze,ze.return);var lt=ze.stateNode;if(typeof lt.componentWillUnmount=="function"){p=ze,l=ze.return;try{i=p,lt.props=i.memoizedProps,lt.state=i.memoizedState,lt.componentWillUnmount()}catch(ut){Zr(p,l,ut)}}break;case 5:fc(ze,ze.return);break;case 22:if(ze.memoizedState!==null){zp(Ve);continue}}tt!==null?(tt.return=ze,st=tt):zp(Ve)}We=We.sibling}e:for(We=null,Ve=n;;){if(Ve.tag===5){if(We===null){We=Ve;try{w=Ve.stateNode,Ce?(S=w.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(oe=Ve.stateNode,pe=Ve.memoizedProps.style,F=pe!=null&&pe.hasOwnProperty("display")?pe.display:null,oe.style.display=At("display",F))}catch(ut){Zr(n,n.return,ut)}}}else if(Ve.tag===6){if(We===null)try{Ve.stateNode.nodeValue=Ce?"":Ve.memoizedProps}catch(ut){Zr(n,n.return,ut)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===n)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===n)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===n)break e;We===Ve&&(We=null),Ve=Ve.return}We===Ve&&(We=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:Fi(i,n),ha(n),p&4&&Mp(n);break;case 21:break;default:Fi(i,n),ha(n)}}function ha(n){var i=n.flags;if(i&2){try{e:{for(var l=n.return;l!==null;){if(Dp(l)){var p=l;break e}l=l.return}throw Error(t(160))}switch(p.tag){case 5:var w=p.stateNode;p.flags&32&&(Ue(w,""),p.flags&=-33);var S=Fp(n);yh(n,S,w);break;case 3:case 4:var F=p.stateNode.containerInfo,oe=Fp(n);vh(n,oe,F);break;default:throw Error(t(161))}}catch(pe){Zr(n,n.return,pe)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function k1(n,i,l){st=n,$p(n)}function $p(n,i,l){for(var p=(n.mode&1)!==0;st!==null;){var w=st,S=w.child;if(w.tag===22&&p){var F=w.memoizedState!==null||ed;if(!F){var oe=w.alternate,pe=oe!==null&&oe.memoizedState!==null||Yn;oe=ed;var Ce=Yn;if(ed=F,(Yn=pe)&&!Ce)for(st=w;st!==null;)F=st,pe=F.child,F.tag===22&&F.memoizedState!==null?Wp(w):pe!==null?(pe.return=F,st=pe):Wp(w);for(;S!==null;)st=S,$p(S),S=S.sibling;st=w,ed=oe,Yn=Ce}qp(n)}else(w.subtreeFlags&8772)!==0&&S!==null?(S.return=w,st=S):qp(n)}}function qp(n){for(;st!==null;){var i=st;if((i.flags&8772)!==0){var l=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Yn||td(5,i);break;case 1:var p=i.stateNode;if(i.flags&4&&!Yn)if(l===null)p.componentDidMount();else{var w=i.elementType===i.type?l.memoizedProps:Ri(i.type,l.memoizedProps);p.componentDidUpdate(w,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var S=i.updateQueue;S!==null&&js(i,S,p);break;case 3:var F=i.updateQueue;if(F!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}js(i,F,l)}break;case 5:var oe=i.stateNode;if(l===null&&i.flags&4){l=oe;var pe=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":pe.autoFocus&&l.focus();break;case"img":pe.src&&(l.src=pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var Ce=i.alternate;if(Ce!==null){var We=Ce.memoizedState;if(We!==null){var Ve=We.dehydrated;Ve!==null&&Aa(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Yn||i.flags&512&&mh(i)}catch(ze){Zr(i,i.return,ze)}}if(i===n){st=null;break}if(l=i.sibling,l!==null){l.return=i.return,st=l;break}st=i.return}}function zp(n){for(;st!==null;){var i=st;if(i===n){st=null;break}var l=i.sibling;if(l!==null){l.return=i.return,st=l;break}st=i.return}}function Wp(n){for(;st!==null;){var i=st;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{td(4,i)}catch(pe){Zr(i,l,pe)}break;case 1:var p=i.stateNode;if(typeof p.componentDidMount=="function"){var w=i.return;try{p.componentDidMount()}catch(pe){Zr(i,w,pe)}}var S=i.return;try{mh(i)}catch(pe){Zr(i,S,pe)}break;case 5:var F=i.return;try{mh(i)}catch(pe){Zr(i,F,pe)}}}catch(pe){Zr(i,i.return,pe)}if(i===n){st=null;break}var oe=i.sibling;if(oe!==null){oe.return=i.return,st=oe;break}st=i.return}}var j1=Math.ceil,rd=T.ReactCurrentDispatcher,xh=T.ReactCurrentOwner,vi=T.ReactCurrentBatchConfig,rr=0,Ln=null,pn=null,Fn=0,Vs=0,pc=$s(0),_n=0,au=null,yl=0,nd=0,wh=0,ou=null,Es=null,bh=0,gc=1/0,Ya=null,sd=!1,_h=null,To=null,id=!1,Oo=null,ad=0,lu=0,Nh=null,od=-1,ld=0;function fs(){return(rr&6)!==0?wr():od!==-1?od:od=wr()}function Io(n){return(n.mode&1)===0?1:(rr&2)!==0&&Fn!==0?Fn&-Fn:Mr.transition!==null?(ld===0&&(ld=Jo()),ld):(n=Xt,n!==0||(n=window.event,n=n===void 0?16:Ca(n.type)),n)}function Bi(n,i,l,p){if(50<lu)throw lu=0,Nh=null,Error(t(185));Na(n,l,p),((rr&2)===0||n!==Ln)&&(n===Ln&&((rr&2)===0&&(nd|=l),_n===4&&Ro(n,Fn)),Cs(n,p),l===1&&rr===0&&(i.mode&1)===0&&(gc=wr()+500,pl&&j()))}function Cs(n,i){var l=n.callbackNode;rn(n,i);var p=_a(n,n===Ln?Fn:0);if(p===0)l!==null&&xa(l),n.callbackNode=null,n.callbackPriority=0;else if(i=p&-p,n.callbackPriority!==i){if(l!=null&&xa(l),i===1)n.tag===0?b(Vp.bind(null,n)):m(Vp.bind(null,n)),Qd(function(){(rr&6)===0&&j()}),l=null;else{switch(Sa(p)){case 1:l=no;break;case 4:l=ns;break;case 16:l=Yi;break;case 536870912:l=so;break;default:l=Yi}l=e0(l,Hp.bind(null,n))}n.callbackPriority=i,n.callbackNode=l}}function Hp(n,i){if(od=-1,ld=0,(rr&6)!==0)throw Error(t(327));var l=n.callbackNode;if(mc()&&n.callbackNode!==l)return null;var p=_a(n,n===Ln?Fn:0);if(p===0)return null;if((p&30)!==0||(p&n.expiredLanes)!==0||i)i=cd(n,p);else{i=p;var w=rr;rr|=2;var S=Kp();(Ln!==n||Fn!==i)&&(Ya=null,gc=wr()+500,wl(n,i));do try{C1();break}catch(oe){Gp(n,oe)}while(!0);er(),rd.current=S,rr=w,pn!==null?i=0:(Ln=null,Fn=0,i=_n)}if(i!==0){if(i===2&&(w=Rs(n),w!==0&&(p=w,i=Sh(n,w))),i===1)throw l=au,wl(n,0),Ro(n,p),Cs(n,wr()),l;if(i===6)Ro(n,p);else{if(w=n.current.alternate,(p&30)===0&&!A1(w)&&(i=cd(n,p),i===2&&(S=Rs(n),S!==0&&(p=S,i=Sh(n,S))),i===1))throw l=au,wl(n,0),Ro(n,p),Cs(n,wr()),l;switch(n.finishedWork=w,n.finishedLanes=p,i){case 0:case 1:throw Error(t(345));case 2:bl(n,Es,Ya);break;case 3:if(Ro(n,p),(p&130023424)===p&&(i=bh+500-wr(),10<i)){if(_a(n,0)!==0)break;if(w=n.suspendedLanes,(w&p)!==p){fs(),n.pingedLanes|=n.suspendedLanes&w;break}n.timeoutHandle=Jc(bl.bind(null,n,Es,Ya),i);break}bl(n,Es,Ya);break;case 4:if(Ro(n,p),(p&4194240)===p)break;for(i=n.eventTimes,w=-1;0<p;){var F=31-Vr(p);S=1<<F,F=i[F],F>w&&(w=F),p&=~S}if(p=w,p=wr()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*j1(p/1960))-p,10<p){n.timeoutHandle=Jc(bl.bind(null,n,Es,Ya),p);break}bl(n,Es,Ya);break;case 5:bl(n,Es,Ya);break;default:throw Error(t(329))}}}return Cs(n,wr()),n.callbackNode===l?Hp.bind(null,n):null}function Sh(n,i){var l=ou;return n.current.memoizedState.isDehydrated&&(wl(n,i).flags|=256),n=cd(n,i),n!==2&&(i=Es,Es=l,i!==null&&kh(i)),n}function kh(n){Es===null?Es=n:Es.push.apply(Es,n)}function A1(n){for(var i=n;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var w=l[p],S=w.getSnapshot;w=w.value;try{if(!Pr(S(),w))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ro(n,i){for(i&=~wh,i&=~nd,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var l=31-Vr(i),p=1<<l;n[l]=-1,i&=~p}}function Vp(n){if((rr&6)!==0)throw Error(t(327));mc();var i=_a(n,0);if((i&1)===0)return Cs(n,wr()),null;var l=cd(n,i);if(n.tag!==0&&l===2){var p=Rs(n);p!==0&&(i=p,l=Sh(n,p))}if(l===1)throw l=au,wl(n,0),Ro(n,i),Cs(n,wr()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,bl(n,Es,Ya),Cs(n,wr()),null}function jh(n,i){var l=rr;rr|=1;try{return n(i)}finally{rr=l,rr===0&&(gc=wr()+500,pl&&j())}}function xl(n){Oo!==null&&Oo.tag===0&&(rr&6)===0&&mc();var i=rr;rr|=1;var l=vi.transition,p=Xt;try{if(vi.transition=null,Xt=1,n)return n()}finally{Xt=p,vi.transition=l,rr=i,(rr&6)===0&&j()}}function Ah(){Vs=pc.current,ir(pc)}function wl(n,i){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,$u(l)),pn!==null)for(l=pn.return;l!==null;){var p=l;switch(je(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&rc();break;case 3:pi(),ir(Vn),ir(wn),tu();break;case 5:Zc(p);break;case 4:pi();break;case 13:ir(br);break;case 19:ir(br);break;case 10:Sr(p.type._context);break;case 22:case 23:Ah()}l=l.return}if(Ln=n,pn=n=Do(n.current,null),Fn=Vs=i,_n=0,au=null,wh=nd=yl=0,Es=ou=null,dr!==null){for(i=0;i<dr.length;i++)if(l=dr[i],p=l.interleaved,p!==null){l.interleaved=null;var w=p.next,S=l.pending;if(S!==null){var F=S.next;S.next=w,p.next=F}l.pending=p}dr=null}return n}function Gp(n,i){do{var l=pn;try{if(er(),nc.current=Yu,Eo){for(var p=kr.memoizedState;p!==null;){var w=p.queue;w!==null&&(w.pending=null),p=p.next}Eo=!1}if(gi=0,zr=Qr=kr=null,Oi=!1,Co=0,xh.current=null,l===null||l.return===null){_n=1,au=i,pn=null;break}e:{var S=n,F=l.return,oe=l,pe=i;if(i=Fn,oe.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Ce=pe,We=oe,Ve=We.tag;if((We.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var ze=We.alternate;ze?(We.updateQueue=ze.updateQueue,We.memoizedState=ze.memoizedState,We.lanes=ze.lanes):(We.updateQueue=null,We.memoizedState=null)}var tt=yp(F);if(tt!==null){tt.flags&=-257,xp(tt,F,oe,S,i),tt.mode&1&&vp(S,Ce,i),i=tt,pe=Ce;var lt=i.updateQueue;if(lt===null){var ut=new Set;ut.add(pe),i.updateQueue=ut}else lt.add(pe);break e}else{if((i&1)===0){vp(S,Ce,i),Eh();break e}pe=Error(t(426))}}else if(De&&oe.mode&1){var on=yp(F);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),xp(on,F,oe,S,i),Je(hc(pe,oe));break e}}S=pe=hc(pe,oe),_n!==4&&(_n=2),ou===null?ou=[S]:ou.push(S),S=F;do{switch(S.tag){case 3:S.flags|=65536,i&=-i,S.lanes|=i;var ke=gp(S,pe,i);fr(S,ke);break e;case 1:oe=pe;var xe=S.type,Ee=S.stateNode;if((S.flags&128)===0&&(typeof xe.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(To===null||!To.has(Ee)))){S.flags|=65536,i&=-i,S.lanes|=i;var Ke=mp(S,oe,i);fr(S,Ke);break e}}S=S.return}while(S!==null)}Yp(l)}catch(mt){i=mt,pn===l&&l!==null&&(pn=l=l.return);continue}break}while(!0)}function Kp(){var n=rd.current;return rd.current=Yu,n===null?Yu:n}function Eh(){(_n===0||_n===3||_n===2)&&(_n=4),Ln===null||(yl&268435455)===0&&(nd&268435455)===0||Ro(Ln,Fn)}function cd(n,i){var l=rr;rr|=2;var p=Kp();(Ln!==n||Fn!==i)&&(Ya=null,wl(n,i));do try{E1();break}catch(w){Gp(n,w)}while(!0);if(er(),rr=l,rd.current=p,pn!==null)throw Error(t(261));return Ln=null,Fn=0,_n}function E1(){for(;pn!==null;)Jp(pn)}function C1(){for(;pn!==null&&!ro();)Jp(pn)}function Jp(n){var i=Zp(n.alternate,n,Vs);n.memoizedProps=n.pendingProps,i===null?Yp(n):pn=i,xh.current=null}function Yp(n){var i=n;do{var l=i.alternate;if(n=i.return,(i.flags&32768)===0){if(l=b1(l,i,Vs),l!==null){pn=l;return}}else{if(l=_1(l,i),l!==null){l.flags&=32767,pn=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_n=6,pn=null;return}}if(i=i.sibling,i!==null){pn=i;return}pn=i=n}while(i!==null);_n===0&&(_n=5)}function bl(n,i,l){var p=Xt,w=vi.transition;try{vi.transition=null,Xt=1,P1(n,i,l,p)}finally{vi.transition=w,Xt=p}return null}function P1(n,i,l,p){do mc();while(Oo!==null);if((rr&6)!==0)throw Error(t(327));l=n.finishedWork;var w=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var S=l.lanes|l.childLanes;if(si(n,S),n===Ln&&(pn=Ln=null,Fn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||id||(id=!0,e0(Yi,function(){return mc(),null})),S=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||S){S=vi.transition,vi.transition=null;var F=Xt;Xt=1;var oe=rr;rr|=4,xh.current=null,S1(n,l),Up(l,n),sl(Wa),uo=!!hl,Wa=hl=null,n.current=l,k1(l),Fc(),rr=oe,Xt=F,vi.transition=S}else n.current=l;if(id&&(id=!1,Oo=n,ad=w),S=n.pendingLanes,S===0&&(To=null),Wl(l.stateNode),Cs(n,wr()),i!==null)for(p=n.onRecoverableError,l=0;l<i.length;l++)w=i[l],p(w.value,{componentStack:w.stack,digest:w.digest});if(sd)throw sd=!1,n=_h,_h=null,n;return(ad&1)!==0&&n.tag!==0&&mc(),S=n.pendingLanes,(S&1)!==0?n===Nh?lu++:(lu=0,Nh=n):lu=0,j(),null}function mc(){if(Oo!==null){var n=Sa(ad),i=vi.transition,l=Xt;try{if(vi.transition=null,Xt=16>n?16:n,Oo===null)var p=!1;else{if(n=Oo,Oo=null,ad=0,(rr&6)!==0)throw Error(t(331));var w=rr;for(rr|=4,st=n.current;st!==null;){var S=st,F=S.child;if((st.flags&16)!==0){var oe=S.deletions;if(oe!==null){for(var pe=0;pe<oe.length;pe++){var Ce=oe[pe];for(st=Ce;st!==null;){var We=st;switch(We.tag){case 0:case 11:case 15:iu(8,We,S)}var Ve=We.child;if(Ve!==null)Ve.return=We,st=Ve;else for(;st!==null;){We=st;var ze=We.sibling,tt=We.return;if(Rp(We),We===Ce){st=null;break}if(ze!==null){ze.return=tt,st=ze;break}st=tt}}}var lt=S.alternate;if(lt!==null){var ut=lt.child;if(ut!==null){lt.child=null;do{var on=ut.sibling;ut.sibling=null,ut=on}while(ut!==null)}}st=S}}if((S.subtreeFlags&2064)!==0&&F!==null)F.return=S,st=F;else e:for(;st!==null;){if(S=st,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:iu(9,S,S.return)}var ke=S.sibling;if(ke!==null){ke.return=S.return,st=ke;break e}st=S.return}}var xe=n.current;for(st=xe;st!==null;){F=st;var Ee=F.child;if((F.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=F,st=Ee;else e:for(F=xe;st!==null;){if(oe=st,(oe.flags&2048)!==0)try{switch(oe.tag){case 0:case 11:case 15:td(9,oe)}}catch(mt){Zr(oe,oe.return,mt)}if(oe===F){st=null;break e}var Ke=oe.sibling;if(Ke!==null){Ke.return=oe.return,st=Ke;break e}st=oe.return}}if(rr=w,j(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(wa,n)}catch{}p=!0}return p}finally{Xt=l,vi.transition=i}}return!1}function Xp(n,i,l){i=hc(l,i),i=gp(n,i,1),n=$r(n,i,1),i=fs(),n!==null&&(Na(n,1,i),Cs(n,i))}function Zr(n,i,l){if(n.tag===3)Xp(n,n,l);else for(;i!==null;){if(i.tag===3){Xp(i,n,l);break}else if(i.tag===1){var p=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(To===null||!To.has(p))){n=hc(l,n),n=mp(i,n,1),i=$r(i,n,1),n=fs(),i!==null&&(Na(i,1,n),Cs(i,n));break}}i=i.return}}function L1(n,i,l){var p=n.pingCache;p!==null&&p.delete(i),i=fs(),n.pingedLanes|=n.suspendedLanes&l,Ln===n&&(Fn&l)===l&&(_n===4||_n===3&&(Fn&130023424)===Fn&&500>wr()-bh?wl(n,0):wh|=l),Cs(n,i)}function Qp(n,i){i===0&&((n.mode&1)===0?i=1:(i=is,is<<=1,(is&130023424)===0&&(is=4194304)));var l=fs();n=hr(n,i),n!==null&&(Na(n,i,l),Cs(n,l))}function T1(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Qp(n,l)}function O1(n,i){var l=0;switch(n.tag){case 13:var p=n.stateNode,w=n.memoizedState;w!==null&&(l=w.retryLane);break;case 19:p=n.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(i),Qp(n,l)}var Zp;Zp=function(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps||Vn.current)As=!0;else{if((n.lanes&l)===0&&(i.flags&128)===0)return As=!1,w1(n,i,l);As=(n.flags&131072)!==0}else As=!1,De&&(i.flags&1048576)!==0&&_e(i,z,i.index);switch(i.lanes=0,i.tag){case 2:var p=i.type;Zu(n,i),n=i.pendingProps;var w=jo(i,wn.current);Or(i,l),w=gl(null,i,p,n,w,l);var S=mi();return i.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Gn(p)?(S=!0,Ga(i)):S=!1,i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,bn(i),w.updater=Xu,i.stateNode=w,w._reactInternals=i,ih(i,p,n,l),i=ch(null,i,p,!0,S,l)):(i.tag=0,De&&S&&Oe(i),hs(null,i,w,l),i=i.child),i;case 16:p=i.elementType;e:{switch(Zu(n,i),n=i.pendingProps,w=p._init,p=w(p._payload),i.type=p,w=i.tag=R1(p),n=Ri(p,n),w){case 0:i=lh(null,i,p,n,l);break e;case 1:i=kp(null,i,p,n,l);break e;case 11:i=wp(null,i,p,n,l);break e;case 14:i=bp(null,i,p,Ri(p.type,n),l);break e}throw Error(t(306,p,""))}return i;case 0:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),lh(n,i,p,w,l);case 1:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),kp(n,i,p,w,l);case 3:e:{if(jp(i),n===null)throw Error(t(387));p=i.pendingProps,S=i.memoizedState,w=S.element,Kn(n,i),Pn(i,p,null,l);var F=i.memoizedState;if(p=F.element,S.isDehydrated)if(S={element:p,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){w=hc(Error(t(423)),i),i=Ap(n,i,p,l,w);break e}else if(p!==w){w=hc(Error(t(424)),i),i=Ap(n,i,p,l,w);break e}else for(Te=Rn(i.stateNode.containerInfo.firstChild),Le=i,De=!0,Fe=null,l=Er(i,null,p,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(nt(),p===w){i=Ja(n,i,l);break e}hs(n,i,p,l)}i=i.child}return i;case 5:return Hu(i),n===null&&at(i),p=i.type,w=i.pendingProps,S=n!==null?n.memoizedProps:null,F=w.children,Kc(p,w)?F=null:S!==null&&Kc(p,S)&&(i.flags|=32),Sp(n,i),hs(n,i,F,l),i.child;case 6:return n===null&&at(i),null;case 13:return Ep(n,i,l);case 4:return Ao(i,i.stateNode.containerInfo),p=i.pendingProps,n===null?i.child=Yr(i,null,p,l):hs(n,i,p,l),i.child;case 11:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),wp(n,i,p,w,l);case 7:return hs(n,i,i.pendingProps,l),i.child;case 8:return hs(n,i,i.pendingProps.children,l),i.child;case 12:return hs(n,i,i.pendingProps.children,l),i.child;case 10:e:{if(p=i.type._context,w=i.pendingProps,S=i.memoizedProps,F=w.value,lr(sn,p._currentValue),p._currentValue=F,S!==null)if(Pr(S.value,F)){if(S.children===w.children&&!Vn.current){i=Ja(n,i,l);break e}}else for(S=i.child,S!==null&&(S.return=i);S!==null;){var oe=S.dependencies;if(oe!==null){F=S.child;for(var pe=oe.firstContext;pe!==null;){if(pe.context===p){if(S.tag===1){pe=Ur(-1,l&-l),pe.tag=2;var Ce=S.updateQueue;if(Ce!==null){Ce=Ce.shared;var We=Ce.pending;We===null?pe.next=pe:(pe.next=We.next,We.next=pe),Ce.pending=pe}}S.lanes|=l,pe=S.alternate,pe!==null&&(pe.lanes|=l),tr(S.return,l,i),oe.lanes|=l;break}pe=pe.next}}else if(S.tag===10)F=S.type===i.type?null:S.child;else if(S.tag===18){if(F=S.return,F===null)throw Error(t(341));F.lanes|=l,oe=F.alternate,oe!==null&&(oe.lanes|=l),tr(F,l,i),F=S.sibling}else F=S.child;if(F!==null)F.return=S;else for(F=S;F!==null;){if(F===i){F=null;break}if(S=F.sibling,S!==null){S.return=F.return,F=S;break}F=F.return}S=F}hs(n,i,w.children,l),i=i.child}return i;case 9:return w=i.type,p=i.pendingProps.children,Or(i,l),w=Ir(w),p=p(w),i.flags|=1,hs(n,i,p,l),i.child;case 14:return p=i.type,w=Ri(p,i.pendingProps),w=Ri(p.type,w),bp(n,i,p,w,l);case 15:return _p(n,i,i.type,i.pendingProps,l);case 17:return p=i.type,w=i.pendingProps,w=i.elementType===p?w:Ri(p,w),Zu(n,i),i.tag=1,Gn(p)?(n=!0,Ga(i)):n=!1,Or(i,l),fp(i,p,w),ih(i,p,w,l),ch(null,i,p,!0,n,l);case 19:return Pp(n,i,l);case 22:return Np(n,i,l)}throw Error(t(156,i.tag))};function e0(n,i){return ya(n,i)}function I1(n,i,l,p){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(n,i,l,p){return new I1(n,i,l,p)}function Ch(n){return n=n.prototype,!(!n||!n.isReactComponent)}function R1(n){if(typeof n=="function")return Ch(n)?1:0;if(n!=null){if(n=n.$$typeof,n===q)return 11;if(n===ge)return 14}return 2}function Do(n,i){var l=n.alternate;return l===null?(l=yi(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ud(n,i,l,p,w,S){var F=2;if(p=n,typeof n=="function")Ch(n)&&(F=1);else if(typeof n=="string")F=5;else e:switch(n){case H:return _l(l.children,w,S,i);case Y:F=8,w|=8;break;case J:return n=yi(12,l,i,w|2),n.elementType=J,n.lanes=S,n;case D:return n=yi(13,l,i,w),n.elementType=D,n.lanes=S,n;case G:return n=yi(19,l,i,w),n.elementType=G,n.lanes=S,n;case we:return dd(l,w,S,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case he:F=10;break e;case U:F=9;break e;case q:F=11;break e;case ge:F=14;break e;case ae:F=16,p=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=yi(F,l,i,w),i.elementType=n,i.type=p,i.lanes=S,i}function _l(n,i,l,p){return n=yi(7,n,p,i),n.lanes=l,n}function dd(n,i,l,p){return n=yi(22,n,p,i),n.elementType=we,n.lanes=l,n.stateNode={isHidden:!1},n}function Ph(n,i,l){return n=yi(6,n,null,i),n.lanes=l,n}function Lh(n,i,l){return i=yi(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function D1(n,i,l,p,w){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yo(0),this.expirationTimes=Yo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yo(0),this.identifierPrefix=p,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Th(n,i,l,p,w,S,F,oe,pe){return n=new D1(n,i,l,oe,pe),i===1?(i=1,S===!0&&(i|=8)):i=0,S=yi(3,null,null,i),n.current=S,S.stateNode=n,S.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},bn(S),n}function F1(n,i,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:p==null?null:""+p,children:n,containerInfo:i,implementation:l}}function t0(n){if(!n)return ca;n=n._reactInternals;e:{if(vn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Gn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(Gn(l))return Qc(n,l,i)}return i}function r0(n,i,l,p,w,S,F,oe,pe){return n=Th(l,p,!0,n,w,S,F,oe,pe),n.context=t0(null),l=n.current,p=fs(),w=Io(l),S=Ur(p,w),S.callback=i??null,$r(l,S,w),n.current.lanes=w,Na(n,w,p),Cs(n,p),n}function hd(n,i,l,p){var w=i.current,S=fs(),F=Io(w);return l=t0(l),i.context===null?i.context=l:i.pendingContext=l,i=Ur(S,F),i.payload={element:n},p=p===void 0?null:p,p!==null&&(i.callback=p),n=$r(w,i,F),n!==null&&(Bi(n,w,F,S),Cn(n,w,F)),F}function fd(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function n0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Oh(n,i){n0(n,i),(n=n.alternate)&&n0(n,i)}function B1(){return null}var s0=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ih(n){this._internalRoot=n}pd.prototype.render=Ih.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));hd(n,i,null,null)},pd.prototype.unmount=Ih.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;xl(function(){hd(null,n,null,null)}),i[An]=null}};function pd(n){this._internalRoot=n}pd.prototype.unstable_scheduleHydration=function(n){if(n){var i=Vl();n={blockedOn:null,target:n,priority:i};for(var l=0;l<ai.length&&i!==0&&i<ai[l].priority;l++);ai.splice(l,0,n),l===0&&Kl(n)}};function Rh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function i0(){}function M1(n,i,l,p,w){if(w){if(typeof p=="function"){var S=p;p=function(){var Ce=fd(F);S.call(Ce)}}var F=r0(i,p,n,0,null,!1,!1,"",i0);return n._reactRootContainer=F,n[An]=F.current,qa(n.nodeType===8?n.parentNode:n),xl(),F}for(;w=n.lastChild;)n.removeChild(w);if(typeof p=="function"){var oe=p;p=function(){var Ce=fd(pe);oe.call(Ce)}}var pe=Th(n,0,!1,null,null,!1,!1,"",i0);return n._reactRootContainer=pe,n[An]=pe.current,qa(n.nodeType===8?n.parentNode:n),xl(function(){hd(i,pe,l,p)}),pe}function md(n,i,l,p,w){var S=l._reactRootContainer;if(S){var F=S;if(typeof w=="function"){var oe=w;w=function(){var pe=fd(F);oe.call(pe)}}hd(i,F,n,w)}else F=M1(l,i,n,w,p);return fd(F)}Xi=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var l=ni(i.pendingLanes);l!==0&&(ao(i,l|1),Cs(i,wr()),(rr&6)===0&&(gc=wr()+500,j()))}break;case 13:xl(function(){var p=hr(n,1);if(p!==null){var w=fs();Bi(p,n,1,w)}}),Oh(n,1)}},Xo=function(n){if(n.tag===13){var i=hr(n,134217728);if(i!==null){var l=fs();Bi(i,n,134217728,l)}Oh(n,134217728)}},Hl=function(n){if(n.tag===13){var i=Io(n),l=hr(n,i);if(l!==null){var p=fs();Bi(l,n,i,p)}Oh(n,i)}},Vl=function(){return Xt},oo=function(n,i){var l=Xt;try{return Xt=n,i()}finally{Xt=l}},It=function(n,i,l){switch(i){case"input":if(dt(n,l),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var p=l[i];if(p!==n&&p.form===n.form){var w=fl(p);if(!w)throw Error(t(90));He(p),dt(p,w)}}}break;case"textarea":Jt(n,l);break;case"select":i=l.value,i!=null&&Qe(n,!!l.multiple,i,!1)}},mn=jh,ti=xl;var U1={usingClientEntryPoint:!1,Events:[ko,Ha,fl,Qt,Gi,jh]},cu={findFiberByHostInstance:la,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$1={bundleType:cu.bundleType,version:cu.version,rendererPackageName:cu.rendererPackageName,rendererConfig:cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Is(n),n===null?null:n.stateNode},findFiberByHostInstance:cu.findFiberByHostInstance||B1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{wa=vd.inject($1),ss=vd}catch{}}return Ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U1,Ps.createPortal=function(n,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rh(i))throw Error(t(200));return F1(n,i,null,l)},Ps.createRoot=function(n,i){if(!Rh(n))throw Error(t(299));var l=!1,p="",w=s0;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=Th(n,1,!1,null,null,l,!1,p,w),n[An]=i.current,qa(n.nodeType===8?n.parentNode:n),new Ih(i)},Ps.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Is(i),n=n===null?null:n.stateNode,n},Ps.flushSync=function(n){return xl(n)},Ps.hydrate=function(n,i,l){if(!gd(i))throw Error(t(200));return md(null,n,i,!0,l)},Ps.hydrateRoot=function(n,i,l){if(!Rh(n))throw Error(t(405));var p=l!=null&&l.hydratedSources||null,w=!1,S="",F=s0;if(l!=null&&(l.unstable_strictMode===!0&&(w=!0),l.identifierPrefix!==void 0&&(S=l.identifierPrefix),l.onRecoverableError!==void 0&&(F=l.onRecoverableError)),i=r0(i,null,n,1,l??null,w,!1,S,F),n[An]=i.current,qa(n),p)for(n=0;n<p.length;n++)l=p[n],w=l._getVersion,w=w(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,w]:i.mutableSourceEagerHydrationData.push(l,w);return new pd(i)},Ps.render=function(n,i,l){if(!gd(i))throw Error(t(200));return md(null,n,i,!1,l)},Ps.unmountComponentAtNode=function(n){if(!gd(n))throw Error(t(40));return n._reactRootContainer?(xl(function(){md(null,null,n,!1,function(){n._reactRootContainer=null,n[An]=null})}),!0):!1},Ps.unstable_batchedUpdates=jh,Ps.unstable_renderSubtreeIntoContainer=function(n,i,l,p){if(!gd(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return md(n,i,l,!1,p)},Ps.version="18.3.1-next-f1338f8080-20240426",Ps}var f0;function Q1(){if(f0)return Bh.exports;f0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bh.exports=X1(),Bh.exports}var p0;function Z1(){if(p0)return yd;p0=1;var r=Q1();return yd.createRoot=r.createRoot,yd.hydrateRoot=r.hydrateRoot,yd}var e2=Z1(),Pe=Gf();const Cl=H1(Pe),t2="xiotthneuoyptfiwofnx",r2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhpb3R0aG5ldW95cHRmaXdvZm54Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMzQyODAsImV4cCI6MjA4MTkxMDI4MH0.d1m4i80EZgIkvgQgf_u3pTW83SkMiBZ6ZgkTpG-2Ki4";function zd(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function n2(r,e,t,s){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function d(v){try{g(s.next(v))}catch(_){u(_)}}function h(v){try{g(s.throw(v))}catch(_){u(_)}}function g(v){v.done?o(v.value):a(v.value).then(d,h)}g((s=s.apply(r,e||[])).next())})}const s2=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Kf extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class i2 extends Kf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class g0 extends Kf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class m0 extends Kf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var wf;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(wf||(wf={}));class a2{constructor(e,{headers:t={},customFetch:s,region:a=wf.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=s2(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return n2(this,arguments,void 0,function*(t,s={}){var a;let o,u;try{const{headers:d,method:h,body:g,signal:v,timeout:_}=s;let N={},{region:y}=s;y||(y=this.region);const k=new URL(`${this.url}/${t}`);y&&y!=="any"&&(N["x-region"]=y,k.searchParams.set("forceFunctionRegion",y));let A;g&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",A=g):typeof g=="string"?(N["Content-Type"]="text/plain",A=g):typeof FormData<"u"&&g instanceof FormData?A=g:(N["Content-Type"]="application/json",A=JSON.stringify(g)):A=g;let C=v;_&&(u=new AbortController,o=setTimeout(()=>u.abort(),_),v?(C=u.signal,v.addEventListener("abort",()=>u.abort())):C=u.signal);const L=yield this.fetch(k.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),d),body:A,signal:C}).catch(te=>{throw new i2(te)}),R=L.headers.get("x-relay-error");if(R&&R==="true")throw new g0(L);if(!L.ok)throw new m0(L);let E=((a=L.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),T;return E==="application/json"?T=yield L.json():E==="application/octet-stream"||E==="application/pdf"?T=yield L.blob():E==="text/event-stream"?T=L:E==="multipart/form-data"?T=yield L.formData():T=yield L.text(),{data:T,error:null,response:L}}catch(d){return{data:null,error:d,response:d instanceof m0||d instanceof g0?d.context:void 0}}finally{o&&clearTimeout(o)}})}}var o2=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},l2=class{constructor(r){var e,t;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(t=r.isMaybeSingle)!==null&&t!==void 0?t:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let u=null,d=null,h=null,g=o.status,v=o.statusText;if(o.ok){var _,N;if(t.method!=="HEAD"){var y;const L=await o.text();L===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((y=t.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?d=L:d=JSON.parse(L))}const A=(_=t.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),C=(N=o.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");A&&C&&C.length>1&&(h=parseInt(C[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,g=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var k;const A=await o.text();try{u=JSON.parse(A),Array.isArray(u)&&o.status===404&&(d=[],u=null,g=200,v="OK")}catch{o.status===404&&A===""?(g=204,v="No Content"):u={message:A}}if(u&&t.isMaybeSingle&&(!(u==null||(k=u.details)===null||k===void 0)&&k.includes("0 rows"))&&(u=null,g=200,v="OK"),u&&t.shouldThrowOnError)throw new o2(u)}return{error:u,data:d,count:h,status:g,statusText:v}});return this.shouldThrowOnError||(a=a.catch(o=>{var u;let d="";const h=o==null?void 0:o.cause;if(h){var g,v,_,N;const k=(g=h==null?void 0:h.message)!==null&&g!==void 0?g:"",A=(v=h==null?void 0:h.code)!==null&&v!==void 0?v:"";d=`${(_=o==null?void 0:o.name)!==null&&_!==void 0?_:"FetchError"}: ${o==null?void 0:o.message}`,d+=`

Caused by: ${(N=h==null?void 0:h.name)!==null&&N!==void 0?N:"Error"}: ${k}`,A&&(d+=` (${A})`),h!=null&&h.stack&&(d+=`
${h.stack}`)}else{var y;d=(y=o==null?void 0:o.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(u=o==null?void 0:o.name)!==null&&u!==void 0?u:"FetchError"}: ${o==null?void 0:o.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(r,e)}returns(){return this}overrideTypes(){return this}},c2=class extends l2{select(r){let e=!1;const t=(r??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:t,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",u=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${u?`${u},`:""}${r}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:t=e}={}){const s=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${r}`),this}range(r,e,{foreignTable:t,referencedTable:s=t}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${r}`),this.url.searchParams.set(o,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:t=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var u;const d=[r?"analyze":null,e?"verbose":null,t?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${d};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const v0=new RegExp("[,()]");var Ac=class extends c2{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&v0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`in.(${t})`),this}notIn(r,e){const t=Array.from(new Set(e)).map(s=>typeof s=="string"&&v0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(r,`not.in.(${t})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:t,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=t===void 0?"":`(${t})`;return this.url.searchParams.append(r,`${a}fts${o}.${e}`),this}match(r){return Object.entries(r).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(r,e,t){return this.url.searchParams.append(r,`not.${e}.${t}`),this}or(r,{foreignTable:e,referencedTable:t=e}={}){const s=t?`${t}.or`:"or";return this.url.searchParams.append(s,`(${r})`),this}filter(r,e,t){return this.url.searchParams.append(r,`${e}.${t}`),this}},u2=class{constructor(r,{headers:e={},schema:t,fetch:s}){this.url=r,this.headers=new Headers(e),this.schema=t,this.fetch=s}select(r,e){const{head:t=!1,count:s}=e??{},a=t?"HEAD":"GET";let o=!1;const u=(r??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",u),s&&this.headers.append("Prefer",`count=${s}`),new Ac({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:e,defaultToNull:t=!0}={}){var s;const a="POST";if(e&&this.headers.append("Prefer",`count=${e}`),t||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const o=r.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(o.length>0){const u=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ac({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(r,{onConflict:e,ignoreDuplicates:t=!1,count:s,defaultToNull:a=!0}={}){var o;const u="POST";if(this.headers.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(d.length>0){const h=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new Ac({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(r,{count:e}={}){var t;const s="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Ac({method:s,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}delete({count:r}={}){var e;const t="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new Ac({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},d2=class em{constructor(e,{headers:t={},schema:s,fetch:a}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new u2(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new em(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:a=!1,count:o}={}){var u;let d;const h=new URL(`${this.url}/rpc/${e}`);let g;s||a?(d=s?"HEAD":"GET",Object.entries(t).filter(([_,N])=>N!==void 0).map(([_,N])=>[_,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([_,N])=>{h.searchParams.append(_,N)})):(d="POST",g=t);const v=new Headers(this.headers);return o&&v.set("Prefer",`count=${o}`),new Ac({method:d,url:h,headers:v,schema:this.schemaName,body:g,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class h2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const f2="2.89.0",p2=`realtime-js/${f2}`,tm="1.0.0",g2="2.0.0",y0=tm,bf=1e4,m2=1e3,v2=100;var $o;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})($o||($o={}));var Nn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Nn||(Nn={}));var qi;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(qi||(qi={}));var _f;(function(r){r.websocket="websocket"})(_f||(_f={}));var Al;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Al||(Al={}));class y2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},u=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,t,s){var a,o;const u=e.topic,d=(a=e.ref)!==null&&a!==void 0?a:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",g=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+u.length+g.length+_.length,y=new ArrayBuffer(this.HEADER_LENGTH+N);let k=new DataView(y),A=0;k.setUint8(A++,this.KINDS.userBroadcastPush),k.setUint8(A++,h.length),k.setUint8(A++,d.length),k.setUint8(A++,u.length),k.setUint8(A++,g.length),k.setUint8(A++,_.length),k.setUint8(A++,t),Array.from(h,L=>k.setUint8(A++,L.charCodeAt(0))),Array.from(d,L=>k.setUint8(A++,L.charCodeAt(0))),Array.from(u,L=>k.setUint8(A++,L.charCodeAt(0))),Array.from(g,L=>k.setUint8(A++,L.charCodeAt(0))),Array.from(_,L=>k.setUint8(A++,L.charCodeAt(0)));var C=new Uint8Array(y.byteLength+s.byteLength);return C.set(new Uint8Array(y),0),C.set(new Uint8Array(s),y.byteLength),C.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,o,u,d,h]=s;return t({join_ref:a,ref:o,topic:u,event:d,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2),u=t.getUint8(3),d=t.getUint8(4);let h=this.HEADER_LENGTH+4;const g=s.decode(e.slice(h,h+a));h=h+a;const v=s.decode(e.slice(h,h+o));h=h+o;const _=s.decode(e.slice(h,h+u));h=h+u;const N=e.slice(h,e.byteLength),y=d===this.JSON_ENCODING?JSON.parse(s.decode(N)):N,k={type:this.BROADCAST_EVENT,event:v,payload:y};return u>0&&(k.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class rm{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jr;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(jr||(jr={}));const x0=(r,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,u)=>(o[u]=x2(u,r,e,a),o),{}):{}},x2=(r,e,t,s)=>{const a=e.find(d=>d.name===r),o=a==null?void 0:a.type,u=t[r];return o&&!s.includes(o)?nm(o,u):Nf(u)},nm=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return N2(e,t)}switch(r){case jr.bool:return w2(e);case jr.float4:case jr.float8:case jr.int2:case jr.int4:case jr.int8:case jr.numeric:case jr.oid:return b2(e);case jr.json:case jr.jsonb:return _2(e);case jr.timestamp:return S2(e);case jr.abstime:case jr.date:case jr.daterange:case jr.int4range:case jr.int8range:case jr.money:case jr.reltime:case jr.text:case jr.time:case jr.timestamptz:case jr.timetz:case jr.tsrange:case jr.tstzrange:return Nf(e);default:return Nf(e)}},Nf=r=>r,w2=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},b2=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},_2=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},N2=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let o;const u=r.slice(1,t);try{o=JSON.parse("["+u+"]")}catch{o=u?u.split(","):[]}return o.map(d=>nm(e,d))}return r},S2=r=>typeof r=="string"?r.replace(" ","T"):r,sm=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class $h{constructor(e,t,s={},a=bf){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var w0;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(w0||(w0={}));class mu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=mu.syncState(this.state,a,o,u),this.pendingDiffs.forEach(h=>{this.state=mu.syncDiff(this.state,h,o,u)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=mu.syncDiff(this.state,a,o,u),d())}),this.onJoin((a,o,u)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:u})}),this.onLeave((a,o,u)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),u=this.transformState(t),d={},h={};return this.map(o,(g,v)=>{u[g]||(h[g]=v)}),this.map(u,(g,v)=>{const _=o[g];if(_){const N=v.map(C=>C.presence_ref),y=_.map(C=>C.presence_ref),k=v.filter(C=>y.indexOf(C.presence_ref)<0),A=_.filter(C=>N.indexOf(C.presence_ref)<0);k.length>0&&(d[g]=k),A.length>0&&(h[g]=A)}else d[g]=v}),this.syncDiff(o,{joins:d,leaves:h},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:u}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(d,h)=>{var g;const v=(g=e[d])!==null&&g!==void 0?g:[];if(e[d]=this.cloneDeep(h),v.length>0){const _=e[d].map(y=>y.presence_ref),N=v.filter(y=>_.indexOf(y.presence_ref)<0);e[d].unshift(...N)}s(d,v,h)}),this.map(u,(d,h)=>{let g=e[d];if(!g)return;const v=h.map(_=>_.presence_ref);g=g.filter(_=>v.indexOf(_.presence_ref)<0),e[d]=g,a(d,g,h),g.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var b0;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(b0||(b0={}));var vu;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(vu||(vu={}));var Za;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Za||(Za={}));class Tc{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new $h(this,qi.join,this.params,this.timeout),this.rejoinTimer=new rm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qi.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new mu(this),this.broadcastEndpointURL=sm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Nn.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,g=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[vu.PRESENCE]&&this.bindings[vu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,_={},N={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:g,private:h};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Za.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Za.CLOSED)),this.updateJoinPayload(Object.assign({config:N},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e==null||e(Za.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,C=(k=A==null?void 0:A.length)!==null&&k!==void 0?k:0,L=[];for(let R=0;R<C;R++){const E=A[R],{filter:{event:T,schema:te,table:B,filter:H}}=E,Y=y&&y[R];if(Y&&Y.event===T&&Tc.isFilterValueEqual(Y.schema,te)&&Tc.isFilterValueEqual(Y.table,B)&&Tc.isFilterValueEqual(Y.filter,H))L.push(Object.assign(Object.assign({},E),{id:Y.id}));else{this.unsubscribe(),this.state=Nn.errored,e==null||e(Za.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,e&&e(Za.SUBSCRIBED);return}}).receive("error",y=>{this.state=Nn.errored,e==null||e(Za.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Za.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Nn.joined&&e===vu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var a;if(t==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const g=await d.json();h=g.error||g.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:u}=e,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:u,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=g.body)===null||a===void 0?void 0:a.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var u,d,h;const g=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),g.receive("ok",()=>o("ok")),g.receive("error",()=>o("error")),g.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Nn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qi.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new $h(this,qi.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),u=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),u}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new $h(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>v2){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:g,join:v}=qi;if(s&&[d,h,g,v].indexOf(u)>=0&&s!==this._joinRef())return;let N=this._onMessage(u,t,s);if(t&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var k,A,C;return((k=y.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(A=y.filter)===null||A===void 0?void 0:A.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===u}).map(y=>y.callback(N,s)):(o=this.bindings[u])===null||o===void 0||o.filter(y=>{var k,A,C,L,R,E;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const T=y.id,te=(k=y.filter)===null||k===void 0?void 0:k.event;return T&&((A=t.ids)===null||A===void 0?void 0:A.includes(T))&&(te==="*"||(te==null?void 0:te.toLocaleLowerCase())===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const T=(R=(L=y==null?void 0:y.filter)===null||L===void 0?void 0:L.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return T==="*"||T===((E=t==null?void 0:t.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof N=="object"&&"ids"in N){const k=N.data,{schema:A,table:C,commit_timestamp:L,type:R,errors:E}=k;N=Object.assign(Object.assign({},{schema:A,table:C,commit_timestamp:L,eventType:R,new:{},old:{},errors:E}),this._getPayloadRecords(k))}y.callback(N,s)})}_isClosed(){return this.state===Nn.closed}_isJoined(){return this.state===Nn.joined}_isJoining(){return this.state===Nn.joining}_isLeaving(){return this.state===Nn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Tc.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qi.close,{},e)}_onError(e){this._on(qi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=x0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=x0(e.columns,e.old_record)),t}}const qh=()=>{},xd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},k2=[1e3,2e3,5e3,1e4],j2=1e4,A2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E2{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bf,this.transport=null,this.heartbeatIntervalMs=xd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qh,this.ref=0,this.reconnectTimer=null,this.vsn=y0,this.logger=qh,this.conn=null,this.sendBuffer=[],this.serializer=new y2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${_f.websocket}`,this.httpEndpoint=sm(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case $o.connecting:return Al.Connecting;case $o.open:return Al.Open;case $o.closing:return Al.Closing;default:return Al.Closed}}isConnected(){return this.connectionState()===Al.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new Tc(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(m2,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},xd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:u}=t,d=u?`(${u})`:"",h=o.status||"";this.log("receive",`${h} ${s} ${a} ${d}`.trim(),o),this.channels.filter(g=>g._isMember(s)).forEach(g=>g._trigger(a,o,u)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===$o.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$o.open||this.conn.readyState===$o.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([A2],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,s=!1;if(e)t=e,s=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const o={access_token:t,version:p2};t&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(qi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new rm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,u,d,h,g,v,_,N,y;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:bf,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:xd.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:qh,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:y0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:(k=>k2[k-1]||j2),this.vsn){case tm:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((k,A)=>A(JSON.stringify(k))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((k,A)=>A(JSON.parse(k)));break;case g2:this.encode=(N=e==null?void 0:e.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ku=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function C2(r,e,t){const s=new URL(e,r);if(t)for(const[a,o]of Object.entries(t))o!==void 0&&s.searchParams.set(a,o);return s.toString()}async function P2(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function L2(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:a,body:o,headers:u}){const d=C2(r.baseUrl,s,a),h=await P2(r.auth),g=await e(d,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...h,...u},body:o?JSON.stringify(o):void 0}),v=await g.text(),_=(g.headers.get("content-type")||"").includes("application/json"),N=_&&v?JSON.parse(v):v;if(!g.ok){const y=_?N:void 0,k=y==null?void 0:y.error;throw new ku((k==null?void 0:k.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:y})}return{status:g.status,headers:g.headers,data:N}}}}function wd(r){return r.join("")}var T2=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:wd(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wd(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wd(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wd(r.namespace)}`}),!0}catch(e){if(e instanceof ku&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof ku&&t.status===409)return;throw t}}};function vc(r){return r.join("")}var O2=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vc(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vc(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vc(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vc(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vc(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vc(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof ku&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof ku&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},I2=class{constructor(r){var s;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=L2({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(s=r.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new T2(this.client,e),this.tableOps=new O2(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},Wd=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function Wr(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var R2=class extends Wd{constructor(r,e,t){super(r),this.name="StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Sf=class extends Wd{constructor(r,e){super(r),this.name="StorageUnknownError",this.originalError=e}};const Jf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),D2=()=>Response,kf=r=>{if(Array.isArray(r))return r.map(t=>kf(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=kf(s)}),e},F2=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},B2=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function ju(r){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(r)}function M2(r,e){if(ju(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(ju(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function U2(r){var e=M2(r,"string");return ju(e)=="symbol"?e:e+""}function $2(r,e,t){return(e=U2(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function Pt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_0(Object(t),!0).forEach(function(s){$2(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_0(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}const zh=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},q2=async(r,e,t)=>{r instanceof await D2()&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{const a=r.status||500,o=(s==null?void 0:s.statusCode)||a+"";e(new R2(zh(s),a,o))}).catch(s=>{e(new Sf(zh(s),s))}):e(new Sf(zh(r),r))},z2=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?a:(F2(s)?(a.headers=Pt({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Pt(Pt({},a),t))};async function Du(r,e,t,s,a,o){return new Promise((u,d)=>{r(t,z2(e,s,a,o)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>q2(h,d,s))})}async function Au(r,e,t,s){return Du(r,"GET",e,t,s)}async function $i(r,e,t,s,a){return Du(r,"POST",e,s,a,t)}async function jf(r,e,t,s,a){return Du(r,"PUT",e,s,a,t)}async function W2(r,e,t,s){return Du(r,"HEAD",e,Pt(Pt({},t),{},{noResolveJson:!0}),s)}async function Yf(r,e,t,s,a){return Du(r,"DELETE",e,s,a,t)}var H2=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Wr(e))return{data:null,error:e};throw e}}};let im;im=Symbol.toStringTag;var V2=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[im]="BlobDownloadBuilder",this.promise=null}asStream(){return new H2(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Wr(e))return{data:null,error:e};throw e}}};const G2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},N0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var K2=class{constructor(r,e={},t,s){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.bucketId=t,this.fetch=Jf(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,e,t,s){var a=this;try{let o;const u=Pt(Pt({},N0),s);let d=Pt(Pt({},a.headers),r==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&t instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),h&&o.append("metadata",a.encodeMetadata(h)),o.append("",t)):typeof FormData<"u"&&t instanceof FormData?(o=t,o.has("cacheControl")||o.append("cacheControl",u.cacheControl),h&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(h))):(o=t,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!u.duplex&&(u.duplex="half")),s!=null&&s.headers&&(d=Pt(Pt({},d),s.headers));const g=a._removeEmptyFolders(e),v=a._getFinalPath(g),_=await(r=="PUT"?jf:$i)(a.fetch,`${a.url}/object/${v}`,o,Pt({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:g,id:_.Id,fullPath:_.Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Wr(o))return{data:null,error:o};throw o}}async upload(r,e,t){return this.uploadOrUpdate("POST",r,e,t)}async uploadToSignedUrl(r,e,t,s){var a=this;const o=a._removeEmptyFolders(r),u=a._getFinalPath(o),d=new URL(a.url+`/object/upload/sign/${u}`);d.searchParams.set("token",e);try{let h;const g=Pt({upsert:N0.upsert},s),v=Pt(Pt({},a.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&t instanceof Blob?(h=new FormData,h.append("cacheControl",g.cacheControl),h.append("",t)):typeof FormData<"u"&&t instanceof FormData?(h=t,h.append("cacheControl",g.cacheControl)):(h=t,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType),{data:{path:o,fullPath:(await jf(a.fetch,d.toString(),h,{headers:v})).Key},error:null}}catch(h){if(a.shouldThrowOnError)throw h;if(Wr(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(r,e){var t=this;try{let s=t._getFinalPath(r);const a=Pt({},t.headers);e!=null&&e.upsert&&(a["x-upsert"]="true");const o=await $i(t.fetch,`${t.url}/object/upload/sign/${s}`,{},{headers:a}),u=new URL(t.url+o.url),d=u.searchParams.get("token");if(!d)throw new Wd("No token returned by API");return{data:{signedUrl:u.toString(),path:r,token:d},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async update(r,e,t){return this.uploadOrUpdate("PUT",r,e,t)}async move(r,e,t){var s=this;try{return{data:await $i(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async copy(r,e,t){var s=this;try{return{data:{path:(await $i(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async createSignedUrl(r,e,t){var s=this;try{let a=s._getFinalPath(r),o=await $i(s.fetch,`${s.url}/object/sign/${a}`,Pt({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:s.headers});const u=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return o={signedUrl:encodeURI(`${s.url}${o.signedURL}${u}`)},{data:o,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async createSignedUrls(r,e,t){var s=this;try{const a=await $i(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:r},{headers:s.headers}),o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:a.map(u=>Pt(Pt({},u),{},{signedUrl:u.signedURL?encodeURI(`${s.url}${u.signedURL}${o}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}download(r,e){const t=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(r),u=()=>Au(this.fetch,`${this.url}/${t}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new V2(u,this.shouldThrowOnError)}async info(r){var e=this;const t=e._getFinalPath(r);try{return{data:kf(await Au(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async exists(r){var e=this;const t=e._getFinalPath(r);try{return await W2(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Wr(s)&&s instanceof Sf){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(r,e){const t=this._getFinalPath(r),s=[],a=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&s.push(a);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&s.push(u);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${d}`)}}}async remove(r){var e=this;try{return{data:await Yf(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async list(r,e,t){var s=this;try{const a=Pt(Pt(Pt({},G2),e),{},{prefix:r||""});return{data:await $i(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},t),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Wr(a))return{data:null,error:a};throw a}}async listV2(r,e){var t=this;try{const s=Pt({},r);return{data:await $i(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,s,{headers:t.headers},e),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const am="2.89.0",om={"X-Client-Info":`storage-js/${am}`};var J2=class{constructor(r,e={},t,s){this.shouldThrowOnError=!1;const a=new URL(r);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Pt(Pt({},om),e),this.fetch=Jf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var e=this;try{const t=e.listBucketOptionsToQueryString(r);return{data:await Au(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await Au(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async createBucket(r,e={public:!1}){var t=this;try{return{data:await $i(t.fetch,`${t.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async updateBucket(r,e){var t=this;try{return{data:await jf(t.fetch,`${t.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Wr(s))return{data:null,error:s};throw s}}async emptyBucket(r){var e=this;try{return{data:await $i(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Yf(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Y2=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Pt(Pt({},om),e),this.fetch=Jf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await $i(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async listBuckets(r){var e=this;try{const t=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&t.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&t.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&t.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&t.set("sortOrder",r.sortOrder),r!=null&&r.search&&t.set("search",r.search);const s=t.toString(),a=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return{data:await Au(e.fetch,a,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Yf(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Wr(t))return{data:null,error:t};throw t}}from(r){var e=this;if(!B2(r))throw new Wd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new I2({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(t,{get(a,o){const u=a[o];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(a,d),error:null}}catch(h){if(s)throw h;return{data:null,error:h}}}}})}};const Xf={"X-Client-Info":`storage-js/${am}`,"Content-Type":"application/json"};var lm=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Js(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var Wh=class extends lm{constructor(r,e,t){super(r),this.name="StorageVectorsApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},X2=class extends lm{constructor(r,e){super(r),this.name="StorageVectorsUnknownError",this.originalError=e}};const Qf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Q2=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},S0=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Z2=async(r,e,t)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const s=r.status||500,a=r;if(typeof a.json=="function")a.json().then(o=>{const u=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new Wh(S0(o),s,u))}).catch(()=>{const o=s+"";e(new Wh(a.statusText||`HTTP ${s} error`,s,o))});else{const o=s+"";e(new Wh(a.statusText||`HTTP ${s} error`,s,o))}}else e(new X2(S0(r),r))},ev=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return s?(Q2(s)?(a.headers=Pt({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Pt(Pt({},a),t)):a};async function tv(r,e,t,s,a,o){return new Promise((u,d)=>{r(t,ev(e,s,a,o)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;const g=h.headers.get("content-type");return!g||!g.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>Z2(h,d,s))})}async function Ys(r,e,t,s,a){return tv(r,"POST",e,s,a,t)}var rv=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Pt(Pt({},Xf),e),this.fetch=Qf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async getIndex(r,e){var t=this;try{return{data:await Ys(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Js(s))return{data:null,error:s};throw s}}async listIndexes(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async deleteIndex(r,e){var t=this;try{return{data:await Ys(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Js(s))return{data:null,error:s};throw s}}},nv=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Pt(Pt({},Xf),e),this.fetch=Qf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var e=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ys(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async getVectors(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async listVectors(r){var e=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await Ys(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async queryVectors(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async deleteVectors(r){var e=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ys(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}},sv=class{constructor(r,e={},t){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Pt(Pt({},Xf),e),this.fetch=Qf(t)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async getBucket(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async listBuckets(r={}){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}async deleteBucket(r){var e=this;try{return{data:await Ys(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Js(t))return{data:null,error:t};throw t}}},iv=class extends sv{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new av(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,t=this;return e().call(t,r)}async getBucket(r){var e=()=>super.getBucket,t=this;return e().call(t,r)}async listBuckets(r={}){var e=()=>super.listBuckets,t=this;return e().call(t,r)}async deleteBucket(r){var e=()=>super.deleteBucket,t=this;return e().call(t,r)}},av=class extends rv{constructor(r,e,t,s){super(r,e,s),this.vectorBucketName=t}async createIndex(r){var e=()=>super.createIndex,t=this;return e().call(t,Pt(Pt({},r),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,t=this;return e().call(t,Pt(Pt({},r),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,r)}index(r){return new ov(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},ov=class extends nv{constructor(r,e,t,s,a){super(r,e,a),this.vectorBucketName=t,this.indexName=s}async putVectors(r){var e=()=>super.putVectors,t=this;return e().call(t,Pt(Pt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(r){var e=()=>super.getVectors,t=this;return e().call(t,Pt(Pt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,t=this;return e().call(t,Pt(Pt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,t=this;return e().call(t,Pt(Pt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,t=this;return e().call(t,Pt(Pt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},lv=class extends J2{constructor(r,e={},t,s){super(r,e,t,s)}from(r){return new K2(this.url,this.headers,r,this.fetch)}get vectors(){return new iv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Y2(this.url+"/iceberg",this.headers,this.fetch)}};const cm="2.89.0",Ec=30*1e3,Af=3,Hh=Af*Ec,cv="http://localhost:9999",uv="supabase.auth.token",dv={"X-Client-Info":`gotrue-js/${cm}`},Ef="X-Supabase-Api-Version",um={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},hv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fv=600*1e3;class Eu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function xt(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class pv extends Eu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function gv(r){return xt(r)&&r.name==="AuthApiError"}class El extends Eu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class to extends Eu{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Ks extends to{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mv(r){return xt(r)&&r.name==="AuthSessionMissingError"}class yc extends to{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bd extends to{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _d extends to{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vv(r){return xt(r)&&r.name==="AuthImplicitGrantRedirectError"}class k0 extends to{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class yv extends to{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cf extends to{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Vh(r){return xt(r)&&r.name==="AuthRetryableFetchError"}class j0 extends to{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Pf extends to{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),A0=` 	
\r=`.split(""),xv=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<A0.length;e+=1)r[A0[e].charCodeAt(0)]=-2;for(let e=0;e<Dd.length;e+=1)r[Dd[e].charCodeAt(0)]=e;return r})();function E0(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Dd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Dd[s]),e.queuedBits-=6}}function dm(r,e,t){const s=xv[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function C0(r){const e=[],t=u=>{e.push(String.fromCodePoint(u))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=u=>{_v(u,s,t)};for(let u=0;u<r.length;u+=1)dm(r.charCodeAt(u),a,o);return e.join("")}function wv(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function bv(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}wv(s,e)}}function _v(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ic(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)dm(r.charCodeAt(a),t,s);return new Uint8Array(e)}function Nv(r){const e=[];return bv(r,t=>e.push(t)),new Uint8Array(e)}function Pl(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return r.forEach(a=>E0(a,t,s)),E0(null,t,s),e.join("")}function Sv(r){return Math.round(Date.now()/1e3)+r}function kv(){return Symbol("auth-callback")}const Mn=()=>typeof window<"u"&&typeof document<"u",Nl={tested:!1,writable:!1},hm=()=>{if(!Mn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nl.tested)return Nl.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Nl.tested=!0,Nl.writable=!0}catch{Nl.tested=!0,Nl.writable=!1}return Nl.writable};function jv(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const fm=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Av=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Cc=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Sl=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Bn=async(r,e)=>{await r.removeItem(e)};class Hd{constructor(){this.promise=new Hd.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Hd.promiseConstructor=Promise;function Gh(r){const e=r.split(".");if(e.length!==3)throw new Pf("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!hv.test(e[s]))throw new Pf("JWT not in base64url format");return{header:JSON.parse(C0(e[0])),payload:JSON.parse(C0(e[1])),signature:Ic(e[2]),raw:{header:e[0],payload:e[1]}}}async function Ev(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Cv(r,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const u=await r(o);if(!e(o,null,u)){s(u);return}}catch(u){if(!e(o,u)){a(u);return}}})()})}function Pv(r){return("0"+r.toString(16)).substr(-2)}function Lv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Pv).join("")}async function Tv(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function Ov(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Tv(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xc(r,e,t=!1){const s=Lv();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Cc(r,`${e}-code-verifier`,a);const o=await Ov(s);return[o,s===o?"plain":"s256"]}const Iv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rv(r){const e=r.headers.get(Ef);if(!e||!e.match(Iv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Dv(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Fv(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Bv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wc(r){if(!Bv.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kh(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mv(r,e){return new Proxy(r,{get:(t,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,a)}})}function P0(r){return JSON.parse(JSON.stringify(r))}const kl=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Uv=[502,503,504];async function L0(r){var e;if(!Av(r))throw new Cf(kl(r),0);if(Uv.includes(r.status))throw new Cf(kl(r),r.status);let t;try{t=await r.json()}catch(o){throw new El(kl(o),o)}let s;const a=Rv(r);if(a&&a.getTime()>=um["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new j0(kl(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ks}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,u)=>o&&typeof u=="string",!0))throw new j0(kl(t),r.status,t.weak_password.reasons);throw new pv(kl(t),r.status||500,s)}const $v=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Ct(r,e,t,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[Ef]||(o[Ef]=um["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const u=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(u.redirect_to=s.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await qv(r,e,t+d,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function qv(r,e,t,s,a,o){const u=$v(e,s,a,o);let d;try{d=await r(t,Object.assign({},u))}catch(h){throw console.error(h),new Cf(kl(h),0)}if(d.ok||await L0(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(h){await L0(h)}}function Ui(r){var e;let t=null;Hv(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Sv(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function T0(r){const e=Ui(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function zo(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function zv(r){return{data:r,error:null}}function Wv(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=r,u=zd(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function O0(r){return r}function Hv(r){return r.access_token&&r.refresh_token&&r.expires_in}const Jh=["global","local","others"];class Vv{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=fm(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Jh[0]){if(Jh.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jh.join(", ")}`);try{return await Ct(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(xt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:zo})}catch(s){if(xt(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=zd(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Wv,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(xt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ct(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zo})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,u,d,h;try{const g={nextPage:null,lastPage:0,total:0},v=await Ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:O0});if(v.error)throw v.error;const _=await v.json(),N=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(k=>{const A=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);g[`${C}Page`]=A}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(xt(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){wc(e);try{return await Ct(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zo})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wc(e);try{return await Ct(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:zo})}catch(s){if(xt(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){wc(e);try{return await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:zo})}catch(s){if(xt(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){wc(e.userId);try{const{data:t,error:s}=await Ct(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wc(e.userId),wc(e.id);try{return{data:await Ct(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,u,d,h;try{const g={nextPage:null,lastPage:0,total:0},v=await Ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:O0});if(v.error)throw v.error;const _=await v.json(),N=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(k=>{const A=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);g[`${C}Page`]=A}),g.total=parseInt(N)),{data:Object.assign(Object.assign({},_),g),error:null}}catch(g){if(xt(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(xt(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}}function I0(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const bc={debug:!!(globalThis&&hm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pm extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Gv extends pm{}async function Kv(r,e,t){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),bc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Gv(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(bc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Jv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gm(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Yv(r){return parseInt(r,16)}function Xv(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Qv(r){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:u,notBefore:d,requestId:h,resources:g,scheme:v,uri:_,version:N}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const y=gm(r.address),k=v?`${v}://${s}`:s,A=r.statement?`${r.statement}
`:"",C=`${k} wants you to sign in with your Ethereum account:
${y}

${A}`;let L=`URI: ${_}
Version: ${N}
Chain ID: ${t}${u?`
Nonce: ${u}`:""}
Issued At: ${o.toISOString()}`;if(a&&(L+=`
Expiration Time: ${a.toISOString()}`),d&&(L+=`
Not Before: ${d.toISOString()}`),h&&(L+=`
Request ID: ${h}`),g){let R=`
Resources:`;for(const E of g){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);R+=`
- ${E}`}L+=R}return`${C}
${L}`}class gn extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Fd extends gn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Zv({error:r,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new gn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new gn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new gn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new gn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new gn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new gn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new gn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new gn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(mm(u)){if(o.rp.id!==u)return new gn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new gn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new gn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function ey({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new gn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new gn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(mm(s)){if(t.rpId!==s)return new gn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new gn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new gn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new gn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class ty{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ry=new ty;function ny(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,a=zd(r,["challenge","user","excludeCredentials"]),o=Ic(e).buffer,u=Object.assign(Object.assign({},t),{id:Ic(t.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:u});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const g=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},g),{id:Ic(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return d}function sy(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=zd(r,["challenge","allowCredentials"]),a=Ic(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let u=0;u<t.length;u++){const d=t[u];o.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Ic(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function iy(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:Pl(new Uint8Array(r.response.attestationObject)),clientDataJSON:Pl(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ay(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Pl(new Uint8Array(a.authenticatorData)),clientDataJSON:Pl(new Uint8Array(a.clientDataJSON)),signature:Pl(new Uint8Array(a.signature)),userHandle:a.userHandle?Pl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mm(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function R0(){var r,e;return!!(Mn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function oy(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Fd("Browser returned unexpected credential type",e)}:{data:null,error:new Fd("Empty credential response",e)}}catch(e){return{data:null,error:Zv({error:e,options:r})}}}async function ly(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Fd("Browser returned unexpected credential type",e)}:{data:null,error:new Fd("Empty credential response",e)}}catch(e){return{data:null,error:ey({error:e,options:r})}}}const cy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},uy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Bd(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of r)if(a)for(const o in a){const u=a[o];if(u!==void 0)if(Array.isArray(u))s[o]=u;else if(t(u))s[o]=u;else if(e(u)){const d=s[o];e(d)?s[o]=Bd(d,u):s[o]=Bd(u)}else s[o]=u}return s}function dy(r,e){return Bd(cy,r,e||{})}function hy(r,e){return Bd(uy,r,e||{})}class fy{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:d};const h=a??ry.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:g}=u.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${s}`),g.displayName||(g.displayName=g.name)}switch(u.webauthn.type){case"create":{const g=dy(u.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:v,error:_}=await oy({publicKey:g,signal:h});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const g=hy(u.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:v,error:_}=await ly(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:g,signal:h}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(u){return xt(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new Eu("rpId is required for WebAuthn authentication")};try{if(!R0())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:s,credential_response:h.credential_response}})}catch(u){return xt(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new Eu("rpId is required for WebAuthn registration")};try{if(!R0())return{data:null,error:new El("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===e&&N.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:d};const{data:h,error:g}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:g}}catch(u){return xt(u)?{data:null,error:u}:{data:null,error:new El("Unexpected error in register",u)}}}}Jv();const py={url:cv,storageKey:uv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function D0(r,e,t){return await t()}const _c={};class Cu{get jwks(){var e,t;return(t=(e=_c[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){_c[this.storageKey]=Object.assign(Object.assign({},_c[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=_c[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_c[this.storageKey]=Object.assign(Object.assign({},_c[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},py),e);if(this.storageKey=o.storageKey,this.instanceID=(t=Cu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Cu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Mn()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Vv({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=fm(o.fetch),this.lock=o.lock||D0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Mn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Kv:this.lock=D0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:hm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=I0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=I0(this.memoryStorage)),Mn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${cm}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(Mn()&&(t=jv(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),Mn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),vv(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:u,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xt(t)?this._returnResult({error:t}):this._returnResult({error:new El("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ui}),{data:u,error:d}=o;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const h=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(o){if(xt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:v,password:_,options:N}=e;let y=null,k=null;this.flowType==="pkce"&&([y,k]=await xc(this.storage,this.storageKey)),o=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:v,password:_,data:(t=N==null?void 0:N.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:y,code_challenge_method:k},xform:Ui})}else if("phone"in e){const{phone:v,password:_,options:N}=e;o=await Ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(s=N==null?void 0:N.data)!==null&&s!==void 0?s:{},channel:(a=N==null?void 0:N.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:Ui})}else throw new bd("You must provide either an email or phone number and a password");const{data:u,error:d}=o;if(d||!u)return await Bn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=u.session,g=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(o){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),xt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:u,options:d}=e;t=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:T0})}else if("phone"in e){const{phone:o,password:u,options:d}=e;t=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:T0})}else throw new bd("You must provide either an email or phone number and a password");const{data:s,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const o=new yc;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,u,d,h,g,v,_,N;let y,k;if("message"in e)y=e.message,k=e.signature;else{const{chain:A,wallet:C,statement:L,options:R}=e;let E;if(Mn())if(typeof C=="object")E=C;else{const J=window;if("ethereum"in J&&typeof J.ethereum=="object"&&"request"in J.ethereum&&typeof J.ethereum.request=="function")E=J.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=C}const T=new URL((t=R==null?void 0:R.url)!==null&&t!==void 0?t:window.location.href),te=await E.request({method:"eth_requestAccounts"}).then(J=>J).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!te||te.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=gm(te[0]);let H=(s=R==null?void 0:R.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!H){const J=await E.request({method:"eth_chainId"});H=Yv(J)}const Y={domain:T.host,address:B,statement:L,uri:T.href,version:"1",chainId:H,nonce:(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(u=(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(g=R==null?void 0:R.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=R==null?void 0:R.signInWithEthereum)===null||v===void 0?void 0:v.resources};y=Qv(Y),k=await E.request({method:"personal_sign",params:[Xv(y),B]})}try{const{data:A,error:C}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:k},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:Ui});if(C)throw C;if(!A||!A.session||!A.user){const L=new yc;return this._returnResult({data:{user:null,session:null},error:L})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:C})}catch(A){if(xt(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var t,s,a,o,u,d,h,g,v,_,N,y;let k,A;if("message"in e)k=e.message,A=e.signature;else{const{chain:C,wallet:L,statement:R,options:E}=e;let T;if(Mn())if(typeof L=="object")T=L;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))T=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=L}const te=new URL((t=E==null?void 0:E.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in T&&T.signIn){const B=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:te.host,uri:te.href}),R?{statement:R}:null));let H;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")H=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)H=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)k=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),A=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${te.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${te.href}`,`Issued At: ${(a=(s=E==null?void 0:E.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((h=E==null?void 0:E.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((g=E==null?void 0:E.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((_=(v=E==null?void 0:E.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...E.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const B=await T.signMessage(new TextEncoder().encode(k),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=B}}try{const{data:C,error:L}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Pl(A)},!((N=e.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ui});if(L)throw L;if(!C||!C.session||!C.user){const R=new yc;return this._returnResult({data:{user:null,session:null},error:R})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:L})}catch(C){if(xt(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{if(!s&&this.flowType==="pkce")throw new yv;const{data:o,error:u}=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Ui});if(await Bn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!o||!o.session||!o.user){const d=new yc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:u})}catch(o){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),xt(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:u}=e,d=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:u,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ui}),{data:h,error:g}=d;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h||!h.session||!h.user){const v=new yc;return this._returnResult({data:{user:null,session:null},error:v})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:g})}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,a,o,u;try{if("email"in e){const{email:d,options:h}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await xc(this.storage,this.storageKey));const{error:_}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:d,options:h}=e,{data:g,error:v}=await Ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:v})}throw new bd("You must provide either an email or phone number.")}catch(d){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),xt(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:u,error:d}=await Ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Ui});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,g=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:g,session:h},error:null})}catch(a){if(xt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,s,a,o,u;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await xc(this.storage,this.storageKey));const g=await Ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:zv});return!((o=g.data)===null||o===void 0)&&o.url&&Mn()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(d){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),xt(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ks;const{error:a}=await Ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(xt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:u}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:u,error:d}=await Ct(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new bd("You must provide either an email or phone number and a type")}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Hh:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const u=await Sl(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Kh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=Mv(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zo}):await this._useSession(async t=>{var s,a,o;const{data:u,error:d}=t;if(d)throw d;return!(!((s=u.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ks}:await Ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=u.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:zo})})}catch(t){if(xt(t))return mv(t)&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Ks;const u=a.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await xc(this.storage,this.storageKey));const{data:g,error:v}=await Ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:zo});if(v)throw v;return u.user=g.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(s){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),xt(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ks;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:u}=Gh(e.access_token);if(u.exp&&(s=u.exp,a=s<=t),a){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(xt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:u,error:d}=t;if(d)throw d;e=(s=u.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ks;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Mn())throw new _d("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _d(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new k0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _d("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new k0("No code detected.");const{data:R,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:u,expires_in:d,expires_at:h,token_type:g}=e;if(!o||!d||!u||!g)throw new _d("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(d);let N=v+_;h&&(N=parseInt(h));const y=N-v;y*1e3<=Ec&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${_}s`);const k=N-_;v-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,N,v):v-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,N,v);const{data:A,error:C}=await this._getUser(o);if(C)throw C;const L={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:_,expires_at:N,refresh_token:u,token_type:g,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:e.type},error:null})}catch(s){if(xt(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({error:o});const u=(s=a.session)===null||s===void 0?void 0:s.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(gv(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=kv(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:u}=t;if(u)throw u;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await xc(this.storage,this.storageKey,!0));try{return await Ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),xt(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var u,d,h,g,v;const{data:_,error:N}=o;if(N)throw N;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Ct(this.fetch,"GET",y,{headers:this.headers,jwt:(v=(g=_.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return Mn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(xt(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:u,provider:d,token:h,access_token:g,nonce:v}=e,_=await Ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ui}),{data:N,error:y}=_;return y?this._returnResult({data:{user:null,session:null},error:y}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new yc}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:y}))}catch(a){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),xt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)throw u;return await Ct(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Cv(async a=>(a>0&&await Ev(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ui})),(a,o)=>{const u=200*Math.pow(2,a);return o&&Vh(o)&&Date.now()+u-s<Ec})}catch(s){if(this._debug(t,"error",s),xt(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Mn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Sl(this.storage,this.storageKey);if(a&&this.userStorage){let u=await Sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:a.user},await Cc(this.userStorage,this.storageKey+"-user",u)),a.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Kh()}else if(a&&!a.user&&!a.user){const u=await Sl(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(a.user=u.user,await Bn(this.storage,this.storageKey+"-user"),await Cc(this.storage,this.storageKey,a)):a.user=Kh()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Hh;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Hh}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:u}=await this._callRefreshToken(a.refresh_token);u&&(console.error(u),Vh(u)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(a.access_token);!d&&(u!=null&&u.user)?(a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(s,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ks;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Hd;const{data:o,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!o.session)throw new Ks;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),xt(o)){const u={data:null,error:o};return Vh(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(u),u}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(h){o.push(h)}});if(await Promise.all(u),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bn(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Cc(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=P0(a);await Cc(this.storage,this.storageKey,o)}else{const a=P0(t);await Cc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Bn(this.storage,this.storageKey),await Bn(this.storage,this.storageKey+"-code-verifier"),await Bn(this.storage,this.storageKey+"-user"),this.userStorage&&await Bn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ec);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Ec);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ec}ms, refresh threshold is ${Af} ticks`),a<=Af&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pm)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,u]=await xc(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(u)}`});a.push(d.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?this._returnResult({data:null,error:o}):await Ct(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:u}=t;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:g}=await Ct(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?iy(e.webauthn.credential_response):ay(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await Ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const u=await Ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:ny(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:sy(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Gh(s.access_token);let u=null;o.aal&&(u=o.aal);let d=u;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(d="aal2");const g=o.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await Ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ks})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ks});const u=await Ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Mn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(xt(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ks});const u=await Ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&Mn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(s){if(xt(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await Ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ks})})}catch(e){if(xt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?(await Ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ks})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(d=>d.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===e),s&&this.jwks_cached_at+fv>a)return s;const{data:o,error:u}=await Ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(d=>d.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:y,error:k}=await this.getSession();if(k||!y.session)return this._returnResult({data:null,error:k});s=y.session.access_token}const{header:a,payload:o,signature:u,raw:{header:d,payload:h}}=Gh(s);t!=null&&t.allowExpired||Dv(o.exp);const g=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!g){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:o,header:a,signature:u},error:null}}const v=Fv(a.alg),_=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,u,Nv(`${d}.${h}`)))throw new Pf("Invalid JWT signature");return{data:{claims:o,header:a,signature:u},error:null}}catch(s){if(xt(s))return this._returnResult({data:null,error:s});throw s}}}Cu.nextInstanceID={};const gy=Cu,my="2.89.0";let fu="";typeof Deno<"u"?fu="deno":typeof document<"u"?fu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fu="react-native":fu="node";const vy={"X-Client-Info":`supabase-js-${fu}/${my}`},yy={headers:vy},xy={schema:"public"},wy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},by={};function Pu(r){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(r)}function _y(r,e){if(Pu(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(Pu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ny(r){var e=_y(r,"string");return Pu(e)=="symbol"?e:e+""}function Sy(r,e,t){return(e=Ny(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function F0(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function tn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F0(Object(t),!0).forEach(function(s){Sy(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):F0(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}const ky=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),jy=()=>Headers,Ay=(r,e,t)=>{const s=ky(t),a=jy();return async(o,u)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:r;let g=new a(u==null?void 0:u.headers);return g.has("apikey")||g.set("apikey",r),g.has("Authorization")||g.set("Authorization",`Bearer ${h}`),s(o,tn(tn({},u),{},{headers:g}))}};function Ey(r){return r.endsWith("/")?r:r+"/"}function Cy(r,e){var t,s;const{db:a,auth:o,realtime:u,global:d}=r,{db:h,auth:g,realtime:v,global:_}=e,N={db:tn(tn({},h),a),auth:tn(tn({},g),o),realtime:tn(tn({},v),u),storage:{},global:tn(tn(tn({},_),d),{},{headers:tn(tn({},(t=_==null?void 0:_.headers)!==null&&t!==void 0?t:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?N.accessToken=r.accessToken:delete N.accessToken,N}function Py(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ey(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ly=class extends gy{constructor(r){super(r)}},Ty=class{constructor(r,e,t){var s,a;this.supabaseUrl=r,this.supabaseKey=e;const o=Py(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const u=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:xy,realtime:by,auth:tn(tn({},wy),{},{storageKey:u}),global:yy},h=Cy(t??{},d);if(this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=h.auth)!==null&&g!==void 0?g:{},this.headers,h.global.fetch)}this.fetch=Ay(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(tn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new d2(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new lv(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new a2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,t)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,t;if(r.accessToken)return await r.accessToken();const{data:s}=await r.auth.getSession();return(e=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:a,storageKey:o,flowType:u,lock:d,debug:h,throwOnError:g},v,_){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ly({url:this.authUrl.href,headers:tn(tn({},N),v),storageKey:o,autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:s,userStorage:a,flowType:u,lock:d,debug:h,throwOnError:g,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new E2(this.realtimeUrl.href,tn(tn({},r),{},{params:tn(tn({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(r,e,t){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Oy=(r,e,t)=>new Ty(r,e,t);function Iy(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Iy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const et=Oy(`https://${t2}.supabase.co`,r2),vm={async signUp(r,e,t,s,a){const{data:o,error:u}=await et.auth.signUp({email:r,password:e});if(u)throw u;if(o.user){const{error:d}=await et.from("profiles").insert({id:o.user.id,email:r,full_name:t,role:s,assigned_depot_id:a||null,password:e});d&&console.error("Error creating profile:",d)}return o},async signIn(r,e){const{data:t,error:s}=await et.auth.signInWithPassword({email:r,password:e});if(!s&&t.session){const u=await this.getUserProfile(r);return{...t,user:{...t.user,role:(u==null?void 0:u.role)||"owner",assigned_depot_id:(u==null?void 0:u.assigned_depot_id)||null}}}const{data:a,error:o}=await et.from("profiles").select("*").eq("email",r).eq("password",e).single();if(o||!a)throw new Error("Invalid login credentials");return{user:{id:a.id,email:a.email,role:a.role,assigned_depot_id:a.assigned_depot_id||null},session:{access_token:"mock-token",user:a}}},async signOut(){await et.auth.signOut()},async getSession(){const{data:r}=await et.auth.getSession();return r.session},async getUserProfile(r){const{data:e,error:t}=await et.from("profiles").select("*").eq("email",r).single();return t?null:e}},Xs={async getAll(){const{data:r,error:e}=await et.from("bookings_complete").select("*").order("created_at",{ascending:!1});if(e)throw e;return{bookings:r}},async getById(r){const{data:e,error:t}=await et.from("bookings").select("*").eq("id",r).single();if(t)throw t;return{booking:e}},async create(r){var e,t,s;try{const a=await this.createAtomic(r);if(a)return console.log("[BookingsAPI] Booking created atomically"),a}catch(a){a.code==="PGRST202"||a.code==="42883"||((e=a.message)==null?void 0:e.includes("404"))||((t=a.message)==null?void 0:t.includes("not found"))||((s=a.message)==null?void 0:s.includes("does not exist"))||console.warn("[BookingsAPI] Atomic creation failed, using fallback:",a.message)}return this.createSequential(r)},async createAtomic(r){const{data:e,error:t}=await et.rpc("create_booking_atomic",{p_booking:{origin_depot_id:r.origin_depot_id,destination_depot_id:r.destination_depot_id,payment_method:r.payment_method,delivery_type:r.delivery_type,delivery_charges:r.delivery_charges||0,sender_name:r.sender_name,sender_phone:r.sender_phone,subtotal:r.subtotal||0,total_amount:r.total_amount||0,status:r.current_status||"booked",custom_instructions:r.special_instructions},p_receivers:(r.receivers||[]).map((s,a)=>({name:s.name,phone:s.phone,address:s.address||null,order:a+1,packages:(s.packages||[]).map(o=>({packageId:o.packageId,size:o.size,quantity:o.quantity,price:o.price,description:o.description}))}))});if(t)throw t;return{booking:{id:e.id,receipt_number:e.receipt_number}}},async createSequential(r){try{const{data:e,error:t}=await et.from("bookings").insert({origin_depot_id:r.origin_depot_id,destination_depot_id:r.destination_depot_id,payment_method:r.payment_method,delivery_type:r.delivery_type,delivery_charges:r.delivery_charges,sender_name:r.sender_name,sender_phone:r.sender_phone,subtotal:r.subtotal,total_amount:r.total_amount,status:r.current_status||"booked",custom_instructions:r.special_instructions}).select().single();if(t)throw t;const s=r.receivers||[];for(let a=0;a<s.length;a++){const o=s[a],{data:u,error:d}=await et.from("booking_receivers").insert({booking_id:e.id,receiver_name:o.name,receiver_phone:o.phone,delivery_address:o.address||null,receiver_order:a+1}).select().single();if(d)throw d;const h=o.packages||[];for(const g of h){let v=null;g.packageId&&g.packageId!=="custom"&&g.packageId.length>10&&(v=g.packageId);const _={receiver_id:u.id,package_id:v,package_size:g.size||"Custom",quantity:parseInt(String(g.quantity))||1,price_per_unit:parseFloat(String(g.price))||0,description:g.description||null};console.log("Inserting package:",_);const{error:N}=await et.from("receiver_packages").insert(_);if(N)throw console.error("Package insert error:",N,"Data:",_),N}}return{booking:e}}catch(e){throw console.error("Error creating booking:",e),e}},async update(r,e){const{data:t,error:s}=await et.from("bookings").update(e).eq("id",r).select().single();if(s)throw s;return{booking:t}},async updateStatus(r,e){const t={status:e};e==="delivered"&&(t.delivered_at=new Date().toISOString());const{data:s,error:a}=await et.from("bookings").update(t).eq("id",r).select().single();if(a)throw a;return{booking:s}}},Vo={async getAll(){const{data:r,error:e}=await et.from("trips").select("*").order("created_at",{ascending:!1});if(e)throw console.error("Trips getAll error:",e.code,e.message,e.details,e.hint),e;return{trips:r||[]}},async create(r,e){const s={id:`TR-${Date.now().toString().slice(-8)}`,driver_name:r.driver,vehicle_number:r.vehicle,status:"in_transit"};r.driverPhone&&(s.driver_phone=r.driverPhone),r.tripCost&&(s.trip_cost=r.tripCost),r.originId&&(s.origin_depot_id=r.originId),r.destinationId&&(s.destination_depot_id=r.destinationId),r.departure&&(s.departure_time=r.departure),r.eta&&(s.arrival_time=r.eta);const{data:a,error:o}=await et.from("trips").insert(s).select().single();if(o)throw console.error("Trip creation error - Code:",o.code),console.error("Trip creation error - Message:",o.message),console.error("Trip creation error - Details:",o.details),console.error("Trip creation error - Hint:",o.hint),console.error("Trip creation error - Insert data:",JSON.stringify(s,null,2)),o;if(e&&e.length>0){const u=r.isForwarding?"in_transit_forwarding":"in_transit",{error:d}=await et.from("bookings").update({trip_id:a.id,status:u,current_location_depot_id:r.destinationId||null}).in("id",e);d&&console.error("Error linking bookings to trip:",d);const h=e.map(v=>({trip_id:a.id,booking_id:v})),{error:g}=await et.from("trip_bookings").insert(h);g&&console.error("Error inserting trip_bookings:",g)}return{trip:a}},async update(r,e){const{data:t,error:s}=await et.from("trips").update(e).eq("id",r).select().single();if(s)throw s;return{trip:t}},async getAllWithProgress(){const{data:r,error:e}=await et.from("trips").select("*").order("created_at",{ascending:!1});if(e)throw e;if(!r||r.length===0)return{trips:[]};const{data:t,error:s}=await et.from("bookings").select("trip_id, status").not("trip_id","is",null);if(s)return console.error("Error fetching booking counts:",s),{trips:r.map(u=>({...u,total_bookings:0,delivered_bookings:0}))};const a={};return(t||[]).forEach(u=>{a[u.trip_id]||(a[u.trip_id]={total:0,delivered:0}),a[u.trip_id].total++,u.status==="delivered"&&a[u.trip_id].delivered++}),{trips:r.map(u=>{var d,h;return{...u,total_bookings:((d=a[u.id])==null?void 0:d.total)||0,delivered_bookings:((h=a[u.id])==null?void 0:h.delivered)||0}})}},async getBookingsForTrip(r){const{data:e,error:t}=await et.from("bookings_complete").select("*").eq("trip_id",r).order("created_at",{ascending:!1});if(t)throw t;return{bookings:e||[]}},async checkAndAutoComplete(r){try{const{data:e,error:t}=await et.from("bookings").select(`
          id,
          status,
          delivery_type,
          destination_depot_id,
          depots!bookings_destination_depot_id_fkey (
            id,
            type
          )
        `).eq("trip_id",r);if(t)return console.error("Error checking trip bookings:",t),{autoCompleted:!1};if(!e||e.length===0)return{autoCompleted:!1};const s=e.filter(u=>{const d=u.depots,h=(d==null?void 0:d.type)==="managed",g=u.delivery_type!=="pickup";return h&&g});if(s.length===0)return console.log(`[AutoComplete] Trip ${r}: No managed depot deliveries found`),{autoCompleted:!1};const a=s.every(u=>u.status==="delivered"),o=s.filter(u=>u.status==="delivered").length;if(console.log(`[AutoComplete] Trip ${r}: ${o}/${s.length} managed deliveries complete`),a){const{error:u}=await et.from("trips").update({status:"completed"}).eq("id",r);return u?(console.error("Error auto-completing trip:",u),{autoCompleted:!1}):(console.log(`[AutoComplete] Trip ${r} auto-completed!`),{autoCompleted:!0})}return{autoCompleted:!1}}catch(e){return console.error("Error in checkAndAutoComplete:",e),{autoCompleted:!1}}}},pu={async getAll(){const{data:r,error:e}=await et.from("profiles").select("*");if(e)throw e;return{users:r.map(s=>({id:s.id,name:s.full_name,email:s.email,role:s.role,assignedDepot:s.assigned_depot_id,status:s.status}))}},async create(r){const{data:e,error:t}=await et.from("profiles").insert({email:r.email,full_name:r.name,role:r.role,password:r.password,assigned_depot_id:r.assignedDepotId}).select().single();if(t)throw t;return{user:e}},async update(r,e){const t={};e.name&&(t.full_name=e.name),e.role&&(t.role=e.role),e.email&&(t.email=e.email),e.assignedDepot&&(t.assigned_depot_id=e.assignedDepot);const{data:s,error:a}=await et.from("profiles").update(t).eq("id",r).select();if(a)throw a;return{user:s}},async delete(r){const{error:e}=await et.from("profiles").delete().eq("id",r);if(e)throw e;return{success:!0}}},Qs={async getAll(){const{data:r,error:e}=await et.from("depots").select("*").order("number");if(e)throw e;return{depots:r}},async getById(r){try{const e=r.trim(),{depots:t}=await this.getAll();if(!t)return null;const s=t.find(a=>String(a.id)===e||String(a.number)===e);return console.log("Depot found for ID",e,":",s),s||null}catch(e){throw console.error("Error in getById:",e),e}},async create(r){const{data:e,error:t}=await et.from("depots").insert({name:r.name,type:r.type,location:r.address,contact_person:r.contactPerson,contact_phone:r.contactPhone}).select().single();if(t)throw t;return{depot:e}},async update(r,e){const{data:t,error:s}=await et.from("depots").update({name:e.name,type:e.type,location:e.address,contact_person:e.contactPerson,contact_phone:e.contactPhone}).eq("id",r).select();if(s)throw s;return{depot:t}},async delete(r){const{error:e}=await et.from("depots").delete().eq("id",r);if(e)throw e;return{success:!0}}},Ll={async getAll(){const{data:r,error:e}=await et.from("packages").select("*");if(e)throw e;return{packages:r.map(s=>({id:s.id,name:s.name,basePrice:s.base_price}))}},async create(r){const{data:e,error:t}=await et.from("packages").insert({name:r.name,base_price:r.basePrice}).select().single();if(t)throw t;return{package:e}},async update(r,e){const{data:t,error:s}=await et.from("packages").update({name:e.name,base_price:e.basePrice}).eq("id",r).select();if(s)throw s;return{success:!0}},async delete(r){const{error:e}=await et.from("packages").delete().eq("id",r);if(e)throw e;return{success:!0}}},Oc={async getAll(){const{data:r,error:e}=await et.from("depot_routes").select(`
      *,
      origin_depot: origin_depot_id(name),
        forwarding_depot: forwarding_depot_id(name)
          `);if(e)throw e;const t=new Map;return r.forEach(s=>{var a;t.has(s.origin_depot_id)||t.set(s.origin_depot_id,{id:s.origin_depot_id,originDepotId:s.origin_depot_id,originDepotName:(a=s.origin_depot)==null?void 0:a.name,forwardingDepotIds:[]}),t.get(s.origin_depot_id).forwardingDepotIds.push(s.forwarding_depot_id)}),{routes:Array.from(t.values())}},async getByDepotId(r){const{data:e,error:t}=await et.from("depot_routes").select(`
          *,
          origin_depot: origin_depot_id(name),
            forwarding_depot: forwarding_depot_id(name)
      `).eq("origin_depot_id",r);if(t)throw t;const s=e.map(a=>a.forwarding_depot_id);return{depotId:r,forwardingDepotIds:s,routes:e}},async create(r){const e=r.forwardingDepotIds.map(t=>({origin_depot_id:r.originDepotId,forwarding_depot_id:t}));if(e.length>0){const{error:t}=await et.from("depot_routes").insert(e);if(t)throw t}return{success:!0}},async update(r,e){await et.from("depot_routes").delete().eq("origin_depot_id",r);const t=e.forwardingDepotIds.map(s=>({origin_depot_id:r,forwarding_depot_id:s}));if(t.length>0){const{error:s}=await et.from("depot_routes").insert(t);if(s)throw s}return{success:!0}},async delete(r){const{error:e}=await et.from("depot_routes").delete().eq("origin_depot_id",r);if(e)throw e;return{success:!0}}},Lu={async getAll(){const{data:r,error:e}=await et.from("depot_package_prices").select("*");return e?(console.warn("depot_package_prices fetch failed",e),{pricing:[]}):{pricing:r.map(s=>({id:s.id,depotId:s.depot_id,packageId:s.package_id,price:s.price}))}},async update(r,e,t){const{error:s}=await et.from("depot_package_prices").upsert({package_id:r,depot_id:e,price:t},{onConflict:"depot_id, package_id"});if(s)throw s}},Tu={async get(){const{data:r}=await et.from("season_settings").select("*").limit(1).maybeSingle();return{season:r?{startDate:r.start_date,endDate:r.end_date,year:2025}:null}},async update(r){const{data:e}=await et.from("season_settings").select("id").limit(1).maybeSingle();e?await et.from("season_settings").update({start_date:r.startDate,end_date:r.endDate}).eq("id",e.id):await et.from("season_settings").insert({start_date:r.startDate,end_date:r.endDate})}};({...Xs});const qo={async getCreditBookings(r){let e=et.from("bookings_complete").select("*").eq("payment_method","credit").order("created_at",{ascending:!1});r&&(e=e.or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`));const{data:t,error:s}=await e;if(s)throw s;return{bookings:t||[]}},async getPayments(r,e){let t=et.from("credit_payments").select("*").order("payment_date",{ascending:!1});e?t=t.eq("customer_phone",e):r&&(t=t.eq("customer_name",r));const{data:s,error:a}=await t;if(a)throw a;return{payments:s||[]}},async recordPayment(r){const{data:e,error:t}=await et.from("credit_payments").insert({customer_name:r.customer_name,customer_phone:r.customer_phone,amount:r.amount,payment_method:r.payment_method||"cash",notes:r.notes||""}).select().single();if(t)throw t;return{payment:e}},async getCreditSummary(r){let e=et.from("bookings_complete").select("*").eq("payment_method","credit").order("created_at",{ascending:!1});r&&(e=e.or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`));const{data:t,error:s}=await e;if(s)throw s;const{data:a,error:o}=await et.from("credit_payments").select("*").order("payment_date",{ascending:!1}),{data:u}=await et.from("credit_customers").select("phone, display_name"),d=new Map((u||[]).map(k=>[k.phone,k.display_name])),h=o?[]:a||[],g=t||[],v=new Map;g.forEach(k=>{const A=(k.sender_phone||"").trim();if(!A)return;const C=A,L=(k.sender_name||"Unknown").trim();if(!v.has(C)){const T=d.get(A)||L;v.set(C,{id:A,customer:T,phone:A,nameVariations:new Set([L]),totalCredit:0,advancePaid:0,netOutstanding:0,lastPayment:null,bookings:[],payments:[],bookingCount:0,depots:new Set,packageBreakdown:new Map})}const R=v.get(C),E=Number(k.total_amount)||0;R.nameVariations.add(L),k.destination_depot_id&&R.depots.add(k.destination_depot_id),Array.isArray(k.package_details)&&k.package_details.forEach(T=>{const te=`${k.destination_depot_id}_${T.package_id||T.size}`;R.packageBreakdown.has(te)||R.packageBreakdown.set(te,{depot:k.destination_depot_name||"Unknown",depotId:k.destination_depot_id,size:T.size||T.name||"Unknown",packageId:T.package_id||"",quantity:0,amount:0});const B=R.packageBreakdown.get(te);B.quantity+=Number(T.quantity)||0,B.amount+=(Number(T.quantity)||0)*(Number(T.price)||0)}),R.totalCredit+=E,R.bookingCount+=1,R.bookings.push({id:k.id||k.receipt_number,receiptNumber:k.receipt_number,amount:E,date:k.created_at,status:k.status,destination:k.destination_depot_name||"N/A",destinationDepotId:k.destination_depot_id,packages:k.package_details||[]})}),h.forEach(k=>{const A=(k.customer_phone||"").trim();if(A&&v.has(A)){const C=v.get(A),L=Number(k.amount)||0;C.advancePaid+=L,C.payments.push({id:k.id,receiptNumber:k.receipt_number,amount:L,date:k.payment_date,method:k.payment_method,notes:k.notes}),(!C.lastPayment||new Date(k.payment_date)>new Date(C.lastPayment))&&(C.lastPayment=k.payment_date)}}),v.forEach(k=>{k.netOutstanding=Math.max(0,k.totalCredit-k.advancePaid),k.nameVariations=Array.from(k.nameVariations),k.depots=Array.from(k.depots),k.packageBreakdown=Array.from(k.packageBreakdown.values())});const _=g.reduce((k,A)=>k+(Number(A.total_amount)||0),0),N=h.reduce((k,A)=>k+(Number(A.amount)||0),0),y=Math.max(0,_-N);return{accounts:Array.from(v.values()),totalCredit:_,totalAdvancePaid:N,totalNetOutstanding:y}},async getCustomerByPhone(r){const{data:e,error:t}=await et.from("credit_customers").select("*").eq("phone",r).maybeSingle();if(t&&!t.message.includes("does not exist"))throw t;return{customer:e}},async updateCustomerDisplayName(r,e){const{data:t,error:s}=await et.from("credit_customers").upsert({phone:r,display_name:e},{onConflict:"phone"}).select().single();if(s)throw s;return{customer:t}},async getCustomerPricing(r){const{data:e,error:t}=await et.from("credit_customer_pricing").select("*").eq("customer_phone",r);if(t&&!t.message.includes("does not exist"))throw t;return{pricing:(e||[]).map(s=>({packageId:s.package_id,depotId:s.depot_id,discountedPrice:s.discounted_price}))}},async setCustomerPricing(r,e){if(await et.from("credit_customer_pricing").delete().eq("customer_phone",r),e.length>0){const t=e.map(a=>({customer_phone:r,package_id:a.packageId,depot_id:a.depotId,discounted_price:a.discountedPrice})),{error:s}=await et.from("credit_customer_pricing").insert(t);if(s)throw s}return{success:!0}},async getDiscountSummary(r){const{data:e}=await et.from("bookings_complete").select("*").eq("payment_method","credit").eq("sender_phone",r),{pricing:t}=await this.getCustomerPricing(r),s=new Map(t.map(h=>[`${h.packageId}_${h.depotId}`,h.discountedPrice]));let a=0,o=0;(e||[]).forEach(h=>{Array.isArray(h.package_details)&&h.package_details.forEach(g=>{const v=Number(g.quantity)||0,_=Number(g.price)||0,N=v*_;a+=N;const y=`${g.package_id}_${h.destination_depot_id}`,k=s.get(y);k!==void 0?o+=v*k:o+=N})});const u=a-o,d=a>0?u/a*100:0;return{originalTotal:a,discountedTotal:o,totalSavings:u,savingsPercent:Math.round(d*10)/10}}},Lf={async create(){alert("Database usage active. Contact admin for SQL Dumps.")},async restore(){alert("Database usage active. Contact admin for SQL Restores.")}},Md={async search(r,e=10){if(!r||r.length<2)return{contacts:[]};const{data:t,error:s}=await et.from("contacts").select("*").or(`name.ilike.%${r}%,phone.ilike.%${r}%`).order("usage_count",{ascending:!1}).order("last_used_at",{ascending:!1}).limit(e);return s?(console.error("Error searching contacts:",s),{contacts:[]}):{contacts:t||[]}},async getAll(r=50){const{data:e,error:t}=await et.from("contacts").select("*").order("usage_count",{ascending:!1}).order("last_used_at",{ascending:!1}).limit(r);return t?(console.error("Error fetching contacts:",t),{contacts:[]}):{contacts:e||[]}},async upsert(r,e){if(!r||!e)return null;const{data:t,error:s}=await et.rpc("upsert_contact",{p_name:r,p_phone:e});if(s){console.error("Error upserting contact:",s);const{data:a,error:o}=await et.from("contacts").upsert({name:r,phone:e,usage_count:1,last_used_at:new Date().toISOString()},{onConflict:"phone"}).select().single();return o?(console.error("Fallback upsert failed:",o),null):a}return t}},gu={async getBookingSummary(r,e,t){let s=et.from("bookings_complete").select("*");r&&(s=s.gte("created_at",r)),e&&(s=s.lte("created_at",e+"T23:59:59")),t&&(s=s.or(`origin_depot_id.eq.${t},destination_depot_id.eq.${t}`));const{data:a,error:o}=await s;if(o)throw o;const u=a||[],d=u.length,h=u.filter(A=>A.status==="booked").length,g=u.filter(A=>["in_transit","in_transit_origin","in_transit_forwarding"].includes(A.status)).length,v=u.filter(A=>A.status==="delivered").length,_=h+g,N=u.reduce((A,C)=>A+(Number(C.total_amount)||0),0),y=u.reduce((A,C)=>Array.isArray(C.package_details)?A+C.package_details.reduce((L,R)=>L+(Number(R.quantity)||0),0):A,0),k={cash:u.filter(A=>A.payment_method==="cash").reduce((A,C)=>A+(Number(C.total_amount)||0),0),online:u.filter(A=>A.payment_method==="online").reduce((A,C)=>A+(Number(C.total_amount)||0),0),to_pay:u.filter(A=>A.payment_method==="to_pay").reduce((A,C)=>A+(Number(C.total_amount)||0),0),credit:u.filter(A=>A.payment_method==="credit").reduce((A,C)=>A+(Number(C.total_amount)||0),0)};return{totalBookings:d,bookedCount:h,inTransitCount:g,deliveredCount:v,pendingCount:_,totalRevenue:N,totalPackages:y,revenueByMethod:k}},async getTripSummary(r,e,t){let s=et.from("trips").select("*");r&&(s=s.gte("created_at",r)),e&&(s=s.lte("created_at",e+"T23:59:59")),t&&(s=s.or(`origin_depot_id.eq.${t},destination_depot_id.eq.${t}`));const{data:a,error:o}=await s;if(o)throw o;const u=a||[],d=u.length,h=u.filter(_=>_.status==="completed").length,g=u.filter(_=>_.status==="active"||_.status==="in_transit").length,v=u.reduce((_,N)=>_+(Number(N.trip_cost)||0),0);return{totalTrips:d,completedTrips:h,activeTrips:g,pendingTrips:d-h-g,totalTripCost:v}},async getTopCustomers(r=5,e,t,s){let a=et.from("bookings_complete").select("sender_name, sender_phone, total_amount");e&&(a=a.gte("created_at",e)),t&&(a=a.lte("created_at",t+"T23:59:59")),s&&(a=a.or(`origin_depot_id.eq.${s},destination_depot_id.eq.${s}`));const{data:o,error:u}=await a;if(u)throw u;const d=o||[],h=new Map;return d.forEach(v=>{const _=(v.sender_name||"Unknown").toLowerCase().trim();h.has(_)||h.set(_,{name:v.sender_name||"Unknown",phone:v.sender_phone||"N/A",bookings:0,revenue:0});const N=h.get(_);N.bookings+=1,N.revenue+=Number(v.total_amount)||0}),{customers:Array.from(h.values()).sort((v,_)=>_.revenue-v.revenue).slice(0,r)}},async getTopRoutes(r=5,e,t,s){let a=et.from("bookings_complete").select("origin_depot_name, destination_depot_name, total_amount");e&&(a=a.gte("created_at",e)),t&&(a=a.lte("created_at",t+"T23:59:59")),s&&(a=a.or(`origin_depot_id.eq.${s},destination_depot_id.eq.${s}`));const{data:o,error:u}=await a;if(u)throw u;const d=o||[],h=new Map;return d.forEach(v=>{const _=v.origin_depot_name||"Unknown",N=v.destination_depot_name||"Unknown",y=`${_}  ${N} `;h.has(y)||h.set(y,{route:y,trips:0,revenue:0});const k=h.get(y);k.trips+=1,k.revenue+=Number(v.total_amount)||0}),{routes:Array.from(h.values()).sort((v,_)=>_.revenue-v.revenue).slice(0,r)}}},Tf={async getPaymentReport(r,e,t){const{data:s,error:a}=await et.from("bookings_complete").select("*").eq("payment_method","to_pay").or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`).order("created_at",{ascending:!1});if(a)throw a;let o=(s||[]).filter(h=>h.to_pay_collected_at!=null||h.status==="delivered");if(e&&(o=o.filter(h=>(h.to_pay_collected_at||h.updated_at)>=e)),t){const h=t+"T23:59:59";o=o.filter(g=>(g.to_pay_collected_at||g.updated_at)<=h)}o.sort((h,g)=>{const v=new Date(h.to_pay_collected_at||h.updated_at).getTime();return new Date(g.to_pay_collected_at||g.updated_at).getTime()-v});const u=o.filter(h=>h.to_pay_collected_method==="cash").reduce((h,g)=>h+(Number(g.total_amount)||0),0),d=o.filter(h=>h.to_pay_collected_method==="online").reduce((h,g)=>h+(Number(g.total_amount)||0),0);return{payments:o.map(h=>({date:h.to_pay_collected_at||h.updated_at,receipt_number:h.receipt_number,customer_name:h.sender_name,amount:Number(h.total_amount)||0,payment_method:h.to_pay_collected_method||"cash",destination:h.destination_depot_name})),summary:{total:u+d,cash:u,online:d,count:o.length}}},async getDeliveryReport(r,e,t){let s=et.from("bookings_complete").select("*").or(`origin_depot_id.eq.${r},destination_depot_id.eq.${r}`).neq("status","booked");e&&(s=s.gte("created_at",e)),t&&(s=s.lte("created_at",t+"T23:59:59"));const{data:a,error:o}=await s.order("created_at",{ascending:!1});if(o)throw o;const u=a||[],d=u.filter(v=>v.status==="delivered"),h=u.filter(v=>v.status!=="delivered"),g=u.reduce((v,_)=>Array.isArray(_.package_details)?v+_.package_details.reduce((N,y)=>N+(Number(y.quantity)||0),0):v,0);return{deliveries:u.map(v=>({date:v.created_at,receipt_number:v.receipt_number,customer_name:v.sender_name,destination:v.destination_depot_name,packages:Array.isArray(v.package_details)?v.package_details.reduce((_,N)=>_+(Number(N.quantity)||0),0):0,status:v.status,delivery_instructions:v.delivery_instructions||"Pickup",delivered_at:v.status==="delivered"?v.updated_at:null})),summary:{total:u.length,delivered:d.length,pending:h.length,totalPackages:g}}}},Ry=Object.freeze(Object.defineProperty({__proto__:null,authApi:vm,backupApi:Lf,bookingsApi:Xs,contactsApi:Md,creditApi:qo,depotPricingApi:Lu,depotReportsApi:Tf,depotRoutesApi:Oc,depotsApi:Qs,packagesApi:Ll,reportsApi:gu,seasonApi:Tu,supabase:et,tripsApi:Vo,usersApi:pu},Symbol.toStringTag,{value:"Module"}));function Dy({onLogin:r}){const[e,t]=Pe.useState(""),[s,a]=Pe.useState(""),[o,u]=Pe.useState(!1),[d,h]=Pe.useState(""),g=async v=>{var _,N,y;if(v.preventDefault(),!(!e||!s)){u(!0),h("");try{const k=await vm.signIn(e,s),A=((_=k.user)==null?void 0:_.role)||"owner",C=((N=k.user)==null?void 0:N.id)||"",L=((y=k.user)==null?void 0:y.assigned_depot_id)||null;console.log("Login successful:",{userRole:A,userId:C,depotId:L}),r(A,C,L)}catch(k){console.error("Login error:",k),h(k.message||"Invalid email or password. Please try again.")}finally{u(!1)}}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-100 to-yellow-100 flex items-center justify-center p-4",children:c.jsx("div",{className:"w-full max-w-md",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-2xl mb-4 overflow-hidden",children:c.jsx("img",{src:"/logo.webp",alt:"Mango Express Logo",className:"w-full h-full object-contain p-2"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mango Express"}),c.jsx("p",{className:"text-gray-600",children:"Seasonal Transport Management"})]}),c.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),c.jsx("input",{id:"email",type:"email",value:e,onChange:v=>t(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsx("input",{id:"password",type:"password",value:s,onChange:v=>a(v.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),c.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors font-medium",disabled:o,children:o?"Logging in...":"Login"})]}),d&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:d}),c.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:c.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Need help? Contact your system administrator."})})]})})})}function Fy({userRole:r,assignedDepotId:e}){const[t,s]=Pe.useState([{label:"Today's Bookings",value:"0",icon:""},{label:"Today's Revenue",value:"0",icon:""},{label:"Total Revenue",value:"0",icon:""},{label:"Total Trips",value:"0",icon:""}]),[a,o]=Pe.useState([]),[u,d]=Pe.useState([]),[h,g]=Pe.useState(!0);Pe.useEffect(()=>{v()},[]);const v=async()=>{try{const[_,N]=await Promise.all([Xs.getAll(),Vo.getAll()]),y=_.bookings||[],k=N.trips||[],A=r==="depot_manager"&&e?y.filter(ne=>(ne.destination_depot_id===e||ne.origin_depot_id===e)&&ne.status!=="booked"):y,C=r==="depot_manager"&&e?k.filter(ne=>ne.origin_depot_id===e||ne.destination_depot_id===e):k,L=new Date;L.setHours(0,0,0,0);const R=L.getTime(),E=A.filter(ne=>{const ve=new Date(ne.created_at);return ve.setHours(0,0,0,0),ve.getTime()===R}),T=E.length,te=C.length,B=C.filter(ne=>ne.status==="in_transit"||ne.status==="loading").length,H=A.filter(ne=>ne.status!=="delivered").length,Y=E.reduce((ne,ve)=>ne+(Number(ve.total_amount)||0),0),J=Y>1e5?`${(Y/1e5).toFixed(1)}L`:`${Y.toLocaleString("en-IN")}`,he=A.reduce((ne,ve)=>ne+(Number(ve.total_amount)||0),0),U=he>1e5?`${(he/1e5).toFixed(1)}L`:`${he.toLocaleString("en-IN")}`,D=A.filter(ne=>ne.payment_method==="to_pay"&&ne.status!=="delivered").reduce((ne,ve)=>ne+(Number(ve.total_amount)||0),0),ge=E.filter(ne=>ne.payment_method==="to_pay"&&ne.status!=="delivered").reduce((ne,ve)=>ne+(Number(ve.total_amount)||0),0),ae=A.filter(ne=>ne.payment_method==="to_pay"&&ne.status==="delivered").reduce((ne,ve)=>ne+(Number(ve.total_amount)||0),0),we=A.filter(ne=>{if(ne.payment_method!=="to_pay"||!ne.to_pay_collected_at)return!1;const ve=new Date(ne.to_pay_collected_at);return ve.setHours(0,0,0,0),ve.getTime()===R}).reduce((ne,ve)=>ne+(Number(ve.total_amount)||0),0),ie=E.reduce((ne,ve)=>{var V;return ne+(((V=ve.receivers)==null?void 0:V.reduce((P,K)=>{var ee;return P+(((ee=K.packages)==null?void 0:ee.reduce((le,ue)=>le+(ue.quantity||0),0))||0)},0))||0)},0);s(r==="booking_clerk"?[{label:"Today's Bookings",value:String(T),icon:""},{label:"Active Trips",value:String(B),icon:""},{label:"Pending Deliveries",value:String(H),icon:""},{label:"Total Trips",value:String(te),icon:""}]:r==="depot_manager"?[{label:"Today's Packages",value:String(ie),icon:""},{label:"Pending To-Pay",value:`Today: ${ge.toLocaleString("en-IN")}
Total: ${D.toLocaleString("en-IN")}`,icon:""},{label:"To-Pay Collected",value:`Today: ${we.toLocaleString("en-IN")}
Total: ${ae.toLocaleString("en-IN")}`,icon:""},{label:"Pending Deliveries",value:String(H),icon:""}]:[{label:"Today's Bookings",value:String(T),icon:""},{label:"Today's Revenue",value:J,icon:""},{label:"Total Revenue",value:U,icon:""},{label:"Total Trips",value:String(te),icon:""}]),o(A.slice(0,5).map(ne=>{var V;const ve=((V=ne.receivers)==null?void 0:V.reduce((P,K)=>{var ee;return P+(((ee=K.packages)==null?void 0:ee.reduce((le,ue)=>le+(ue.quantity||0),0))||0)},0))||0;return{id:ne.id||ne.receipt_number,customer:ne.sender_name||ne.customer_name||"N/A",origin:ne.origin_depot_name||ne.origin_location||"N/A",destination:ne.destination_depot_name||ne.destination_location||"N/A",quantity:ve>0?`${ve} pkg`:ne.quantity||"0",status:ne.status,total:ne.total_amount||0}})),d(k.filter(ne=>ne.status!=="completed"&&ne.status!=="cancelled").slice(0,5).map(ne=>{var ve,V;return{id:ne.id,route:`${((ve=ne.origin_depot)==null?void 0:ve.name)||"Origin"}  ${((V=ne.destination_depot)==null?void 0:V.name)||"Dest"}`,driver:ne.driver_name,vehicle:ne.vehicle_number,status:ne.status,bookings:0}}))}catch(_){console.error("Error loading dashboard data:",_)}finally{g(!1)}};return h?c.jsx("div",{className:"p-8",children:"Loading dashboard..."}):c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your logistics overview."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:t.map((_,N)=>c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("span",{className:"text-2xl",children:_.icon})}),c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:_.label}),c.jsx("p",{className:"text-2xl font-bold text-gray-900 whitespace-pre-line",children:_.value})]},N))}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h2",{className:"font-bold text-gray-900",children:"Recent Bookings"})}),c.jsx("div",{className:"divide-y divide-gray-200",children:a.length===0?c.jsx("div",{className:"p-6 text-gray-500 text-center",children:"No bookings found."}):a.map(_=>{var N;return c.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:_.customer}),c.jsx("p",{className:"text-sm text-gray-600",children:_.id})]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${_.status==="booked"?"bg-blue-100 text-blue-700":_.status==="delivered"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:(N=_.status)==null?void 0:N.replace("_"," ")})]}),c.jsxs("p",{className:"text-sm text-gray-600",children:[_.origin,"  ",_.destination,"  ",_.quantity]})]},_.id)})})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h2",{className:"font-bold text-gray-900",children:"Active Trips"})}),c.jsx("div",{className:"divide-y divide-gray-200",children:u.length===0?c.jsx("div",{className:"p-6 text-gray-500 text-center",children:"No active trips."}):u.map(_=>{var N;return c.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:_.route}),c.jsx("p",{className:"text-sm text-gray-600",children:_.id})]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${_.status==="in_transit"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:(N=_.status)==null?void 0:N.replace("_"," ")})]}),c.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Driver: ",_.driver]}),c.jsx("p",{className:"text-sm text-gray-600",children:_.vehicle})]},_.id)})})]})]})]})}const By="modulepreload",My=function(r){return"/"+r},B0={},yu=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let u=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=u(t.map(g=>{if(g=My(g),g in B0)return;B0[g]=!0;const v=g.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":By,v||(N.as="script"),N.crossOrigin="",N.href=g,h&&N.setAttribute("nonce",h),document.head.appendChild(N),v)return new Promise((y,k)=>{N.addEventListener("load",y),N.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return a.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function ym({nameValue:r,phoneValue:e,onNameChange:t,onPhoneChange:s,onContactSelect:a,nameLabel:o="Name",phoneLabel:u="Phone",namePlaceholder:d="Enter name",phonePlaceholder:h="10-digit number",required:g=!1}){const[v,_]=Pe.useState([]),[N,y]=Pe.useState(!1),[k,A]=Pe.useState(null),[C,L]=Pe.useState(!1),R=Pe.useRef(null);Pe.useEffect(()=>{const te=k==="name"?r:e;if(!te||te.length<2){_([]),y(!1);return}const B=setTimeout(async()=>{L(!0);const{contacts:H}=await Md.search(te);_(H),y(H.length>0),L(!1)},300);return()=>clearTimeout(B)},[r,e,k]),Pe.useEffect(()=>{const te=B=>{R.current&&!R.current.contains(B.target)&&y(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]);const E=te=>{t(te.name),s(te.phone),y(!1),a&&a(te)},T=te=>/^[6-9]\d{9}$/.test(te);return c.jsxs("div",{className:"relative",ref:R,children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o," ",g&&"*"]}),c.jsx("input",{type:"text",value:r,onChange:te=>t(te.target.value),onFocus:()=>A("name"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:d,autoComplete:"off",required:g})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[u," ",g&&"*"]}),c.jsx("input",{type:"tel",value:e,onChange:te=>s(te.target.value),onFocus:()=>A("phone"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:h,maxLength:10,autoComplete:"off",required:g}),e&&!T(e)&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Must be 10 digits starting with 9, 8, 7, or 6"})]})]}),N&&c.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:C?c.jsx("div",{className:"p-3 text-gray-500 text-center",children:"Searching..."}):v.map(te=>c.jsx("button",{type:"button",onClick:()=>E(te),className:"w-full text-left px-4 py-3 hover:bg-orange-50 border-b border-gray-100 last:border-0 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-gray-900",children:te.name}),c.jsx("div",{className:"text-sm text-gray-600",children:te.phone})]}),c.jsxs("div",{className:"text-xs text-gray-400",children:["Used ",te.usage_count,"x"]})]})},te.id))})]})}const M0=r=>{let e;const t=new Set,s=(g,v)=>{const _=typeof g=="function"?g(e):g;if(!Object.is(_,e)){const N=e;e=v??(typeof _!="object"||_===null)?_:Object.assign({},e,_),t.forEach(y=>y(e,N))}},a=()=>e,d={setState:s,getState:a,getInitialState:()=>h,subscribe:g=>(t.add(g),()=>t.delete(g))},h=e=r(s,a,d);return d},Uy=(r=>r?M0(r):M0),$y=r=>r;function qy(r,e=$y){const t=Cl.useSyncExternalStore(r.subscribe,Cl.useCallback(()=>e(r.getState()),[r,e]),Cl.useCallback(()=>e(r.getInitialState()),[r,e]));return Cl.useDebugValue(t),t}const zy=r=>{const e=Uy(r),t=s=>qy(e,s);return Object.assign(t,e),t},Vd=(r=>zy);function Wy(r,e){let t;try{t=r()}catch{return}return{getItem:a=>{var o;const u=h=>h===null?null:JSON.parse(h,void 0),d=(o=t.getItem(a))!=null?o:null;return d instanceof Promise?d.then(u):u(d)},setItem:(a,o)=>t.setItem(a,JSON.stringify(o,void 0)),removeItem:a=>t.removeItem(a)}}const Of=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(s){return Of(s)(t)},catch(s){return this}}}catch(t){return{then(s){return this},catch(s){return Of(s)(t)}}}},Hy=(r,e)=>(t,s,a)=>{let o={storage:Wy(()=>localStorage),partialize:A=>A,version:0,merge:(A,C)=>({...C,...A}),...e},u=!1;const d=new Set,h=new Set;let g=o.storage;if(!g)return r((...A)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...A)},s,a);const v=()=>{const A=o.partialize({...s()});return g.setItem(o.name,{state:A,version:o.version})},_=a.setState;a.setState=(A,C)=>(_(A,C),v());const N=r((...A)=>(t(...A),v()),s,a);a.getInitialState=()=>N;let y;const k=()=>{var A,C;if(!g)return;u=!1,d.forEach(R=>{var E;return R((E=s())!=null?E:N)});const L=((C=o.onRehydrateStorage)==null?void 0:C.call(o,(A=s())!=null?A:N))||void 0;return Of(g.getItem.bind(g))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const E=o.migrate(R.state,R.version);return E instanceof Promise?E.then(T=>[!0,T]):[!0,E]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var E;const[T,te]=R;if(y=o.merge(te,(E=s())!=null?E:N),t(y,!0),T)return v()}).then(()=>{L==null||L(y,void 0),y=s(),u=!0,h.forEach(R=>R(y))}).catch(R=>{L==null||L(void 0,R)})};return a.persist={setOptions:A=>{o={...o,...A},A.storage&&(g=A.storage)},clearStorage:()=>{g==null||g.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>k(),hasHydrated:()=>u,onHydrate:A=>(d.add(A),()=>{d.delete(A)}),onFinishHydration:A=>(h.add(A),()=>{h.delete(A)})},o.skipHydration||k(),y||N},Gd=Hy,zi=Vd()(Gd((r,e)=>({isOnline:typeof navigator<"u"?navigator.onLine:!0,lastOnlineAt:null,setOnline:t=>{const s=e();s.isOnline!==t&&r({isOnline:t,lastOnlineAt:t?new Date().toISOString():s.lastOnlineAt})}}),{name:"mango-online-status",partialize:r=>({lastOnlineAt:r.lastOnlineAt})}));function Vy(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const ei=Vd()(Gd((r,e)=>({pendingOperations:[],conflicts:[],isSyncing:!1,lastSyncAt:null,syncError:null,addOperation:({type:t,payload:s,optimisticData:a,entityType:o,entityId:u,maxRetries:d=5})=>{const h=Vy(),g={id:h,type:t,payload:s,status:"pending",retryCount:0,maxRetries:d,createdAt:new Date().toISOString(),lastAttemptAt:null,error:null,optimisticData:a,entityType:o,entityId:u};return r(v=>({pendingOperations:[...v.pendingOperations,g]})),console.log(`[SyncStore] Added operation: ${t} (${h})`),h},updateOperation:(t,s)=>{r(a=>({pendingOperations:a.pendingOperations.map(o=>o.id===t?{...o,...s}:o)}))},removeOperation:t=>{r(s=>({pendingOperations:s.pendingOperations.filter(a=>a.id!==t),conflicts:s.conflicts.filter(a=>a.operationId!==t)})),console.log(`[SyncStore] Removed operation: ${t}`)},clearCompleted:()=>{r(t=>({pendingOperations:t.pendingOperations.filter(s=>s.status!=="completed")}))},addConflict:t=>{r(s=>{const a=s.pendingOperations.map(u=>u.id===t.operationId?{...u,status:"conflict"}:u);return s.conflicts.find(u=>u.operationId===t.operationId)?{pendingOperations:a}:{pendingOperations:a,conflicts:[...s.conflicts,t]}}),console.log(`[SyncStore] Added conflict for operation: ${t.operationId}`)},resolveConflict:(t,s)=>{const{pendingOperations:a,conflicts:o}=e(),u=o.find(h=>h.operationId===t),d=a.find(h=>h.id===t);if(!u||!d){console.warn(`[SyncStore] Conflict or operation not found: ${t}`);return}s==="keep_local"?(r(h=>({pendingOperations:h.pendingOperations.map(g=>g.id===t?{...g,status:"pending",retryCount:0,payload:{...g.payload,_forceOverwrite:!0,_serverVersion:u.serverVersion}}:g),conflicts:h.conflicts.filter(g=>g.operationId!==t)})),console.log(`[SyncStore] Resolved conflict (keep local): ${t}`)):s==="keep_server"?(r(h=>({pendingOperations:h.pendingOperations.filter(g=>g.id!==t),conflicts:h.conflicts.filter(g=>g.operationId!==t)})),console.log(`[SyncStore] Resolved conflict (keep server): ${t}`)):(r(h=>({pendingOperations:h.pendingOperations.filter(g=>g.id!==t),conflicts:h.conflicts.filter(g=>g.operationId!==t)})),console.log(`[SyncStore] Resolved conflict (cancelled): ${t}`))},getConflicts:()=>e().conflicts,hasConflicts:()=>e().conflicts.length>0,setSyncing:t=>{r({isSyncing:t})},setSyncError:t=>{r({syncError:t})},markSyncComplete:()=>{r({lastSyncAt:new Date().toISOString(),isSyncing:!1,syncError:null})},getPendingCount:()=>e().pendingOperations.filter(t=>t.status==="pending"||t.status==="syncing").length,getFailedCount:()=>e().pendingOperations.filter(t=>t.status==="failed").length,getOperationsByType:t=>e().pendingOperations.filter(s=>s.type===t),getOperationById:t=>e().pendingOperations.find(s=>s.id===t),hasPendingOperationsForEntity:(t,s)=>e().pendingOperations.some(a=>a.entityType===t&&a.entityId===s&&(a.status==="pending"||a.status==="syncing"))}),{name:"mango-sync-queue",partialize:r=>({pendingOperations:r.pendingOperations,conflicts:r.conflicts,lastSyncAt:r.lastSyncAt})})),Yh={originDepotId:"",destinationDepotId:"",paymentMethod:"cash",deliveryType:"pickup",deliveryCharge:0,customInstructions:"",senderName:"",senderPhone:"",receivers:[{name:"",phone:"",address:"",packages:[]}]},Gy=Vd()(Gd((r,e)=>({draft:Yh,currentStep:1,hasDraft:!1,lastSavedAt:null,pendingBookingId:null,saveDraft:t=>{const a={...e().draft,...t},o=a.senderName.trim()!==""||a.senderPhone.trim()!==""||a.originDepotId!==""||a.destinationDepotId!==""||a.receivers.some(u=>u.name.trim()!==""||u.phone.trim()!=="");r({draft:a,hasDraft:o,lastSavedAt:new Date().toISOString()})},setDraft:t=>{r({draft:t,hasDraft:!0,lastSavedAt:new Date().toISOString()})},clearDraft:()=>{r({draft:Yh,currentStep:1,hasDraft:!1,lastSavedAt:null,pendingBookingId:null})},setStep:t=>{r({currentStep:t})},restoreDraft:()=>{const t=e();return t.hasDraft?t.draft:null},dismissDraft:()=>{r({draft:Yh,currentStep:1,hasDraft:!1,lastSavedAt:null})},setPendingBookingId:t=>{r({pendingBookingId:t})}}),{name:"mango-booking-draft",partialize:r=>({draft:r.draft,currentStep:r.currentStep,hasDraft:r.hasDraft,lastSavedAt:r.lastSavedAt,pendingBookingId:r.pendingBookingId})})),Xh={driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""},Ky=Vd()(Gd((r,e)=>({draft:Xh,selectedBookings:[],hasDraft:!1,lastSavedAt:null,pendingTripId:null,saveDraft:t=>{const a={...e().draft,...t},o=a.driverName.trim()!==""||a.driverPhone.trim()!==""||a.vehicleNumber.trim()!==""||e().selectedBookings.length>0;r({draft:a,hasDraft:o,lastSavedAt:new Date().toISOString()})},setDraft:t=>{r({draft:t,hasDraft:!0,lastSavedAt:new Date().toISOString()})},clearDraft:()=>{r({draft:Xh,selectedBookings:[],hasDraft:!1,lastSavedAt:null,pendingTripId:null})},setSelectedBookings:t=>{r({selectedBookings:t,hasDraft:t.length>0||e().draft.driverName.trim()!=="",lastSavedAt:new Date().toISOString()})},toggleBooking:t=>{const s=e().selectedBookings,a=s.includes(t)?s.filter(o=>o!==t):[...s,t];r({selectedBookings:a,hasDraft:a.length>0||e().draft.driverName.trim()!=="",lastSavedAt:new Date().toISOString()})},clearSelectedBookings:()=>{r({selectedBookings:[]})},restoreDraft:()=>{const t=e();return t.hasDraft?{formData:t.draft,selectedBookings:t.selectedBookings}:null},dismissDraft:()=>{r({draft:Xh,selectedBookings:[],hasDraft:!1,lastSavedAt:null})},setPendingTripId:t=>{r({pendingTripId:t})}}),{name:"mango-trip-draft",partialize:r=>({draft:r.draft,selectedBookings:r.selectedBookings,hasDraft:r.hasDraft,lastSavedAt:r.lastSavedAt,pendingTripId:r.pendingTripId})})),If={BASE_DELAY_MS:1e3,MAX_DELAY_MS:3e4,SYNC_INTERVAL_MS:5e3};function Jy(r){const e=If.BASE_DELAY_MS*Math.pow(2,r);return Math.min(e,If.MAX_DELAY_MS)}function xm(r){return r.status===409?!0:r.message?["version mismatch","modified by another","optimistic lock","concurrent update","conflict"].some(t=>r.message.toLowerCase().includes(t.toLowerCase())):!1}function Yy(r){if(xm(r))return!1;if(r instanceof TypeError||r.name==="AbortError")return!0;if(r.status)return r.status===408||r.status===429||r.status>=500;if(r.message){const e=r.message.toLowerCase();return["network","timeout","connection","econnrefused","enotfound","socket hang up","err_name_not_resolved","err_internet_disconnected","err_connection","err_network","net::","failed to fetch","abort"].some(s=>e.includes(s))}return typeof navigator<"u"&&!navigator.onLine}async function Xy(r){try{switch(r.type){case"CREATE_BOOKING":return{success:!0,result:await Xs.create(r.payload)};case"CREATE_TRIP":{const{tripData:e,bookingIds:t}=r.payload;return{success:!0,result:await Vo.create(e,t)}}case"MARK_DELIVERED":{const{bookingId:e,paymentMethod:t,updates:s}=r.payload;return s?await Xs.update(e,s):await Xs.updateStatus(e,"delivered"),{success:!0}}case"UPDATE_TRIP_STATUS":{const{tripId:e,status:t}=r.payload;return await Vo.update(e,{status:t}),{success:!0}}case"UPDATE_BOOKING":{const{id:e,updates:t}=r.payload;return await Xs.update(e,t),{success:!0}}default:return{success:!1,error:`Unknown operation type: ${r.type}`}}}catch(e){return console.error(`[SyncEngine] Operation ${r.id} failed:`,e),xm(e)?{success:!1,error:e.message||"Conflict detected",isConflict:!0,serverData:e.serverData||null}:{success:!1,error:e.message||"Unknown error"}}}async function Qy(r){var u;const{updateOperation:e,removeOperation:t,addConflict:s}=ei.getState();e(r.id,{status:"syncing",lastAttemptAt:new Date().toISOString()});const a=await Xy(r);if(a.success)return console.log(`[SyncEngine] Operation ${r.id} completed successfully`),t(r.id),!0;if(a.isConflict){console.log(`[SyncEngine] Conflict detected for operation ${r.id}`);const d={operationId:r.id,entityType:r.entityType||"booking",entityId:r.entityId||r.payload.id||"unknown",localData:r.optimisticData||r.payload,serverData:a.serverData,localVersion:r.payload._localVersion||0,serverVersion:((u=a.serverData)==null?void 0:u.version)||0,conflictedAt:new Date().toISOString()};return s(d),!1}const o=r.retryCount+1;if(Yy({message:a.error})&&o<r.maxRetries){const d=Jy(o);return console.log(`[SyncEngine] Operation ${r.id} failed, will retry in ${d}ms (attempt ${o}/${r.maxRetries})`),e(r.id,{status:"pending",retryCount:o,error:a.error||null}),await new Promise(h=>setTimeout(h,d)),!1}return console.error(`[SyncEngine] Operation ${r.id} permanently failed after ${o} attempts`),e(r.id,{status:"failed",retryCount:o,error:a.error||"Max retries exceeded"}),!1}async function Rc(){const{pendingOperations:r,isSyncing:e,setSyncing:t,markSyncComplete:s}=ei.getState(),{isOnline:a}=zi.getState();if(!a||e)return;const o=r.filter(u=>u.status==="pending");if(o.length!==0){console.log(`[SyncEngine] Processing ${o.length} pending operations`),t(!0);try{for(const u of o){if(!zi.getState().isOnline){console.log("[SyncEngine] Went offline, stopping queue processing");break}await Qy(u)}}finally{s()}}}async function Zy(){const{pendingOperations:r,updateOperation:e}=ei.getState(),t=r.filter(s=>s.status==="failed");for(const s of t)e(s.id,{status:"pending",retryCount:0,error:null});console.log(`[SyncEngine] Reset ${t.length} failed operations for retry`),await Rc()}let Td=null,Od=null;function e5(){console.log("[SyncEngine] Starting sync engine"),Rc(),Td=setInterval(()=>{const{isOnline:r}=zi.getState(),{getPendingCount:e}=ei.getState();r&&e()>0&&Rc()},If.SYNC_INTERVAL_MS),Od=zi.subscribe((r,e)=>{r.isOnline&&!e.isOnline&&(console.log("[SyncEngine] Back online, processing queue"),setTimeout(Rc,1e3))})}function t5(){console.log("[SyncEngine] Stopping sync engine"),Td&&(clearInterval(Td),Td=null),Od&&(Od(),Od=null)}function Ol(r,e,t){const{addOperation:s}=ei.getState(),{isOnline:a}=zi.getState(),o=s({type:r,payload:e,...t});return a&&setTimeout(Rc,100),o}function r5({onNavigate:r}){const[e,t]=Pe.useState(1),[s,a]=Pe.useState(null),[o,u]=Pe.useState(!0),[d,h]=Pe.useState([]),[g,v]=Pe.useState([]),[_,N]=Pe.useState([]),[y,k]=Pe.useState(!1),[A,C]=Pe.useState(""),[L,R]=Pe.useState(!1),{draft:E,hasDraft:T,saveDraft:te,clearDraft:B,lastSavedAt:H,pendingBookingId:Y,setPendingBookingId:J}=Gy(),he=zi(ce=>ce.isOnline),U=ei(ce=>ce.pendingOperations),[q,D]=Pe.useState({originDepotId:"",destinationDepotId:"",paymentMethod:"cash",deliveryType:"pickup",deliveryCharge:0,customInstructions:"",senderName:"",senderPhone:"",receivers:[{name:"",phone:"",address:"",packages:[]}]});Pe.useEffect(()=>{T&&E&&H&&((Date.now()-new Date(H).getTime())/36e5<24?R(!0):B())},[]),Pe.useEffect(()=>{const ce=setTimeout(()=>{(q.senderName||q.senderPhone||q.originDepotId)&&te(q)},1e3);return()=>clearTimeout(ce)},[q,te]),Pe.useEffect(()=>{G()},[]);const G=async()=>{try{const[ce,me,Ne,Ie]=await Promise.all([Qs.getAll(),Ll.getAll(),Lu.getAll(),Tu.get()]),He=ce.depots||[];h(He),v(me.packages||[]),N(Ne.pricing||[]);const Me=He.find(Xe=>{var X;return((X=Xe.name)==null?void 0:X.toLowerCase())==="devgad"&&Xe.type==="origin"});if(Me&&D(Xe=>({...Xe,originDepotId:Me.id})),Ie.season){a(Ie.season);const Xe=new Date,X=new Date(Ie.season.startDate),Ye=new Date(Ie.season.endDate),dt=Xe>=X&&Xe<=Ye;u(dt)}}catch(ce){console.error("Error loading data:",ce)}},ge=()=>{let ce=0;return q.receivers.forEach(me=>{me.packages.forEach(Ne=>{ce+=Ne.quantity*Ne.price})}),ce+(q.deliveryCharge||0)},ae=async()=>{var ce,me,Ne;k(!0),console.log("[NewBooking] handleSubmit called"),console.log("[NewBooking] isOnline from store:",he),console.log("[NewBooking] navigator.onLine:",navigator.onLine);try{const Ie={origin_depot_id:q.originDepotId,destination_depot_id:q.destinationDepotId,payment_method:q.paymentMethod,delivery_type:q.deliveryType,delivery_charges:q.deliveryCharge,sender_name:q.senderName,sender_phone:q.senderPhone,receivers:q.receivers,subtotal:ge()-(q.deliveryCharge||0),total_amount:ge(),current_status:"booked",special_instructions:q.customInstructions};if(he)try{const He=await Xs.create(Ie),Me=((ce=He.booking)==null?void 0:ce.receipt_number)||((me=He.booking)==null?void 0:me.id)||"Unknown";C(Me),q.senderName&&q.senderPhone&&await Md.upsert(q.senderName,q.senderPhone).catch(console.error);for(const Xe of q.receivers)Xe.name&&Xe.phone&&await Md.upsert(Xe.name,Xe.phone).catch(console.error);B(),t(5)}catch(He){console.error("Error creating booking:",He);const Me=((Ne=He.message)==null?void 0:Ne.toLowerCase())||"";if(Me.includes("fetch")||Me.includes("network")||Me.includes("failed to fetch")||Me.includes("err_name_not_resolved")||Me.includes("err_internet_disconnected")||Me.includes("err_connection")||Me.includes("err_network")||Me.includes("net::")||Me.includes("timeout")||Me.includes("abort")||He.name==="TypeError"||He.code==="ECONNREFUSED"||!navigator.onLine){console.log("[NewBooking] Network error detected, queuing operation");const X=Ol("CREATE_BOOKING",Ie,{entityType:"booking",optimisticData:{formData:q,createdAt:new Date().toISOString()}});J(X),C("PENDING-"+X.slice(-8).toUpperCase()),B(),t(5)}else alert("Failed to create booking. Please try again.")}else{const He=Ol("CREATE_BOOKING",Ie,{entityType:"booking",optimisticData:{formData:q,createdAt:new Date().toISOString()}});J(He),C("PENDING-"+He.slice(-8).toUpperCase()),B(),t(5)}}catch(Ie){console.error("Error creating booking:",Ie),alert("Failed to create booking. Please try again.")}finally{k(!1)}},we=Pe.useRef(null),ie=Pe.useRef(null),ne=ce=>{we.current=ce.touches[0].clientX,ie.current=ce.touches[0].clientY},ve=ce=>{if(we.current===null||ie.current===null)return;const me=ce.changedTouches[0].clientX,Ne=ce.changedTouches[0].clientY,Ie=me-we.current,He=Ne-ie.current;Math.abs(Ie)>Math.abs(He)&&Math.abs(Ie)>50&&(Ie<0&&e<4?t(Me=>Math.min(Me+1,4)):Ie>0&&e>1&&t(Me=>Math.max(Me-1,1))),we.current=null,ie.current=null},V=()=>t(ce=>Math.min(ce+1,5)),P=()=>t(ce=>Math.max(ce-1,1)),K=ce=>t(ce),ee=()=>{const ce=d.find(me=>{var Ne;return((Ne=me.name)==null?void 0:Ne.toLowerCase())==="devgad"&&me.type==="origin"});D({originDepotId:(ce==null?void 0:ce.id)||"",destinationDepotId:"",paymentMethod:"cash",deliveryType:"pickup",deliveryCharge:0,customInstructions:"",senderName:"",senderPhone:"",receivers:[{name:"",phone:"",address:"",packages:[]}]}),C(""),t(1),B(),J(null)},le=()=>{E&&D(E),R(!1)},ue=()=>{B(),R(!1)};if(!o)return c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Mango Season is Currently Closed"}),c.jsx("p",{className:"text-gray-600",children:"Please check back during the mango season."})]});const se=["Depot & Payment","Sender Details","Receivers & Packages","Summary"];return Y&&U.find(ce=>ce.id===Y&&ce.status==="completed"),c.jsxs("div",{className:"p-8",children:[L&&c.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-blue-900",children:"Resume Previous Booking?"}),c.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["You have an unsaved booking from ",H?new Date(H).toLocaleString():"earlier",". Would you like to continue where you left off?"]}),c.jsxs("div",{className:"flex gap-3 mt-3",children:[c.jsx("button",{onClick:le,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Resume Booking"}),c.jsx("button",{onClick:ue,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium",children:"Start Fresh"})]})]})]})}),!he&&e<5&&c.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-amber-800",children:"You're currently offline. "}),c.jsx("span",{className:"text-amber-700",children:"Your booking will be saved and submitted when you're back online."})]})]})}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"New Booking"}),c.jsx("p",{className:"text-gray-600",children:"Create a new mango transport booking"})]}),e<=4&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4 lg:hidden",children:[c.jsx("button",{onClick:P,disabled:e===1,className:`p-3 rounded-full transition-colors touch-target ${e===1?"bg-gray-100 text-gray-300 cursor-not-allowed":"bg-orange-100 text-orange-600 hover:bg-orange-200 active:bg-orange-300"}`,"aria-label":"Previous step",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["Step ",e," of 4"]}),c.jsx("div",{className:"text-sm text-gray-600",children:se[e-1]})]}),c.jsx("button",{onClick:V,disabled:e===4,className:`p-3 rounded-full transition-colors touch-target ${e===4?"bg-gray-100 text-gray-300 cursor-not-allowed":"bg-orange-100 text-orange-600 hover:bg-orange-200 active:bg-orange-300"}`,"aria-label":"Next step",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),c.jsx("div",{className:"hidden lg:flex items-center justify-center gap-2",children:se.map((ce,me)=>c.jsxs(Cl.Fragment,{children:[c.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium ${e===me+1?"bg-orange-500 text-white":e>me+1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:[c.jsx("span",{children:me+1}),c.jsx("span",{children:ce})]}),me<3&&c.jsx("div",{className:"w-8 h-0.5 bg-gray-200"})]},me))}),c.jsx("p",{className:"lg:hidden text-center text-xs text-gray-400 mt-2",children:"Swipe or use arrows to navigate"})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 max-w-4xl mx-auto",onTouchStart:ne,onTouchEnd:ve,children:[e===1&&c.jsx(n5,{formData:q,setFormData:D,depots:d,onNext:V}),e===2&&c.jsx(s5,{formData:q,setFormData:D,onNext:V,onPrev:P}),e===3&&c.jsx(i5,{formData:q,setFormData:D,packages:g,pricing:_,onNext:V,onPrev:P}),e===4&&c.jsx(a5,{formData:q,depots:d,onSubmit:ae,onPrev:P,goToStep:K,isSubmitting:y}),e===5&&c.jsx(o5,{receiptNumber:A,formData:q,depots:d,onNewBooking:ee,onNavigate:r})]})]})}function n5({formData:r,setFormData:e,depots:t,onNext:s}){const a=t.filter(h=>h.type==="origin"),u=t.filter(h=>h.type!=="origin").sort((h,g)=>{var y,k;const v=["bhusari colony","sadashiv peth","akurdi"],_=v.indexOf((y=h.name)==null?void 0:y.toLowerCase()),N=v.indexOf((k=g.name)==null?void 0:k.toLowerCase());return _!==-1&&N!==-1?_-N:_!==-1?-1:N!==-1?1:(h.name||"").localeCompare(g.name||"")}),d=r.originDepotId&&r.destinationDepotId&&r.paymentMethod;return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 1: Route & Payment"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin Depot *"}),c.jsxs("select",{value:r.originDepotId,onChange:h=>e({...r,originDepotId:h.target.value,destinationDepotId:""}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",children:[c.jsx("option",{value:"",children:"Select Origin"}),a.map(h=>c.jsx("option",{value:h.id,children:h.name},h.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destination Depot *"}),c.jsxs("select",{value:r.destinationDepotId,onChange:h=>e({...r,destinationDepotId:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",disabled:!r.originDepotId,children:[c.jsx("option",{value:"",children:"Select Destination"}),u.map(h=>c.jsx("option",{value:h.id,children:h.name},h.id))]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Payment Method *"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{value:"cash",label:" Cash"},{value:"online",label:" Online"},{value:"to_pay",label:" To Pay"},{value:"credit",label:" Credit"}].map(h=>c.jsx("button",{type:"button",onClick:()=>e({...r,paymentMethod:h.value}),className:`px-4 py-3 rounded-lg border-2 text-sm font-medium transition-all ${r.paymentMethod===h.value?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-orange-300"}`,children:h.label},h.value))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Delivery Type *"}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"pickup",label:" Depot Pickup",desc:"Receiver picks up from depot"},{value:"home_sender",label:" Home Delivery (Paid)",desc:"Delivery paid by sender"},{value:"home_topay",label:" Home Delivery (To Pay)",desc:"Delivery paid by receiver"},{value:"home_drt",label:" DRT Delivery",desc:"Special DRT delivery"}].map(h=>c.jsxs("button",{type:"button",onClick:()=>e({...r,deliveryType:h.value,deliveryCharge:0}),className:`p-4 rounded-lg border-2 text-left transition-all ${r.deliveryType===h.value?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-300"}`,children:[c.jsx("div",{className:"font-medium",children:h.label}),c.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h.desc})]},h.value))})]}),r.deliveryType!=="pickup"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Charge ()"}),c.jsx("input",{type:"number",min:"0",value:r.deliveryCharge,onChange:h=>e({...r,deliveryCharge:Number(h.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",placeholder:"Enter delivery charge"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions (Optional)"}),c.jsx("textarea",{value:r.customInstructions,onChange:h=>e({...r,customInstructions:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",rows:2,placeholder:"Any special handling instructions..."})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:s,disabled:!d,className:"px-8 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 font-medium",children:"Next Step "})})]})}function s5({formData:r,setFormData:e,onNext:t,onPrev:s}){const a=u=>/^[6-9]\d{9}$/.test(u),o=r.senderName&&a(r.senderPhone);return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 2: Sender Details"}),c.jsx("p",{className:"text-gray-600",children:"Start typing to see suggestions from past bookings"}),c.jsx(ym,{nameValue:r.senderName,phoneValue:r.senderPhone,onNameChange:u=>e({...r,senderName:u}),onPhoneChange:u=>e({...r,senderPhone:u}),onContactSelect:u=>e({...r,senderName:u.name,senderPhone:u.phone}),nameLabel:"Sender Name",phoneLabel:"Sender Phone",namePlaceholder:"Start typing name...",phonePlaceholder:"10-digit number",required:!0}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("button",{onClick:s,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Previous"}),c.jsx("button",{onClick:t,disabled:!o,className:"px-8 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 font-medium",children:"Next Step "})]})]})}function i5({formData:r,setFormData:e,packages:t,pricing:s,onNext:a,onPrev:o}){const u=T=>/^[6-9]\d{9}$/.test(T),d=["home_sender","home_topay","home_drt"].includes(r.deliveryType),h=T=>{var B;const te=s.find(H=>H.packageId===T&&H.depotId===r.destinationDepotId);return(te==null?void 0:te.price)||((B=t.find(H=>H.id===T))==null?void 0:B.basePrice)||0},g=[...t].sort((T,te)=>{var U,q;const B=["1 dz","1dz","2 dz","2dz","3 dz","3dz","5 dz","5dz"],H=((U=T.name)==null?void 0:U.toLowerCase())||"",Y=((q=te.name)==null?void 0:q.toLowerCase())||"",J=B.findIndex(D=>H.includes(D)),he=B.findIndex(D=>Y.includes(D));return J!==-1&&he!==-1?J-he:J!==-1?-1:he!==-1?1:H.localeCompare(Y)}),v=(T,te,B)=>{const H=[...r.receivers];H[T]={...H[T],[te]:B},e({...r,receivers:H})},_=(T,te,B)=>{const H=[...r.receivers],Y=H[T],J=t.find(q=>q.id===te),he=h(te),U=Y.packages.findIndex(q=>q.packageId===te);if(B>0){const q={packageId:te,size:(J==null?void 0:J.name)||"Custom",quantity:B,price:he};U>=0?Y.packages[U]=q:Y.packages.push(q)}else U>=0&&Y.packages.splice(U,1);e({...r,receivers:H})},N=(T,te,B)=>{const H=[...r.receivers],Y=H[T],J=Y.packages.findIndex(he=>he.packageId===te);J>=0&&(Y.packages[J].description=B,e({...r,receivers:H}))},y=(T,te)=>{var H,Y;const B=(Y=(H=r.receivers[T])==null?void 0:H.packages)==null?void 0:Y.find(J=>J.packageId===te);return(B==null?void 0:B.description)||""},k=T=>(T==null?void 0:T.toLowerCase())==="other",A=(T,te)=>{var H,Y;const B=(Y=(H=r.receivers[T])==null?void 0:H.packages)==null?void 0:Y.find(J=>J.packageId===te);return(B==null?void 0:B.quantity)||0},C=()=>{e({...r,receivers:[...r.receivers,{name:"",phone:"",address:"",packages:[]}]})},L=T=>{if(r.receivers.length>1){const te=r.receivers.filter((B,H)=>H!==T);e({...r,receivers:te})}},R=T=>T.packages.reduce((te,B)=>te+B.quantity*B.price,0),E=r.receivers.every(T=>T.name&&u(T.phone)&&T.packages.length>0&&(!d||T.address));return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 3: Receivers & Packages"}),c.jsx("p",{className:"text-gray-600",children:"Add receiver details and select packages for each receiver"}),r.receivers.map((T,te)=>c.jsxs("div",{className:"p-6 border-2 border-gray-200 rounded-lg space-y-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-center pb-2 border-b",children:[c.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Receiver ",te+1]}),r.receivers.length>1&&c.jsx("button",{onClick:()=>L(te),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Remove"})]}),c.jsx(ym,{nameValue:T.name,phoneValue:T.phone,onNameChange:B=>v(te,"name",B),onPhoneChange:B=>v(te,"phone",B),onContactSelect:B=>{const H=[...r.receivers];H[te]={...H[te],name:B.name,phone:B.phone},e({...r,receivers:H})},nameLabel:"Receiver Name",phoneLabel:"Receiver Phone",namePlaceholder:"Start typing name...",phonePlaceholder:"10-digit number",required:!0}),d&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delivery Address *"}),c.jsx("textarea",{value:T.address,onChange:B=>v(te,"address",B.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",rows:2,placeholder:"Enter full delivery address",required:!0})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Select Packages"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:g.map(B=>{const H=h(B.id),Y=A(te,B.id),J=k(B.name),he=y(te,B.id);return c.jsxs("div",{className:`p-3 bg-white border rounded-lg hover:border-orange-300 transition-colors ${J&&Y>0?"border-yellow-400 col-span-full":"border-gray-200"}`,children:[c.jsx("div",{className:"font-medium text-gray-900 text-sm",children:B.name}),c.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["",H,"/unit"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"0",value:Y>0?Y:"",placeholder:"0",onChange:U=>_(te,B.id,Number(U.target.value)||0),className:`w-16 px-2 py-1 text-center border rounded focus:ring-2 focus:ring-orange-500 ${Y>0?"border-orange-400 bg-orange-50":"border-gray-300 text-gray-400"}`}),Y>0&&c.jsxs("span",{className:"text-xs font-medium text-green-600",children:["",(Y*H).toFixed(0)]})]}),J&&Y>0&&c.jsx("div",{className:"mt-2",children:c.jsx("input",{type:"text",value:he,onChange:U=>N(te,B.id,U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 text-sm",placeholder:"Enter description (e.g., Special box, Custom crate...)"})})]},B.id)})})]}),c.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"font-medium",children:["Subtotal for ",T.name||`Receiver ${te+1}`,":"]}),c.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["",R(T).toFixed(2)]})]})})]},te)),c.jsx("button",{onClick:C,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-orange-500 hover:text-orange-500 font-medium transition-colors",children:"+ Add Another Receiver"}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("button",{onClick:o,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Previous"}),c.jsx("button",{onClick:a,disabled:!E,className:"px-8 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 font-medium",children:"Review Summary "})]})]})}function a5({formData:r,depots:e,onSubmit:t,onPrev:s,goToStep:a,isSubmitting:o}){var v,_;const u=e.find(N=>N.id===r.originDepotId),d=e.find(N=>N.id===r.destinationDepotId),h=r.receivers.reduce((N,y)=>N+y.packages.reduce((k,A)=>k+A.quantity*A.price,0),0),g=h+(r.deliveryCharge||0);return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Step 4: Review & Confirm"}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:" Route"}),c.jsx("button",{onClick:()=>a(1),className:"text-orange-600 text-sm hover:underline",children:"Edit"})]}),c.jsxs("p",{children:[u==null?void 0:u.name,"  ",d==null?void 0:d.name]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Payment: ",(v=r.paymentMethod)==null?void 0:v.toUpperCase()," | Delivery: ",(_=r.deliveryType)==null?void 0:_.replace("_"," ")]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:" Sender"}),c.jsx("button",{onClick:()=>a(2),className:"text-orange-600 text-sm hover:underline",children:"Edit"})]}),c.jsxs("p",{children:[r.senderName," (",r.senderPhone,")"]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:" Receivers & Packages"}),c.jsx("button",{onClick:()=>a(3),className:"text-orange-600 text-sm hover:underline",children:"Edit"})]}),r.receivers.map((N,y)=>c.jsxs("div",{className:"border-l-4 border-orange-300 pl-4 mb-4",children:[c.jsxs("p",{className:"font-medium",children:[N.name," (",N.phone,")"]}),N.address&&c.jsx("p",{className:"text-sm text-gray-600",children:N.address}),c.jsx("div",{className:"mt-2 space-y-1",children:N.packages.map((k,A)=>c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsxs("span",{children:[k.size,"  ",k.quantity]}),c.jsxs("span",{children:["",(k.quantity*k.price).toFixed(0)]})]},A))})]},y))]}),c.jsxs("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Packages Subtotal"}),c.jsxs("span",{children:["",h.toFixed(2)]})]}),r.deliveryCharge>0&&c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Delivery Charge"}),c.jsxs("span",{children:["",r.deliveryCharge.toFixed(2)]})]}),c.jsxs("div",{className:"flex justify-between font-bold text-lg mt-2 pt-2 border-t border-orange-300",children:[c.jsx("span",{children:"Total Amount"}),c.jsxs("span",{className:"text-orange-600",children:["",g.toFixed(2)]})]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("button",{onClick:s,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Previous"}),c.jsx("button",{onClick:t,disabled:o,className:"px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:o?"Creating...":" Confirm Booking"})]})]})}function o5({receiptNumber:r,formData:e,depots:t,onNewBooking:s,onNavigate:a}){const o=t==null?void 0:t.find(R=>R.id===(e==null?void 0:e.originDepotId)),u=t==null?void 0:t.find(R=>R.id===(e==null?void 0:e.destinationDepotId)),d=r==null?void 0:r.startsWith("PENDING-"),h=ei(R=>R.pendingOperations),g=zi(R=>R.isOnline),v=d?r.replace("PENDING-","").toLowerCase():null,_=v?h.find(R=>R.id.toLowerCase().endsWith(v)):null,N=()=>e!=null&&e.receivers?e.receivers.reduce((R,E)=>R+(E.packages||[]).reduce((T,te)=>T+te.quantity*te.price,0),0)+(e.deliveryCharge||0):0,y=()=>{var E;const R=[" DRT MANGO TRANSPORT","",`Receipt: ${r}`,`Date: ${new Date().toLocaleDateString("en-IN")}`,""," DESTINATION",`${(u==null?void 0:u.name)||"N/A"}`,""," SENDER",`*${(e==null?void 0:e.senderName)||"N/A"}* (${(e==null?void 0:e.senderPhone)||"N/A"})`,""," RECEIVERS & PACKAGES"];return(E=e==null?void 0:e.receivers)==null||E.forEach((T,te)=>{var B;R.push(`
${te+1}. ${T.name} (${T.phone})`),(B=T.packages)==null||B.forEach(H=>{R.push(`    ${H.size}  ${H.quantity} = ${(H.quantity*H.price).toFixed(0)}`)})}),R.push(`
`),R.push(` TOTAL: ${N().toFixed(2)}`),R.push(`
Thank you for choosing DRT Mango Transport! `),R.join(`
`)},k=()=>{const R=encodeURIComponent(y());window.open(`https://wa.me/?text=${R}`,"_blank")},A=async()=>{var D,G,ge;const{jsPDF:R}=await yu(async()=>{const{jsPDF:ae}=await Promise.resolve().then(()=>Xw);return{jsPDF:ae}},void 0),E=new R({format:"a5",unit:"mm",orientation:"landscape"}),T=E.internal.pageSize.getWidth(),te=E.internal.pageSize.getHeight(),B=15;let H=15;E.setFontSize(16),E.setFont("helvetica","bold"),E.setTextColor(0,0,0),E.text("DRT MANGO TRANSPORT",T/2,H,{align:"center"}),H+=6,E.setFontSize(8),E.setFont("helvetica","normal"),E.text("AT POST JAMSANDE, TAL.DEVGAD, DIST. SINDHUDURG MOB: 9422584166, 9422435348",T/2,H,{align:"center"}),H+=8,E.setFontSize(10),E.setFont("helvetica","normal"),E.text("Receipt Number",T/2,H,{align:"center"}),H+=5,E.setFontSize(12),E.setFont("helvetica","bold"),E.text(r,T/2,H,{align:"center"}),H+=10,E.setFontSize(10),E.setFont("helvetica","normal"),E.text(`Destination: ${(u==null?void 0:u.name)||"N/A"}`,B,H),E.text(`Date: ${new Date().toLocaleDateString("en-IN")}`,T-B,H,{align:"right"}),H+=8,E.setFontSize(10),E.setFont("helvetica","normal"),E.text(`Sender: ${(e==null?void 0:e.senderName)||"N/A"} (${(e==null?void 0:e.senderPhone)||"N/A"})`,T/2,H,{align:"center"}),H+=10,E.setFontSize(10),E.setFont("helvetica","bold"),E.text("RECEIVERS & PACKAGES",B,H),H+=10,E.setFont("helvetica","normal"),E.setFontSize(10);const Y=B+30,J=te-40;(D=e==null?void 0:e.receivers)==null||D.forEach((ae,we)=>{var ne;H>J&&(E.addPage(),H=15,E.setFontSize(10),E.setFont("helvetica","normal"));const ie=`${we+1}. ${((ne=ae.name)==null?void 0:ne.toUpperCase())||"N/A"} (${ae.phone||"N/A"})`;E.text(ie,Y,H),H+=6,ae.packages&&ae.packages.length>0&&(E.setFontSize(9),ae.packages.forEach(ve=>{H>J&&(E.addPage(),H=15,E.setFontSize(9));const V=`${ve.size}  ${ve.quantity} = ${(ve.quantity*ve.price).toFixed(0)}`;E.text(V,T-B-10,H,{align:"right"}),H+=5}),E.setFontSize(10)),ae.address&&(H>J&&(E.addPage(),H=15),E.setFontSize(8),E.setTextColor(100,100,100),E.text(`Address: ${ae.address}`,Y+10,H),E.setTextColor(0,0,0),E.setFontSize(10),H+=6),H+=3}),H+=5,E.setFontSize(11),E.setFont("helvetica","bold"),E.text(`TOTAL: ${N().toFixed(2)}`,T-B,H,{align:"right"}),H+=6,E.setFontSize(9),E.setFont("helvetica","normal");const he=((ge=(G=e==null?void 0:e.paymentMethod)==null?void 0:G.replace("_"," "))==null?void 0:ge.toUpperCase())||"CASH";E.text(`(${he})`,T-B,H,{align:"right"}),H+=12,E.setFontSize(10),E.setFont("helvetica","bold"),E.text("THANK YOU FOR USING OUR SERVICES",T/2,H,{align:"center"}),H+=15;const U=40,q=T-B-U;E.setLineWidth(.5),E.line(q,H,q+U,H),H+=4,E.setFontSize(8),E.setFont("helvetica","normal"),E.text("SIGN",q+U/2,H,{align:"center"}),E.save(`${r}.pdf`)},C=()=>{navigator.clipboard.writeText(r),alert("Receipt number copied!")},L=()=>{a?a("dashboard"):window.location.reload()};return c.jsxs("div",{className:"text-center space-y-6 py-8",children:[d?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl",children:(_==null?void 0:_.status)==="syncing"?"":(_==null?void 0:_.status)==="failed"?"":""}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:(_==null?void 0:_.status)==="syncing"?"Syncing Booking...":(_==null?void 0:_.status)==="failed"?"Sync Failed":"Booking Saved Locally"}),c.jsx("p",{className:"text-gray-600",children:g?(_==null?void 0:_.status)==="failed"?"Failed to sync. Will retry automatically or you can retry from the status bar.":"Your booking will be synced shortly...":"Your booking is saved and will be submitted when you're back online."}),c.jsxs("div",{className:`border rounded-lg p-6 max-w-md mx-auto ${(_==null?void 0:_.status)==="failed"?"bg-red-50 border-red-200":"bg-amber-50 border-amber-200"}`,children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Temporary Reference"}),c.jsx("p",{className:`text-2xl font-bold ${(_==null?void 0:_.status)==="failed"?"text-red-700":"text-amber-700"}`,children:r}),c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[(_==null?void 0:_.status)==="syncing"&&" Syncing now...",(_==null?void 0:_.status)==="pending"&&g&&" Waiting to sync...",(_==null?void 0:_.status)==="pending"&&!g&&" Will sync when online",(_==null?void 0:_.status)==="failed"&&` ${_.error||"Sync failed"}`]})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-6xl",children:""}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Booking Created Successfully!"}),c.jsx("p",{className:"text-gray-600",children:"Your mango transport booking has been confirmed"}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 max-w-md mx-auto",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Receipt Number"}),c.jsx("p",{className:"text-3xl font-bold text-green-700",children:r}),c.jsx("button",{onClick:C,className:"mt-2 text-sm text-green-600 hover:underline",children:" Copy"})]})]}),c.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4 max-w-md mx-auto text-left",children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Route:"}),c.jsxs("span",{className:"font-medium",children:[o==null?void 0:o.name,"  ",u==null?void 0:u.name]})]}),c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Sender:"}),c.jsx("span",{className:"font-medium",children:e==null?void 0:e.senderName})]}),c.jsxs("div",{className:"flex justify-between font-bold pt-2 border-t mt-2",children:[c.jsx("span",{children:"Total:"}),c.jsxs("span",{className:d?"text-amber-700":"text-green-700",children:["",N().toFixed(2)]})]})]}),c.jsxs("div",{className:"flex flex-col gap-3 max-w-md mx-auto pt-4",children:[!d&&c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:k,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium",children:" WhatsApp"}),c.jsx("button",{onClick:A,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 font-medium",children:" Download PDF"})]}),d&&c.jsx("div",{className:"p-3 bg-gray-100 rounded-lg text-sm text-gray-600",children:" Share and PDF options will be available after sync completes"}),c.jsx("button",{onClick:s,className:"py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 font-medium",children:" Create New Booking"}),c.jsx("button",{onClick:L,className:"py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:" Go to Dashboard"})]})]})}function Rf(r){var s;if(typeof navigator<"u"&&!navigator.onLine||r instanceof TypeError)return!0;const e=((s=r==null?void 0:r.message)==null?void 0:s.toLowerCase())||"";return["fetch","network","failed to fetch","err_name_not_resolved","err_internet_disconnected","err_connection","err_network","net::","timeout","abort","econnrefused","enotfound","socket hang up","load failed"].some(a=>e.includes(a))}function l5({userRole:r,assignedDepotId:e}){const{draft:t,hasDraft:s,saveDraft:a,clearDraft:o,lastSavedAt:u,selectedBookings:d,setSelectedBookings:h,pendingTripId:g,setPendingTripId:v}=Ky(),_=zi(se=>se.isOnline);ei(se=>se.pendingOperations);const[N,y]=Pe.useState({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),[k,A]=Pe.useState([]),[C,L]=Pe.useState([]),[R,E]=Pe.useState([]),[T,te]=Pe.useState(null),[B,H]=Pe.useState(!0),[Y,J]=Pe.useState(!0),[he,U]=Pe.useState(!1),[q,D]=Pe.useState([]),[G,ge]=Pe.useState(!1);Pe.useEffect(()=>{s&&t&&u&&((Date.now()-new Date(u).getTime())/36e5<24?ge(!0):o())},[]),Pe.useEffect(()=>{const se=setTimeout(()=>{(N.driverName||N.vehicleNumber||k.length>0)&&(a(N),h(k))},1e3);return()=>clearTimeout(se)},[N,k,a,h]),Pe.useEffect(()=>{ae()},[]);const ae=async()=>{J(!0);try{const[se,ce,me]=await Promise.all([Tu.get(),Xs.getAll(),Qs.getAll()]);if(se.season&&se.season.startDate&&se.season.endDate){te(se.season);const Ne=new Date,Ie=new Date(se.season.startDate),He=new Date(se.season.endDate);H(Ne>=Ie&&Ne<=He)}if(r==="depot_manager"&&e){const Ie=(await Oc.getByDepotId(e)).forwardingDepotIds||[];D(Ie),console.log("Forwarding destinations for depot:",e,Ie);const He=(ce.bookings||[]).filter(Me=>["in_transit","reached_depot"].includes(Me.status)&&Ie.includes(Me.destination_depot_id));L(He)}else{const Ne=(ce.bookings||[]).filter(Ie=>Ie.status==="booked");L(Ne)}E(me.depots||[])}catch(se){console.error("Error loading data:",se)}finally{J(!1)}},we=async se=>{var ce,me;if(se.preventDefault(),!B){alert("Cannot create trips outside of the season dates. Please contact admin to update season settings.");return}if(k.length===0){alert("Please select at least one booking for this trip.");return}if(!N.driverName||!N.driverPhone||!N.vehicleNumber){alert("Please fill in all required fields.");return}U(!0);try{const Ne=C.find(Me=>k.includes(Me.id)),Ie=r==="depot_manager"&&e,He={driver:N.driverName,driverPhone:N.driverPhone,vehicle:N.vehicleNumber,tripCost:parseFloat(N.tripCost)||0,originId:Ie?e:(Ne==null?void 0:Ne.origin_depot_id)||null,destinationId:(Ne==null?void 0:Ne.destination_depot_id)||null,departure:new Date().toISOString(),eta:new Date(Date.now()+1440*60*1e3).toISOString(),isForwarding:Ie};if(_)try{const Me=await Vo.create(He,k);alert(`Trip created successfully! Trip Number: ${((ce=Me.trip)==null?void 0:ce.trip_number)||((me=Me.trip)==null?void 0:me.id)||"Created"}`),o(),y({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),A([]),ae()}catch(Me){if(console.error("Error creating trip:",Me),Rf(Me)){console.log("[TripCreation] Network error detected, queuing operation");const Xe=Ol("CREATE_TRIP",{tripData:He,bookingIds:k},{entityType:"trip",optimisticData:{formData:N,selectedBookings:k,createdAt:new Date().toISOString()}});v(Xe),alert(`Trip saved offline! Reference: TRIP-${Xe.slice(-8).toUpperCase()}. It will be synced when you're back online.`),o(),y({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),A([])}else alert("Error creating trip. Please try again.")}else{const Me=Ol("CREATE_TRIP",{tripData:He,bookingIds:k},{entityType:"trip",optimisticData:{formData:N,selectedBookings:k,createdAt:new Date().toISOString()}});v(Me),alert(`Trip saved offline! Reference: TRIP-${Me.slice(-8).toUpperCase()}. It will be synced when you're back online.`),o(),y({driverName:"",driverPhone:"",vehicleNumber:"",tripCost:""}),A([])}}catch(Ne){console.error("Error creating trip:",Ne),alert("Error creating trip. Please try again.")}finally{U(!1)}},ie=se=>{y({...N,[se.target.name]:se.target.value})},ne=se=>{A(ce=>ce.includes(se)?ce.filter(me=>me!==se):[...ce,se])},ve=()=>{k.length===C.length?A([]):A(C.map(se=>se.id))},V=se=>{const ce=[];return Array.isArray(se.receivers)&&se.receivers.forEach(me=>{Array.isArray(me.packages)&&me.packages.forEach(Ne=>{ce.push({size:Ne.size||"Other",quantity:Number(Ne.quantity)||0})})}),ce},P=C.filter(se=>k.includes(se.id)),K=P.reduce((se,ce)=>se+V(ce).reduce((me,Ne)=>me+Ne.quantity,0),0),ee=P.reduce((se,ce)=>se+(Number(ce.total_amount)||0),0),le=C.reduce((se,ce)=>(V(ce).forEach(me=>{se[me.size]=(se[me.size]||0)+me.quantity}),se),{}),ue=C.reduce((se,ce)=>{const me=ce.destination_depot_name||"Unknown";return se[me]||(se[me]={bookings:[],packages:{}}),se[me].bookings.push(ce),V(ce).forEach(Ne=>{se[me].packages[Ne.size]=(se[me].packages[Ne.size]||0)+Ne.quantity}),se},{});return Y?c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading trip data..."})]})}):c.jsxs("div",{className:"p-8 max-w-full overflow-x-hidden",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Trip Creation"}),c.jsx("p",{className:"text-gray-600",children:"Create a new transport trip and assign bookings"})]}),!B&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 mb-6",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-red-800 mb-1",children:"Season Inactive"}),c.jsxs("p",{className:"text-sm text-red-700",children:["Trips cannot be created outside the season dates",T&&` (${new Date(T.startDate).toLocaleDateString("en-IN")} - ${new Date(T.endDate).toLocaleDateString("en-IN")})`,". Please contact the administrator to update season settings."]})]})]})}),G&&c.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-blue-900",children:"Resume Previous Trip?"}),c.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["You have an unsaved trip draft from ",u?new Date(u).toLocaleString():"earlier","."]}),c.jsxs("div",{className:"flex gap-3 mt-3",children:[c.jsx("button",{onClick:()=>{t&&y(t),d.length>0&&A(d),ge(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"Resume Trip"}),c.jsx("button",{onClick:()=>{o(),ge(!1)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium",children:"Start Fresh"})]})]})]})}),!_&&c.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-amber-800",children:"You're currently offline. "}),c.jsx("span",{className:"text-amber-700",children:"Your trip will be saved and submitted when you're back online."})]})]})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"System Inventory - Pending Bookings"}),c.jsx("div",{className:"w-[calc(100vw-320px)] max-w-full overflow-hidden",children:c.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-3",children:[C.length>0&&c.jsxs("div",{className:"bg-orange-50 rounded-lg border-2 border-orange-300 p-4 min-w-[180px] max-w-[200px] flex-shrink-0",children:[c.jsx("p",{className:"text-sm font-bold text-orange-700 mb-2",children:" Total Inventory"}),c.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:[C.length," total bookings"]}),c.jsx("div",{className:"space-y-1 max-h-[140px] overflow-y-auto",children:Object.entries(le).map(([se,ce])=>c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"text-gray-700",children:se}),c.jsx("span",{className:"font-bold text-orange-700 ml-2",children:ce})]},se))})]}),Object.entries(ue).map(([se,ce])=>c.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 min-w-[180px] max-w-[200px] flex-shrink-0",children:[c.jsx("p",{className:"text-sm font-bold text-gray-900 truncate mb-2",children:se}),c.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:[ce.bookings.length," bookings"]}),c.jsxs("div",{className:"space-y-1 max-h-[140px] overflow-y-auto",children:[Object.entries(ce.packages).map(([me,Ne])=>c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"text-gray-600 truncate",children:me}),c.jsx("span",{className:"font-bold text-orange-600 ml-2",children:Ne})]},me)),Object.keys(ce.packages).length===0&&c.jsx("p",{className:"text-xs text-gray-400",children:"No packages"})]})]},se)),Object.keys(ue).length===0&&c.jsx("div",{className:"flex-1 bg-gray-50 rounded-lg p-6 text-center text-gray-500",children:"No pending bookings available"})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 sticky top-8",children:[c.jsx("h2",{className:"font-bold text-gray-900 mb-4",children:"Trip Details"}),c.jsxs("form",{onSubmit:we,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"driverName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver Name *"}),c.jsx("input",{id:"driverName",name:"driverName",type:"text",value:N.driverName,onChange:ie,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter driver name",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"driverPhone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Driver Phone *"}),c.jsx("input",{id:"driverPhone",name:"driverPhone",type:"tel",value:N.driverPhone,onChange:ie,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"10-digit number",maxLength:10,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"vehicleNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehicle Number *"}),c.jsx("input",{id:"vehicleNumber",name:"vehicleNumber",type:"text",value:N.vehicleNumber,onChange:ie,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., MH-12-AB-1234",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tripCost",className:"block text-sm font-medium text-gray-700 mb-1",children:"Trip Cost ()"}),c.jsx("input",{id:"tripCost",name:"tripCost",type:"number",value:N.tripCost,onChange:ie,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Optional"})]}),c.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Selected Bookings"}),c.jsx("span",{className:"font-bold text-orange-600",children:k.length})]}),c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Packages"}),c.jsx("span",{className:"font-bold text-gray-900",children:K})]}),c.jsxs("div",{className:"flex justify-between items-center border-t border-orange-200 pt-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total Value"}),c.jsxs("span",{className:"font-bold text-green-600",children:["",ee.toLocaleString("en-IN")]})]})]}),c.jsx("button",{type:"submit",disabled:he||k.length===0||!B,className:"w-full px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:he?"Creating Trip...":"Create Trip"})]})]})}),c.jsx("div",{className:"lg:col-span-2",children:c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Select Bookings"}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[C.length," bookings available for assignment"]})]}),c.jsx("button",{type:"button",onClick:ve,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:k.length===C.length?"Deselect All":"Select All"})]}),c.jsx("div",{className:"max-h-[600px] overflow-y-auto divide-y divide-gray-200",children:C.length>0?C.map(se=>c.jsxs("label",{className:`flex items-start gap-4 p-4 cursor-pointer hover:bg-gray-50 transition-colors ${k.includes(se.id)?"bg-orange-50":""}`,children:[c.jsx("input",{type:"checkbox",checked:k.includes(se.id),onChange:()=>ne(se.id),className:"mt-1 w-5 h-5 text-orange-500 border-gray-300 rounded focus:ring-orange-500"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:se.sender_name}),c.jsx("p",{className:"text-sm text-gray-600",children:se.sender_phone})]}),c.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded",children:se.receipt_number})]}),c.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:[" ",se.origin_depot_name||"Origin","  ",se.destination_depot_name||"Destination"]}),c.jsxs("span",{className:"font-medium text-green-600",children:["",(Number(se.total_amount)||0).toLocaleString("en-IN")]})]}),se.package_details&&Array.isArray(se.package_details)&&c.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:se.package_details.map((ce,me)=>c.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:[ce.name||ce.packageName,": ",ce.quantity]},me))})]})]},se.id)):c.jsxs("div",{className:"p-8 text-center text-gray-500",children:[c.jsx("p",{className:"text-lg mb-2",children:"No pending bookings"}),c.jsx("p",{className:"text-sm",children:"All bookings have been assigned to trips or delivered."})]})})]})})]})]})}function gr(r){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(r)}var Wi=Uint8Array,Zs=Uint16Array,Zf=Int32Array,ep=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tp=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),U0=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wm=function(r,e){for(var t=new Zs(31),s=0;s<31;++s)t[s]=e+=1<<r[s-1];for(var a=new Zf(t[30]),s=1;s<30;++s)for(var o=t[s];o<t[s+1];++o)a[o]=o-t[s]<<5|s;return{b:t,r:a}},bm=wm(ep,2),c5=bm.b,Df=bm.r;c5[28]=258,Df[258]=28;var u5=wm(tp,0),$0=u5.r,Ff=new Zs(32768);for(var Cr=0;Cr<32768;++Cr){var Bo=(Cr&43690)>>1|(Cr&21845)<<1;Bo=(Bo&52428)>>2|(Bo&13107)<<2,Bo=(Bo&61680)>>4|(Bo&3855)<<4,Ff[Cr]=((Bo&65280)>>8|(Bo&255)<<8)>>1}var xu=(function(r,e,t){for(var s=r.length,a=0,o=new Zs(e);a<s;++a)r[a]&&++o[r[a]-1];var u=new Zs(e);for(a=1;a<e;++a)u[a]=u[a-1]+o[a-1]<<1;var d;if(t){d=new Zs(1<<e);var h=15-e;for(a=0;a<s;++a)if(r[a])for(var g=a<<4|r[a],v=e-r[a],_=u[r[a]-1]++<<v,N=_|(1<<v)-1;_<=N;++_)d[Ff[_]>>h]=g}else for(d=new Zs(s),a=0;a<s;++a)r[a]&&(d[a]=Ff[u[r[a]-1]++]>>15-r[a]);return d}),Bl=new Wi(288);for(var Cr=0;Cr<144;++Cr)Bl[Cr]=8;for(var Cr=144;Cr<256;++Cr)Bl[Cr]=9;for(var Cr=256;Cr<280;++Cr)Bl[Cr]=7;for(var Cr=280;Cr<288;++Cr)Bl[Cr]=8;var Ud=new Wi(32);for(var Cr=0;Cr<32;++Cr)Ud[Cr]=5;var d5=xu(Bl,9,0),h5=xu(Ud,5,0),_m=function(r){return(r+7)/8|0},f5=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new Wi(r.subarray(e,t))},Xa=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8},du=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8,r[s+2]|=t>>16},Qh=function(r,e){for(var t=[],s=0;s<r.length;++s)r[s]&&t.push({s,f:r[s]});var a=t.length,o=t.slice();if(!a)return{t:Sm,l:0};if(a==1){var u=new Wi(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(te,B){return te.f-B.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],g=0,v=1,_=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};v!=a-1;)d=t[t[g].f<t[_].f?g++:_++],h=t[g!=v&&t[g].f<t[_].f?g++:_++],t[v++]={s:-1,f:d.f+h.f,l:d,r:h};for(var N=o[0].s,s=1;s<a;++s)o[s].s>N&&(N=o[s].s);var y=new Zs(N+1),k=Bf(t[v-1],y,0);if(k>e){var s=0,A=0,C=k-e,L=1<<C;for(o.sort(function(B,H){return y[H.s]-y[B.s]||B.f-H.f});s<a;++s){var R=o[s].s;if(y[R]>e)A+=L-(1<<k-y[R]),y[R]=e;else break}for(A>>=C;A>0;){var E=o[s].s;y[E]<e?A-=1<<e-y[E]++-1:++s}for(;s>=0&&A;--s){var T=o[s].s;y[T]==e&&(--y[T],++A)}k=e}return{t:new Wi(y),l:k}},Bf=function(r,e,t){return r.s==-1?Math.max(Bf(r.l,e,t+1),Bf(r.r,e,t+1)):e[r.s]=t},q0=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Zs(++e),s=0,a=r[0],o=1,u=function(h){t[s++]=h},d=1;d<=e;++d)if(r[d]==a&&d!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(a),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(a);o=1,a=r[d]}return{c:t.subarray(0,s),n:e}},hu=function(r,e){for(var t=0,s=0;s<e.length;++s)t+=r[s]*e[s];return t},Nm=function(r,e,t){var s=t.length,a=_m(e+2);r[a]=s&255,r[a+1]=s>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var o=0;o<s;++o)r[a+o+4]=t[o];return(a+4+s)*8},z0=function(r,e,t,s,a,o,u,d,h,g,v){Xa(e,v++,t),++a[256];for(var _=Qh(a,15),N=_.t,y=_.l,k=Qh(o,15),A=k.t,C=k.l,L=q0(N),R=L.c,E=L.n,T=q0(A),te=T.c,B=T.n,H=new Zs(19),Y=0;Y<R.length;++Y)++H[R[Y]&31];for(var Y=0;Y<te.length;++Y)++H[te[Y]&31];for(var J=Qh(H,7),he=J.t,U=J.l,q=19;q>4&&!he[U0[q-1]];--q);var D=g+5<<3,G=hu(a,Bl)+hu(o,Ud)+u,ge=hu(a,N)+hu(o,A)+u+14+3*q+hu(H,he)+2*H[16]+3*H[17]+7*H[18];if(h>=0&&D<=G&&D<=ge)return Nm(e,v,r.subarray(h,h+g));var ae,we,ie,ne;if(Xa(e,v,1+(ge<G)),v+=2,ge<G){ae=xu(N,y,0),we=N,ie=xu(A,C,0),ne=A;var ve=xu(he,U,0);Xa(e,v,E-257),Xa(e,v+5,B-1),Xa(e,v+10,q-4),v+=14;for(var Y=0;Y<q;++Y)Xa(e,v+3*Y,he[U0[Y]]);v+=3*q;for(var V=[R,te],P=0;P<2;++P)for(var K=V[P],Y=0;Y<K.length;++Y){var ee=K[Y]&31;Xa(e,v,ve[ee]),v+=he[ee],ee>15&&(Xa(e,v,K[Y]>>5&127),v+=K[Y]>>12)}}else ae=d5,we=Bl,ie=h5,ne=Ud;for(var Y=0;Y<d;++Y){var le=s[Y];if(le>255){var ee=le>>18&31;du(e,v,ae[ee+257]),v+=we[ee+257],ee>7&&(Xa(e,v,le>>23&31),v+=ep[ee]);var ue=le&31;du(e,v,ie[ue]),v+=ne[ue],ue>3&&(du(e,v,le>>5&8191),v+=tp[ue])}else du(e,v,ae[le]),v+=we[le]}return du(e,v,ae[256]),v+we[256]},p5=new Zf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Sm=new Wi(0),g5=function(r,e,t,s,a,o){var u=o.z||r.length,d=new Wi(s+u+5*(1+Math.ceil(u/7e3))+a),h=d.subarray(s,d.length-a),g=o.l,v=(o.r||0)&7;if(e){v&&(h[0]=o.r>>3);for(var _=p5[e-1],N=_>>13,y=_&8191,k=(1<<t)-1,A=o.p||new Zs(32768),C=o.h||new Zs(k+1),L=Math.ceil(t/3),R=2*L,E=function(Xe){return(r[Xe]^r[Xe+1]<<L^r[Xe+2]<<R)&k},T=new Zf(25e3),te=new Zs(288),B=new Zs(32),H=0,Y=0,J=o.i||0,he=0,U=o.w||0,q=0;J+2<u;++J){var D=E(J),G=J&32767,ge=C[D];if(A[G]=ge,C[D]=G,U<=J){var ae=u-J;if((H>7e3||he>24576)&&(ae>423||!g)){v=z0(r,h,0,T,te,B,Y,he,q,J-q,v),he=H=Y=0,q=J;for(var we=0;we<286;++we)te[we]=0;for(var we=0;we<30;++we)B[we]=0}var ie=2,ne=0,ve=y,V=G-ge&32767;if(ae>2&&D==E(J-V))for(var P=Math.min(N,ae)-1,K=Math.min(32767,J),ee=Math.min(258,ae);V<=K&&--ve&&G!=ge;){if(r[J+ie]==r[J+ie-V]){for(var le=0;le<ee&&r[J+le]==r[J+le-V];++le);if(le>ie){if(ie=le,ne=V,le>P)break;for(var ue=Math.min(V,le-2),se=0,we=0;we<ue;++we){var ce=J-V+we&32767,me=A[ce],Ne=ce-me&32767;Ne>se&&(se=Ne,ge=ce)}}}G=ge,ge=A[G],V+=G-ge&32767}if(ne){T[he++]=268435456|Df[ie]<<18|$0[ne];var Ie=Df[ie]&31,He=$0[ne]&31;Y+=ep[Ie]+tp[He],++te[257+Ie],++B[He],U=J+ie,++H}else T[he++]=r[J],++te[r[J]]}}for(J=Math.max(J,U);J<u;++J)T[he++]=r[J],++te[r[J]];v=z0(r,h,g,T,te,B,Y,he,q,J-q,v),g||(o.r=v&7|h[v/8|0]<<3,v-=7,o.h=C,o.p=A,o.i=J,o.w=U)}else{for(var J=o.w||0;J<u+g;J+=65535){var Me=J+65535;Me>=u&&(h[v/8|0]=g,Me=u),v=Nm(h,v+1,r.subarray(J,Me))}o.i=u}return f5(d,0,s+_m(v)+a)},km=function(){var r=1,e=0;return{p:function(t){for(var s=r,a=e,o=t.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)a+=s+=t[u];s=(s&65535)+15*(s>>16),a=(a&65535)+15*(a>>16)}r=s,e=a},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},m5=function(r,e,t,s,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new Wi(o.length+r.length);u.set(o),u.set(r,o.length),r=u,a.w=o.length}return g5(r,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,s,a)},jm=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},v5=function(r,e){var t=e.level,s=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=s<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var a=km();a.p(e.dictionary),jm(r,2,a.d())}};function Mf(r,e){e||(e={});var t=km();t.p(r);var s=m5(r,e,e.dictionary?6:2,4);return v5(s,e),jm(s,s.length-4,t.d()),s}var y5=typeof TextDecoder<"u"&&new TextDecoder,x5=0;try{y5.decode(Sm,{stream:!0}),x5=1}catch{}function w5(r){if(Array.isArray(r))return r}function b5(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var s,a,o,u,d=[],h=!0,g=!1;try{if(o=(t=t.call(r)).next,e!==0)for(;!(h=(s=o.call(t)).done)&&(d.push(s.value),d.length!==e);h=!0);}catch(v){g=!0,a=v}finally{try{if(!h&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(g)throw a}}return d}}function W0(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,s=Array(e);t<e;t++)s[t]=r[t];return s}function _5(r,e){if(r){if(typeof r=="string")return W0(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?W0(r,e):void 0}}function N5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H0(r,e){return w5(r)||b5(r,e)||_5(r,e)||N5()}function V0(r,e="utf8"){return new TextDecoder(e).decode(r)}const S5=new TextEncoder;function k5(r){return S5.encode(r)}const j5=1024*8,A5=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),Zh={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class rp{constructor(e=j5,t={}){pr(this,"buffer");pr(this,"byteLength");pr(this,"byteOffset");pr(this,"length");pr(this,"offset");pr(this,"lastWrittenByte");pr(this,"littleEndian");pr(this,"_data");pr(this,"_mark");pr(this,"_marks");let s=!1;typeof e=="number"?e=new ArrayBuffer(e):(s=!0,this.lastWrittenByte=e.byteLength);const a=t.offset?t.offset>>>0:0,o=e.byteLength-a;let u=a;(ArrayBuffer.isView(e)||e instanceof rp)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+a),e=e.buffer),s?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const s=(this.offset+e)*2,a=new Uint8Array(s);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const s=Zh[t].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+s);if(this.littleEndian===A5&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(a,a+s));d.reverse();const h=new Zh[t](d.buffer);return this.offset+=s,h.reverse(),h}const u=new Zh[t](o);return this.offset+=s,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let s=0;s<e;s++)t+=this.readChar();return t}readUtf8(e=1){return V0(this.readBytes(e))}decodeText(e=1,t="utf8"){return V0(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(k5(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Dc(r){let e=r.length;for(;--e>=0;)r[e]=0}const E5=3,C5=258,Am=29,P5=256,L5=P5+1+Am,Em=30,T5=512,O5=new Array((L5+2)*2);Dc(O5);const I5=new Array(Em*2);Dc(I5);const R5=new Array(T5);Dc(R5);const D5=new Array(C5-E5+1);Dc(D5);const F5=new Array(Am);Dc(F5);const B5=new Array(Em);Dc(B5);const M5=(r,e,t,s)=>{let a=r&65535|0,o=r>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do a=a+e[s++]|0,o=o+a|0;while(--u);a%=65521,o%=65521}return a|o<<16|0};var Uf=M5;const U5=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},$5=new Uint32Array(U5()),q5=(r,e,t,s)=>{const a=$5,o=s+t;r^=-1;for(let u=s;u<o;u++)r=r>>>8^a[(r^e[u])&255];return r^-1};var fa=q5,$f={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Cm={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const z5=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var W5=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const s in t)z5(t,s)&&(r[s]=t[s])}}return r},H5=r=>{let e=0;for(let s=0,a=r.length;s<a;s++)e+=r[s].length;const t=new Uint8Array(e);for(let s=0,a=0,o=r.length;s<o;s++){let u=r[s];t.set(u,a),a+=u.length}return t},Pm={assign:W5,flattenChunks:H5};let Lm=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Lm=!1}const Ou=new Uint8Array(256);for(let r=0;r<256;r++)Ou[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Ou[254]=Ou[254]=1;var V5=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,s,a,o,u=r.length,d=0;for(a=0;a<u;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,a=0;o<d;a++)t=r.charCodeAt(a),(t&64512)===55296&&a+1<u&&(s=r.charCodeAt(a+1),(s&64512)===56320&&(t=65536+(t-55296<<10)+(s-56320),a++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const G5=(r,e)=>{if(e<65534&&r.subarray&&Lm)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let s=0;s<e;s++)t+=String.fromCharCode(r[s]);return t};var K5=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let s,a;const o=new Array(t*2);for(a=0,s=0;s<t;){let u=r[s++];if(u<128){o[a++]=u;continue}let d=Ou[u];if(d>4){o[a++]=65533,s+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&s<t;)u=u<<6|r[s++]&63,d--;if(d>1){o[a++]=65533;continue}u<65536?o[a++]=u:(u-=65536,o[a++]=55296|u>>10&1023,o[a++]=56320|u&1023)}return G5(o,a)},J5=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Ou[r[t]]>e?t:e},qf={string2buf:V5,buf2string:K5,utf8border:J5};function Y5(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var X5=Y5;const Nd=16209,Q5=16191;var Z5=function(e,t){let s,a,o,u,d,h,g,v,_,N,y,k,A,C,L,R,E,T,te,B,H,Y,J,he;const U=e.state;s=e.next_in,J=e.input,a=s+(e.avail_in-5),o=e.next_out,he=e.output,u=o-(t-e.avail_out),d=o+(e.avail_out-257),h=U.dmax,g=U.wsize,v=U.whave,_=U.wnext,N=U.window,y=U.hold,k=U.bits,A=U.lencode,C=U.distcode,L=(1<<U.lenbits)-1,R=(1<<U.distbits)-1;e:do{k<15&&(y+=J[s++]<<k,k+=8,y+=J[s++]<<k,k+=8),E=A[y&L];t:for(;;){if(T=E>>>24,y>>>=T,k-=T,T=E>>>16&255,T===0)he[o++]=E&65535;else if(T&16){te=E&65535,T&=15,T&&(k<T&&(y+=J[s++]<<k,k+=8),te+=y&(1<<T)-1,y>>>=T,k-=T),k<15&&(y+=J[s++]<<k,k+=8,y+=J[s++]<<k,k+=8),E=C[y&R];r:for(;;){if(T=E>>>24,y>>>=T,k-=T,T=E>>>16&255,T&16){if(B=E&65535,T&=15,k<T&&(y+=J[s++]<<k,k+=8,k<T&&(y+=J[s++]<<k,k+=8)),B+=y&(1<<T)-1,B>h){e.msg="invalid distance too far back",U.mode=Nd;break e}if(y>>>=T,k-=T,T=o-u,B>T){if(T=B-T,T>v&&U.sane){e.msg="invalid distance too far back",U.mode=Nd;break e}if(H=0,Y=N,_===0){if(H+=g-T,T<te){te-=T;do he[o++]=N[H++];while(--T);H=o-B,Y=he}}else if(_<T){if(H+=g+_-T,T-=_,T<te){te-=T;do he[o++]=N[H++];while(--T);if(H=0,_<te){T=_,te-=T;do he[o++]=N[H++];while(--T);H=o-B,Y=he}}}else if(H+=_-T,T<te){te-=T;do he[o++]=N[H++];while(--T);H=o-B,Y=he}for(;te>2;)he[o++]=Y[H++],he[o++]=Y[H++],he[o++]=Y[H++],te-=3;te&&(he[o++]=Y[H++],te>1&&(he[o++]=Y[H++]))}else{H=o-B;do he[o++]=he[H++],he[o++]=he[H++],he[o++]=he[H++],te-=3;while(te>2);te&&(he[o++]=he[H++],te>1&&(he[o++]=he[H++]))}}else if((T&64)===0){E=C[(E&65535)+(y&(1<<T)-1)];continue r}else{e.msg="invalid distance code",U.mode=Nd;break e}break}}else if((T&64)===0){E=A[(E&65535)+(y&(1<<T)-1)];continue t}else if(T&32){U.mode=Q5;break e}else{e.msg="invalid literal/length code",U.mode=Nd;break e}break}}while(s<a&&o<d);te=k>>3,s-=te,k-=te<<3,y&=(1<<k)-1,e.next_in=s,e.next_out=o,e.avail_in=s<a?5+(a-s):5-(s-a),e.avail_out=o<d?257+(d-o):257-(o-d),U.hold=y,U.bits=k};const Nc=15,G0=852,K0=592,J0=0,ef=1,Y0=2,ex=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tx=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),rx=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),nx=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),sx=(r,e,t,s,a,o,u,d)=>{const h=d.bits;let g=0,v=0,_=0,N=0,y=0,k=0,A=0,C=0,L=0,R=0,E,T,te,B,H,Y=null,J;const he=new Uint16Array(Nc+1),U=new Uint16Array(Nc+1);let q=null,D,G,ge;for(g=0;g<=Nc;g++)he[g]=0;for(v=0;v<s;v++)he[e[t+v]]++;for(y=h,N=Nc;N>=1&&he[N]===0;N--);if(y>N&&(y=N),N===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,d.bits=1,0;for(_=1;_<N&&he[_]===0;_++);for(y<_&&(y=_),C=1,g=1;g<=Nc;g++)if(C<<=1,C-=he[g],C<0)return-1;if(C>0&&(r===J0||N!==1))return-1;for(U[1]=0,g=1;g<Nc;g++)U[g+1]=U[g]+he[g];for(v=0;v<s;v++)e[t+v]!==0&&(u[U[e[t+v]]++]=v);if(r===J0?(Y=q=u,J=20):r===ef?(Y=ex,q=tx,J=257):(Y=rx,q=nx,J=0),R=0,v=0,g=_,H=o,k=y,A=0,te=-1,L=1<<y,B=L-1,r===ef&&L>G0||r===Y0&&L>K0)return 1;for(;;){D=g-A,u[v]+1<J?(G=0,ge=u[v]):u[v]>=J?(G=q[u[v]-J],ge=Y[u[v]-J]):(G=96,ge=0),E=1<<g-A,T=1<<k,_=T;do T-=E,a[H+(R>>A)+T]=D<<24|G<<16|ge|0;while(T!==0);for(E=1<<g-1;R&E;)E>>=1;if(E!==0?(R&=E-1,R+=E):R=0,v++,--he[g]===0){if(g===N)break;g=e[t+u[v]]}if(g>y&&(R&B)!==te){for(A===0&&(A=y),H+=_,k=g-A,C=1<<k;k+A<N&&(C-=he[k+A],!(C<=0));)k++,C<<=1;if(L+=1<<k,r===ef&&L>G0||r===Y0&&L>K0)return 1;te=R&B,a[te]=y<<24|k<<16|H-o|0}}return R!==0&&(a[H+R]=g-A<<24|64<<16|0),d.bits=y,0};var wu=sx;const ix=0,Tm=1,Om=2,{Z_FINISH:X0,Z_BLOCK:ax,Z_TREES:Sd,Z_OK:Ml,Z_STREAM_END:ox,Z_NEED_DICT:lx,Z_STREAM_ERROR:xi,Z_DATA_ERROR:Im,Z_MEM_ERROR:Rm,Z_BUF_ERROR:cx,Z_DEFLATED:Q0}=Cm,Kd=16180,Z0=16181,eg=16182,tg=16183,rg=16184,ng=16185,sg=16186,ig=16187,ag=16188,og=16189,$d=16190,Qa=16191,tf=16192,lg=16193,rf=16194,cg=16195,ug=16196,dg=16197,hg=16198,kd=16199,jd=16200,fg=16201,pg=16202,gg=16203,mg=16204,vg=16205,nf=16206,yg=16207,xg=16208,Rr=16209,Dm=16210,Fm=16211,ux=852,dx=592,hx=15,fx=hx,wg=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function px(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ul=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<Kd||e.mode>Fm?1:0},Bm=r=>{if(Ul(r))return xi;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Kd,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ux),e.distcode=e.distdyn=new Int32Array(dx),e.sane=1,e.back=-1,Ml},Mm=r=>{if(Ul(r))return xi;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Bm(r)},Um=(r,e)=>{let t;if(Ul(r))return xi;const s=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?xi:(s.window!==null&&s.wbits!==e&&(s.window=null),s.wrap=t,s.wbits=e,Mm(r))},$m=(r,e)=>{if(!r)return xi;const t=new px;r.state=t,t.strm=r,t.window=null,t.mode=Kd;const s=Um(r,e);return s!==Ml&&(r.state=null),s},gx=r=>$m(r,fx);let bg=!0,sf,af;const mx=r=>{if(bg){sf=new Int32Array(512),af=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(wu(Tm,r.lens,0,288,sf,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;wu(Om,r.lens,0,32,af,0,r.work,{bits:5}),bg=!1}r.lencode=sf,r.lenbits=9,r.distcode=af,r.distbits=5},qm=(r,e,t,s)=>{let a;const o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),s>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>s&&(a=s),o.window.set(e.subarray(t-s,t-s+a),o.wnext),s-=a,s?(o.window.set(e.subarray(t-s,t),0),o.wnext=s,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},vx=(r,e)=>{let t,s,a,o,u,d,h,g,v,_,N,y,k,A,C=0,L,R,E,T,te,B,H,Y;const J=new Uint8Array(4);let he,U;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ul(r)||!r.output||!r.input&&r.avail_in!==0)return xi;t=r.state,t.mode===Qa&&(t.mode=tf),u=r.next_out,a=r.output,h=r.avail_out,o=r.next_in,s=r.input,d=r.avail_in,g=t.hold,v=t.bits,_=d,N=h,Y=Ml;e:for(;;)switch(t.mode){case Kd:if(t.wrap===0){t.mode=tf;break}for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.wrap&2&&g===35615){t.wbits===0&&(t.wbits=15),t.check=0,J[0]=g&255,J[1]=g>>>8&255,t.check=fa(t.check,J,2,0),g=0,v=0,t.mode=Z0;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((g&255)<<8)+(g>>8))%31){r.msg="incorrect header check",t.mode=Rr;break}if((g&15)!==Q0){r.msg="unknown compression method",t.mode=Rr;break}if(g>>>=4,v-=4,H=(g&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){r.msg="invalid window size",t.mode=Rr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=g&512?og:Qa,g=0,v=0;break;case Z0:for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.flags=g,(t.flags&255)!==Q0){r.msg="unknown compression method",t.mode=Rr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Rr;break}t.head&&(t.head.text=g>>8&1),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,t.check=fa(t.check,J,2,0)),g=0,v=0,t.mode=eg;case eg:for(;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.head&&(t.head.time=g),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,J[2]=g>>>16&255,J[3]=g>>>24&255,t.check=fa(t.check,J,4,0)),g=0,v=0,t.mode=tg;case tg:for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.head&&(t.head.xflags=g&255,t.head.os=g>>8),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,t.check=fa(t.check,J,2,0)),g=0,v=0,t.mode=rg;case rg:if(t.flags&1024){for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.length=g,t.head&&(t.head.extra_len=g),t.flags&512&&t.wrap&4&&(J[0]=g&255,J[1]=g>>>8&255,t.check=fa(t.check,J,2,0)),g=0,v=0}else t.head&&(t.head.extra=null);t.mode=ng;case ng:if(t.flags&1024&&(y=t.length,y>d&&(y=d),y&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(s.subarray(o,o+y),H)),t.flags&512&&t.wrap&4&&(t.check=fa(t.check,s,y,o)),d-=y,o+=y,t.length-=y),t.length))break e;t.length=0,t.mode=sg;case sg:if(t.flags&2048){if(d===0)break e;y=0;do H=s[o+y++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=fa(t.check,s,y,o)),d-=y,o+=y,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=ig;case ig:if(t.flags&4096){if(d===0)break e;y=0;do H=s[o+y++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&y<d);if(t.flags&512&&t.wrap&4&&(t.check=fa(t.check,s,y,o)),d-=y,o+=y,H)break e}else t.head&&(t.head.comment=null);t.mode=ag;case ag:if(t.flags&512){for(;v<16;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.wrap&4&&g!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Rr;break}g=0,v=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=Qa;break;case og:for(;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}r.adler=t.check=wg(g),g=0,v=0,t.mode=$d;case $d:if(t.havedict===0)return r.next_out=u,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=g,t.bits=v,lx;r.adler=t.check=1,t.mode=Qa;case Qa:if(e===ax||e===Sd)break e;case tf:if(t.last){g>>>=v&7,v-=v&7,t.mode=nf;break}for(;v<3;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}switch(t.last=g&1,g>>>=1,v-=1,g&3){case 0:t.mode=lg;break;case 1:if(mx(t),t.mode=kd,e===Sd){g>>>=2,v-=2;break e}break;case 2:t.mode=ug;break;case 3:r.msg="invalid block type",t.mode=Rr}g>>>=2,v-=2;break;case lg:for(g>>>=v&7,v-=v&7;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if((g&65535)!==(g>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Rr;break}if(t.length=g&65535,g=0,v=0,t.mode=rf,e===Sd)break e;case rf:t.mode=cg;case cg:if(y=t.length,y){if(y>d&&(y=d),y>h&&(y=h),y===0)break e;a.set(s.subarray(o,o+y),u),d-=y,o+=y,h-=y,u+=y,t.length-=y;break}t.mode=Qa;break;case ug:for(;v<14;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.nlen=(g&31)+257,g>>>=5,v-=5,t.ndist=(g&31)+1,g>>>=5,v-=5,t.ncode=(g&15)+4,g>>>=4,v-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Rr;break}t.have=0,t.mode=dg;case dg:for(;t.have<t.ncode;){for(;v<3;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.lens[q[t.have++]]=g&7,g>>>=3,v-=3}for(;t.have<19;)t.lens[q[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,he={bits:t.lenbits},Y=wu(ix,t.lens,0,19,t.lencode,0,t.work,he),t.lenbits=he.bits,Y){r.msg="invalid code lengths set",t.mode=Rr;break}t.have=0,t.mode=hg;case hg:for(;t.have<t.nlen+t.ndist;){for(;C=t.lencode[g&(1<<t.lenbits)-1],L=C>>>24,R=C>>>16&255,E=C&65535,!(L<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(E<16)g>>>=L,v-=L,t.lens[t.have++]=E;else{if(E===16){for(U=L+2;v<U;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(g>>>=L,v-=L,t.have===0){r.msg="invalid bit length repeat",t.mode=Rr;break}H=t.lens[t.have-1],y=3+(g&3),g>>>=2,v-=2}else if(E===17){for(U=L+3;v<U;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=L,v-=L,H=0,y=3+(g&7),g>>>=3,v-=3}else{for(U=L+7;v<U;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=L,v-=L,H=0,y=11+(g&127),g>>>=7,v-=7}if(t.have+y>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Rr;break}for(;y--;)t.lens[t.have++]=H}}if(t.mode===Rr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Rr;break}if(t.lenbits=9,he={bits:t.lenbits},Y=wu(Tm,t.lens,0,t.nlen,t.lencode,0,t.work,he),t.lenbits=he.bits,Y){r.msg="invalid literal/lengths set",t.mode=Rr;break}if(t.distbits=6,t.distcode=t.distdyn,he={bits:t.distbits},Y=wu(Om,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,he),t.distbits=he.bits,Y){r.msg="invalid distances set",t.mode=Rr;break}if(t.mode=kd,e===Sd)break e;case kd:t.mode=jd;case jd:if(d>=6&&h>=258){r.next_out=u,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=g,t.bits=v,Z5(r,N),u=r.next_out,a=r.output,h=r.avail_out,o=r.next_in,s=r.input,d=r.avail_in,g=t.hold,v=t.bits,t.mode===Qa&&(t.back=-1);break}for(t.back=0;C=t.lencode[g&(1<<t.lenbits)-1],L=C>>>24,R=C>>>16&255,E=C&65535,!(L<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(R&&(R&240)===0){for(T=L,te=R,B=E;C=t.lencode[B+((g&(1<<T+te)-1)>>T)],L=C>>>24,R=C>>>16&255,E=C&65535,!(T+L<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=T,v-=T,t.back+=T}if(g>>>=L,v-=L,t.back+=L,t.length=E,R===0){t.mode=vg;break}if(R&32){t.back=-1,t.mode=Qa;break}if(R&64){r.msg="invalid literal/length code",t.mode=Rr;break}t.extra=R&15,t.mode=fg;case fg:if(t.extra){for(U=t.extra;v<U;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.length+=g&(1<<t.extra)-1,g>>>=t.extra,v-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=pg;case pg:for(;C=t.distcode[g&(1<<t.distbits)-1],L=C>>>24,R=C>>>16&255,E=C&65535,!(L<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if((R&240)===0){for(T=L,te=R,B=E;C=t.distcode[B+((g&(1<<T+te)-1)>>T)],L=C>>>24,R=C>>>16&255,E=C&65535,!(T+L<=v);){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}g>>>=T,v-=T,t.back+=T}if(g>>>=L,v-=L,t.back+=L,R&64){r.msg="invalid distance code",t.mode=Rr;break}t.offset=E,t.extra=R&15,t.mode=gg;case gg:if(t.extra){for(U=t.extra;v<U;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}t.offset+=g&(1<<t.extra)-1,g>>>=t.extra,v-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Rr;break}t.mode=mg;case mg:if(h===0)break e;if(y=N-h,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Rr;break}y>t.wnext?(y-=t.wnext,k=t.wsize-y):k=t.wnext-y,y>t.length&&(y=t.length),A=t.window}else A=a,k=u-t.offset,y=t.length;y>h&&(y=h),h-=y,t.length-=y;do a[u++]=A[k++];while(--y);t.length===0&&(t.mode=jd);break;case vg:if(h===0)break e;a[u++]=t.length,h--,t.mode=jd;break;case nf:if(t.wrap){for(;v<32;){if(d===0)break e;d--,g|=s[o++]<<v,v+=8}if(N-=h,r.total_out+=N,t.total+=N,t.wrap&4&&N&&(r.adler=t.check=t.flags?fa(t.check,a,N,u-N):Uf(t.check,a,N,u-N)),N=h,t.wrap&4&&(t.flags?g:wg(g))!==t.check){r.msg="incorrect data check",t.mode=Rr;break}g=0,v=0}t.mode=yg;case yg:if(t.wrap&&t.flags){for(;v<32;){if(d===0)break e;d--,g+=s[o++]<<v,v+=8}if(t.wrap&4&&g!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Rr;break}g=0,v=0}t.mode=xg;case xg:Y=ox;break e;case Rr:Y=Im;break e;case Dm:return Rm;case Fm:default:return xi}return r.next_out=u,r.avail_out=h,r.next_in=o,r.avail_in=d,t.hold=g,t.bits=v,(t.wsize||N!==r.avail_out&&t.mode<Rr&&(t.mode<nf||e!==X0))&&qm(r,r.output,r.next_out,N-r.avail_out),_-=r.avail_in,N-=r.avail_out,r.total_in+=_,r.total_out+=N,t.total+=N,t.wrap&4&&N&&(r.adler=t.check=t.flags?fa(t.check,a,N,r.next_out-N):Uf(t.check,a,N,r.next_out-N)),r.data_type=t.bits+(t.last?64:0)+(t.mode===Qa?128:0)+(t.mode===kd||t.mode===rf?256:0),(_===0&&N===0||e===X0)&&Y===Ml&&(Y=cx),Y},yx=r=>{if(Ul(r))return xi;let e=r.state;return e.window&&(e.window=null),r.state=null,Ml},xx=(r,e)=>{if(Ul(r))return xi;const t=r.state;return(t.wrap&2)===0?xi:(t.head=e,e.done=!1,Ml)},wx=(r,e)=>{const t=e.length;let s,a,o;return Ul(r)||(s=r.state,s.wrap!==0&&s.mode!==$d)?xi:s.mode===$d&&(a=1,a=Uf(a,e,t,0),a!==s.check)?Im:(o=qm(r,e,t,t),o?(s.mode=Dm,Rm):(s.havedict=1,Ml))};var bx=Mm,_x=Um,Nx=Bm,Sx=gx,kx=$m,jx=vx,Ax=yx,Ex=xx,Cx=wx,Px="pako inflate (from Nodeca project)",eo={inflateReset:bx,inflateReset2:_x,inflateResetKeep:Nx,inflateInit:Sx,inflateInit2:kx,inflate:jx,inflateEnd:Ax,inflateGetHeader:Ex,inflateSetDictionary:Cx,inflateInfo:Px};function Lx(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Tx=Lx;const zm=Object.prototype.toString,{Z_NO_FLUSH:Ox,Z_FINISH:Ix,Z_OK:Iu,Z_STREAM_END:of,Z_NEED_DICT:lf,Z_STREAM_ERROR:Rx,Z_DATA_ERROR:_g,Z_MEM_ERROR:Dx}=Cm;function Fu(r){this.options=Pm.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new X5,this.strm.avail_out=0;let t=eo.inflateInit2(this.strm,e.windowBits);if(t!==Iu)throw new Error($f[t]);if(this.header=new Tx,eo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=qf.string2buf(e.dictionary):zm.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=eo.inflateSetDictionary(this.strm,e.dictionary),t!==Iu)))throw new Error($f[t])}Fu.prototype.push=function(r,e){const t=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let o,u,d;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?Ix:Ox,zm.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(s),t.next_out=0,t.avail_out=s),o=eo.inflate(t,u),o===lf&&a&&(o=eo.inflateSetDictionary(t,a),o===Iu?o=eo.inflate(t,u):o===_g&&(o=lf));t.avail_in>0&&o===of&&t.state.wrap>0&&r[t.next_in]!==0;)eo.inflateReset(t),o=eo.inflate(t,u);switch(o){case Rx:case _g:case lf:case Dx:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===of))if(this.options.to==="string"){let h=qf.utf8border(t.output,t.next_out),g=t.next_out-h,v=qf.buf2string(t.output,h);t.next_out=g,t.avail_out=s-g,g&&t.output.set(t.output.subarray(h,h+g),0),this.onData(v)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Iu&&d===0)){if(o===of)return o=eo.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Fu.prototype.onData=function(r){this.chunks.push(r)};Fu.prototype.onEnd=function(r){r===Iu&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pm.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function Fx(r,e){const t=new Fu(e);if(t.push(r),t.err)throw t.msg||$f[t.err];return t.result}var Bx=Fu,Mx=Fx,Ux={Inflate:Bx,inflate:Mx};const{Inflate:$x,inflate:qx}=Ux;var Ng=$x,zx=qx;const Wm=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;Wm[r]=e}const Sg=4294967295;function Wx(r,e,t){let s=r;for(let a=0;a<t;a++)s=Wm[(s^e[a])&255]^s>>>8;return s}function Hx(r,e){return(Wx(Sg,r,e)^Sg)>>>0}function kg(r,e,t){const s=r.readUint32(),a=Hx(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(a!==s)throw new Error(`CRC mismatch for chunk ${t}. Expected ${s}, found ${a}`)}function Hm(r,e,t){for(let s=0;s<t;s++)e[s]=r[s]}function Vm(r,e,t,s){let a=0;for(;a<s;a++)e[a]=r[a];for(;a<t;a++)e[a]=r[a]+e[a-s]&255}function Gm(r,e,t,s){let a=0;if(t.length===0)for(;a<s;a++)e[a]=r[a];else for(;a<s;a++)e[a]=r[a]+t[a]&255}function Km(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=r[o]+(t[o]>>1)&255;for(;o<s;o++)e[o]=r[o]+(e[o-a]+t[o]>>1)&255}}function Jm(r,e,t,s,a){let o=0;if(t.length===0){for(;o<a;o++)e[o]=r[o];for(;o<s;o++)e[o]=r[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=r[o]+t[o]&255;for(;o<s;o++)e[o]=r[o]+Vx(e[o-a],t[o],t[o-a])&255}}function Vx(r,e,t){const s=r+e-t,a=Math.abs(s-r),o=Math.abs(s-e),u=Math.abs(s-t);return a<=o&&a<=u?r:o<=u?e:t}function Gx(r,e,t,s,a,o){switch(r){case 0:Hm(e,t,a);break;case 1:Vm(e,t,a,o);break;case 2:Gm(e,t,s,a);break;case 3:Km(e,t,s,a,o);break;case 4:Jm(e,t,s,a,o);break;default:throw new Error(`Unsupported filter: ${r}`)}}const Kx=new Uint16Array([255]),Jx=new Uint8Array(Kx.buffer),Yx=Jx[0]===255;function Xx(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*a,h=new Uint8Array(s*t*d);let g=0;for(let v=0;v<7;v++){const _=u[v],N=Math.ceil((t-_.x)/_.xStep),y=Math.ceil((s-_.y)/_.yStep);if(N<=0||y<=0)continue;const k=N*d,A=new Uint8Array(k);for(let C=0;C<y;C++){const L=e[g++],R=e.subarray(g,g+k);g+=k;const E=new Uint8Array(k);Gx(L,R,E,A,k,d),A.set(E);for(let T=0;T<N;T++){const te=_.x+T*_.xStep,B=_.y+C*_.yStep;if(!(te>=t||B>=s))for(let H=0;H<d;H++)h[(B*t+te)*d+H]=E[T*d+H]}}}if(o===16){const v=new Uint16Array(h.buffer);if(Yx)for(let _=0;_<v.length;_++)v[_]=Qx(v[_]);return v}else return h}function Qx(r){return(r&255)<<8|r>>8&255}const Zx=new Uint16Array([255]),ew=new Uint8Array(Zx.buffer),tw=ew[0]===255,rw=new Uint8Array(0);function jg(r){const{data:e,width:t,height:s,channels:a,depth:o}=r,u=Math.ceil(o/8)*a,d=Math.ceil(o/8*a*t),h=new Uint8Array(s*d);let g=rw,v=0,_,N;for(let y=0;y<s;y++){switch(_=e.subarray(v+1,v+1+d),N=h.subarray(y*d,(y+1)*d),e[v]){case 0:Hm(_,N,d);break;case 1:Vm(_,N,d,u);break;case 2:Gm(_,N,g,d);break;case 3:Km(_,N,g,d,u);break;case 4:Jm(_,N,g,d,u);break;default:throw new Error(`Unsupported filter: ${e[v]}`)}g=N,v+=d+1}if(o===16){const y=new Uint16Array(h.buffer);if(tw)for(let k=0;k<y.length;k++)y[k]=nw(y[k]);return y}else return h}function nw(r){return(r&255)<<8|r>>8&255}const Id=Uint8Array.of(137,80,78,71,13,10,26,10);function Ag(r){if(!sw(r.readBytes(Id.length)))throw new Error("wrong PNG signature")}function sw(r){if(r.length<Id.length)return!1;for(let e=0;e<Id.length;e++)if(r[e]!==Id[e])return!1;return!0}const iw="tEXt",aw=0,Ym=new TextDecoder("latin1");function ow(r){if(cw(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const lw=/^[\u0000-\u00FF]*$/;function cw(r){if(!lw.test(r))throw new Error("invalid latin1 text")}function uw(r,e,t){const s=Xm(e);r[s]=dw(e,t-s.length-1)}function Xm(r){for(r.mark();r.readByte()!==aw;);const e=r.offset;r.reset();const t=Ym.decode(r.readBytes(e-r.offset-1));return r.skip(1),ow(t),t}function dw(r,e){return Ym.decode(r.readBytes(e))}const Gs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},cf={UNKNOWN:-1,DEFLATE:0},Eg={UNKNOWN:-1,ADAPTIVE:0},uf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ad={NONE:0,BACKGROUND:1,PREVIOUS:2},df={SOURCE:0,OVER:1};class hw extends rp{constructor(t,s={}){super(t);pr(this,"_checkCrc");pr(this,"_inflator");pr(this,"_png");pr(this,"_apng");pr(this,"_end");pr(this,"_hasPalette");pr(this,"_palette");pr(this,"_hasTransparency");pr(this,"_transparency");pr(this,"_compressionMethod");pr(this,"_filterMethod");pr(this,"_interlaceMethod");pr(this,"_colorType");pr(this,"_isAnimated");pr(this,"_numberOfFrames");pr(this,"_numberOfPlays");pr(this,"_frames");pr(this,"_writingDataChunks");const{checkCrc:a=!1}=s;this._checkCrc=a,this._inflator=new Ng,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=cf.UNKNOWN,this._filterMethod=Eg.UNKNOWN,this._interlaceMethod=uf.UNKNOWN,this._colorType=Gs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Ag(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeChunk(t,s)}return this.decodeImage(),this._png}decodeApng(){for(Ag(this);!this._end;){const t=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(t,s)}return this.decodeApngImage(),this._apng}decodeChunk(t,s){const a=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case iw:uw(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?kg(this,t+4,s):this.skip(4)}decodeApngChunk(t,s){const a=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,s),this.offset=a+t;break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?kg(this,t+4,s):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=fw(this.readUint8());const s=this.readUint8();this._colorType=s;let a;switch(s){case Gs.GREYSCALE:a=1;break;case Gs.TRUECOLOUR:a=3;break;case Gs.INDEXED_COLOUR:a=1;break;case Gs.GREYSCALE_ALPHA:a=2;break;case Gs.TRUECOLOUR_ALPHA:a=4;break;case Gs.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==cf.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const s=t/3;this._hasPalette=!0;const a=[];this._palette=a;for(let o=0;o<s;o++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const s=t,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let s=t,a=this.offset+this.byteOffset;if(a+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,a,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Gs.GREYSCALE:case Gs.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let s=0;s<t/2;s++)this._transparency[s]=this.readUint16();break}case Gs.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let s=0;for(;s<t;s++){const a=this.readByte();this._palette[s].push(a)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case Gs.UNKNOWN:case Gs.GREYSCALE_ALPHA:case Gs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const s=Xm(this),a=this.readUint8();if(a!==cf.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const o=this.readBytes(t-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:zx(o)}}decodepHYs(){const t=this.readUint32(),s=this.readUint32(),a=this.readByte();this._png.resolution={x:t,y:s,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const s={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(t);if(a){if(a.data=jg({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)s.data=a.data;else{const o=this._apng.frames.at(t-1);this.disposeFrame(a,o,s),this.addFrameDataToCanvas(s,a)}this._apng.frames.push(s)}}return this._apng}disposeFrame(t,s,a){switch(t.disposeOp){case Ad.NONE:break;case Ad.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let u=0;u<this._png.width;u++){const d=(o*t.width+u)*this._png.channels;for(let h=0;h<this._png.channels;h++)a.data[d+h]=0}break;case Ad.PREVIOUS:a.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,s){const a=1<<this._png.depth,o=(u,d)=>{const h=((u+s.yOffset)*this._png.width+s.xOffset+d)*this._png.channels,g=(u*s.width+d)*this._png.channels;return{index:h,frameIndex:g}};switch(s.blendOp){case df.SOURCE:for(let u=0;u<s.height;u++)for(let d=0;d<s.width;d++){const{index:h,frameIndex:g}=o(u,d);for(let v=0;v<this._png.channels;v++)t.data[h+v]=s.data[g+v]}break;case df.OVER:for(let u=0;u<s.height;u++)for(let d=0;d<s.width;d++){const{index:h,frameIndex:g}=o(u,d);for(let v=0;v<this._png.channels;v++){const _=s.data[g+this._png.channels-1]/a,N=v%(this._png.channels-1)===0?1:s.data[g+v],y=Math.floor(_*N+(1-_)*t.data[h+v]);t.data[h+v]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var s;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?((s=this._frames)==null?void 0:s.at(0)).data:this._inflator.result;if(this._filterMethod!==Eg.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===uf.NO_INTERLACE)this._png.data=jg({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===uf.ADAM7)this._png.data=Xx({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,s=this._frames.at(-1);s?s.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ad.NONE,blendOp:df.SOURCE,data:t}),this._inflator=new Ng,this._writingDataChunks=!1}}function fw(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var Cg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(Cg||(Cg={}));function pw(r,e){return new hw(r,e).decode()}var Dt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function hf(){Dt.console&&typeof Dt.console.log=="function"&&Dt.console.log.apply(Dt.console,arguments)}var _r={log:hf,warn:function(r){Dt.console&&(typeof Dt.console.warn=="function"?Dt.console.warn.apply(Dt.console,arguments):hf.call(null,arguments))},error:function(r){Dt.console&&(typeof Dt.console.error=="function"?Dt.console.error.apply(Dt.console,arguments):hf(r))}};function ff(r,e,t){var s=new XMLHttpRequest;s.open("GET",r),s.responseType="blob",s.onload=function(){jl(s.response,e,t)},s.onerror=function(){_r.error("could not download file")},s.send()}function Pg(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ed(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var jl=Dt.saveAs||((typeof window>"u"?"undefined":gr(window))!=="object"||window!==Dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var s=Dt.URL||Dt.webkitURL,a=document.createElement("a");e=e||r.name||"download",a.download=e,a.rel="noopener",typeof r=="string"?(a.href=r,a.origin!==location.origin?Pg(a.href)?ff(r,e,t):Ed(a,a.target="_blank"):Ed(a)):(a.href=s.createObjectURL(r),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){Ed(a)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(Pg(r))ff(r,e,t);else{var s=document.createElement("a");s.href=r,s.target="_blank",setTimeout(function(){Ed(s)})}else navigator.msSaveOrOpenBlob((function(a,o){return o===void 0?o={autoBom:!1}:gr(o)!=="object"&&(_r.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(r,t),e)}:function(r,e,t,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof r=="string")return ff(r,e,t);var a=r.type==="application/octet-stream",o=/constructor/i.test(Dt.HTMLElement)||Dt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&o)&&(typeof FileReader>"u"?"undefined":gr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var v=d.result;v=u?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=v:location=v,s=null},d.readAsDataURL(r)}else{var h=Dt.URL||Dt.webkitURL,g=h.createObjectURL(r);s?s.location=g:location.href=g,s=null,setTimeout(function(){h.revokeObjectURL(g)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Qm(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],s=0;s<t.length;s++){var a=t[s].re,o=t[s].process,u=a.exec(r);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),g=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),g.length==1&&(g="0"+g),"#"+d+h+g}}var Rd=Dt.atob.bind(Dt),Lg=Dt.btoa.bind(Dt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function pf(r,e){var t=r[0],s=r[1],a=r[2],o=r[3];t=Xn(t,s,a,o,e[0],7,-680876936),o=Xn(o,t,s,a,e[1],12,-389564586),a=Xn(a,o,t,s,e[2],17,606105819),s=Xn(s,a,o,t,e[3],22,-1044525330),t=Xn(t,s,a,o,e[4],7,-176418897),o=Xn(o,t,s,a,e[5],12,1200080426),a=Xn(a,o,t,s,e[6],17,-1473231341),s=Xn(s,a,o,t,e[7],22,-45705983),t=Xn(t,s,a,o,e[8],7,1770035416),o=Xn(o,t,s,a,e[9],12,-1958414417),a=Xn(a,o,t,s,e[10],17,-42063),s=Xn(s,a,o,t,e[11],22,-1990404162),t=Xn(t,s,a,o,e[12],7,1804603682),o=Xn(o,t,s,a,e[13],12,-40341101),a=Xn(a,o,t,s,e[14],17,-1502002290),t=Qn(t,s=Xn(s,a,o,t,e[15],22,1236535329),a,o,e[1],5,-165796510),o=Qn(o,t,s,a,e[6],9,-1069501632),a=Qn(a,o,t,s,e[11],14,643717713),s=Qn(s,a,o,t,e[0],20,-373897302),t=Qn(t,s,a,o,e[5],5,-701558691),o=Qn(o,t,s,a,e[10],9,38016083),a=Qn(a,o,t,s,e[15],14,-660478335),s=Qn(s,a,o,t,e[4],20,-405537848),t=Qn(t,s,a,o,e[9],5,568446438),o=Qn(o,t,s,a,e[14],9,-1019803690),a=Qn(a,o,t,s,e[3],14,-187363961),s=Qn(s,a,o,t,e[8],20,1163531501),t=Qn(t,s,a,o,e[13],5,-1444681467),o=Qn(o,t,s,a,e[2],9,-51403784),a=Qn(a,o,t,s,e[7],14,1735328473),t=Zn(t,s=Qn(s,a,o,t,e[12],20,-1926607734),a,o,e[5],4,-378558),o=Zn(o,t,s,a,e[8],11,-2022574463),a=Zn(a,o,t,s,e[11],16,1839030562),s=Zn(s,a,o,t,e[14],23,-35309556),t=Zn(t,s,a,o,e[1],4,-1530992060),o=Zn(o,t,s,a,e[4],11,1272893353),a=Zn(a,o,t,s,e[7],16,-155497632),s=Zn(s,a,o,t,e[10],23,-1094730640),t=Zn(t,s,a,o,e[13],4,681279174),o=Zn(o,t,s,a,e[0],11,-358537222),a=Zn(a,o,t,s,e[3],16,-722521979),s=Zn(s,a,o,t,e[6],23,76029189),t=Zn(t,s,a,o,e[9],4,-640364487),o=Zn(o,t,s,a,e[12],11,-421815835),a=Zn(a,o,t,s,e[15],16,530742520),t=es(t,s=Zn(s,a,o,t,e[2],23,-995338651),a,o,e[0],6,-198630844),o=es(o,t,s,a,e[7],10,1126891415),a=es(a,o,t,s,e[14],15,-1416354905),s=es(s,a,o,t,e[5],21,-57434055),t=es(t,s,a,o,e[12],6,1700485571),o=es(o,t,s,a,e[3],10,-1894986606),a=es(a,o,t,s,e[10],15,-1051523),s=es(s,a,o,t,e[1],21,-2054922799),t=es(t,s,a,o,e[8],6,1873313359),o=es(o,t,s,a,e[15],10,-30611744),a=es(a,o,t,s,e[6],15,-1560198380),s=es(s,a,o,t,e[13],21,1309151649),t=es(t,s,a,o,e[4],6,-145523070),o=es(o,t,s,a,e[11],10,-1120210379),a=es(a,o,t,s,e[2],15,718787259),s=es(s,a,o,t,e[9],21,-343485551),r[0]=Ho(t,r[0]),r[1]=Ho(s,r[1]),r[2]=Ho(a,r[2]),r[3]=Ho(o,r[3])}function Jd(r,e,t,s,a,o){return e=Ho(Ho(e,r),Ho(s,o)),Ho(e<<a|e>>>32-a,t)}function Xn(r,e,t,s,a,o,u){return Jd(e&t|~e&s,r,e,a,o,u)}function Qn(r,e,t,s,a,o,u){return Jd(e&s|t&~s,r,e,a,o,u)}function Zn(r,e,t,s,a,o,u){return Jd(e^t^s,r,e,a,o,u)}function es(r,e,t,s,a,o,u){return Jd(t^(e|~s),r,e,a,o,u)}function Zm(r){var e,t=r.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)pf(s,gw(r.substring(e-64,e)));r=r.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)a[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(pf(s,a),e=0;e<16;e++)a[e]=0;return a[14]=8*t,pf(s,a),s}function gw(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var Tg="0123456789abcdef".split("");function mw(r){for(var e="",t=0;t<4;t++)e+=Tg[r>>8*t+4&15]+Tg[r>>8*t&15];return e}function vw(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function zf(r){return Zm(r).map(vw).join("")}var yw=(function(r){for(var e=0;e<r.length;e++)r[e]=mw(r[e]);return r.join("")})(Zm("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ho(r,e){if(yw){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Wf(r,e){var t,s,a,o;if(r!==t){for(var u=(a=r,o=1+(256/r.length|0),new Array(o+1).join(a)),d=[],h=0;h<256;h++)d[h]=h;var g=0;for(h=0;h<256;h++){var v=d[h];g=(g+v+u.charCodeAt(h))%256,d[h]=d[g],d[g]=v}t=r,s=d}else d=s;var _=e.length,N=0,y=0,k="";for(h=0;h<_;h++)y=(y+(v=d[N=(N+1)%256]))%256,d[N]=d[y],d[y]=v,u=d[(d[N]+d[y])%256],k+=String.fromCharCode(e.charCodeAt(h)^u);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Og={print:4,modify:8,copy:16,"annot-forms":32};function Pc(r,e,t,s){this.v=1,this.r=2;var a=192;r.forEach(function(d){if(Og.perm!==void 0)throw new Error("Invalid permission: "+d);a+=Og[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^a)),this.encryptionKey=zf(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Wf(this.encryptionKey,this.padding)}function Lc(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,s=0;s<t;s++){var a=r.charCodeAt(s);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):r[s]}return e}function Ig(r){if(gr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,s,a){if(a=a||!1,typeof t!="string"||typeof s!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[s,!!a],o},this.unsubscribe=function(t){for(var s in e)if(e[s][t])return delete e[s][t],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var s=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(r,s)}catch(d){Dt.console&&_r.error("jsPDF PubSub Error",d.message,d)}u[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ru(r){if(!(this instanceof Ru))return new Ru(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function e1(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Wo(r,e,t,s,a){if(!(this instanceof Wo))return new Wo(r,e,t,s,a);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,e1.call(this,s,a)}function Tl(r,e,t,s,a){if(!(this instanceof Tl))return new Tl(r,e,t,s,a);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,e1.call(this,s,a)}function ct(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],a=arguments[2],o=arguments[3],u=[],d=1,h=16,g="S",v=null;gr(r=r||{})==="object"&&(t=r.orientation,s=r.unit||s,a=r.format||a,o=r.compress||r.compressPdf||o,(v=r.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),d=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(h=r.floatPrecision),g=r.defaultPathOperation||"S"),u=r.filters||(o===!0?["FlateEncode"]:u),s=s||"mm",t=(""+(t||"P")).toLowerCase();var _=r.putOnlyUsedFonts||!1,N={},y={internal:{},__private__:{}};y.__private__.PubSub=Ig;var k="1.3",A=y.__private__.getPdfVersion=function(){return k};y.__private__.setPdfVersion=function(x){k=x};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return C};var L=y.__private__.getPageFormat=function(x){return C[x]};a=a||"a4";var R="compat",E="advanced",T=R;function te(){this.saveGraphicsState(),X(new St(Ue,0,0,-Ue,0,_s()*Ue).toString()+" cm"),this.setFontSize(this.getFontSize()/Ue),g="n",T=E}function B(){this.restoreGraphicsState(),g="S",T=R}var H=y.__private__.combineFontStyleAndFontWeight=function(x,I){if(x=="bold"&&I=="normal"||x=="bold"&&I==400||x=="normal"&&I=="italic"||x=="bold"&&I=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return I&&(x=I==400||I==="normal"?x==="italic"?"italic":"normal":I!=700&&I!=="bold"||x!=="normal"?(I==700?"bold":I)+""+x:"bold"),x};y.advancedAPI=function(x){var I=T===R;return I&&te.call(this),typeof x!="function"||(x(this),I&&B.call(this)),this},y.compatAPI=function(x){var I=T===E;return I&&B.call(this),typeof x!="function"||(x(this),I&&te.call(this)),this},y.isAdvancedAPI=function(){return T===E};var Y,J=function(x){if(T!==E)throw new Error(x+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},he=y.roundToPrecision=y.__private__.roundToPrecision=function(x,I){var re=e||I;if(isNaN(x)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return x.toFixed(re).replace(/0+$/,"")};Y=y.hpf=y.__private__.hpf=typeof h=="number"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return he(x,h)}:h==="smart"?function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return he(x,x>-1&&x<1?16:5)}:function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.hpf");return he(x,16)};var U=y.f2=y.__private__.f2=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f2");return he(x,2)},q=y.__private__.f3=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.f3");return he(x,3)},D=y.scale=y.__private__.scale=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.scale");return T===R?x*Ue:T===E?x:void 0},G=function(x){return D((function(I){return T===R?_s()-I:T===E?I:void 0})(x))};y.__private__.setPrecision=y.setPrecision=function(x){typeof parseInt(x,10)=="number"&&(e=parseInt(x,10))};var ge,ae="00000000000000000000000000000000",we=y.__private__.getFileId=function(){return ae},ie=y.__private__.setFileId=function(x){return ae=x!==void 0&&/^[a-fA-F0-9]{32}$/.test(x)?x.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),v!==null&&(rn=new Pc(v.userPermissions,v.userPassword,v.ownerPassword,ae)),ae};y.setFileId=function(x){return ie(x),this},y.getFileId=function(){return we()};var ne=y.__private__.convertDateToPDFDate=function(x){var I=x.getTimezoneOffset(),re=I<0?"+":"-",de=Math.floor(Math.abs(I/60)),be=Math.abs(I%60),Re=[re,ee(de),"'",ee(be),"'"].join("");return["D:",x.getFullYear(),ee(x.getMonth()+1),ee(x.getDate()),ee(x.getHours()),ee(x.getMinutes()),ee(x.getSeconds()),Re].join("")},ve=y.__private__.convertPDFDateToDate=function(x){var I=parseInt(x.substr(2,4),10),re=parseInt(x.substr(6,2),10)-1,de=parseInt(x.substr(8,2),10),be=parseInt(x.substr(10,2),10),Re=parseInt(x.substr(12,2),10),$e=parseInt(x.substr(14,2),10);return new Date(I,re,de,be,Re,$e,0)},V=y.__private__.setCreationDate=function(x){var I;if(x===void 0&&(x=new Date),x instanceof Date)I=ne(x);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(x))throw new Error("Invalid argument passed to jsPDF.setCreationDate");I=x}return ge=I},P=y.__private__.getCreationDate=function(x){var I=ge;return x==="jsDate"&&(I=ve(ge)),I};y.setCreationDate=function(x){return V(x),this},y.getCreationDate=function(x){return P(x)};var K,ee=y.__private__.padd2=function(x){return("0"+parseInt(x)).slice(-2)},le=y.__private__.padd2Hex=function(x){return("00"+(x=x.toString())).substr(x.length)},ue=0,se=[],ce=[],me=0,Ne=[],Ie=[],He=!1,Me=ce;y.__private__.setCustomOutputDestination=function(x){He=!0,Me=x};var Xe=function(x){He||(Me=x)};y.__private__.resetCustomOutputDestination=function(){He=!1,Me=ce};var X=y.__private__.out=function(x){return x=x.toString(),me+=x.length+1,Me.push(x),Me},Ye=y.__private__.write=function(x){return X(arguments.length===1?x.toString():Array.prototype.join.call(arguments," "))},dt=y.__private__.getArrayBuffer=function(x){for(var I=x.length,re=new ArrayBuffer(I),de=new Uint8Array(re);I--;)de[I]=x.charCodeAt(I);return re},bt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return bt};var qe=r.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(x){return qe=T===E?x/Ue:x,this};var pt,Qe=y.__private__.getFontSize=y.getFontSize=function(){return T===R?qe:qe*Ue},vt=r.R2L||!1;y.__private__.setR2L=y.setR2L=function(x){return vt=x,this},y.__private__.getR2L=y.getR2L=function(){return vt};var gt,Jt=y.__private__.setZoomMode=function(x){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(x))pt=x;else if(isNaN(x)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(x)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+x+'" is not recognized.');pt=x}else pt=parseInt(x,10)};y.__private__.getZoomMode=function(){return pt};var zt,Lt=y.__private__.setPageMode=function(x){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(x)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+x+'" is not recognized.');gt=x};y.__private__.getPageMode=function(){return gt};var Wt=y.__private__.setLayoutMode=function(x){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(x)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+x+'" is not recognized.');zt=x};y.__private__.getLayoutMode=function(){return zt},y.__private__.setDisplayMode=y.setDisplayMode=function(x,I,re){return Jt(x),Wt(I),Lt(re),this};var Ae={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(x){if(Object.keys(Ae).indexOf(x)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ae[x]},y.__private__.getDocumentProperties=function(){return Ae},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(x){for(var I in Ae)Ae.hasOwnProperty(I)&&x[I]&&(Ae[I]=x[I]);return this},y.__private__.setDocumentProperty=function(x,I){if(Object.keys(Ae).indexOf(x)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ae[x]=I};var Be,Ue,Ge,Ze,At,yt={},qt={},mr=[],wt={},ar={},_t={},It={},sr=null,Bt=0,Nt=[],Qt=new Ig(y),Gi=r.hotfixes||[],mn={},ti={},ps=[],St=function x(I,re,de,be,Re,$e){if(!(this instanceof x))return new x(I,re,de,be,Re,$e);isNaN(I)&&(I=1),isNaN(re)&&(re=0),isNaN(de)&&(de=0),isNaN(be)&&(be=1),isNaN(Re)&&(Re=0),isNaN($e)&&($e=0),this._matrix=[I,re,de,be,Re,$e]};Object.defineProperty(St.prototype,"sx",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(St.prototype,"shy",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(St.prototype,"shx",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(St.prototype,"sy",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(St.prototype,"tx",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(St.prototype,"ty",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(St.prototype,"a",{get:function(){return this._matrix[0]},set:function(x){this._matrix[0]=x}}),Object.defineProperty(St.prototype,"b",{get:function(){return this._matrix[1]},set:function(x){this._matrix[1]=x}}),Object.defineProperty(St.prototype,"c",{get:function(){return this._matrix[2]},set:function(x){this._matrix[2]=x}}),Object.defineProperty(St.prototype,"d",{get:function(){return this._matrix[3]},set:function(x){this._matrix[3]=x}}),Object.defineProperty(St.prototype,"e",{get:function(){return this._matrix[4]},set:function(x){this._matrix[4]=x}}),Object.defineProperty(St.prototype,"f",{get:function(){return this._matrix[5]},set:function(x){this._matrix[5]=x}}),Object.defineProperty(St.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(St.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(St.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(St.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),St.prototype.join=function(x){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Y).join(x)},St.prototype.multiply=function(x){var I=x.sx*this.sx+x.shy*this.shx,re=x.sx*this.shy+x.shy*this.sy,de=x.shx*this.sx+x.sy*this.shx,be=x.shx*this.shy+x.sy*this.sy,Re=x.tx*this.sx+x.ty*this.shx+this.tx,$e=x.tx*this.shy+x.ty*this.sy+this.ty;return new St(I,re,de,be,Re,$e)},St.prototype.decompose=function(){var x=this.sx,I=this.shy,re=this.shx,de=this.sy,be=this.tx,Re=this.ty,$e=Math.sqrt(x*x+I*I),it=(x/=$e)*re+(I/=$e)*de;re-=x*it,de-=I*it;var ht=Math.sqrt(re*re+de*de);return it/=ht,x*(de/=ht)<I*(re/=ht)&&(x=-x,I=-I,it=-it,$e=-$e),{scale:new St($e,0,0,ht,0,0),translate:new St(1,0,0,1,be,Re),rotate:new St(x,I,-I,x,0,0),skew:new St(1,0,it,1,0,0)}},St.prototype.toString=function(x){return this.join(" ")},St.prototype.inversed=function(){var x=this.sx,I=this.shy,re=this.shx,de=this.sy,be=this.tx,Re=this.ty,$e=1/(x*de-I*re),it=de*$e,ht=-I*$e,Ot=-re*$e,Ft=x*$e;return new St(it,ht,Ot,Ft,-it*be-Ot*Re,-ht*be-Ft*Re)},St.prototype.applyToPoint=function(x){var I=x.x*this.sx+x.y*this.shx+this.tx,re=x.x*this.shy+x.y*this.sy+this.ty;return new xs(I,re)},St.prototype.applyToRectangle=function(x){var I=this.applyToPoint(x),re=this.applyToPoint(new xs(x.x+x.w,x.y+x.h));return new Ea(I.x,I.y,re.x-I.x,re.y-I.y)},St.prototype.clone=function(){var x=this.sx,I=this.shy,re=this.shx,de=this.sy,be=this.tx,Re=this.ty;return new St(x,I,re,de,be,Re)},y.Matrix=St;var ts=y.matrixMult=function(x,I){return I.multiply(x)},Ts=new St(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=Ts;var kn=function(x,I){if(!ar[x]){var re=(I instanceof Wo?"Sh":"P")+(Object.keys(wt).length+1).toString(10);I.id=re,ar[x]=re,wt[re]=I,Qt.publish("addPattern",I)}};y.ShadingPattern=Wo,y.TilingPattern=Tl,y.addShadingPattern=function(x,I){return J("addShadingPattern()"),kn(x,I),this},y.beginTilingPattern=function(x){J("beginTilingPattern()"),ws(x.boundingBox[0],x.boundingBox[1],x.boundingBox[2]-x.boundingBox[0],x.boundingBox[3]-x.boundingBox[1],x.matrix)},y.endTilingPattern=function(x,I){J("endTilingPattern()"),I.stream=Ie[K].join(`
`),kn(x,I),Qt.publish("endTilingPattern",I),ps.pop().restore()};var gs,vr=y.__private__.newObject=function(){var x=Dr();return Hr(x,!0),x},Dr=y.__private__.newObjectDeferred=function(){return ue++,se[ue]=function(){return me},ue},Hr=function(x,I){return I=typeof I=="boolean"&&I,se[x]=me,I&&X(x+" 0 obj"),x},wi=y.__private__.newAdditionalObject=function(){var x={objId:Dr(),content:""};return Ne.push(x),x},Ki=Dr(),Os=Dr(),ri=y.__private__.decodeColorString=function(x){var I=x.split(" ");if(I.length!==2||I[1]!=="g"&&I[1]!=="G")I.length!==5||I[4]!=="k"&&I[4]!=="K"||(I=[(1-I[0])*(1-I[3]),(1-I[1])*(1-I[3]),(1-I[2])*(1-I[3]),"r"]);else{var re=parseFloat(I[0]);I=[re,re,re,"r"]}for(var de="#",be=0;be<3;be++)de+=("0"+Math.floor(255*parseFloat(I[be])).toString(16)).slice(-2);return de},vn=y.__private__.encodeColorString=function(x){var I;typeof x=="string"&&(x={ch1:x});var re=x.ch1,de=x.ch2,be=x.ch3,Re=x.ch4,$e=x.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var it=new Qm(re);if(it.ok)re=it.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var ht=parseInt(re.substr(1),16);re=ht>>16&255,de=ht>>8&255,be=255&ht}if(de===void 0||Re===void 0&&re===de&&de===be)I=typeof re=="string"?re+" "+$e[0]:x.precision===2?U(re/255)+" "+$e[0]:q(re/255)+" "+$e[0];else if(Re===void 0||gr(Re)==="object"){if(Re&&!isNaN(Re.a)&&Re.a===0)return["1.","1.","1.",$e[1]].join(" ");I=typeof re=="string"?[re,de,be,$e[1]].join(" "):x.precision===2?[U(re/255),U(de/255),U(be/255),$e[1]].join(" "):[q(re/255),q(de/255),q(be/255),$e[1]].join(" ")}else I=typeof re=="string"?[re,de,be,Re,$e[2]].join(" "):x.precision===2?[U(re),U(de),U(be),U(Re),$e[2]].join(" "):[q(re),q(de),q(be),q(Re),$e[2]].join(" ");return I},ms=y.__private__.getFilters=function(){return u},rs=y.__private__.putStream=function(x){var I=(x=x||{}).data||"",re=x.filters||ms(),de=x.alreadyAppliedFilters||[],be=x.addLength1||!1,Re=I.length,$e=x.objectId,it=function(nn){return nn};if(v!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(it=rn.encryptor($e,0));var ht={};re===!0&&(re=["FlateEncode"]);var Ot=x.additionalKeyValues||[],Ft=(ht=ct.API.processDataByFilters!==void 0?ct.API.processDataByFilters(I,re):{data:I,reverseChain:[]}).reverseChain+(Array.isArray(de)?de.join(" "):de.toString());if(ht.data.length!==0&&(Ot.push({key:"Length",value:ht.data.length}),be===!0&&Ot.push({key:"Length1",value:Re})),Ft.length!=0)if(Ft.split("/").length-1==1)Ot.push({key:"Filter",value:Ft});else{Ot.push({key:"Filter",value:"["+Ft+"]"});for(var Yt=0;Yt<Ot.length;Yt+=1)if(Ot[Yt].key==="DecodeParms"){for(var Ar=[],Kr=0;Kr<ht.reverseChain.split("/").length-1;Kr+=1)Ar.push("null");Ar.push(Ot[Yt].value),Ot[Yt].value="["+Ar.join(" ")+"]"}}X("<<");for(var yr=0;yr<Ot.length;yr++)X("/"+Ot[yr].key+" "+Ot[yr].value);X(">>"),ht.data.length!==0&&(X("stream"),X(it(ht.data)),X("endstream"))},va=y.__private__.putPage=function(x){var I=x.number,re=x.data,de=x.objId,be=x.contentsObjId;Hr(de,!0),X("<</Type /Page"),X("/Parent "+x.rootDictionaryObjId+" 0 R"),X("/Resources "+x.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(Y(x.mediaBox.bottomLeftX))+" "+parseFloat(Y(x.mediaBox.bottomLeftY))+" "+Y(x.mediaBox.topRightX)+" "+Y(x.mediaBox.topRightY)+"]"),x.cropBox!==null&&X("/CropBox ["+Y(x.cropBox.bottomLeftX)+" "+Y(x.cropBox.bottomLeftY)+" "+Y(x.cropBox.topRightX)+" "+Y(x.cropBox.topRightY)+"]"),x.bleedBox!==null&&X("/BleedBox ["+Y(x.bleedBox.bottomLeftX)+" "+Y(x.bleedBox.bottomLeftY)+" "+Y(x.bleedBox.topRightX)+" "+Y(x.bleedBox.topRightY)+"]"),x.trimBox!==null&&X("/TrimBox ["+Y(x.trimBox.bottomLeftX)+" "+Y(x.trimBox.bottomLeftY)+" "+Y(x.trimBox.topRightX)+" "+Y(x.trimBox.topRightY)+"]"),x.artBox!==null&&X("/ArtBox ["+Y(x.artBox.bottomLeftX)+" "+Y(x.artBox.bottomLeftY)+" "+Y(x.artBox.topRightX)+" "+Y(x.artBox.topRightY)+"]"),typeof x.userUnit=="number"&&x.userUnit!==1&&X("/UserUnit "+x.userUnit),Qt.publish("putPage",{objId:de,pageContext:Nt[I],pageNumber:I,page:re}),X("/Contents "+be+" 0 R"),X(">>"),X("endobj");var Re=re.join(`
`);return T===E&&(Re+=`
Q`),Hr(be,!0),rs({data:Re,filters:ms(),objectId:be}),X("endobj"),de},Is=y.__private__.putPages=function(){var x,I,re=[];for(x=1;x<=Bt;x++)Nt[x].objId=Dr(),Nt[x].contentsObjId=Dr();for(x=1;x<=Bt;x++)re.push(va({number:x,data:Ie[x],objId:Nt[x].objId,contentsObjId:Nt[x].contentsObjId,mediaBox:Nt[x].mediaBox,cropBox:Nt[x].cropBox,bleedBox:Nt[x].bleedBox,trimBox:Nt[x].trimBox,artBox:Nt[x].artBox,userUnit:Nt[x].userUnit,rootDictionaryObjId:Ki,resourceDictionaryObjId:Os}));Hr(Ki,!0),X("<</Type /Pages");var de="/Kids [";for(I=0;I<Bt;I++)de+=re[I]+" 0 R ";X(de+"]"),X("/Count "+Bt),X(">>"),X("endobj"),Qt.publish("postPutPages")},Ji=function(x){Qt.publish("putFont",{font:x,out:X,newObject:vr,putStream:rs}),x.isAlreadyPutted!==!0&&(x.objectNumber=vr(),X("<<"),X("/Type /Font"),X("/BaseFont /"+Lc(x.postScriptName)),X("/Subtype /Type1"),typeof x.encoding=="string"&&X("/Encoding /"+x.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},ya=function(x){x.objectNumber=vr();var I=[];I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Form"}),I.push({key:"BBox",value:"["+[Y(x.x),Y(x.y),Y(x.x+x.width),Y(x.y+x.height)].join(" ")+"]"}),I.push({key:"Matrix",value:"["+x.matrix.toString()+"]"});var re=x.pages[1].join(`
`);rs({data:re,additionalKeyValues:I,objectId:x.objectNumber}),X("endobj")},xa=function(x,I){I||(I=21);var re=vr(),de=(function($e,it){var ht,Ot=[],Ft=1/(it-1);for(ht=0;ht<1;ht+=Ft)Ot.push(ht);if(Ot.push(1),$e[0].offset!=0){var Yt={offset:0,color:$e[0].color};$e.unshift(Yt)}if($e[$e.length-1].offset!=1){var Ar={offset:1,color:$e[$e.length-1].color};$e.push(Ar)}for(var Kr="",yr=0,nn=0;nn<Ot.length;nn++){for(ht=Ot[nn];ht>$e[yr+1].offset;)yr++;var Fr=$e[yr].offset,yn=(ht-Fr)/($e[yr+1].offset-Fr),Ni=$e[yr].color,Fs=$e[yr+1].color;Kr+=le(Math.round((1-yn)*Ni[0]+yn*Fs[0]).toString(16))+le(Math.round((1-yn)*Ni[1]+yn*Fs[1]).toString(16))+le(Math.round((1-yn)*Ni[2]+yn*Fs[2]).toString(16))}return Kr.trim()})(x.colors,I),be=[];be.push({key:"FunctionType",value:"0"}),be.push({key:"Domain",value:"[0.0 1.0]"}),be.push({key:"Size",value:"["+I+"]"}),be.push({key:"BitsPerSample",value:"8"}),be.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),be.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rs({data:de,additionalKeyValues:be,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),X("endobj"),x.objectNumber=vr(),X("<< /ShadingType "+x.type),X("/ColorSpace /DeviceRGB");var Re="/Coords ["+Y(parseFloat(x.coords[0]))+" "+Y(parseFloat(x.coords[1]))+" ";x.type===2?Re+=Y(parseFloat(x.coords[2]))+" "+Y(parseFloat(x.coords[3])):Re+=Y(parseFloat(x.coords[2]))+" "+Y(parseFloat(x.coords[3]))+" "+Y(parseFloat(x.coords[4]))+" "+Y(parseFloat(x.coords[5])),X(Re+="]"),x.matrix&&X("/Matrix ["+x.matrix.toString()+"]"),X("/Function "+re+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},ro=function(x,I){var re=Dr(),de=vr();I.push({resourcesOid:re,objectOid:de}),x.objectNumber=de;var be=[];be.push({key:"Type",value:"/Pattern"}),be.push({key:"PatternType",value:"1"}),be.push({key:"PaintType",value:"1"}),be.push({key:"TilingType",value:"1"}),be.push({key:"BBox",value:"["+x.boundingBox.map(Y).join(" ")+"]"}),be.push({key:"XStep",value:Y(x.xStep)}),be.push({key:"YStep",value:Y(x.yStep)}),be.push({key:"Resources",value:re+" 0 R"}),x.matrix&&be.push({key:"Matrix",value:"["+x.matrix.toString()+"]"}),rs({data:x.stream,additionalKeyValues:be,objectId:x.objectNumber}),X("endobj")},Fc=function(x){for(var I in x.objectNumber=vr(),X("<<"),x)switch(I){case"opacity":X("/ca "+U(x[I]));break;case"stroke-opacity":X("/CA "+U(x[I]))}X(">>"),X("endobj")},wr=function(x){Hr(x.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var I in X("/Font <<"),yt)yt.hasOwnProperty(I)&&(_===!1||_===!0&&N.hasOwnProperty(I))&&X("/"+I+" "+yt[I].objectNumber+" 0 R");X(">>")})(),(function(){if(Object.keys(wt).length>0){for(var I in X("/Shading <<"),wt)wt.hasOwnProperty(I)&&wt[I]instanceof Wo&&wt[I].objectNumber>=0&&X("/"+I+" "+wt[I].objectNumber+" 0 R");Qt.publish("putShadingPatternDict"),X(">>")}})(),(function(I){if(Object.keys(wt).length>0){for(var re in X("/Pattern <<"),wt)wt.hasOwnProperty(re)&&wt[re]instanceof y.TilingPattern&&wt[re].objectNumber>=0&&wt[re].objectNumber<I&&X("/"+re+" "+wt[re].objectNumber+" 0 R");Qt.publish("putTilingPatternDict"),X(">>")}})(x.objectOid),(function(){if(Object.keys(_t).length>0){var I;for(I in X("/ExtGState <<"),_t)_t.hasOwnProperty(I)&&_t[I].objectNumber>=0&&X("/"+I+" "+_t[I].objectNumber+" 0 R");Qt.publish("putGStateDict"),X(">>")}})(),(function(){for(var I in X("/XObject <<"),mn)mn.hasOwnProperty(I)&&mn[I].objectNumber>=0&&X("/"+I+" "+mn[I].objectNumber+" 0 R");Qt.publish("putXobjectDict"),X(">>")})(),X(">>"),X("endobj")},ql=function(x){qt[x.fontName]=qt[x.fontName]||{},qt[x.fontName][x.fontStyle]=x.id},no=function(x,I,re,de,be){var Re={id:"F"+(Object.keys(yt).length+1).toString(10),postScriptName:x,fontName:I,fontStyle:re,encoding:de,isStandardFont:be||!1,metadata:{}};return Qt.publish("addFont",{font:Re,instance:this}),yt[Re.id]=Re,ql(Re),Re.id},ns=y.__private__.pdfEscape=y.pdfEscape=function(x,I){return(function(re,de){var be,Re,$e,it,ht,Ot,Ft,Yt,Ar;if($e=(de=de||{}).sourceEncoding||"Unicode",ht=de.outputEncoding,(de.autoencode||ht)&&yt[Be].metadata&&yt[Be].metadata[$e]&&yt[Be].metadata[$e].encoding&&(it=yt[Be].metadata[$e].encoding,!ht&&yt[Be].encoding&&(ht=yt[Be].encoding),!ht&&it.codePages&&(ht=it.codePages[0]),typeof ht=="string"&&(ht=it[ht]),ht)){for(Ft=!1,Ot=[],be=0,Re=re.length;be<Re;be++)(Yt=ht[re.charCodeAt(be)])?Ot.push(String.fromCharCode(Yt)):Ot.push(re[be]),Ot[be].charCodeAt(0)>>8&&(Ft=!0);re=Ot.join("")}for(be=re.length;Ft===void 0&&be!==0;)re.charCodeAt(be-1)>>8&&(Ft=!0),be--;if(!Ft)return re;for(Ot=de.noBOM?[]:[254,255],be=0,Re=re.length;be<Re;be++){if((Ar=(Yt=re.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+re+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ot.push(Ar),Ot.push(Yt-(Ar<<8))}return String.fromCharCode.apply(void 0,Ot)})(x,I).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yi=y.__private__.beginPage=function(x){Ie[++Bt]=[],Nt[Bt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(x[0]),topRightY:Number(x[1])}},wa(Bt),Xe(Ie[K])},zl=function(x,I){var re,de,be;switch(t=I||t,typeof x=="string"&&(re=L(x.toLowerCase()),Array.isArray(re)&&(de=re[0],be=re[1])),Array.isArray(x)&&(de=x[0]*Ue,be=x[1]*Ue),isNaN(de)&&(de=a[0],be=a[1]),(de>14400||be>14400)&&(_r.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),de=Math.min(14400,de),be=Math.min(14400,be)),a=[de,be],t.substr(0,1)){case"l":be>de&&(a=[be,de]);break;case"p":de>be&&(a=[be,de])}Yi(a),Et(ys),X(ja),Zo!==0&&X(Zo+" J"),el!==0&&X(el+" j"),Qt.publish("addPage",{pageNumber:Bt})},so=function(x){x>0&&x<=Bt&&(Ie.splice(x,1),Nt.splice(x,1),Bt--,K>Bt&&(K=Bt),this.setPage(K))},wa=function(x){x>0&&x<=Bt&&(K=x)},ss=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ie.length-1},Wl=function(x,I,re){var de,be=void 0;return re=re||{},x=x!==void 0?x:yt[Be].fontName,I=I!==void 0?I:yt[Be].fontStyle,de=x.toLowerCase(),qt[de]!==void 0&&qt[de][I]!==void 0?be=qt[de][I]:qt[x]!==void 0&&qt[x][I]!==void 0?be=qt[x][I]:re.disableWarning===!1&&_r.warn("Unable to look up font label for font '"+x+"', '"+I+"'. Refer to getFontList() for available fonts."),be||re.noFallback||(be=qt.times[I])==null&&(be=qt.times.normal),be},Vr=y.__private__.putInfo=function(){var x=vr(),I=function(de){return de};for(var re in v!==null&&(I=rn.encryptor(x,0)),X("<<"),X("/Producer ("+ns(I("jsPDF "+ct.version))+")"),Ae)Ae.hasOwnProperty(re)&&Ae[re]&&X("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+ns(I(Ae[re]))+")");X("/CreationDate ("+ns(I(ge))+")"),X(">>"),X("endobj")},io=y.__private__.putCatalog=function(x){var I=(x=x||{}).rootDictionaryObjId||Ki;switch(vr(),X("<<"),X("/Type /Catalog"),X("/Pages "+I+" 0 R"),pt||(pt="fullwidth"),pt){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+pt;re.substr(re.length-1)==="%"&&(pt=parseInt(pt)/100),typeof pt=="number"&&X("/OpenAction [3 0 R /XYZ null null "+U(pt)+"]")}switch(zt||(zt="continuous"),zt){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}gt&&X("/PageMode /"+gt),Qt.publish("putCatalog"),X(">>"),X("endobj")},Bc=y.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(ue+1)),X("/Root "+ue+" 0 R"),X("/Info "+(ue-1)+" 0 R"),v!==null&&X("/Encrypt "+rn.oid+" 0 R"),X("/ID [ <"+ae+"> <"+ae+"> ]"),X(">>")},Gr=y.__private__.putHeader=function(){X("%PDF-"+k),X("%")},ba=y.__private__.putXRef=function(){var x="0000000000";X("xref"),X("0 "+(ue+1)),X("0000000000 65535 f ");for(var I=1;I<=ue;I++)typeof se[I]=="function"?X((x+se[I]()).slice(-10)+" 00000 n "):se[I]!==void 0?X((x+se[I]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},is=y.__private__.buildDocument=function(){var x;ue=0,me=0,ce=[],se=[],Ne=[],Ki=Dr(),Os=Dr(),Xe(ce),Qt.publish("buildDocument"),Gr(),Is(),(function(){Qt.publish("putAdditionalObjects");for(var re=0;re<Ne.length;re++){var de=Ne[re];Hr(de.objId,!0),X(de.content),X("endobj")}Qt.publish("postPutAdditionalObjects")})(),x=[],(function(){for(var re in yt)yt.hasOwnProperty(re)&&(_===!1||_===!0&&N.hasOwnProperty(re))&&Ji(yt[re])})(),(function(){var re;for(re in _t)_t.hasOwnProperty(re)&&Fc(_t[re])})(),(function(){for(var re in mn)mn.hasOwnProperty(re)&&ya(mn[re])})(),(function(re){var de;for(de in wt)wt.hasOwnProperty(de)&&(wt[de]instanceof Wo?xa(wt[de]):wt[de]instanceof Tl&&ro(wt[de],re))})(x),Qt.publish("putResources"),x.forEach(wr),wr({resourcesOid:Os,objectOid:Number.MAX_SAFE_INTEGER}),Qt.publish("postPutResources"),v!==null&&(rn.oid=vr(),X("<<"),X("/Filter /Standard"),X("/V "+rn.v),X("/R "+rn.r),X("/U <"+rn.toHexString(rn.U)+">"),X("/O <"+rn.toHexString(rn.O)+">"),X("/P "+rn.P),X(">>"),X("endobj")),Vr(),io();var I=me;return ba(),Bc(),X("startxref"),X(""+I),X("%%EOF"),Xe(Ie[K]),ce.join(`
`)},ni=y.__private__.getBlob=function(x){return new Blob([dt(x)],{type:"application/pdf"})},_a=y.output=y.__private__.output=(gs=function(x,I){switch(typeof(I=I||{})=="string"?I={filename:I}:I.filename=I.filename||"generated.pdf",x){case void 0:return is();case"save":y.save(I.filename);break;case"arraybuffer":return dt(is());case"blob":return ni(is());case"bloburi":case"bloburl":if(Dt.URL!==void 0&&typeof Dt.URL.createObjectURL=="function")return Dt.URL&&Dt.URL.createObjectURL(ni(is()))||void 0;_r.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",de=is();try{re=Lg(de)}catch{re=Lg(unescape(encodeURIComponent(de)))}return"data:application/pdf;filename="+I.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var be="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Re=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';I.pdfObjectUrl&&(be=I.pdfObjectUrl,Re="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+be+'"'+Re+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(I)+");<\/script></body></html>",it=Dt.open();return it!==null&&it.document.write($e),it}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dt)==="[object Window]"){var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(I.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+I.filename+'" width="500px" height="400px" /></body></html>',Ot=Dt.open();if(Ot!==null){Ot.document.write(ht);var Ft=this;Ot.document.documentElement.querySelector("#pdfViewer").onload=function(){Ot.document.title=I.filename,Ot.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ft.output("bloburl"))}}return Ot}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",I)+'"></iframe></body></html>',Ar=Dt.open();if(Ar!==null&&(Ar.document.write(Yt),Ar.document.title=I.filename),Ar||typeof safari>"u")return Ar;break;case"datauri":case"dataurl":return Dt.document.location.href=this.output("datauristring",I);default:return null}},gs.foo=function(){try{return gs.apply(this,arguments)}catch(re){var x=re.stack||"";~x.indexOf(" at ")&&(x=x.split(" at ")[1]);var I="Error in function "+x.split(`
`)[0].split("<")[0]+": "+re.message;if(!Dt.console)throw new Error(I);Dt.console.error(I,re),Dt.alert&&alert(I)}},gs.foo.bar=gs,gs.foo),vs=function(x){return Array.isArray(Gi)===!0&&Gi.indexOf(x)>-1};switch(s){case"pt":Ue=1;break;case"mm":Ue=72/25.4;break;case"cm":Ue=72/2.54;break;case"in":Ue=72;break;case"px":Ue=vs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ue=12;break;case"ex":Ue=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Ue=s}var rn=null;V(),ie();var Rs=y.__private__.getPageInfo=y.getPageInfo=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[x].objId,pageNumber:x,pageContext:Nt[x]}},Jo=y.__private__.getPageInfoByObjId=function(x){if(isNaN(x)||x%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var I in Nt)if(Nt[I].objId===x)break;return Rs(I)},Yo=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:Nt[K].objId,pageNumber:K,pageContext:Nt[K]}};y.addPage=function(){return zl.apply(this,arguments),this},y.setPage=function(){return wa.apply(this,arguments),Xe.call(this,Ie[K]),this},y.insertPage=function(x){return this.addPage(),this.movePage(K,x),this},y.movePage=function(x,I){var re,de;if(x>I){re=Ie[x],de=Nt[x];for(var be=x;be>I;be--)Ie[be]=Ie[be-1],Nt[be]=Nt[be-1];Ie[I]=re,Nt[I]=de,this.setPage(I)}else if(x<I){re=Ie[x],de=Nt[x];for(var Re=x;Re<I;Re++)Ie[Re]=Ie[Re+1],Nt[Re]=Nt[Re+1];Ie[I]=re,Nt[I]=de,this.setPage(I)}return this},y.deletePage=function(){return so.apply(this,arguments),this},y.__private__.text=y.text=function(x,I,re,de,be){var Re,$e,it,ht,Ot,Ft,Yt,Ar,Kr,yr=(de=de||{}).scope||this;if(typeof x=="number"&&typeof I=="number"&&(typeof re=="string"||Array.isArray(re))){var nn=re;re=I,I=x,x=nn}if(arguments[3]instanceof St==0?(it=arguments[4],ht=arguments[5],gr(Yt=arguments[3])==="object"&&Yt!==null||(typeof it=="string"&&(ht=it,it=null),typeof Yt=="string"&&(ht=Yt,Yt=null),typeof Yt=="number"&&(it=Yt,Yt=null),de={flags:Yt,angle:it,align:ht})):(J("The transform parameter of text() with a Matrix value"),Kr=be),isNaN(I)||isNaN(re)||x==null)throw new Error("Invalid arguments passed to jsPDF.text");if(x.length===0)return yr;var Fr,yn="",Ni=typeof de.lineHeightFactor=="number"?de.lineHeightFactor:$n,Fs=yr.internal.scaleFactor;function Si(Zt){return Zt=Zt.split("	").join(Array(de.TabLen||9).join(" ")),ns(Zt,Yt)}function La(Zt){for(var or,Lr=Zt.concat(),Jr=[],Us=Lr.length;Us--;)typeof(or=Lr.shift())=="string"?Jr.push(or):Array.isArray(Zt)&&(or.length===1||or[1]===void 0&&or[2]===void 0)?Jr.push(or[0]):Jr.push([or[0],or[1],or[2]]);return Jr}function po(Zt,or){var Lr;if(typeof Zt=="string")Lr=or(Zt)[0];else if(Array.isArray(Zt)){for(var Jr,Us,sl=Zt.concat(),xo=[],Ci=sl.length;Ci--;)typeof(Jr=sl.shift())=="string"?xo.push(or(Jr)[0]):Array.isArray(Jr)&&typeof Jr[0]=="string"&&(Us=or(Jr[0],Jr[1],Jr[2]),xo.push([Us[0],Us[1],Us[2]]));Lr=xo}return Lr}var Zi=!1,Ta=!0;if(typeof x=="string")Zi=!0;else if(Array.isArray(x)){var ea=x.concat();$e=[];for(var ta,xn=ea.length;xn--;)(typeof(ta=ea.shift())!="string"||Array.isArray(ta)&&typeof ta[0]!="string")&&(Ta=!1);Zi=Ta}if(Zi===!1)throw new Error('Type of text must be string or Array. "'+x+'" is not recognized.');typeof x=="string"&&(x=x.match(/[\r?\n]/)?x.split(/\r\n|\r|\n/g):[x]);var Oa=qe/yr.internal.scaleFactor,Ia=Oa*(Ni-1);switch(de.baseline){case"bottom":re-=Ia;break;case"top":re+=Oa-Ia;break;case"hanging":re+=Oa-2*Ia;break;case"middle":re+=Oa/2-Ia}if((Ft=de.maxWidth||0)>0&&(typeof x=="string"?x=yr.splitTextToSize(x,Ft):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(Zt,or){return Zt.concat(yr.splitTextToSize(or,Ft))},[]))),Re={text:x,x:I,y:re,options:de,mutex:{pdfEscape:ns,activeFontKey:Be,fonts:yt,activeFontSize:qe}},Qt.publish("preProcessText",Re),x=Re.text,it=(de=Re.options).angle,Kr instanceof St==0&&it&&typeof it=="number"){it*=Math.PI/180,de.rotationDirection===0&&(it=-it),T===E&&(it=-it);var rl=Math.cos(it),nl=Math.sin(it);Kr=new St(rl,nl,-nl,rl,0,0)}else it&&it instanceof St&&(Kr=it);T!==E||Kr||(Kr=Ts),(Ot=de.charSpace||qn)!==void 0&&(yn+=Y(D(Ot))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ar=de.horizontalScale)!==void 0&&(yn+=Y(100*Ar)+` Tz
`),de.lang;var On=-1,Bs=de.renderingMode!==void 0?de.renderingMode:de.stroke,li=yr.internal.getCurrentPageInfo().pageContext;switch(Bs){case 0:case!1:case"fill":On=0;break;case 1:case!0:case"stroke":On=1;break;case 2:case"fillThenStroke":On=2;break;case 3:case"invisible":On=3;break;case 4:case"fillAndAddForClipping":On=4;break;case 5:case"strokeAndAddPathForClipping":On=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":On=6;break;case 7:case"addToPathForClipping":On=7}var Jl=li.usedRenderingMode!==void 0?li.usedRenderingMode:-1;On!==-1?yn+=On+` Tr
`:Jl!==-1&&(yn+=`0 Tr
`),On!==-1&&(li.usedRenderingMode=On),ht=de.align||"left";var os,ra=qe*Ni,go=yr.internal.pageSize.getWidth(),mo=yt[Be];Ot=de.charSpace||qn,Ft=de.maxWidth||0,Yt=Object.assign({autoencode:!0,noBOM:!0},de.flags);var ki=[],Ns=function(Zt){return yr.getStringUnitWidth(Zt,{font:mo,charSpace:Ot,fontSize:qe,doKerning:!1})*qe/Fs};if(Object.prototype.toString.call(x)==="[object Array]"){var ls;$e=La(x),ht!=="left"&&(os=$e.map(Ns));var cs,na=0;if(ht==="right"){I-=os[0],x=[],xn=$e.length;for(var ci=0;ci<xn;ci++)ci===0?(cs=as(I),ls=bi(re)):(cs=D(na-os[ci]),ls=-ra),x.push([$e[ci],cs,ls]),na=os[ci]}else if(ht==="center"){I-=os[0]/2,x=[],xn=$e.length;for(var ji=0;ji<xn;ji++)ji===0?(cs=as(I),ls=bi(re)):(cs=D((na-os[ji])/2),ls=-ra),x.push([$e[ji],cs,ls]),na=os[ji]}else if(ht==="left"){x=[],xn=$e.length;for(var Ai=0;Ai<xn;Ai++)x.push($e[Ai])}else if(ht==="justify"&&mo.encoding==="Identity-H"){x=[],xn=$e.length,Ft=Ft!==0?Ft:go;for(var ui=0,Br=0;Br<xn;Br++)if(ls=Br===0?bi(re):-ra,cs=Br===0?as(I):ui,Br<xn-1){var Ra=D((Ft-os[Br])/($e[Br].split(" ").length-1)),di=$e[Br].split(" ");x.push([di[0]+" ",cs,ls]),ui=0;for(var Ms=1;Ms<di.length;Ms++){var Da=(Ns(di[Ms-1]+" "+di[Ms])-Ns(di[Ms]))*Fs+Ra;Ms==di.length-1?x.push([di[Ms],Da,0]):x.push([di[Ms]+" ",Da,0]),ui-=Da}}else x.push([$e[Br],cs,ls]);x.push(["",ui,0])}else{if(ht!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(x=[],xn=$e.length,Ft=Ft!==0?Ft:go,Br=0;Br<xn;Br++){ls=Br===0?bi(re):-ra,cs=Br===0?as(I):0;var Fa=$e[Br].split(" ").length-1,vo=Fa>0?(Ft-os[Br])/Fa:0;Br<xn-1?ki.push(Y(D(vo))):ki.push(0),x.push([$e[Br],cs,ls])}}}(typeof de.R2L=="boolean"?de.R2L:vt)===!0&&(x=po(x,function(Zt,or,Lr){return[Zt.split("").reverse().join(""),or,Lr]})),Re={text:x,x:I,y:re,options:de,mutex:{pdfEscape:ns,activeFontKey:Be,fonts:yt,activeFontSize:qe}},Qt.publish("postProcessText",Re),x=Re.text,Fr=Re.mutex.isHex||!1;var yo=yt[Be].encoding;yo!=="WinAnsiEncoding"&&yo!=="StandardEncoding"||(x=po(x,function(Zt,or,Lr){return[Si(Zt),or,Lr]})),$e=La(x),x=[];for(var Ei,sa,ia,Ba=Array.isArray($e[0])?1:0,aa="",Ma=function(Zt,or,Lr){var Jr="";return Lr instanceof St?(Lr=typeof de.angle=="number"?ts(Lr,new St(1,0,0,1,Zt,or)):ts(new St(1,0,0,1,Zt,or),Lr),T===E&&(Lr=ts(new St(1,0,0,-1,0,0),Lr)),Jr=Lr.join(" ")+` Tm
`):Jr=Y(Zt)+" "+Y(or)+` Td
`,Jr},Pr=0;Pr<$e.length;Pr++){switch(aa="",Ba){case 1:ia=(Fr?"<":"(")+$e[Pr][0]+(Fr?">":")"),Ei=parseFloat($e[Pr][1]),sa=parseFloat($e[Pr][2]);break;case 0:ia=(Fr?"<":"(")+$e[Pr]+(Fr?">":")"),Ei=as(I),sa=bi(re)}ki!==void 0&&ki[Pr]!==void 0&&(aa=ki[Pr]+` Tw
`),Pr===0?x.push(aa+Ma(Ei,sa,Kr)+ia):Ba===0?x.push(aa+ia):Ba===1&&x.push(aa+Ma(Ei,sa,Kr)+ia)}x=Ba===0?x.join(` Tj
T* `):x.join(` Tj
`),x+=` Tj
`;var zn=`BT
/`;return zn+=Be+" "+qe+` Tf
`,zn+=Y(qe*Ni)+` TL
`,zn+=Ds+`
`,zn+=yn,zn+=x,X(zn+="ET"),N[Be]=!0,yr};var Na=y.__private__.clip=y.clip=function(x){return X(x==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return Na("evenodd")},y.__private__.discardPath=y.discardPath=function(){return X("n"),this};var si=y.__private__.isValidStyle=function(x){var I=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(x)!==-1&&(I=!0),I};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(x){return si(x)&&(g=x),this};var ao=y.__private__.getStyle=y.getStyle=function(x){var I=g;switch(x){case"D":case"S":I="S";break;case"F":I="f";break;case"FD":case"DF":I="B";break;case"f":case"f*":case"B":case"B*":I=x}return I},Xt=y.close=function(){return X("h"),this};y.stroke=function(){return X("S"),this},y.fill=function(x){return Sa("f",x),this},y.fillEvenOdd=function(x){return Sa("f*",x),this},y.fillStroke=function(x){return Sa("B",x),this},y.fillStrokeEvenOdd=function(x){return Sa("B*",x),this};var Sa=function(x,I){gr(I)==="object"?Hl(I,x):X(x)},Xi=function(x){x===null||T===E&&x===void 0||(x=ao(x),X(x))};function Xo(x,I,re,de,be){var Re=new Tl(I||this.boundingBox,re||this.xStep,de||this.yStep,this.gState,be||this.matrix);Re.stream=this.stream;var $e=x+"$$"+this.cloneIndex+++"$$";return kn($e,Re),Re}var Hl=function(x,I){var re=ar[x.key],de=wt[re];if(de instanceof Wo)X("q"),X(Vl(I)),de.gState&&y.setGState(de.gState),X(x.matrix.toString()+" cm"),X("/"+re+" sh"),X("Q");else if(de instanceof Tl){var be=new St(1,0,0,-1,0,_s());x.matrix&&(be=be.multiply(x.matrix||Ts),re=Xo.call(de,x.key,x.boundingBox,x.xStep,x.yStep,be).id),X("q"),X("/Pattern cs"),X("/"+re+" scn"),de.gState&&y.setGState(de.gState),X(I),X("Q")}},Vl=function(x){switch(x){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},oo=y.moveTo=function(x,I){return X(Y(D(x))+" "+Y(G(I))+" m"),this},lo=y.lineTo=function(x,I){return X(Y(D(x))+" "+Y(G(I))+" l"),this},Un=y.curveTo=function(x,I,re,de,be,Re){return X([Y(D(x)),Y(G(I)),Y(D(re)),Y(G(de)),Y(D(be)),Y(G(Re)),"c"].join(" ")),this};y.__private__.line=y.line=function(x,I,re,de,be){if(isNaN(x)||isNaN(I)||isNaN(re)||isNaN(de)||!si(be))throw new Error("Invalid arguments passed to jsPDF.line");return T===R?this.lines([[re-x,de-I]],x,I,[1,1],be||"S"):this.lines([[re-x,de-I]],x,I,[1,1]).stroke()},y.__private__.lines=y.lines=function(x,I,re,de,be,Re){var $e,it,ht,Ot,Ft,Yt,Ar,Kr,yr,nn,Fr,yn;if(typeof x=="number"&&(yn=re,re=I,I=x,x=yn),de=de||[1,1],Re=Re||!1,isNaN(I)||isNaN(re)||!Array.isArray(x)||!Array.isArray(de)||!si(be)||typeof Re!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(oo(I,re),$e=de[0],it=de[1],Ot=x.length,nn=I,Fr=re,ht=0;ht<Ot;ht++)(Ft=x[ht]).length===2?(nn=Ft[0]*$e+nn,Fr=Ft[1]*it+Fr,lo(nn,Fr)):(Yt=Ft[0]*$e+nn,Ar=Ft[1]*it+Fr,Kr=Ft[2]*$e+nn,yr=Ft[3]*it+Fr,nn=Ft[4]*$e+nn,Fr=Ft[5]*it+Fr,Un(Yt,Ar,Kr,yr,nn,Fr));return Re&&Xt(),Xi(be),this},y.path=function(x){for(var I=0;I<x.length;I++){var re=x[I],de=re.c;switch(re.op){case"m":oo(de[0],de[1]);break;case"l":lo(de[0],de[1]);break;case"c":Un.apply(this,de);break;case"h":Xt()}}return this},y.__private__.rect=y.rect=function(x,I,re,de,be){if(isNaN(x)||isNaN(I)||isNaN(re)||isNaN(de)||!si(be))throw new Error("Invalid arguments passed to jsPDF.rect");return T===R&&(de=-de),X([Y(D(x)),Y(G(I)),Y(D(re)),Y(D(de)),"re"].join(" ")),Xi(be),this},y.__private__.triangle=y.triangle=function(x,I,re,de,be,Re,$e){if(isNaN(x)||isNaN(I)||isNaN(re)||isNaN(de)||isNaN(be)||isNaN(Re)||!si($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-x,de-I],[be-re,Re-de],[x-be,I-Re]],x,I,[1,1],$e,!0),this},y.__private__.roundedRect=y.roundedRect=function(x,I,re,de,be,Re,$e){if(isNaN(x)||isNaN(I)||isNaN(re)||isNaN(de)||isNaN(be)||isNaN(Re)||!si($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var it=4/3*(Math.SQRT2-1);return be=Math.min(be,.5*re),Re=Math.min(Re,.5*de),this.lines([[re-2*be,0],[be*it,0,be,Re-Re*it,be,Re],[0,de-2*Re],[0,Re*it,-be*it,Re,-be,Re],[2*be-re,0],[-be*it,0,-be,-Re*it,-be,-Re],[0,2*Re-de],[0,-Re*it,be*it,-Re,be,-Re]],x+be,I,[1,1],$e,!0),this},y.__private__.ellipse=y.ellipse=function(x,I,re,de,be){if(isNaN(x)||isNaN(I)||isNaN(re)||isNaN(de)||!si(be))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Re=4/3*(Math.SQRT2-1)*re,$e=4/3*(Math.SQRT2-1)*de;return oo(x+re,I),Un(x+re,I-$e,x+Re,I-de,x,I-de),Un(x-Re,I-de,x-re,I-$e,x-re,I),Un(x-re,I+$e,x-Re,I+de,x,I+de),Un(x+Re,I+de,x+re,I+$e,x+re,I),Xi(be),this},y.__private__.circle=y.circle=function(x,I,re,de){if(isNaN(x)||isNaN(I)||isNaN(re)||!si(de))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(x,I,re,re,de)},y.setFont=function(x,I,re){return re&&(I=H(I,re)),Be=Wl(x,I,{disableWarning:!1}),this};var ii=y.__private__.getFont=y.getFont=function(){return yt[Wl.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var x,I,re={};for(x in qt)if(qt.hasOwnProperty(x))for(I in re[x]=[],qt[x])qt[x].hasOwnProperty(I)&&re[x].push(I);return re},y.addFont=function(x,I,re,de,be){var Re=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Re.indexOf(arguments[3])!==-1?be=arguments[3]:arguments[3]&&Re.indexOf(arguments[3])==-1&&(re=H(re,de)),no.call(this,x,I,re,be=be||"Identity-H")};var $n,ys=r.lineWidth||.200025,ka=y.__private__.getLineWidth=y.getLineWidth=function(){return ys},Et=y.__private__.setLineWidth=y.setLineWidth=function(x){return ys=x,X(Y(D(x))+" w"),this};y.__private__.setLineDash=ct.API.setLineDash=ct.API.setLineDashPattern=function(x,I){if(x=x||[],I=I||0,isNaN(I)||!Array.isArray(x))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return x=x.map(function(re){return Y(D(re))}).join(" "),I=Y(D(I)),X("["+x+"] "+I+" d"),this};var ai=y.__private__.getLineHeight=y.getLineHeight=function(){return qe*$n};y.__private__.getLineHeight=y.getLineHeight=function(){return qe*$n};var Mc=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(x){return typeof(x=x||1.15)=="number"&&($n=x),this},Gl=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return $n};Mc(r.lineHeight);var as=y.__private__.getHorizontalCoordinate=function(x){return D(x)},bi=y.__private__.getVerticalCoordinate=function(x){return T===E?x:Nt[K].mediaBox.topRightY-Nt[K].mediaBox.bottomLeftY-D(x)},Kl=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(x){return Y(as(x))},co=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(x){return Y(bi(x))},ja=r.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return ri(ja)},y.__private__.setStrokeColor=y.setDrawColor=function(x,I,re,de){return ja=vn({ch1:x,ch2:I,ch3:re,ch4:de,pdfColorType:"draw",precision:2}),X(ja),this};var Qo=r.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return ri(Qo)},y.__private__.setFillColor=y.setFillColor=function(x,I,re,de){return Qo=vn({ch1:x,ch2:I,ch3:re,ch4:de,pdfColorType:"fill",precision:2}),X(Qo),this};var Ds=r.textColor||"0 g",Aa=y.__private__.getTextColor=y.getTextColor=function(){return ri(Ds)};y.__private__.setTextColor=y.setTextColor=function(x,I,re,de){return Ds=vn({ch1:x,ch2:I,ch3:re,ch4:de,pdfColorType:"text",precision:3}),this};var qn=r.charSpace,uo=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(qn||0)};y.__private__.setCharSpace=y.setCharSpace=function(x){if(isNaN(x))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return qn=x,this};var Zo=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(x){var I=y.CapJoinStyles[x];if(I===void 0)throw new Error("Line cap style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zo=I,X(I+" J"),this};var el=0;y.__private__.setLineJoin=y.setLineJoin=function(x){var I=y.CapJoinStyles[x];if(I===void 0)throw new Error("Line join style of '"+x+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return el=I,X(I+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(x){if(x=x||0,isNaN(x))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(Y(D(x))+" M"),this},y.GState=Ru,y.setGState=function(x){(x=typeof x=="string"?_t[It[x]]:ho(null,x)).equals(sr)||(X("/"+x.id+" gs"),sr=x)};var ho=function(x,I){if(!x||!It[x]){var re=!1;for(var de in _t)if(_t.hasOwnProperty(de)&&_t[de].equals(I)){re=!0;break}if(re)I=_t[de];else{var be="GS"+(Object.keys(_t).length+1).toString(10);_t[be]=I,I.id=be}return x&&(It[x]=I.id),Qt.publish("addGState",I),I}};y.addGState=function(x,I){return ho(x,I),this},y.saveGraphicsState=function(){return X("q"),mr.push({key:Be,size:qe,color:Ds}),this},y.restoreGraphicsState=function(){X("Q");var x=mr.pop();return Be=x.key,qe=x.size,Ds=x.color,sr=null,this},y.setCurrentTransformationMatrix=function(x){return X(x.toString()+" cm"),this},y.comment=function(x){return X("#"+x),this};var xs=function(x,I){var re=x||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Re){isNaN(Re)||(re=parseFloat(Re))}});var de=I||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return de},set:function(Re){isNaN(Re)||(de=parseFloat(Re))}});var be="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return be},set:function(Re){be=Re.toString()}}),this},Ea=function(x,I,re,de){xs.call(this,x,I),this.type="rect";var be=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return be},set:function($e){isNaN($e)||(be=parseFloat($e))}});var Re=de||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Re},set:function($e){isNaN($e)||(Re=parseFloat($e))}}),this},Ca=function(){this.page=Bt,this.currentPage=K,this.pages=Ie.slice(0),this.pagesContext=Nt.slice(0),this.x=Ge,this.y=Ze,this.matrix=At,this.width=Qi(K),this.height=Pa(K),this.outputDestination=Me,this.id="",this.objectNumber=-1};Ca.prototype.restore=function(){Bt=this.page,K=this.currentPage,Nt=this.pagesContext,Ie=this.pages,Ge=this.x,Ze=this.y,At=this.matrix,tl(K,this.width),bs(K,this.height),Me=this.outputDestination};var ws=function(x,I,re,de,be){ps.push(new Ca),Bt=K=0,Ie=[],Ge=x,Ze=I,At=be,Yi([re,de])};for(var _i in y.beginFormObject=function(x,I,re,de,be){return ws(x,I,re,de,be),this},y.endFormObject=function(x){return(function(I){if(ti[I])ps.pop().restore();else{var re=new Ca,de="Xo"+(Object.keys(mn).length+1).toString(10);re.id=de,ti[I]=de,mn[de]=re,Qt.publish("addFormObject",re),ps.pop().restore()}})(x),this},y.doFormObject=function(x,I){var re=mn[ti[x]];return X("q"),X(I.toString()+" cm"),X("/"+re.id+" Do"),X("Q"),this},y.getFormObject=function(x){var I=mn[ti[x]];return{x:I.x,y:I.y,width:I.width,height:I.height,matrix:I.matrix}},y.save=function(x,I){return x=x||"generated.pdf",(I=I||{}).returnPromise=I.returnPromise||!1,I.returnPromise===!1?(jl(ni(is()),x),typeof jl.unload=="function"&&Dt.setTimeout&&setTimeout(jl.unload,911),this):new Promise(function(re,de){try{var be=jl(ni(is()),x);typeof jl.unload=="function"&&Dt.setTimeout&&setTimeout(jl.unload,911),re(be)}catch(Re){de(Re.message)}})},ct.API)ct.API.hasOwnProperty(_i)&&(_i==="events"&&ct.API.events.length?(function(x,I){var re,de,be;for(be=I.length-1;be!==-1;be--)re=I[be][0],de=I[be][1],x.subscribe.apply(x,[re].concat(typeof de=="function"?[de]:de))})(Qt,ct.API.events):y[_i]=ct.API[_i]);function Qi(x){return Nt[x].mediaBox.topRightX-Nt[x].mediaBox.bottomLeftX}function tl(x,I){Nt[x].mediaBox.topRightX=I+Nt[x].mediaBox.bottomLeftX}function Pa(x){return Nt[x].mediaBox.topRightY-Nt[x].mediaBox.bottomLeftY}function bs(x,I){Nt[x].mediaBox.topRightY=I+Nt[x].mediaBox.bottomLeftY}var oi=y.getPageWidth=function(x){return Qi(x=x||K)/Ue},jn=y.setPageWidth=function(x,I){tl(x,I*Ue)},_s=y.getPageHeight=function(x){return Pa(x=x||K)/Ue},fo=y.setPageHeight=function(x,I){bs(x,I*Ue)};return y.internal={pdfEscape:ns,getStyle:ao,getFont:ii,getFontSize:Qe,getCharSpace:uo,getTextColor:Aa,getLineHeight:ai,getLineHeightFactor:Gl,getLineWidth:ka,write:Ye,getHorizontalCoordinate:as,getVerticalCoordinate:bi,getCoordinateString:Kl,getVerticalCoordinateString:co,collections:{},newObject:vr,newAdditionalObject:wi,newObjectDeferred:Dr,newObjectDeferredBegin:Hr,getFilters:ms,putStream:rs,events:Qt,scaleFactor:Ue,pageSize:{getWidth:function(){return oi(K)},setWidth:function(x){jn(K,x)},getHeight:function(){return _s(K)},setHeight:function(x){fo(K,x)}},encryptionOptions:v,encryption:rn,getEncryptor:function(x){return v!==null?rn.encryptor(x,0):function(I){return I}},output:_a,getNumberOfPages:ss,get pages(){return Ie},out:X,f2:U,f3:q,getPageInfo:Rs,getPageInfoByObjId:Jo,getCurrentPageInfo:Yo,getPDFVersion:A,Point:xs,Rectangle:Ea,Matrix:St,hasHotfix:vs},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return oi(K)},set:function(x){jn(K,x)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return _s(K)},set:function(x){fo(K,x)},enumerable:!0,configurable:!0}),(function(x){for(var I=0,re=bt.length;I<re;I++){var de=no.call(this,x[I][0],x[I][1],x[I][2],bt[I][3],!0);_===!1&&(N[de]=!0);var be=x[I][0].split("-");ql({id:de,fontName:be[0],fontStyle:be[1]||""})}Qt.publish("addFonts",{fonts:yt,dictionary:qt})}).call(y,bt),Be="F1",zl(a,t),Qt.publish("initialized"),y}Pc.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},Pc.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Pc.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Pc.prototype.processOwnerPassword=function(r,e){return Wf(zf(e).substr(0,5),r)},Pc.prototype.encryptor=function(r,e){var t=zf(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Wf(t,s)}},Ru.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||gr(r)!==gr(this))return!1;var s=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;s++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&s--;return s===0},ct.API={events:[]},ct.version="3.0.4";var en=ct.API,np=1,$l=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Sc=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$t=function(r){return r.toFixed(2)},Mo=function(r){return r.toFixed(5)};en.__acroform__={};var Ls=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},Rg=function(r){return r*np},pa=function(r){var e=new r1,t=ot.internal.getHeight(r)||0,s=ot.internal.getWidth(r)||0;return e.BBox=[0,0,Number($t(s)),Number($t(t))],e},xw=en.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},ww=en.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},bw=en.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},ln=en.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return bw(r,e-1)},cn=en.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xw(r,e-1)},un=en.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ww(r,e-1)},_w=en.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,a=r[0],o=r[1],u=r[2],d=r[3],h={};return h.lowerLeft_X=t(a)||0,h.lowerLeft_Y=s(o+d)||0,h.upperRight_X=t(a+u)||0,h.upperRight_Y=s(o)||0,[Number($t(h.lowerLeft_X)),Number($t(h.lowerLeft_Y)),Number($t(h.upperRight_X)),Number($t(h.upperRight_Y))]},Nw=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,s=Hf(r,t),a=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+a+" "+$t(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=pa(r);return o.scope=r.scope,o.stream=e.join(`
`),o}},Hf=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,s={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=r.multiline?a.map(function(U){return U.split(`
`)}):a.map(function(U){return[U]});var o=t,u=ot.internal.getHeight(r)||0;u=u<0?-u:u;var d=ot.internal.getWidth(r)||0;d=d<0?-d:d;var h=function(U,q,D){if(U+1<a.length){var G=q+" "+a[U+1][0];return Cd(G,r,D).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var g,v,_=Cd("3",r,o).height,N=r.multiline?u-o:(u-_)/2,y=N+=2,k=0,A=0,C=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Cd(e,r,o=12).width+", FieldWidth:"+d+`
`;break}for(var L="",R=0,E=0;E<a.length;E++)if(a.hasOwnProperty(E)){var T=!1;if(a[E].length!==1&&C!==a[E].length-1){if((_+2)*(R+2)+2>u)continue e;L+=a[E][C],T=!0,A=E,E--}else{L=(L+=a[E][C]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var te=parseInt(E),B=h(te,L,o),H=E>=a.length-1;if(B&&!H){L+=" ",C=0;continue}if(B||H){if(H)A=te;else if(r.multiline&&(_+2)*(R+2)+2>u)continue e}else{if(!r.multiline||(_+2)*(R+2)+2>u)continue e;A=te}}for(var Y="",J=k;J<=A;J++){var he=a[J];if(r.multiline){if(J===A){Y+=he[C]+" ",C=(C+1)%he.length;continue}if(J===k){Y+=he[he.length-1]+" ";continue}}Y+=he[0]+" "}switch(Y=Y.substr(Y.length-1)==" "?Y.substr(0,Y.length-1):Y,v=Cd(Y,r,o).width,r.textAlign){case"right":g=d-v-2;break;case"center":g=(d-v)/2;break;default:g=2}e+=$t(g)+" "+$t(y)+` Td
`,e+="("+$l(Y)+`) Tj
`,e+=-$t(g)+` 0 Td
`,y=-(o+2),v=0,k=T?A:A+1,R++,L=""}break}return s.text=e,s.fontSize=o,s},Cd=function(r,e,t){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(r,{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Sw={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kw=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(s){return s.type===t.type&&s.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},jw=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Hi.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(Sw)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");np=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new n1,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];o.objId=void 0,o.hasAnnotation&&kw(o,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(s,a){var o=!s;for(var u in s||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(u)){var d=s[u],h=[],g=d.Rect;if(d.Rect&&(d.Rect=_w(d.Rect,a)),a.internal.newObjectDeferredBegin(d.objId,!0),d.DA=ot.createDefaultAppearanceStream(d),gr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=g,d.hasAppearanceStream&&!d.appearanceStreamContent){var v=Nw(d);h.push({key:"AP",value:"<</N "+v+">>"}),a.internal.acroformPlugin.xForms.push(v)}if(d.appearanceStreamContent){var _="";for(var N in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(N)){var y=d.appearanceStreamContent[N];if(_+="/"+N+" ",_+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var u in y)if(y.hasOwnProperty(u)){var k=y[u];typeof k=="function"&&(k=k.call(a,d)),_+="/"+u+" "+k+" ",a.internal.acroformPlugin.xForms.indexOf(k)>=0||a.internal.acroformPlugin.xForms.push(k)}}else typeof(k=y)=="function"&&(k=k.call(a,d)),_+="/"+u+" "+k,a.internal.acroformPlugin.xForms.indexOf(k)>=0||a.internal.acroformPlugin.xForms.push(k);_+=">>"}h.push({key:"AP",value:`<<
`+_+">>"})}a.internal.putStream({additionalKeyValues:h,objectId:d.objId}),a.internal.out("endobj")}o&&(function(A,C){for(var L in A)if(A.hasOwnProperty(L)){var R=L,E=A[L];C.internal.newObjectDeferredBegin(E.objId,!0),gr(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete A[R]}})(a.internal.acroformPlugin.xForms,a)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},t1=en.__acroform__.arrayToPdfArray=function(r,e,t){var s=function(u){return u};if(Array.isArray(r)){for(var a="[",o=0;o<r.length;o++)switch(o!==0&&(a+=" "),gr(r[o])){case"boolean":case"number":case"object":a+=r[o].toString();break;case"string":r[o].substr(0,1)!=="/"?(e!==void 0&&t&&(s=t.internal.getEncryptor(e)),a+="("+$l(s(r[o].toString()))+")"):a+=r[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gf=function(r,e,t){var s=function(a){return a};return e!==void 0&&t&&(s=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+$l(s(r))+")"},ga=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ga.prototype.toString=function(){return this.objId+" 0 R"},ga.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ga.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var s=e[t],a=this[s];a&&(Array.isArray(a)?r.push({key:s,value:t1(a,this.objId,this.scope)}):a instanceof ga?(a.scope=this.scope,r.push({key:s,value:a.objId+" 0 R"})):typeof a!="function"&&r.push({key:s,value:a}))}return r};var r1=function(){ga.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Ls(r1,ga);var n1=function(){ga.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(s){return s};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+$l(t(r))+")"}},set:function(t){r=t}})};Ls(n1,ga);var Hi=function r(){ga.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');e=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ln(e,3)},set:function(L){L?this.F=cn(e,3):this.F=un(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');t=L}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(L){s=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(L){s[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(L){s[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(L){s[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(L){s[3]=L}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof qd)return;o="FieldObject"+r.FieldNum++}var L=function(R){return R};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+$l(L(o))+")"},set:function(L){o=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(L){o=L}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(L){u=L}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(L){d=L}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(L){h=L}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/np:g},set:function(L){g=L}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(L){v=L}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof qd||this instanceof Go))return gf(_,this.objId,this.scope)},set:function(L){L=L.toString(),_=L}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof Sn==0?gf(N,this.objId,this.scope):N},set:function(L){L=L.toString(),N=this instanceof Sn==0?L.substr(0,1)==="("?Sc(L.substr(1,L.length-2)):Sc(L):L}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sn==1?Sc(N.substr(1,N.length-1)):N},set:function(L){L=L.toString(),N=this instanceof Sn==1?"/"+L:L}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Sn==0?gf(y,this.objId,this.scope):y},set:function(L){L=L.toString(),y=this instanceof Sn==0?L.substr(0,1)==="("?Sc(L.substr(1,L.length-2)):Sc(L):L}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sn==1?Sc(y.substr(1,y.length-1)):y},set:function(L){L=L.toString(),y=this instanceof Sn==1?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,A=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return A},set:function(L){L=!!L,A=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(L){k=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,1)},set:function(L){L?this.Ff=cn(this.Ff,1):this.Ff=un(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,2)},set:function(L){L?this.Ff=cn(this.Ff,2):this.Ff=un(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,3)},set:function(L){L?this.Ff=cn(this.Ff,3):this.Ff=un(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');C=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(C){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};Ls(Hi,ga);var Il=function(){Hi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return t1(e,this.objId,this.scope)},set:function(t){var s,a;a=[],typeof(s=t)=="string"&&(a=(function(o,u,d){d||(d=1);for(var h,g=[];h=u.exec(o);)g.push(h[d]);return g})(s,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,s){for(s=s||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,18)},set:function(t){t?this.Ff=cn(this.Ff,18):this.Ff=un(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=cn(this.Ff,19):this.Ff=un(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,20)},set:function(t){t?(this.Ff=cn(this.Ff,20),e.sort()):this.Ff=un(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,22)},set:function(t){t?this.Ff=cn(this.Ff,22):this.Ff=un(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(t){t?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,27)},set:function(t){t?this.Ff=cn(this.Ff,27):this.Ff=un(this.Ff,27)}}),this.hasAppearanceStream=!1};Ls(Il,Hi);var Rl=function(){Il.call(this),this.fontName="helvetica",this.combo=!1};Ls(Rl,Il);var Dl=function(){Rl.call(this),this.combo=!0};Ls(Dl,Rl);var bu=function(){Dl.call(this),this.edit=!0};Ls(bu,Dl);var Sn=function(){Hi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,15)},set:function(t){t?this.Ff=cn(this.Ff,15):this.Ff=un(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,16)},set:function(t){t?this.Ff=cn(this.Ff,16):this.Ff=un(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,17)},set:function(t){t?this.Ff=cn(this.Ff,17):this.Ff=un(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(t){t?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,a=[];for(s in a.push("<<"),e)a.push("/"+s+" ("+$l(t(e[s]))+")");return a.push(">>"),a.join(`
`)}},set:function(t){gr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Ls(Sn,Hi);var _u=function(){Sn.call(this),this.pushButton=!0};Ls(_u,Sn);var Fl=function(){Sn.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Ls(Fl,Sn);var qd=function(){var r,e;Hi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(d){return d};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),s)u.push("/"+o+" ("+$l(a(s[o]))+")");return u.push(">>"),u.join(`
`)},set:function(a){gr(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ls(qd,Hi),Fl.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},Fl.prototype.createOption=function(r){var e=new qd;return e.Parent=this,e.optionName=r,this.Kids.push(e),Aw.call(this.scope,e),e};var Nu=function(){Sn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ot.CheckBox.createAppearanceStream()};Ls(Nu,Sn);var Go=function(){Hi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,13)},set:function(e){e?this.Ff=cn(this.Ff,13):this.Ff=un(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,21)},set:function(e){e?this.Ff=cn(this.Ff,21):this.Ff=un(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,23)},set:function(e){e?this.Ff=cn(this.Ff,23):this.Ff=un(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,24)},set:function(e){e?this.Ff=cn(this.Ff,24):this.Ff=un(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,25)},set:function(e){e?this.Ff=cn(this.Ff,25):this.Ff=un(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,26)},set:function(e){e?this.Ff=cn(this.Ff,26):this.Ff=un(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ls(Go,Hi);var Su=function(){Go.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ln(this.Ff,14)},set:function(r){r?this.Ff=cn(this.Ff,14):this.Ff=un(this.Ff,14)}}),this.password=!0};Ls(Su,Go);var ot={CheckBox:{createAppearanceStream:function(){return{N:{On:ot.CheckBox.YesNormal},D:{On:ot.CheckBox.YesPushDown,Off:ot.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=r.scope.internal.getFont(r.fontName,r.fontStyle).id,a=r.scope.__private__.encodeColorString(r.color),o=Hf(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+$t(ot.internal.getWidth(r))+" "+$t(ot.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+s+" "+$t(o.fontSize)+" Tf "+a),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=pa(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),a=[],o=ot.internal.getHeight(r),u=ot.internal.getWidth(r),d=Hf(r,r.caption);return a.push("1 g"),a.push("0 0 "+$t(u)+" "+$t(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+$t(u-1)+" "+$t(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+$t(d.fontSize)+" Tf "+s),a.push(d.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$t(ot.internal.getWidth(r))+" "+$t(ot.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:ot.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=ot.RadioButton.Circle.YesNormal,e.D[r]=ot.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=ot.internal.getWidth(r)<=ot.internal.getHeight(r)?ot.internal.getWidth(r)/4:ot.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=ot.internal.Bezier_C,o=Number((s*a).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Mo(ot.internal.getWidth(r)/2)+" "+Mo(ot.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=ot.internal.getWidth(r)<=ot.internal.getHeight(r)?ot.internal.getWidth(r)/4:ot.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*ot.internal.Bezier_C).toFixed(5)),u=Number((s*ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Mo(ot.internal.getWidth(r)/2)+" "+Mo(ot.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Mo(ot.internal.getWidth(r)/2)+" "+Mo(ot.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+u+" "+u+" "+s+" 0 "+s+" c"),t.push("-"+u+" "+s+" -"+s+" "+u+" -"+s+" 0 c"),t.push("-"+s+" -"+u+" -"+u+" -"+s+" 0 -"+s+" c"),t.push(u+" -"+s+" "+s+" -"+u+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=ot.internal.getWidth(r)<=ot.internal.getHeight(r)?ot.internal.getWidth(r)/4:ot.internal.getHeight(r)/4;s=Number((.9*s).toFixed(5));var a=Number((2*s).toFixed(5)),o=Number((a*ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Mo(ot.internal.getWidth(r)/2)+" "+Mo(ot.internal.getHeight(r)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),t.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),t.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),t.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:ot.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=ot.RadioButton.Cross.YesNormal,e.D[r]=ot.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=pa(r);e.scope=r.scope;var t=[],s=ot.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+$t(ot.internal.getWidth(r)-2)+" "+$t(ot.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push($t(s.x1.x)+" "+$t(s.x1.y)+" m"),t.push($t(s.x2.x)+" "+$t(s.x2.y)+" l"),t.push($t(s.x4.x)+" "+$t(s.x4.y)+" m"),t.push($t(s.x3.x)+" "+$t(s.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=ot.internal.calculateCross(r),s=[];return s.push("0.749023 g"),s.push("0 0 "+$t(ot.internal.getWidth(r))+" "+$t(ot.internal.getHeight(r))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+$t(ot.internal.getWidth(r)-2)+" "+$t(ot.internal.getHeight(r)-2)+" re"),s.push("W"),s.push("n"),s.push($t(t.x1.x)+" "+$t(t.x1.y)+" m"),s.push($t(t.x2.x)+" "+$t(t.x2.y)+" l"),s.push($t(t.x4.x)+" "+$t(t.x4.y)+" m"),s.push($t(t.x3.x)+" "+$t(t.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(r){var e=pa(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+$t(ot.internal.getWidth(r))+" "+$t(ot.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};ot.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=ot.internal.getWidth(r),t=ot.internal.getHeight(r),s=Math.min(e,t);return{x1:{x:(e-s)/2,y:(t-s)/2+s},x2:{x:(e-s)/2+s,y:(t-s)/2},x3:{x:(e-s)/2,y:(t-s)/2},x4:{x:(e-s)/2+s,y:(t-s)/2+s}}}},ot.internal.getWidth=function(r){var e=0;return gr(r)==="object"&&(e=Rg(r.Rect[2])),e},ot.internal.getHeight=function(r){var e=0;return gr(r)==="object"&&(e=Rg(r.Rect[3])),e};var Aw=en.addField=function(r){if(jw(this,r),!(r instanceof Hi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};en.AcroFormChoiceField=Il,en.AcroFormListBox=Rl,en.AcroFormComboBox=Dl,en.AcroFormEditBox=bu,en.AcroFormButton=Sn,en.AcroFormPushButton=_u,en.AcroFormRadioButton=Fl,en.AcroFormCheckBox=Nu,en.AcroFormTextField=Go,en.AcroFormPasswordField=Su,en.AcroFormAppearance=ot,en.AcroForm={ChoiceField:Il,ListBox:Rl,ComboBox:Dl,EditBox:bu,Button:Sn,PushButton:_u,RadioButton:Fl,CheckBox:Nu,TextField:Go,PasswordField:Su,Appearance:ot},ct.AcroForm={ChoiceField:Il,ListBox:Rl,ComboBox:Dl,EditBox:bu,Button:Sn,PushButton:_u,RadioButton:Fl,CheckBox:Nu,TextField:Go,PasswordField:Su,Appearance:ot};ct.AcroForm;function s1(r){return r.reduce(function(e,t,s){return e[t]=s,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=r.__addimage__.getImageFileTypeByImageData=function(U,q){var D,G,ge,ae,we,ie=t;if((q=q||t)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(B(U))for(we in s)for(ge=s[we],D=0;D<ge.length;D+=1){for(ae=!0,G=0;G<ge[D].length;G+=1)if(ge[D][G]!==void 0&&ge[D][G]!==U[G]){ae=!1;break}if(ae===!0){ie=we;break}}else for(we in s)for(ge=s[we],D=0;D<ge.length;D+=1){for(ae=!0,G=0;G<ge[D].length;G+=1)if(ge[D][G]!==void 0&&ge[D][G]!==U.charCodeAt(G)){ae=!1;break}if(ae===!0){ie=we;break}}return ie===t&&q!==t&&(ie=q),ie},o=function U(q){for(var D=this.internal.write,G=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:q.width}),ae.push({key:"Height",value:q.height}),q.colorSpace===L.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===L.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var we="",ie=0,ne=q.transparency.length;ie<ne;ie++)we+=q.transparency[ie]+" "+q.transparency[ie]+" ";ae.push({key:"Mask",value:"["+we+"]"})}q.sMask!==void 0&&ae.push({key:"SMask",value:q.objectId+1+" 0 R"});var ve=q.filter!==void 0?["/"+q.filter]:void 0;if(G({data:q.data,additionalKeyValues:ae,alreadyAppliedFilters:ve,objectId:q.objectId}),D("endobj"),"sMask"in q&&q.sMask!==void 0){var V,P=(V=q.sMaskBitsPerComponent)!==null&&V!==void 0?V:q.bitsPerComponent,K={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:q.sMask};"filter"in q&&(K.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(q.width),K.filter=q.filter),U.call(this,K)}if(q.colorSpace===L.INDEXED){var ee=this.internal.newObject();G({data:Y(new Uint8Array(q.palette)),objectId:ee}),D("endobj")}},u=function(){var U=this.internal.collections[e+"images"];for(var q in U)o.call(this,U[q])},d=function(){var U,q=this.internal.collections[e+"images"],D=this.internal.write;for(var G in q)D("/I"+(U=q[G]).index,U.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",d))},g=function(){var U=this.internal.collections[e+"images"];return h.call(this),U},v=function(){return Object.keys(this.internal.collections[e+"images"]).length},_=function(U){return typeof r["process"+U.toUpperCase()]=="function"},N=function(U){return gr(U)==="object"&&U.nodeType===1},y=function(U,q){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var D=""+U.getAttribute("src");if(D.indexOf("data:image/")===0)return Rd(unescape(D).split("base64,").pop());var G=r.loadFile(D,!0);if(G!==void 0)return G}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var ge;switch(q){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return Rd(U.toDataURL(ge,1).split("base64,").pop())}},k=function(U){var q=this.internal.collections[e+"images"];if(q){for(var D in q)if(U===q[D].alias)return q[D]}},A=function(U,q,D){return U||q||(U=-96,q=-96),U<0&&(U=-1*D.width*72/U/this.internal.scaleFactor),q<0&&(q=-1*D.height*72/q/this.internal.scaleFactor),U===0&&(U=q*D.width/D.height),q===0&&(q=U*D.height/D.width),[U,q]},C=function(U,q,D,G,ge,ae){var we=A.call(this,D,G,ge),ie=this.internal.getCoordinateString,ne=this.internal.getVerticalCoordinateString,ve=g.call(this);if(D=we[0],G=we[1],ve[ge.index]=ge,ae){ae*=Math.PI/180;var V=Math.cos(ae),P=Math.sin(ae),K=function(le){return le.toFixed(4)},ee=[K(V),K(P),K(-1*P),K(V),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,ie(U),ne(q+G),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([ie(D),"0","0",ie(G),"0","0","cm"].join(" "))):this.internal.write([ie(D),"0","0",ie(G),ie(U),ne(q+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},L=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var R=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=r.__addimage__.sHashCode=function(U){var q,D,G=0;if(typeof U=="string")for(D=U.length,q=0;q<D;q++)G=(G<<5)-G+U.charCodeAt(q),G|=0;else if(B(U))for(D=U.byteLength/2,q=0;q<D;q++)G=(G<<5)-G+U[q],G|=0;return G},T=r.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var q=!0;return U.length===0&&(q=!1),U.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(q=!1),q},te=r.__addimage__.extractImageFromDataUrl=function(U){if(U==null||!(U=U.trim()).startsWith("data:"))return null;var q=U.indexOf(",");return q<0?null:U.substring(0,q).trim().endsWith("base64")?U.substring(q+1):null};r.__addimage__.isArrayBuffer=function(U){return U instanceof ArrayBuffer};var B=r.__addimage__.isArrayBufferView=function(U){return U instanceof Int8Array||U instanceof Uint8Array||U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array},H=r.__addimage__.binaryStringToUint8Array=function(U){for(var q=U.length,D=new Uint8Array(q),G=0;G<q;G++)D[G]=U.charCodeAt(G);return D},Y=r.__addimage__.arrayBufferToBinaryString=function(U){for(var q="",D=B(U)?U:new Uint8Array(U),G=0;G<D.length;G+=8192)q+=String.fromCharCode.apply(null,D.subarray(G,G+8192));return q};r.addImage=function(){var U,q,D,G,ge,ae,we,ie,ne;if(typeof arguments[1]=="number"?(q=t,D=arguments[1],G=arguments[2],ge=arguments[3],ae=arguments[4],we=arguments[5],ie=arguments[6],ne=arguments[7]):(q=arguments[1],D=arguments[2],G=arguments[3],ge=arguments[4],ae=arguments[5],we=arguments[6],ie=arguments[7],ne=arguments[8]),gr(U=arguments[0])==="object"&&!N(U)&&"imageData"in U){var ve=U;U=ve.imageData,q=ve.format||q||t,D=ve.x||D||0,G=ve.y||G||0,ge=ve.w||ve.width||ge,ae=ve.h||ve.height||ae,we=ve.alias||we,ie=ve.compression||ie,ne=ve.rotation||ve.angle||ne}var V=this.internal.getFilters();if(ie===void 0&&V.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(D)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var P=J.call(this,U,q,we,ie);return C.call(this,D,G,ge,ae,P,ne),this};var J=function(U,q,D,G){var ge,ae,we;if(typeof U=="string"&&a(U)===t){U=unescape(U);var ie=he(U,!1);(ie!==""||(ie=r.loadFile(U,!0))!==void 0)&&(U=ie)}if(N(U)&&(U=y(U,q)),q=a(U,q),!_(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((we=D)==null||we.length===0)&&(D=(function(ne){return typeof ne=="string"||B(ne)?E(ne):B(ne.data)?E(ne.data):null})(U)),(ge=k.call(this,D))||(U instanceof Uint8Array||q==="RGBA"||(ae=U,U=H(U)),ge=this["process"+q.toUpperCase()](U,v.call(this),D,(function(ne){return ne&&typeof ne=="string"&&(ne=ne.toUpperCase()),ne in r.image_compression?ne:R.NONE})(G),ae)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},he=r.__addimage__.convertBase64ToBinaryString=function(U,q){q=typeof q!="boolean"||q;var D,G="";if(typeof U=="string"){var ge;D=(ge=te(U))!==null&&ge!==void 0?ge:U;try{G=Rd(D)}catch(ae){if(q)throw T(D)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};r.getImageProperties=function(U){var q,D,G="";if(N(U)&&(U=y(U)),typeof U=="string"&&a(U)===t&&((G=he(U,!1))===""&&(G=r.loadFile(U)||""),U=G),D=a(U),!_(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(U instanceof Uint8Array||(U=H(U)),!(q=this["process"+D.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=D,q}})(ct.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};ct.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var s,a,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),g=t.pageContext.annotations,v=!1,_=0;_<g.length&&!v;_++)switch((s=g[_]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var N=0;N<g.length;N++){s=g[N];var y=this.internal.pdfEscape,k=this.internal.getEncryptor(t.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var A=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(A.objId),R=s.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y)+"] ")+"/Contents ("+y(L(s.contents))+")",o+=" /Popup "+C.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+y(L(R))+") >>",A.content=o;var E=A.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+u(s.bounds.x+30)+" "+d(s.bounds.y+s.bounds.h)+" "+u(s.bounds.x+s.bounds.w+30)+" "+d(s.bounds.y)+"] ")+" /Parent "+E,s.open&&(o+=" /Open true"),o+=" >>",C.content=o,this.internal.write(A.objId,"0 R",C.objId,"0 R");break;case"freetext":a="/Rect ["+u(s.bounds.x)+" "+d(s.bounds.y)+" "+u(s.bounds.x+s.bounds.w)+" "+d(s.bounds.y+s.bounds.h)+"] ";var T=s.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+y(k(s.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(s.options.name){var te=this.annotations._nameMap[s.options.name];s.options.pageNumber=te.page,s.options.top=te.y}else s.options.top||(s.options.top=0);if(a="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",o="",s.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+y(k(s.options.url))+") >>";else if(s.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,o+=" /FitV "+s.options.left+"]";break;default:var B=d(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),o+=" /XYZ "+s.options.left+" "+B+" "+s.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var s=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":s.pageContext.annotations.push(t)}},r.link=function(t,s,a,o,u){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:g(s),w:h(t+a),h:g(s+o)},options:u,type:"link"})},r.textWithLink=function(t,s,a,o){var u,d,h=this.getTextWidth(t),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var v=this.splitTextToSize(t,d).length;u=Math.ceil(g*v)}else d=h,u=g;return this.text(t,s,a,o),a+=.2*g,o.align==="center"&&(s-=h/2),o.align==="right"&&(s-=h),this.link(s,a-g,d,u,o),h},r.getTextWidth=function(t){var s=this.internal.getFontSize();return this.getStringUnitWidth(t)*s/this.internal.scaleFactor}})(ct.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];r.__arabicParser__={};var o=r.__arabicParser__.isInArabicSubstitutionA=function(A){return e[A.charCodeAt(0)]!==void 0},u=r.__arabicParser__.isArabicLetter=function(A){return typeof A=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(A)},d=r.__arabicParser__.isArabicEndLetter=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length<=2},h=r.__arabicParser__.isArabicAlfLetter=function(A){return u(A)&&a.indexOf(A.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=1};var g=r.__arabicParser__.arabicLetterHasFinalForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length>=3};var v=r.__arabicParser__.arabicLetterHasMedialForm=function(A){return u(A)&&o(A)&&e[A.charCodeAt(0)].length==4},_=r.__arabicParser__.resolveLigatures=function(A){var C=0,L=t,R="",E=0;for(C=0;C<A.length;C+=1)L[A.charCodeAt(C)]!==void 0?(E++,typeof(L=L[A.charCodeAt(C)])=="number"&&(R+=String.fromCharCode(L),L=t,E=0),C===A.length-1&&(L=t,R+=A.charAt(C-(E-1)),C-=E-1,E=0)):(L=t,R+=A.charAt(C-E),C-=E,E=0);return R};r.__arabicParser__.isArabicDiacritic=function(A){return A!==void 0&&s[A.charCodeAt(0)]!==void 0};var N=r.__arabicParser__.getCorrectForm=function(A,C,L){return u(A)?o(A)===!1?-1:!g(A)||!u(C)&&!u(L)||!u(L)&&d(C)||d(A)&&!u(C)||d(A)&&h(C)||d(A)&&d(C)?0:v(A)&&u(C)&&!d(C)&&u(L)&&g(L)?3:d(A)||!u(L)?1:2:-1},y=function(A){var C=0,L=0,R=0,E="",T="",te="",B=(A=A||"").split("\\s+"),H=[];for(C=0;C<B.length;C+=1){for(H.push(""),L=0;L<B[C].length;L+=1)E=B[C][L],T=B[C][L-1],te=B[C][L+1],u(E)?(R=N(E,T,te),H[C]+=R!==-1?String.fromCharCode(e[E.charCodeAt(0)][R]):E):H[C]+=E;H[C]=_(H[C])}return H.join(" ")},k=r.__arabicParser__.processArabic=r.processArabic=function(){var A,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(C)){var R=0;for(L=[],R=0;R<C.length;R+=1)Array.isArray(C[R])?L.push([y(C[R][0]),C[R][1],C[R][2]]):L.push([y(C[R])]);A=L}else A=y(C);return typeof arguments[0]=="string"?A:(arguments[0].text=A,arguments[0])};r.events.push(["preProcessText",k])})(ct.API),ct.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(d){a=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,s){var a;if((t=t||"2d")!=="2d")return null;for(a in s)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=s[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(ct.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(A){h=A}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(A){g=A}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(A){v=A}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(A){_=A}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(A){N=A}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(A){y=A}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(A){k=A}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(h){return s.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},r.getTextDimensions=function(h,g){s.call(this);var v=(g=g||{}).fontSize||this.getFontSize(),_=g.font||this.getFont(),N=g.scaleFactor||this.internal.scaleFactor,y=0,k=0,A=0,C=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var L=g.maxWidth;L>0?typeof h=="string"?h=this.splitTextToSize(h,L):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(E,T){return E.concat(C.splitTextToSize(T,L))},[])):h=Array.isArray(h)?h:[h];for(var R=0;R<h.length;R++)y<(A=this.getStringUnitWidth(h[R],{font:_})*v)&&(y=A);return y!==0&&(k=h.length),{w:y/=N,h:Math.max((k*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/N,0)}},r.cellAddPage=function(){s.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=r.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),s.call(this);var g=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,_=this.internal.__cell__.margins||e,N=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===h.lineNumber?(h.x=(g.x||0)+(g.width||0),h.y=g.y||0):g.y+g.height+h.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=_.top,y&&N&&(this.printHeaderRow(h.lineNumber,!0),h.y+=N[0].height)):h.y=g.y+g.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-v,h.y+v,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+v,{align:"center",baseline:"top",maxWidth:h.width-v-v}):this.text(h.text,h.x+v,h.y+v,{align:"left",baseline:"top",maxWidth:h.width-v-v})),this.internal.__cell__.lastCell=h,this};r.table=function(h,g,v,_,N){if(s.call(this),!v)throw new Error("No data for PDF table.");var y,k,A,C,L=[],R=[],E=[],T={},te={},B=[],H=[],Y=(N=N||{}).autoSize||!1,J=N.printHeaders!==!1,he=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,U=N.margins||Object.assign({width:this.getPageWidth()},e),q=typeof N.padding=="number"?N.padding:3,D=N.headerBackgroundColor||"#c8c8c8",G=N.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=G,this.setFontSize(he),_==null)R=L=Object.keys(v[0]),E=L.map(function(){return"left"});else if(Array.isArray(_)&&gr(_[0])==="object")for(L=_.map(function(ve){return ve.name}),R=_.map(function(ve){return ve.prompt||ve.name||""}),E=_.map(function(ve){return ve.align||"left"}),y=0;y<_.length;y+=1)te[_[y].name]=.7499990551181103*_[y].width;else Array.isArray(_)&&typeof _[0]=="string"&&(R=L=_,E=L.map(function(){return"left"}));if(Y||Array.isArray(_)&&typeof _[0]=="string")for(y=0;y<L.length;y+=1){for(T[C=L[y]]=v.map(function(ve){return ve[C]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(R[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=T[C],this.setFont(void 0,"normal"),A=0;A<k.length;A+=1)B.push(this.getTextDimensions(k[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[C]=Math.max.apply(null,B)+q+q,B=[]}if(J){var ge={};for(y=0;y<L.length;y+=1)ge[L[y]]={},ge[L[y]].text=R[y],ge[L[y]].align=E[y];var ae=d.call(this,ge,te);H=L.map(function(ve){return new o(h,g,te[ve],ae,ge[ve].text,void 0,ge[ve].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var we=_.reduce(function(ve,V){return ve[V.name]=V.align,ve},{});for(y=0;y<v.length;y+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:y,data:v[y]},this);var ie=d.call(this,v[y],te);for(A=0;A<L.length;A+=1){var ne=v[y][L[A]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:y,col:A,data:ne},this),u.call(this,new o(h,g,te[L[A]],ie,ne,y+2,we[L[A]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=g,this};var d=function(h,g){var v=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(h).map(function(y){var k=h[y];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,g[y]-v-v)},this).map(function(y){return this.getLineHeightFactor()*y.length*_/N+v+v},this).reduce(function(y,k){return Math.max(y,k)},0)};r.setTableHeaderRow=function(h){s.call(this),this.internal.__cell__.tableHeaderRow=h},r.printHeaderRow=function(h,g){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){v=this.internal.__cell__.tableHeaderRow[y].clone(),g&&(v.y=this.internal.__cell__.margins.top||0,N.push(v)),v.lineNumber=h;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,v),this.setTextColor(k)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),t=!1}})(ct.API);var i1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},a1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Vf=s1(a1),o1=[100,200,300,400,500,600,700,800,900],Ew=s1(o1);function mf(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return i1[o=o||"normal"]?o:"normal"})(r.style),s=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(r.weight),a=(function(o){return typeof Vf[o=o||"normal"]=="number"?o:"normal"})(r.stretch);return{family:e,style:t,weight:s,stretch:a,src:r.src||[],ref:r.ref||{name:e,style:[a,t,s].join(" ")}}}function Dg(r,e,t,s){var a;for(a=t;a>=0&&a<e.length;a+=s)if(r[e[a]])return r[e[a]];for(a=t;a>=0&&a<e.length;a-=s)if(r[e[a]])return r[e[a]]}var Cw={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Fg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Bg(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Mg(r){return r.trimLeft()}function Pw(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Lw(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Pd,Ug,$g,kc,Ld,qg,zg,Wg,vf=["times"];function Hg(r,e,t,s,a){var o=4,u=Gg;switch(a){case ct.API.image_compression.FAST:o=1,u=Vg;break;case ct.API.image_compression.MEDIUM:o=6,u=Kg;break;case ct.API.image_compression.SLOW:o=9,u=Jg}r=(function(h,g,v,_){for(var N,y=h.length/g,k=new Uint8Array(h.length+y),A=[Tw,Vg,Gg,Kg,Jg],C=0;C<y;C+=1){var L=C*g,R=h.subarray(L,L+g);if(_)k.set(_(R,v,N),L+C);else{for(var E=A.length,T=[],te=0;te<E;te+=1)T[te]=A[te](R,v,N);var B=Iw(T.concat());k.set(T[B],L+C)}N=R}return k})(r,e,Math.ceil(t*s/8),u);var d=Mf(r,{level:o});return ct.API.__addimage__.arrayBufferToBinaryString(d)}function Tw(r){var e=Array.apply([],r);return e.unshift(0),e}function Vg(r,e){var t=r.length,s=[];s[0]=1;for(var a=0;a<t;a+=1){var o=r[a-e]||0;s[a+1]=r[a]-o+256&255}return s}function Gg(r,e,t){var s=r.length,a=[];a[0]=2;for(var o=0;o<s;o+=1){var u=t&&t[o]||0;a[o+1]=r[o]-u+256&255}return a}function Kg(r,e,t){var s=r.length,a=[];a[0]=3;for(var o=0;o<s;o+=1){var u=r[o-e]||0,d=t&&t[o]||0;a[o+1]=r[o]+256-(u+d>>>1)&255}return a}function Jg(r,e,t){var s=r.length,a=[];a[0]=4;for(var o=0;o<s;o+=1){var u=Ow(r[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);a[o+1]=r[o]-u+256&255}return a}function Ow(r,e,t){if(r===e&&e===t)return r;var s=Math.abs(e-t),a=Math.abs(r-t),o=Math.abs(r+e-t-t);return s<=a&&s<=o?r:a<=o?e:t}function Iw(r){var e=r.map(function(t){return t.reduce(function(s,a){return s+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function yf(r,e,t){var s=e*t,a=Math.floor(s/8),o=16-(s-8*a+t),u=(1<<t)-1;return l1(r,a)>>o&u}function Yg(r,e,t,s){var a=t*s,o=Math.floor(a/8),u=16-(a-8*o+s),d=(1<<s)-1,h=(e&d)<<u;(function(g,v,_){if(v+1<g.byteLength)g.setUint16(v,_,!1);else{var N=_>>8&255;g.setUint8(v,N)}})(r,o,l1(r,o)&~(d<<u)&65535|h)}function l1(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function Rw(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,s=r[e++]|r[e++]<<8,a=r[e++],o=a>>7,u=1<<1+(7&a);r[e++],r[e++];var d=null,h=null;o&&(d=e,h=u,e+=3*u);var g=!0,v=[],_=0,N=null,y=0,k=null;for(this.width=t,this.height=s;g&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,k=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((U=r[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var A=r[e++];_=r[e++]|r[e++]<<8,N=r[e++],1&A||(N=null),y=A>>2&7,e++;break;case 254:for(;;){if(!((U=r[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var C=r[e++]|r[e++]<<8,L=r[e++]|r[e++]<<8,R=r[e++]|r[e++]<<8,E=r[e++]|r[e++]<<8,T=r[e++],te=T>>6&1,B=1<<1+(7&T),H=d,Y=h,J=!1;T>>7&&(J=!0,H=e,Y=B,e+=3*B);var he=e;for(e++;;){var U;if(!((U=r[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}v.push({x:C,y:L,width:R,height:E,has_local_palette:J,palette_offset:H,palette_size:Y,data_offset:he,data_length:e-he,transparent_index:N,interlaced:!!te,delay:_,disposal:y});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return k},this.frameInfo=function(q){if(q<0||q>=v.length)throw new Error("Frame index out of range.");return v[q]},this.decodeAndBlitFrameBGRA=function(q,D){var G=this.frameInfo(q),ge=G.width*G.height,ae=new Uint8Array(ge);Xg(r,G.data_offset,ae,ge);var we=G.palette_offset,ie=G.transparent_index;ie===null&&(ie=256);var ne=G.width,ve=t-ne,V=ne,P=4*(G.y*t+G.x),K=4*((G.y+G.height)*t+G.x),ee=P,le=4*ve;G.interlaced===!0&&(le+=4*t*7);for(var ue=8,se=0,ce=ae.length;se<ce;++se){var me=ae[se];if(V===0&&(V=ne,(ee+=le)>=K&&(le=4*ve+4*t*(ue-1),ee=P+(ne+ve)*(ue<<1),ue>>=1)),me===ie)ee+=4;else{var Ne=r[we+3*me],Ie=r[we+3*me+1],He=r[we+3*me+2];D[ee++]=He,D[ee++]=Ie,D[ee++]=Ne,D[ee++]=255}--V}},this.decodeAndBlitFrameRGBA=function(q,D){var G=this.frameInfo(q),ge=G.width*G.height,ae=new Uint8Array(ge);Xg(r,G.data_offset,ae,ge);var we=G.palette_offset,ie=G.transparent_index;ie===null&&(ie=256);var ne=G.width,ve=t-ne,V=ne,P=4*(G.y*t+G.x),K=4*((G.y+G.height)*t+G.x),ee=P,le=4*ve;G.interlaced===!0&&(le+=4*t*7);for(var ue=8,se=0,ce=ae.length;se<ce;++se){var me=ae[se];if(V===0&&(V=ne,(ee+=le)>=K&&(le=4*ve+4*t*(ue-1),ee=P+(ne+ve)*(ue<<1),ue>>=1)),me===ie)ee+=4;else{var Ne=r[we+3*me],Ie=r[we+3*me+1],He=r[we+3*me+2];D[ee++]=Ne,D[ee++]=Ie,D[ee++]=He,D[ee++]=255}--V}}}function Xg(r,e,t,s){for(var a=r[e++],o=1<<a,u=o+1,d=u+1,h=a+1,g=(1<<h)-1,v=0,_=0,N=0,y=r[e++],k=new Int32Array(4096),A=null;;){for(;v<16&&y!==0;)_|=r[e++]<<v,v+=8,y===1?y=r[e++]:--y;if(v<h)break;var C=_&g;if(_>>=h,v-=h,C!==o){if(C===u)break;for(var L=C<d?C:A,R=0,E=L;E>o;)E=k[E]>>8,++R;var T=E;if(N+R+(L!==C?1:0)>s)return void _r.log("Warning, gif stream longer than expected.");t[N++]=T;var te=N+=R;for(L!==C&&(t[N++]=T),E=L;R--;)E=k[E],t[--te]=255&E,E>>=8;A!==null&&d<4096&&(k[d++]=A<<8|T,d>=g+1&&h<12&&(++h,g=g<<1|1)),A=C}else d=u+1,g=(1<<(h=a+1))-1,A=null}return N!==s&&_r.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function xf(r){var e,t,s,a,o,u=Math.floor,d=new Array(64),h=new Array(64),g=new Array(64),v=new Array(64),_=new Array(65535),N=new Array(65535),y=new Array(64),k=new Array(64),A=[],C=0,L=7,R=new Array(64),E=new Array(64),T=new Array(64),te=new Array(256),B=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(P,K){for(var ee=0,le=0,ue=new Array,se=1;se<=16;se++){for(var ce=1;ce<=P[se];ce++)ue[K[le]]=[],ue[K[le]][0]=ee,ue[K[le]][1]=se,le++,ee++;ee*=2}return ue}function we(P){for(var K=P[0],ee=P[1]-1;ee>=0;)K&1<<ee&&(C|=1<<L),ee--,--L<0&&(C==255?(ie(255),ie(0)):ie(C),L=7,C=0)}function ie(P){A.push(P)}function ne(P){ie(P>>8&255),ie(255&P)}function ve(P,K,ee,le,ue){for(var se,ce=ue[0],me=ue[240],Ne=(function(qe,pt){var Qe,vt,gt,Jt,zt,Lt,Wt,Ae,Be,Ue,Ge=0;for(Be=0;Be<8;++Be){Qe=qe[Ge],vt=qe[Ge+1],gt=qe[Ge+2],Jt=qe[Ge+3],zt=qe[Ge+4],Lt=qe[Ge+5],Wt=qe[Ge+6];var Ze=Qe+(Ae=qe[Ge+7]),At=Qe-Ae,yt=vt+Wt,qt=vt-Wt,mr=gt+Lt,wt=gt-Lt,ar=Jt+zt,_t=Jt-zt,It=Ze+ar,sr=Ze-ar,Bt=yt+mr,Nt=yt-mr;qe[Ge]=It+Bt,qe[Ge+4]=It-Bt;var Qt=.707106781*(Nt+sr);qe[Ge+2]=sr+Qt,qe[Ge+6]=sr-Qt;var Gi=.382683433*((It=_t+wt)-(Nt=qt+At)),mn=.5411961*It+Gi,ti=1.306562965*Nt+Gi,ps=.707106781*(Bt=wt+qt),St=At+ps,ts=At-ps;qe[Ge+5]=ts+mn,qe[Ge+3]=ts-mn,qe[Ge+1]=St+ti,qe[Ge+7]=St-ti,Ge+=8}for(Ge=0,Be=0;Be<8;++Be){Qe=qe[Ge],vt=qe[Ge+8],gt=qe[Ge+16],Jt=qe[Ge+24],zt=qe[Ge+32],Lt=qe[Ge+40],Wt=qe[Ge+48];var Ts=Qe+(Ae=qe[Ge+56]),kn=Qe-Ae,gs=vt+Wt,vr=vt-Wt,Dr=gt+Lt,Hr=gt-Lt,wi=Jt+zt,Ki=Jt-zt,Os=Ts+wi,ri=Ts-wi,vn=gs+Dr,ms=gs-Dr;qe[Ge]=Os+vn,qe[Ge+32]=Os-vn;var rs=.707106781*(ms+ri);qe[Ge+16]=ri+rs,qe[Ge+48]=ri-rs;var va=.382683433*((Os=Ki+Hr)-(ms=vr+kn)),Is=.5411961*Os+va,Ji=1.306562965*ms+va,ya=.707106781*(vn=Hr+vr),xa=kn+ya,ro=kn-ya;qe[Ge+40]=ro+Is,qe[Ge+24]=ro-Is,qe[Ge+8]=xa+Ji,qe[Ge+56]=xa-Ji,Ge++}for(Be=0;Be<64;++Be)Ue=qe[Be]*pt[Be],y[Be]=Ue>0?Ue+.5|0:Ue-.5|0;return y})(P,K),Ie=0;Ie<64;++Ie)k[H[Ie]]=Ne[Ie];var He=k[0]-ee;ee=k[0],He==0?we(le[0]):(we(le[N[se=32767+He]]),we(_[se]));for(var Me=63;Me>0&&k[Me]==0;)Me--;if(Me==0)return we(ce),ee;for(var Xe,X=1;X<=Me;){for(var Ye=X;k[X]==0&&X<=Me;)++X;var dt=X-Ye;if(dt>=16){Xe=dt>>4;for(var bt=1;bt<=Xe;++bt)we(me);dt&=15}se=32767+k[X],we(ue[(dt<<4)+N[se]]),we(_[se]),X++}return Me!=63&&we(ce),ee}function V(P){P=Math.min(Math.max(P,1),100),o!=P&&((function(K){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var ue=u((ee[le]*K+50)/100);ue=Math.min(Math.max(ue,1),255),d[H[le]]=ue}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var me=u((se[ce]*K+50)/100);me=Math.min(Math.max(me,1),255),h[H[ce]]=me}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,He=0;He<8;He++)for(var Me=0;Me<8;Me++)g[Ie]=1/(d[H[Ie]]*Ne[He]*Ne[Me]*8),v[Ie]=1/(h[H[Ie]]*Ne[He]*Ne[Me]*8),Ie++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),o=P)}this.encode=function(P,K){K&&V(K),A=new Array,C=0,L=7,ne(65496),ne(65504),ne(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),ne(1),ne(1),ie(0),ie(0),(function(){ne(65499),ne(132),ie(0);for(var vt=0;vt<64;vt++)ie(d[vt]);ie(1);for(var gt=0;gt<64;gt++)ie(h[gt])})(),(function(vt,gt){ne(65472),ne(17),ie(8),ne(gt),ne(vt),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)})(P.width,P.height),(function(){ne(65476),ne(418),ie(0);for(var vt=0;vt<16;vt++)ie(Y[vt+1]);for(var gt=0;gt<=11;gt++)ie(J[gt]);ie(16);for(var Jt=0;Jt<16;Jt++)ie(he[Jt+1]);for(var zt=0;zt<=161;zt++)ie(U[zt]);ie(1);for(var Lt=0;Lt<16;Lt++)ie(q[Lt+1]);for(var Wt=0;Wt<=11;Wt++)ie(D[Wt]);ie(17);for(var Ae=0;Ae<16;Ae++)ie(G[Ae+1]);for(var Be=0;Be<=161;Be++)ie(ge[Be])})(),ne(65498),ne(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var ee=0,le=0,ue=0;C=0,L=7,this.encode.displayName="_encode_";for(var se,ce,me,Ne,Ie,He,Me,Xe,X,Ye=P.data,dt=P.width,bt=P.height,qe=4*dt,pt=0;pt<bt;){for(se=0;se<qe;){for(Ie=qe*pt+se,Me=-1,Xe=0,X=0;X<64;X++)He=Ie+(Xe=X>>3)*qe+(Me=4*(7&X)),pt+Xe>=bt&&(He-=qe*(pt+1+Xe-bt)),se+Me>=qe&&(He-=se+Me-qe+4),ce=Ye[He++],me=Ye[He++],Ne=Ye[He++],R[X]=(B[ce]+B[me+256|0]+B[Ne+512|0]>>16)-128,E[X]=(B[ce+768|0]+B[me+1024|0]+B[Ne+1280|0]>>16)-128,T[X]=(B[ce+1280|0]+B[me+1536|0]+B[Ne+1792|0]>>16)-128;ee=ve(R,g,ee,e,s),le=ve(E,v,le,t,a),ue=ve(T,v,ue,t,a),se+=32}pt+=8}if(L>=0){var Qe=[];Qe[1]=L+1,Qe[0]=(1<<L+1)-1,we(Qe)}return ne(65497),new Uint8Array(A)},r=r||50,(function(){for(var P=String.fromCharCode,K=0;K<256;K++)te[K]=P(K)})(),e=ae(Y,J),t=ae(q,D),s=ae(he,U),a=ae(G,ge),(function(){for(var P=1,K=2,ee=1;ee<=15;ee++){for(var le=P;le<K;le++)N[32767+le]=ee,_[32767+le]=[],_[32767+le][1]=ee,_[32767+le][0]=le;for(var ue=-(K-1);ue<=-P;ue++)N[32767+ue]=ee,_[32767+ue]=[],_[32767+ue][1]=ee,_[32767+ue][0]=K-1+ue;P<<=1,K<<=1}})(),(function(){for(var P=0;P<256;P++)B[P]=19595*P,B[P+256|0]=38470*P,B[P+512|0]=7471*P+32768,B[P+768|0]=-11059*P,B[P+1024|0]=-21709*P,B[P+1280|0]=32768*P+8421375,B[P+1536|0]=-27439*P,B[P+1792|0]=-5329*P})(),V(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Mi(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Qg(r){function e(J){if(!J)throw Error("assert :P")}function t(J,he,U){for(var q=0;4>q;q++)if(J[he+q]!=U.charCodeAt(q))return!0;return!1}function s(J,he,U,q,D){for(var G=0;G<D;G++)J[he+G]=U[q+G]}function a(J,he,U,q){for(var D=0;D<q;D++)J[he+D]=U}function o(J){return new Int32Array(J)}function u(J,he){for(var U=[],q=0;q<J;q++)U.push(new he);return U}function d(J,he){var U=[];return(function q(D,G,ge){for(var ae=ge[G],we=0;we<ae&&(D.push(ge.length>G+1?[]:new he),!(ge.length<G+1));we++)q(D[we],G+1,ge)})(U,0,J),U}var h=function(){var J=this;function he(f,m){for(var b=1<<m-1>>>0;f&b;)b>>>=1;return b?(f&b-1)+b:f}function U(f,m,b,j,O){e(!(j%b));do f[m+(j-=b)]=O;while(0<j)}function q(f,m,b,j,O){if(e(2328>=O),512>=O)var M=o(512);else if((M=o(O))==null)return 0;return(function($,z,W,Q,fe,Se){var Z,ye,_e=z,Oe=1<<W,je=o(16),Le=o(16);for(e(fe!=0),e(Q!=null),e($!=null),e(0<W),ye=0;ye<fe;++ye){if(15<Q[ye])return 0;++je[Q[ye]]}if(je[0]==fe)return 0;for(Le[1]=0,Z=1;15>Z;++Z){if(je[Z]>1<<Z)return 0;Le[Z+1]=Le[Z]+je[Z]}for(ye=0;ye<fe;++ye)Z=Q[ye],0<Q[ye]&&(Se[Le[Z]++]=ye);if(Le[15]==1)return(Q=new D).g=0,Q.value=Se[0],U($,_e,1,Oe,Q),Oe;var Te,De=-1,Fe=Oe-1,ft=0,rt=1,Mt=1,at=1<<W;for(ye=0,Z=1,fe=2;Z<=W;++Z,fe<<=1){if(rt+=Mt<<=1,0>(Mt-=je[Z]))return 0;for(;0<je[Z];--je[Z])(Q=new D).g=Z,Q.value=Se[ye++],U($,_e+ft,fe,at,Q),ft=he(ft,Z)}for(Z=W+1,fe=2;15>=Z;++Z,fe<<=1){if(rt+=Mt<<=1,0>(Mt-=je[Z]))return 0;for(;0<je[Z];--je[Z]){if(Q=new D,(ft&Fe)!=De){for(_e+=at,Te=1<<(De=Z)-W;15>De&&!(0>=(Te-=je[De]));)++De,Te<<=1;Oe+=at=1<<(Te=De-W),$[z+(De=ft&Fe)].g=Te+W,$[z+De].value=_e-z-De}Q.g=Z-W,Q.value=Se[ye++],U($,_e+(ft>>W),fe,at,Q),ft=he(ft,Z)}}return rt!=2*Le[15]-1?0:Oe})(f,m,b,j,O,M)}function D(){this.value=this.g=0}function G(){this.value=this.g=0}function ge(){this.G=u(5,D),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Ns,G)}function ae(f,m,b,j){e(f!=null),e(m!=null),e(2147483648>j),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=m,f.pa=b,f.Jd=m,f.Yc=b+j,f.Zc=4<=j?b+j-4+1:b,ce(f)}function we(f,m){for(var b=0;0<m--;)b|=Ne(f,128)<<m;return b}function ie(f,m){var b=we(f,m);return me(f)?-b:b}function ne(f,m,b,j){var O,M=0;for(e(f!=null),e(m!=null),e(4294967288>j),f.Sb=j,f.Ra=0,f.u=0,f.h=0,4<j&&(j=4),O=0;O<j;++O)M+=m[b+O]<<8*O;f.Ra=M,f.bb=j,f.oa=m,f.pa=b}function ve(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<na-8>>>0,++f.bb,f.u-=8;le(f)&&(f.h=1,f.u=0)}function V(f,m){if(e(0<=m),!f.h&&m<=cs){var b=ee(f)&ls[m];return f.u+=m,ve(f),b}return f.h=1,f.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ee(f){return f.Ra>>>(f.u&na-1)>>>0}function le(f){return e(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>na}function ue(f,m){f.u=m,f.h=le(f)}function se(f){f.u>=ci&&(e(f.u>=ci),ve(f))}function ce(f){e(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(e(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function me(f){return we(f,1)}function Ne(f,m){var b=f.Ca;0>f.b&&ce(f);var j=f.b,O=b*m>>>8,M=(f.I>>>j>O)+0;for(M?(b-=O,f.I-=O+1<<j>>>0):b=O+1,j=b,O=0;256<=j;)O+=8,j>>=8;return j=7^O+ji[j],f.b-=j,f.Ca=(b<<j)-1,M}function Ie(f,m,b){f[m+0]=b>>24&255,f[m+1]=b>>16&255,f[m+2]=b>>8&255,f[m+3]=255&b}function He(f,m){return f[m+0]|f[m+1]<<8}function Me(f,m){return He(f,m)|f[m+2]<<16}function Xe(f,m){return He(f,m)|He(f,m+2)<<16}function X(f,m){var b=1<<m;return e(f!=null),e(0<m),f.X=o(b),f.X==null?0:(f.Mb=32-m,f.Xa=m,1)}function Ye(f,m){e(f!=null),e(m!=null),e(f.Xa==m.Xa),s(m.X,0,f.X,0,1<<m.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function bt(f,m,b,j){e(b!=null),e(j!=null);var O=b[0],M=j[0];return O==0&&(O=(f*M+m/2)/m),M==0&&(M=(m*O+f/2)/f),0>=O||0>=M?0:(b[0]=O,j[0]=M,1)}function qe(f,m){return f+(1<<m)-1>>>m}function pt(f,m){return((4278255360&f)+(4278255360&m)>>>0&4278255360)+((16711935&f)+(16711935&m)>>>0&16711935)>>>0}function Qe(f,m){J[m]=function(b,j,O,M,$,z,W){var Q;for(Q=0;Q<$;++Q){var fe=J[f](z[W+Q-1],O,M+Q);z[W+Q]=pt(b[j+Q],fe)}}}function vt(){this.ud=this.hd=this.jd=0}function gt(f,m){return((4278124286&(f^m))>>>1)+(f&m)>>>0}function Jt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function zt(f,m){return Jt(f+(f-m+.5>>1))}function Lt(f,m,b){return Math.abs(m-b)-Math.abs(f-b)}function Wt(f,m,b,j,O,M,$){for(j=M[$-1],b=0;b<O;++b)M[$+b]=j=pt(f[m+b],j)}function Ae(f,m,b,j,O){var M;for(M=0;M<b;++M){var $=f[m+M],z=$>>8&255,W=16711935&(W=(W=16711935&$)+((z<<16)+z));j[O+M]=(4278255360&$)+W>>>0}}function Be(f,m){m.jd=255&f,m.hd=f>>8&255,m.ud=f>>16&255}function Ue(f,m,b,j,O,M){var $;for($=0;$<j;++$){var z=m[b+$],W=z>>>8,Q=z,fe=255&(fe=(fe=z>>>16)+((f.jd<<24>>24)*(W<<24>>24)>>>5));Q=255&(Q=(Q+=(f.hd<<24>>24)*(W<<24>>24)>>>5)+((f.ud<<24>>24)*(fe<<24>>24)>>>5)),O[M+$]=(4278255360&z)+(fe<<16)+Q}}function Ge(f,m,b,j,O){J[m]=function(M,$,z,W,Q,fe,Se,Z,ye){for(W=Se;W<Z;++W)for(Se=0;Se<ye;++Se)Q[fe++]=O(z[j(M[$++])])},J[f]=function(M,$,z,W,Q,fe,Se){var Z=8>>M.b,ye=M.Ea,_e=M.K[0],Oe=M.w;if(8>Z)for(M=(1<<M.b)-1,Oe=(1<<Z)-1;$<z;++$){var je,Le=0;for(je=0;je<ye;++je)je&M||(Le=j(W[Q++])),fe[Se++]=O(_e[Le&Oe]),Le>>=Z}else J["VP8LMapColor"+b](W,Q,_e,Oe,fe,Se,$,z,ye)}}function Ze(f,m,b,j,O){for(b=m+b;m<b;){var M=f[m++];j[O++]=M>>16&255,j[O++]=M>>8&255,j[O++]=255&M}}function At(f,m,b,j,O){for(b=m+b;m<b;){var M=f[m++];j[O++]=M>>16&255,j[O++]=M>>8&255,j[O++]=255&M,j[O++]=M>>24&255}}function yt(f,m,b,j,O){for(b=m+b;m<b;){var M=($=f[m++])>>16&240|$>>12&15,$=240&$|$>>28&15;j[O++]=M,j[O++]=$}}function qt(f,m,b,j,O){for(b=m+b;m<b;){var M=($=f[m++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;j[O++]=M,j[O++]=$}}function mr(f,m,b,j,O){for(b=m+b;m<b;){var M=f[m++];j[O++]=255&M,j[O++]=M>>8&255,j[O++]=M>>16&255}}function wt(f,m,b,j,O,M){if(M==0)for(b=m+b;m<b;)Ie(j,((M=f[m++])[0]>>24|M[1]>>8&65280|M[2]<<8&16711680|M[3]<<24)>>>0),O+=32;else s(j,O,f,m,b)}function ar(f,m){J[m][0]=J[f+"0"],J[m][1]=J[f+"1"],J[m][2]=J[f+"2"],J[m][3]=J[f+"3"],J[m][4]=J[f+"4"],J[m][5]=J[f+"5"],J[m][6]=J[f+"6"],J[m][7]=J[f+"7"],J[m][8]=J[f+"8"],J[m][9]=J[f+"9"],J[m][10]=J[f+"10"],J[m][11]=J[f+"11"],J[m][12]=J[f+"12"],J[m][13]=J[f+"13"],J[m][14]=J[f+"0"],J[m][15]=J[f+"0"]}function _t(f){return f==_o||f==qa||f==cl||f==ul}function It(){this.eb=[],this.size=this.A=this.fb=0}function sr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new It,this.f.kb=new sr,this.sd=null}function Nt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gi(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function mn(f,m){var b=f.T,j=m.ba.f.RGBA,O=j.eb,M=j.fb+f.ka*j.A,$=Hn[m.ba.S],z=f.y,W=f.O,Q=f.f,fe=f.N,Se=f.ea,Z=f.W,ye=m.cc,_e=m.dc,Oe=m.Mc,je=m.Nc,Le=f.ka,Te=f.ka+f.T,De=f.U,Fe=De+1>>1;for(Le==0?$(z,W,null,null,Q,fe,Se,Z,Q,fe,Se,Z,O,M,null,null,De):($(m.ec,m.fc,z,W,ye,_e,Oe,je,Q,fe,Se,Z,O,M-j.A,O,M,De),++b);Le+2<Te;Le+=2)ye=Q,_e=fe,Oe=Se,je=Z,fe+=f.Rc,Z+=f.Rc,M+=2*j.A,$(z,(W+=2*f.fa)-f.fa,z,W,ye,_e,Oe,je,Q,fe,Se,Z,O,M-j.A,O,M,De);return W+=f.fa,f.j+Te<f.o?(s(m.ec,m.fc,z,W,De),s(m.cc,m.dc,Q,fe,Fe),s(m.Mc,m.Nc,Se,Z,Fe),b--):1&Te||$(z,W,null,null,Q,fe,Se,Z,Q,fe,Se,Z,O,M+j.A,null,null,De),b}function ti(f,m,b){var j=f.F,O=[f.J];if(j!=null){var M=f.U,$=m.ba.S,z=$==ll||$==cl;m=m.ba.f.RGBA;var W=[0],Q=f.ka;W[0]=f.T,f.Kb&&(Q==0?--W[0]:(--Q,O[0]-=f.width),f.j+f.ka+f.T==f.o&&(W[0]=f.o-f.j-Q));var fe=m.eb;Q=m.fb+Q*m.A,f=al(j,O[0],f.width,M,W,fe,Q+(z?0:3),m.A),e(b==W),f&&_t($)&&$a(fe,Q,z,M,W,m.A)}return 0}function ps(f){var m=f.ma,b=m.ba.S,j=11>b,O=b==oa||b==ol||b==ll||b==ur||b==12||_t(b);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!go(m.Oa,f,O?11:12))return 0;if(O&&_t(b)&&La(),f.da)alert("todo:use_scaling");else{if(j){if(m.Ib=Gi,f.Kb){if(b=f.U+1>>1,m.memory=o(f.U+2*b),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+f.U,m.Mc=m.cc,m.Nc=m.dc+b,m.Ib=mn,La()}}else alert("todo:EmitYUV");O&&(m.Jb=ti,j&&Fs())}if(j&&!wn){for(f=0;256>f;++f)Vn[f]=89858*(f-128)+$s>>Pi,Gn[f]=-22014*(f-128)+$s,jo[f]=-45773*(f-128),Va[f]=113618*(f-128)+$s>>Pi;for(f=ir;f<lr;++f)m=76283*(f-16)+$s>>Pi,rc[f-ir]=Vr(m,255),zu[f-ir]=Vr(m+8>>4,15);wn=1}return 1}function St(f){var m=f.ma,b=f.U,j=f.T;return e(!(1&f.ka)),0>=b||0>=j?0:(b=m.Ib(f,m),m.Jb!=null&&m.Jb(f,m,b),m.Dc+=b,1)}function ts(f){f.ma.memory=null}function Ts(f,m,b,j){return V(f,8)!=47?0:(m[0]=V(f,14)+1,b[0]=V(f,14)+1,j[0]=V(f,1),V(f,3)!=0?0:!f.h)}function kn(f,m){if(4>f)return f+1;var b=f-2>>1;return(2+(1&f)<<b)+V(m,b)+1}function gs(f,m){return 120<m?m-120:1<=(b=((b=Xd[m-1])>>4)*f+(8-(15&b)))?b:1;var b}function vr(f,m,b){var j=ee(b),O=f[m+=255&j].g-8;return 0<O&&(ue(b,b.u+8),j=ee(b),m+=f[m].value,m+=j&(1<<O)-1),ue(b,b.u+f[m].g),f[m].value}function Dr(f,m,b){return b.g+=f.g,b.value+=f.value<<m>>>0,e(8>=b.g),f.g}function Hr(f,m,b){var j=f.xc;return e((m=j==0?0:f.vc[f.md*(b>>j)+(m>>j)])<f.Wb),f.Ya[m]}function wi(f,m,b,j){var O=f.ab,M=f.c*m,$=f.C;m=$+m;var z=b,W=j;for(j=f.Ta,b=f.Ua;0<O--;){var Q=f.gc[O],fe=$,Se=m,Z=z,ye=W,_e=(W=j,z=b,Q.Ea);switch(e(fe<Se),e(Se<=Q.nc),Q.hc){case 2:Br(Z,ye,(Se-fe)*_e,W,z);break;case 0:var Oe=fe,je=Se,Le=W,Te=z,De=(at=Q).Ea;Oe==0&&(Ai(Z,ye,null,null,1,Le,Te),Wt(Z,ye+1,0,0,De-1,Le,Te+1),ye+=De,Te+=De,++Oe);for(var Fe=1<<at.b,ft=Fe-1,rt=qe(De,at.b),Mt=at.K,at=at.w+(Oe>>at.b)*rt;Oe<je;){var Vt=Mt,Tr=at,Ut=1;for(ui(Z,ye,Le,Te-De,1,Le,Te);Ut<De;){var nt=(Ut&~ft)+Fe;nt>De&&(nt=De),(0,Fa[Vt[Tr++]>>8&15])(Z,ye+ +Ut,Le,Te+Ut-De,nt-Ut,Le,Te+Ut),Ut=nt}ye+=De,Te+=De,++Oe&ft||(at+=rt)}Se!=Q.nc&&s(W,z-_e,W,z+(Se-fe-1)*_e,_e);break;case 1:for(_e=Z,je=ye,De=(Z=Q.Ea)-(Te=Z&~(Le=(ye=1<<Q.b)-1)),Oe=qe(Z,Q.b),Fe=Q.K,Q=Q.w+(fe>>Q.b)*Oe;fe<Se;){for(ft=Fe,rt=Q,Mt=new vt,at=je+Te,Vt=je+Z;je<at;)Be(ft[rt++],Mt),vo(Mt,_e,je,ye,W,z),je+=ye,z+=ye;je<Vt&&(Be(ft[rt++],Mt),vo(Mt,_e,je,De,W,z),je+=De,z+=De),++fe&Le||(Q+=Oe)}break;case 3:if(Z==W&&ye==z&&0<Q.b){for(je=W,Z=_e=z+(Se-fe)*_e-(Te=(Se-fe)*qe(Q.Ea,Q.b)),ye=W,Le=z,Oe=[],Te=(De=Te)-1;0<=Te;--Te)Oe[Te]=ye[Le+Te];for(Te=De-1;0<=Te;--Te)je[Z+Te]=Oe[Te];Ra(Q,fe,Se,W,_e,W,z)}else Ra(Q,fe,Se,Z,ye,W,z)}z=j,W=b}W!=b&&s(j,b,z,W,M)}function Ki(f,m){var b=f.V,j=f.Ba+f.c*f.C,O=m-f.C;if(e(m<=f.l.o),e(16>=O),0<O){var M=f.l,$=f.Ta,z=f.Ua,W=M.width;if(wi(f,O,b,j),O=z=[z],e((b=f.C)<(j=m)),e(M.v<M.va),j>M.o&&(j=M.o),b<M.j){var Q=M.j-b;b=M.j,O[0]+=Q*W}if(b>=j?b=0:(O[0]+=4*M.v,M.ka=b-M.j,M.U=M.va-M.v,M.T=j-b,b=1),b){if(z=z[0],11>(b=f.ca).S){var fe=b.f.RGBA,Se=(j=b.S,O=M.U,M=M.T,Q=fe.eb,fe.A),Z=M;for(fe=fe.fb+f.Ma*fe.A;0<Z--;){var ye=$,_e=z,Oe=O,je=Q,Le=fe;switch(j){case Ql:yo(ye,_e,Oe,je,Le);break;case oa:Ei(ye,_e,Oe,je,Le);break;case _o:Ei(ye,_e,Oe,je,Le),$a(je,Le,0,Oe,1,0);break;case Bu:Ba(ye,_e,Oe,je,Le);break;case ol:wt(ye,_e,Oe,je,Le,1);break;case qa:wt(ye,_e,Oe,je,Le,1),$a(je,Le,0,Oe,1,0);break;case ll:wt(ye,_e,Oe,je,Le,0);break;case cl:wt(ye,_e,Oe,je,Le,0),$a(je,Le,1,Oe,1,0);break;case ur:sa(ye,_e,Oe,je,Le);break;case ul:sa(ye,_e,Oe,je,Le),$c(je,Le,Oe,1,0);break;case Zl:ia(ye,_e,Oe,je,Le);break;default:e(0)}z+=W,fe+=Se}f.Ma+=M}else alert("todo:EmitRescaledRowsYUVA");e(f.Ma<=b.height)}}f.C=m,e(f.C<=f.i)}function Os(f){var m;if(0<f.ua)return 0;for(m=0;m<f.Wb;++m){var b=f.Ya[m].G,j=f.Ya[m].H;if(0<b[1][j[1]+0].g||0<b[2][j[2]+0].g||0<b[3][j[3]+0].g)return 0}return 1}function ri(f,m,b,j,O,M){if(f.Z!=0){var $=f.qd,z=f.rd;for(e(An[f.Z]!=null);m<b;++m)An[f.Z]($,z,j,O,j,O,M),$=j,z=O,O+=M;f.qd=$,f.rd=z}}function vn(f,m){var b=f.l.ma,j=b.Z==0||b.Z==1?f.l.j:f.C;if(j=f.C<j?j:f.C,e(m<=f.l.o),m>j){var O=f.l.width,M=b.ca,$=b.tb+O*j,z=f.V,W=f.Ba+f.c*j,Q=f.gc;e(f.ab==1),e(Q[0].hc==3),Ms(Q[0],j,m,z,W,M,$),ri(b,j,m,M,$,O)}f.C=f.Ma=m}function ms(f,m,b,j,O,M,$){var z=f.$/j,W=f.$%j,Q=f.m,fe=f.s,Se=b+f.$,Z=Se;O=b+j*O;var ye=b+j*M,_e=280+fe.ua,Oe=f.Pb?z:16777216,je=0<fe.ua?fe.Wa:null,Le=fe.wc,Te=Se<ye?Hr(fe,W,z):null;e(f.C<M),e(ye<=O);var De=!1;e:for(;;){for(;De||Se<ye;){var Fe=0;if(z>=Oe){var ft=Se-b;e((Oe=f).Pb),Oe.wd=Oe.m,Oe.xd=ft,0<Oe.s.ua&&Ye(Oe.s.Wa,Oe.s.vb),Oe=z+tc}if(W&Le||(Te=Hr(fe,W,z)),e(Te!=null),Te.Qb&&(m[Se]=Te.qb,De=!0),!De)if(se(Q),Te.jc){Fe=Q,ft=m;var rt=Se,Mt=Te.pd[ee(Fe)&Ns-1];e(Te.jc),256>Mt.g?(ue(Fe,Fe.u+Mt.g),ft[rt]=Mt.value,Fe=0):(ue(Fe,Fe.u+Mt.g-256),e(256<=Mt.value),Fe=Mt.value),Fe==0&&(De=!0)}else Fe=vr(Te.G[0],Te.H[0],Q);if(Q.h)break;if(De||256>Fe){if(!De)if(Te.nd)m[Se]=(Te.qb|Fe<<8)>>>0;else{if(se(Q),De=vr(Te.G[1],Te.H[1],Q),se(Q),ft=vr(Te.G[2],Te.H[2],Q),rt=vr(Te.G[3],Te.H[3],Q),Q.h)break;m[Se]=(rt<<24|De<<16|Fe<<8|ft)>>>0}if(De=!1,++Se,++W>=j&&(W=0,++z,$!=null&&z<=M&&!(z%16)&&$(f,z),je!=null))for(;Z<Se;)Fe=m[Z++],je.X[(506832829*Fe&4294967295)>>>je.Mb]=Fe}else if(280>Fe){if(Fe=kn(Fe-256,Q),ft=vr(Te.G[4],Te.H[4],Q),se(Q),ft=gs(j,ft=kn(ft,Q)),Q.h)break;if(Se-b<ft||O-Se<Fe)break e;for(rt=0;rt<Fe;++rt)m[Se+rt]=m[Se+rt-ft];for(Se+=Fe,W+=Fe;W>=j;)W-=j,++z,$!=null&&z<=M&&!(z%16)&&$(f,z);if(e(Se<=O),W&Le&&(Te=Hr(fe,W,z)),je!=null)for(;Z<Se;)Fe=m[Z++],je.X[(506832829*Fe&4294967295)>>>je.Mb]=Fe}else{if(!(Fe<_e))break e;for(De=Fe-280,e(je!=null);Z<Se;)Fe=m[Z++],je.X[(506832829*Fe&4294967295)>>>je.Mb]=Fe;Fe=Se,e(!(De>>>(ft=je).Xa)),m[Fe]=ft.X[De],De=!0}De||e(Q.h==le(Q))}if(f.Pb&&Q.h&&Se<O)e(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Ye(f.s.vb,f.s.Wa);else{if(Q.h)break e;$!=null&&$(f,z>M?M:z),f.a=0,f.$=Se-b}return 1}return f.a=3,0}function rs(f){e(f!=null),f.vc=null,f.yc=null,f.Ya=null;var m=f.Wa;m!=null&&(m.X=null),f.vb=null,e(f!=null)}function va(){var f=new Ot;return f==null?null:(f.a=0,f.xb=So,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),Br=Ae,vo=Ue,yo=Ze,Ei=At,sa=yt,ia=qt,Ba=mr,J.VP8LMapColor32b=di,J.VP8LMapColor8b=Da,f)}function Is(f,m,b,j,O){var M=1,$=[f],z=[m],W=j.m,Q=j.s,fe=null,Se=0;e:for(;;){if(b)for(;M&&V(W,1);){var Z=$,ye=z,_e=j,Oe=1,je=_e.m,Le=_e.gc[_e.ab],Te=V(je,2);if(_e.Oc&1<<Te)M=0;else{switch(_e.Oc|=1<<Te,Le.hc=Te,Le.Ea=Z[0],Le.nc=ye[0],Le.K=[null],++_e.ab,e(4>=_e.ab),Te){case 0:case 1:Le.b=V(je,3)+2,Oe=Is(qe(Le.Ea,Le.b),qe(Le.nc,Le.b),0,_e,Le.K),Le.K=Le.K[0];break;case 3:var De,Fe=V(je,8)+1,ft=16<Fe?0:4<Fe?1:2<Fe?2:3;if(Z[0]=qe(Le.Ea,ft),Le.b=ft,De=Oe=Is(Fe,1,0,_e,Le.K)){var rt,Mt=Fe,at=Le,Vt=1<<(8>>at.b),Tr=o(Vt);if(Tr==null)De=0;else{var Ut=at.K[0],nt=at.w;for(Tr[0]=at.K[0][0],rt=1;rt<1*Mt;++rt)Tr[rt]=pt(Ut[nt+rt],Tr[rt-1]);for(;rt<4*Vt;++rt)Tr[rt]=0;at.K[0]=null,at.K[0]=Tr,De=1}}Oe=De;break;case 2:break;default:e(0)}M=Oe}}if($=$[0],z=z[0],M&&V(W,1)&&!(M=1<=(Se=V(W,4))&&11>=Se)){j.a=3;break e}var Je;if(Je=M)t:{var Mr,Tt,Ht,xr=j,dn=$,Yr=z,Er=Se,sn=b,hn=xr.m,Nr=xr.s,Kt=[null],er=1,Sr=0,tr=Uu[Er];r:for(;;){if(sn&&V(hn,1)){var Or=V(hn,3)+2,Ir=qe(dn,Or),dr=qe(Yr,Or),En=Ir*dr;if(!Is(Ir,dr,0,xr,Kt))break r;for(Kt=Kt[0],Nr.xc=Or,Mr=0;Mr<En;++Mr){var cr=Kt[Mr]>>8&65535;Kt[Mr]=cr,cr>=er&&(er=cr+1)}}if(hn.h)break r;for(Tt=0;5>Tt;++Tt){var hr=za[Tt];!Tt&&0<Er&&(hr+=1<<Er),Sr<hr&&(Sr=hr)}var Xr=u(er*tr,D),bn=er,Kn=u(bn,ge);if(Kn==null)var Ur=null;else e(65536>=bn),Ur=Kn;var $r=o(Sr);if(Ur==null||$r==null||Xr==null){xr.a=1;break r}var Cn=Xr;for(Mr=Ht=0;Mr<er;++Mr){var fr=Ur[Mr],Pn=fr.G,js=fr.H,qs=0,fn=1,qr=0;for(Tt=0;5>Tt;++Tt){hr=za[Tt],Pn[Tt]=Cn,js[Tt]=Ht,!Tt&&0<Er&&(hr+=1<<Er);s:{var ua,Ti=hr,Ao=xr,pi=$r,Hu=Cn,Zc=Ht,br=0,zs=Ao.m,eu=V(zs,1);if(a(pi,0,0,Ti),eu){var tu=V(zs,1)+1,nc=V(zs,1),sc=V(zs,nc==0?1:8);pi[sc]=1,tu==2&&(pi[sc=V(zs,8)]=1);var gi=1}else{var kr=o(19),Qr=V(zs,4)+4;if(19<Qr){Ao.a=3;var zr=0;break s}for(ua=0;ua<Qr;++ua)kr[Yd[ua]]=V(zs,3);var Eo=void 0,Oi=void 0,Co=Ao,rh=kr,an=Ti,ic=pi,gl=0,mi=Co.m,Ws=8,us=u(128,D);n:for(;q(us,0,7,rh,19);){if(V(mi,1)){var ml=2+2*V(mi,3);if((Eo=2+V(mi,ml))>an)break n}else Eo=an;for(Oi=0;Oi<an&&Eo--;){se(mi);var ac=us[0+(127&ee(mi))];ue(mi,mi.u+ac.g);var da=ac.value;if(16>da)ic[Oi++]=da,da!=0&&(Ws=da);else{var Vu=da==16,ru=da-16,Gu=ec[ru],nu=V(mi,dl[ru])+Gu;if(Oi+nu>an)break n;for(var Ku=Vu?Ws:0;0<nu--;)ic[Oi++]=Ku}}gl=1;break n}gl||(Co.a=3),gi=gl}(gi=gi&&!zs.h)&&(br=q(Hu,Zc,8,pi,Ti)),gi&&br!=0?zr=br:(Ao.a=3,zr=0)}if(zr==0)break r;if(fn&&Mu[Tt]==1&&(fn=Cn[Ht].g==0),qs+=Cn[Ht].g,Ht+=zr,3>=Tt){var Po,oc=$r[0];for(Po=1;Po<hr;++Po)$r[Po]>oc&&(oc=$r[Po]);qr+=oc}}if(fr.nd=fn,fr.Qb=0,fn&&(fr.qb=(Pn[3][js[3]+0].value<<24|Pn[1][js[1]+0].value<<16|Pn[2][js[2]+0].value)>>>0,qs==0&&256>Pn[0][js[0]+0].value&&(fr.Qb=1,fr.qb+=Pn[0][js[0]+0].value<<8)),fr.jc=!fr.Qb&&6>qr,fr.jc){var vl,ds=fr;for(vl=0;vl<Ns;++vl){var Ii=vl,Hs=ds.pd[Ii],Ka=ds.G[0][ds.H[0]+Ii];256<=Ka.value?(Hs.g=Ka.g+256,Hs.value=Ka.value):(Hs.g=0,Hs.value=0,Ii>>=Dr(Ka,8,Hs),Ii>>=Dr(ds.G[1][ds.H[1]+Ii],16,Hs),Ii>>=Dr(ds.G[2][ds.H[2]+Ii],0,Hs),Dr(ds.G[3][ds.H[3]+Ii],24,Hs))}}}Nr.vc=Kt,Nr.Wb=er,Nr.Ya=Ur,Nr.yc=Xr,Je=1;break t}Je=0}if(!(M=Je)){j.a=3;break e}if(0<Se){if(Q.ua=1<<Se,!X(Q.Wa,Se)){j.a=1,M=0;break e}}else Q.ua=0;var lc=j,cc=$,Ju=z,uc=lc.s,dc=uc.xc;if(lc.c=cc,lc.i=Ju,uc.md=qe(cc,dc),uc.wc=dc==0?-1:(1<<dc)-1,b){j.xb=fi;break e}if((fe=o($*z))==null){j.a=1,M=0;break e}M=(M=ms(j,fe,0,$,z,z,null))&&!W.h;break e}return M?(O!=null?O[0]=fe:(e(fe==null),e(b)),j.$=0,b||rs(Q)):rs(Q),M}function Ji(f,m){var b=f.c*f.i,j=b+m+16*m;return e(f.c<=m),f.V=o(j),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+b+m,1)}function ya(f,m){var b=f.C,j=m-b,O=f.V,M=f.Ba+f.c*b;for(e(m<=f.l.o);0<j;){var $=16<j?16:j,z=f.l.ma,W=f.l.width,Q=W*$,fe=z.ca,Se=z.tb+W*b,Z=f.Ta,ye=f.Ua;wi(f,$,O,M),qc(Z,ye,fe,Se,Q),ri(z,b,b+$,fe,Se,W),j-=$,O+=$*f.c,b+=$}e(b==m),f.C=f.Ma=m}function xa(){this.ub=this.yd=this.td=this.Rb=0}function ro(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Fc(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function wr(){this.Yb=(function(){var f=[];return(function m(b,j,O){for(var M=O[j],$=0;$<M&&(b.push(O.length>j+1?[]:0),!(O.length<j+1));$++)m(b[$],j+1,O)})(f,0,[3,11]),f})()}function ql(){this.jb=o(3),this.Wc=d([4,8],wr),this.Xc=d([4,17],wr)}function no(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function ns(){this.ld=this.La=this.dd=this.tc=0}function Yi(){this.Na=this.la=0}function zl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function so(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wa(){this.uc=this.M=this.Nb=0,this.wa=Array(new ns),this.Y=0,this.ya=Array(new so),this.aa=0,this.l=new io}function ss(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Wl(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new xa,this.Kc=new ro,this.ed=new no,this.Qa=new Fc,this.Ic=this.$c=this.Aa=0,this.D=new wa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,P),this.ia=0,this.pb=u(4,zl),this.Pa=new ql,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ss),this.Hd=0,this.rb=Array(new Yi),this.sb=0,this.wa=Array(new ns),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new so),this.L=this.aa=0,this.gd=d([4,2],ns),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vr(f,m){return 0>f?0:f>m?m:f}function io(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Bc(){var f=new Wl;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,Wa||(Wa=ni)),f}function Gr(f,m,b){return f.a==0&&(f.a=m,f.sc=b,f.cb=0),0}function ba(f,m,b){return 3<=b&&f[m+0]==157&&f[m+1]==1&&f[m+2]==42}function is(f,m){if(f==null)return 0;if(f.a=0,f.sc="OK",m==null)return Gr(f,2,"null VP8Io passed to VP8GetHeaders()");var b=m.data,j=m.w,O=m.ha;if(4>O)return Gr(f,7,"Truncated header.");var M=b[j+0]|b[j+1]<<8|b[j+2]<<16,$=f.Od;if($.Rb=!(1&M),$.td=M>>1&7,$.yd=M>>4&1,$.ub=M>>5,3<$.td)return Gr(f,3,"Incorrect keyframe parameters.");if(!$.yd)return Gr(f,4,"Frame not displayable.");j+=3,O-=3;var z=f.Kc;if($.Rb){if(7>O)return Gr(f,7,"cannot parse picture header");if(!ba(b,j,O))return Gr(f,3,"Bad code word");z.c=16383&(b[j+4]<<8|b[j+3]),z.Td=b[j+4]>>6,z.i=16383&(b[j+6]<<8|b[j+5]),z.Ud=b[j+6]>>6,j+=7,O-=7,f.za=z.c+15>>4,f.Ub=z.i+15>>4,m.width=z.c,m.height=z.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,a((M=f.Pa).jb,0,255,M.jb.length),e((M=f.Qa)!=null),M.Cb=0,M.Bb=0,M.Fb=1,a(M.Zb,0,0,M.Zb.length),a(M.Lb,0,0,M.Lb)}if($.ub>O)return Gr(f,7,"bad partition length");ae(M=f.m,b,j,$.ub),j+=$.ub,O-=$.ub,$.Rb&&(z.Ld=me(M),z.Kd=me(M)),z=f.Qa;var W,Q=f.Pa;if(e(M!=null),e(z!=null),z.Cb=me(M),z.Cb){if(z.Bb=me(M),me(M)){for(z.Fb=me(M),W=0;4>W;++W)z.Zb[W]=me(M)?ie(M,7):0;for(W=0;4>W;++W)z.Lb[W]=me(M)?ie(M,6):0}if(z.Bb)for(W=0;3>W;++W)Q.jb[W]=me(M)?we(M,8):255}else z.Bb=0;if(M.Ka)return Gr(f,3,"cannot parse segment header");if((z=f.ed).zd=me(M),z.Tb=we(M,6),z.wb=we(M,3),z.Pc=me(M),z.Pc&&me(M)){for(Q=0;4>Q;++Q)me(M)&&(z.vd[Q]=ie(M,6));for(Q=0;4>Q;++Q)me(M)&&(z.od[Q]=ie(M,6))}if(f.L=z.Tb==0?0:z.zd?1:2,M.Ka)return Gr(f,3,"cannot parse filter header");var fe=O;if(O=W=j,j=W+fe,z=fe,f.Xb=(1<<we(f.m,2))-1,fe<3*(Q=f.Xb))b=7;else{for(W+=3*Q,z-=3*Q,fe=0;fe<Q;++fe){var Se=b[O+0]|b[O+1]<<8|b[O+2]<<16;Se>z&&(Se=z),ae(f.Jc[+fe],b,W,Se),W+=Se,z-=Se,O+=3}ae(f.Jc[+Q],b,W,z),b=W<j?0:5}if(b!=0)return Gr(f,b,"cannot parse partitions");for(b=we(W=f.m,7),O=me(W)?ie(W,4):0,j=me(W)?ie(W,4):0,z=me(W)?ie(W,4):0,Q=me(W)?ie(W,4):0,W=me(W)?ie(W,4):0,fe=f.Qa,Se=0;4>Se;++Se){if(fe.Cb){var Z=fe.Zb[Se];fe.Fb||(Z+=b)}else{if(0<Se){f.pb[Se]=f.pb[0];continue}Z=b}var ye=f.pb[Se];ye.Sc[0]=No[Vr(Z+O,127)],ye.Sc[1]=hl[Vr(Z+0,127)],ye.Eb[0]=2*No[Vr(Z+j,127)],ye.Eb[1]=101581*hl[Vr(Z+z,127)]>>16,8>ye.Eb[1]&&(ye.Eb[1]=8),ye.Qc[0]=No[Vr(Z+Q,117)],ye.Qc[1]=hl[Vr(Z+W,127)],ye.lc=Z+W}if(!$.Rb)return Gr(f,4,"Not a key frame.");for(me(M),$=f.Pa,b=0;4>b;++b){for(O=0;8>O;++O)for(j=0;3>j;++j)for(z=0;11>z;++z)Q=Ne(M,Zd[b][O][j][z])?we(M,8):qu[b][O][j][z],$.Wc[b][O].Yb[j][z]=Q;for(O=0;17>O;++O)$.Xc[b][O]=$.Wc[b][Yc[O]]}return f.kc=me(M),f.kc&&(f.Bd=we(M,8)),f.cb=1}function ni(f,m,b,j,O,M,$){var z=m[O].Yb[b];for(b=0;16>O;++O){if(!Ne(f,z[b+0]))return O;for(;!Ne(f,z[b+1]);)if(z=m[++O].Yb[0],b=0,O==16)return 16;var W=m[O+1].Yb;if(Ne(f,z[b+2])){var Q=f,fe=0;if(Ne(Q,(Z=z)[(Se=b)+3]))if(Ne(Q,Z[Se+6])){for(z=0,Se=2*(fe=Ne(Q,Z[Se+8]))+(Z=Ne(Q,Z[Se+9+fe])),fe=0,Z=Kc[Se];Z[z];++z)fe+=fe+Ne(Q,Z[z]);fe+=3+(8<<Se)}else Ne(Q,Z[Se+7])?(fe=7+2*Ne(Q,165),fe+=Ne(Q,145)):fe=5+Ne(Q,159);else fe=Ne(Q,Z[Se+4])?3+Ne(Q,Z[Se+5]):2;z=W[2]}else fe=1,z=W[1];W=$+Jc[O],0>(Q=f).b&&ce(Q);var Se,Z=Q.b,ye=(Se=Q.Ca>>1)-(Q.I>>Z)>>31;--Q.b,Q.Ca+=ye,Q.Ca|=1,Q.I-=(Se+1&ye)<<Z,M[W]=((fe^ye)-ye)*j[(0<O)+0]}return 16}function _a(f){var m=f.rb[f.sb-1];m.la=0,m.Na=0,a(f.zc,0,0,f.zc.length),f.ja=0}function vs(f,m,b,j,O){O=f[m+b+32*j]+(O>>3),f[m+b+32*j]=-256&O?0>O?0:255:O}function rn(f,m,b,j,O,M){vs(f,m,0,b,j+O),vs(f,m,1,b,j+M),vs(f,m,2,b,j-M),vs(f,m,3,b,j-O)}function Rs(f){return(20091*f>>16)+f}function Jo(f,m,b,j){var O,M=0,$=o(16);for(O=0;4>O;++O){var z=f[m+0]+f[m+8],W=f[m+0]-f[m+8],Q=(35468*f[m+4]>>16)-Rs(f[m+12]),fe=Rs(f[m+4])+(35468*f[m+12]>>16);$[M+0]=z+fe,$[M+1]=W+Q,$[M+2]=W-Q,$[M+3]=z-fe,M+=4,m++}for(O=M=0;4>O;++O)z=(f=$[M+0]+4)+$[M+8],W=f-$[M+8],Q=(35468*$[M+4]>>16)-Rs($[M+12]),vs(b,j,0,0,z+(fe=Rs($[M+4])+(35468*$[M+12]>>16))),vs(b,j,1,0,W+Q),vs(b,j,2,0,W-Q),vs(b,j,3,0,z-fe),M++,j+=32}function Yo(f,m,b,j){var O=f[m+0]+4,M=35468*f[m+4]>>16,$=Rs(f[m+4]),z=35468*f[m+1]>>16;rn(b,j,0,O+$,f=Rs(f[m+1]),z),rn(b,j,1,O+M,f,z),rn(b,j,2,O-M,f,z),rn(b,j,3,O-$,f,z)}function Na(f,m,b,j,O){Jo(f,m,b,j),O&&Jo(f,m+16,b,j+4)}function si(f,m,b,j){Ma(f,m+0,b,j,1),Ma(f,m+32,b,j+128,1)}function ao(f,m,b,j){var O;for(f=f[m+0]+4,O=0;4>O;++O)for(m=0;4>m;++m)vs(b,j,m,O,f)}function Xt(f,m,b,j){f[m+0]&&Zt(f,m+0,b,j),f[m+16]&&Zt(f,m+16,b,j+4),f[m+32]&&Zt(f,m+32,b,j+128),f[m+48]&&Zt(f,m+48,b,j+128+4)}function Sa(f,m,b,j){var O,M=o(16);for(O=0;4>O;++O){var $=f[m+0+O]+f[m+12+O],z=f[m+4+O]+f[m+8+O],W=f[m+4+O]-f[m+8+O],Q=f[m+0+O]-f[m+12+O];M[0+O]=$+z,M[8+O]=$-z,M[4+O]=Q+W,M[12+O]=Q-W}for(O=0;4>O;++O)$=(f=M[0+4*O]+3)+M[3+4*O],z=M[1+4*O]+M[2+4*O],W=M[1+4*O]-M[2+4*O],Q=f-M[3+4*O],b[j+0]=$+z>>3,b[j+16]=Q+W>>3,b[j+32]=$-z>>3,b[j+48]=Q-W>>3,j+=64}function Xi(f,m,b){var j,O=m-32,M=In,$=255-f[O-1];for(j=0;j<b;++j){var z,W=M,Q=$+f[m-1];for(z=0;z<b;++z)f[m+z]=W[Q+f[O+z]];m+=32}}function Xo(f,m){Xi(f,m,4)}function Hl(f,m){Xi(f,m,8)}function Vl(f,m){Xi(f,m,16)}function oo(f,m){var b;for(b=0;16>b;++b)s(f,m+32*b,f,m-32,16)}function lo(f,m){var b;for(b=16;0<b;--b)a(f,m,f[m-1],16),m+=32}function Un(f,m,b){var j;for(j=0;16>j;++j)a(m,b+32*j,f,16)}function ii(f,m){var b,j=16;for(b=0;16>b;++b)j+=f[m-1+32*b]+f[m+b-32];Un(j>>5,f,m)}function $n(f,m){var b,j=8;for(b=0;16>b;++b)j+=f[m-1+32*b];Un(j>>4,f,m)}function ys(f,m){var b,j=8;for(b=0;16>b;++b)j+=f[m+b-32];Un(j>>4,f,m)}function ka(f,m){Un(128,f,m)}function Et(f,m,b){return f+2*m+b+2>>2}function ai(f,m){var b,j=m-32;for(j=new Uint8Array([Et(f[j-1],f[j+0],f[j+1]),Et(f[j+0],f[j+1],f[j+2]),Et(f[j+1],f[j+2],f[j+3]),Et(f[j+2],f[j+3],f[j+4])]),b=0;4>b;++b)s(f,m+32*b,j,0,j.length)}function Mc(f,m){var b=f[m-1],j=f[m-1+32],O=f[m-1+64],M=f[m-1+96];Ie(f,m+0,16843009*Et(f[m-1-32],b,j)),Ie(f,m+32,16843009*Et(b,j,O)),Ie(f,m+64,16843009*Et(j,O,M)),Ie(f,m+96,16843009*Et(O,M,M))}function Gl(f,m){var b,j=4;for(b=0;4>b;++b)j+=f[m+b-32]+f[m-1+32*b];for(j>>=3,b=0;4>b;++b)a(f,m+32*b,j,4)}function as(f,m){var b=f[m-1+0],j=f[m-1+32],O=f[m-1+64],M=f[m-1-32],$=f[m+0-32],z=f[m+1-32],W=f[m+2-32],Q=f[m+3-32];f[m+0+96]=Et(j,O,f[m-1+96]),f[m+1+96]=f[m+0+64]=Et(b,j,O),f[m+2+96]=f[m+1+64]=f[m+0+32]=Et(M,b,j),f[m+3+96]=f[m+2+64]=f[m+1+32]=f[m+0+0]=Et($,M,b),f[m+3+64]=f[m+2+32]=f[m+1+0]=Et(z,$,M),f[m+3+32]=f[m+2+0]=Et(W,z,$),f[m+3+0]=Et(Q,W,z)}function bi(f,m){var b=f[m+1-32],j=f[m+2-32],O=f[m+3-32],M=f[m+4-32],$=f[m+5-32],z=f[m+6-32],W=f[m+7-32];f[m+0+0]=Et(f[m+0-32],b,j),f[m+1+0]=f[m+0+32]=Et(b,j,O),f[m+2+0]=f[m+1+32]=f[m+0+64]=Et(j,O,M),f[m+3+0]=f[m+2+32]=f[m+1+64]=f[m+0+96]=Et(O,M,$),f[m+3+32]=f[m+2+64]=f[m+1+96]=Et(M,$,z),f[m+3+64]=f[m+2+96]=Et($,z,W),f[m+3+96]=Et(z,W,W)}function Kl(f,m){var b=f[m-1+0],j=f[m-1+32],O=f[m-1+64],M=f[m-1-32],$=f[m+0-32],z=f[m+1-32],W=f[m+2-32],Q=f[m+3-32];f[m+0+0]=f[m+1+64]=M+$+1>>1,f[m+1+0]=f[m+2+64]=$+z+1>>1,f[m+2+0]=f[m+3+64]=z+W+1>>1,f[m+3+0]=W+Q+1>>1,f[m+0+96]=Et(O,j,b),f[m+0+64]=Et(j,b,M),f[m+0+32]=f[m+1+96]=Et(b,M,$),f[m+1+32]=f[m+2+96]=Et(M,$,z),f[m+2+32]=f[m+3+96]=Et($,z,W),f[m+3+32]=Et(z,W,Q)}function co(f,m){var b=f[m+0-32],j=f[m+1-32],O=f[m+2-32],M=f[m+3-32],$=f[m+4-32],z=f[m+5-32],W=f[m+6-32],Q=f[m+7-32];f[m+0+0]=b+j+1>>1,f[m+1+0]=f[m+0+64]=j+O+1>>1,f[m+2+0]=f[m+1+64]=O+M+1>>1,f[m+3+0]=f[m+2+64]=M+$+1>>1,f[m+0+32]=Et(b,j,O),f[m+1+32]=f[m+0+96]=Et(j,O,M),f[m+2+32]=f[m+1+96]=Et(O,M,$),f[m+3+32]=f[m+2+96]=Et(M,$,z),f[m+3+64]=Et($,z,W),f[m+3+96]=Et(z,W,Q)}function ja(f,m){var b=f[m-1+0],j=f[m-1+32],O=f[m-1+64],M=f[m-1+96];f[m+0+0]=b+j+1>>1,f[m+2+0]=f[m+0+32]=j+O+1>>1,f[m+2+32]=f[m+0+64]=O+M+1>>1,f[m+1+0]=Et(b,j,O),f[m+3+0]=f[m+1+32]=Et(j,O,M),f[m+3+32]=f[m+1+64]=Et(O,M,M),f[m+3+64]=f[m+2+64]=f[m+0+96]=f[m+1+96]=f[m+2+96]=f[m+3+96]=M}function Qo(f,m){var b=f[m-1+0],j=f[m-1+32],O=f[m-1+64],M=f[m-1+96],$=f[m-1-32],z=f[m+0-32],W=f[m+1-32],Q=f[m+2-32];f[m+0+0]=f[m+2+32]=b+$+1>>1,f[m+0+32]=f[m+2+64]=j+b+1>>1,f[m+0+64]=f[m+2+96]=O+j+1>>1,f[m+0+96]=M+O+1>>1,f[m+3+0]=Et(z,W,Q),f[m+2+0]=Et($,z,W),f[m+1+0]=f[m+3+32]=Et(b,$,z),f[m+1+32]=f[m+3+64]=Et(j,b,$),f[m+1+64]=f[m+3+96]=Et(O,j,b),f[m+1+96]=Et(M,O,j)}function Ds(f,m){var b;for(b=0;8>b;++b)s(f,m+32*b,f,m-32,8)}function Aa(f,m){var b;for(b=0;8>b;++b)a(f,m,f[m-1],8),m+=32}function qn(f,m,b){var j;for(j=0;8>j;++j)a(m,b+32*j,f,8)}function uo(f,m){var b,j=8;for(b=0;8>b;++b)j+=f[m+b-32]+f[m-1+32*b];qn(j>>4,f,m)}function Zo(f,m){var b,j=4;for(b=0;8>b;++b)j+=f[m+b-32];qn(j>>3,f,m)}function el(f,m){var b,j=4;for(b=0;8>b;++b)j+=f[m-1+32*b];qn(j>>3,f,m)}function ho(f,m){qn(128,f,m)}function xs(f,m,b){var j=f[m-b],O=f[m+0],M=3*(O-j)+hi[1020+f[m-2*b]-f[m+b]],$=bo[112+(M+4>>3)];f[m-b]=In[255+j+bo[112+(M+3>>3)]],f[m+0]=In[255+O-$]}function Ea(f,m,b,j){var O=f[m+0],M=f[m+b];return Ss[255+f[m-2*b]-f[m-b]]>j||Ss[255+M-O]>j}function Ca(f,m,b,j){return 4*Ss[255+f[m-b]-f[m+0]]+Ss[255+f[m-2*b]-f[m+b]]<=j}function ws(f,m,b,j,O){var M=f[m-3*b],$=f[m-2*b],z=f[m-b],W=f[m+0],Q=f[m+b],fe=f[m+2*b],Se=f[m+3*b];return 4*Ss[255+z-W]+Ss[255+$-Q]>j?0:Ss[255+f[m-4*b]-M]<=O&&Ss[255+M-$]<=O&&Ss[255+$-z]<=O&&Ss[255+Se-fe]<=O&&Ss[255+fe-Q]<=O&&Ss[255+Q-W]<=O}function _i(f,m,b,j){var O=2*j+1;for(j=0;16>j;++j)Ca(f,m+j,b,O)&&xs(f,m+j,b)}function Qi(f,m,b,j){var O=2*j+1;for(j=0;16>j;++j)Ca(f,m+j*b,1,O)&&xs(f,m+j*b,1)}function tl(f,m,b,j){var O;for(O=3;0<O;--O)_i(f,m+=4*b,b,j)}function Pa(f,m,b,j){var O;for(O=3;0<O;--O)Qi(f,m+=4,b,j)}function bs(f,m,b,j,O,M,$,z){for(M=2*M+1;0<O--;){if(ws(f,m,b,M,$))if(Ea(f,m,b,z))xs(f,m,b);else{var W=f,Q=m,fe=b,Se=W[Q-2*fe],Z=W[Q-fe],ye=W[Q+0],_e=W[Q+fe],Oe=W[Q+2*fe],je=27*(Te=hi[1020+3*(ye-Z)+hi[1020+Se-_e]])+63>>7,Le=18*Te+63>>7,Te=9*Te+63>>7;W[Q-3*fe]=In[255+W[Q-3*fe]+Te],W[Q-2*fe]=In[255+Se+Le],W[Q-fe]=In[255+Z+je],W[Q+0]=In[255+ye-je],W[Q+fe]=In[255+_e-Le],W[Q+2*fe]=In[255+Oe-Te]}m+=j}}function oi(f,m,b,j,O,M,$,z){for(M=2*M+1;0<O--;){if(ws(f,m,b,M,$))if(Ea(f,m,b,z))xs(f,m,b);else{var W=f,Q=m,fe=b,Se=W[Q-fe],Z=W[Q+0],ye=W[Q+fe],_e=bo[112+(4+(Oe=3*(Z-Se))>>3)],Oe=bo[112+(Oe+3>>3)],je=_e+1>>1;W[Q-2*fe]=In[255+W[Q-2*fe]+je],W[Q-fe]=In[255+Se+Oe],W[Q+0]=In[255+Z-_e],W[Q+fe]=In[255+ye-je]}m+=j}}function jn(f,m,b,j,O,M){bs(f,m,b,1,16,j,O,M)}function _s(f,m,b,j,O,M){bs(f,m,1,b,16,j,O,M)}function fo(f,m,b,j,O,M){var $;for($=3;0<$;--$)oi(f,m+=4*b,b,1,16,j,O,M)}function x(f,m,b,j,O,M){var $;for($=3;0<$;--$)oi(f,m+=4,1,b,16,j,O,M)}function I(f,m,b,j,O,M,$,z){bs(f,m,O,1,8,M,$,z),bs(b,j,O,1,8,M,$,z)}function re(f,m,b,j,O,M,$,z){bs(f,m,1,O,8,M,$,z),bs(b,j,1,O,8,M,$,z)}function de(f,m,b,j,O,M,$,z){oi(f,m+4*O,O,1,8,M,$,z),oi(b,j+4*O,O,1,8,M,$,z)}function be(f,m,b,j,O,M,$,z){oi(f,m+4,1,O,8,M,$,z),oi(b,j+4,1,O,8,M,$,z)}function Re(){this.ba=new Bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function it(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ht(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new D}function Ot(){this.xb=this.a=0,this.l=new io,this.ca=new Bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ht,this.ab=0,this.gc=u(4,it),this.Oc=0}function Ft(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new io,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Yt(f,m,b,j,O,M,$){for(f=f==null?0:f[m+0],m=0;m<$;++m)O[M+m]=f+b[j+m]&255,f=O[M+m]}function Ar(f,m,b,j,O,M,$){var z;if(f==null)Yt(null,null,b,j,O,M,$);else for(z=0;z<$;++z)O[M+z]=f[m+z]+b[j+z]&255}function Kr(f,m,b,j,O,M,$){if(f==null)Yt(null,null,b,j,O,M,$);else{var z,W=f[m+0],Q=W,fe=W;for(z=0;z<$;++z)Q=fe+(W=f[m+z])-Q,fe=b[j+z]+(-256&Q?0>Q?0:255:Q)&255,Q=W,O[M+z]=fe}}function yr(f,m,b,j){var O=m.width,M=m.o;if(e(f!=null&&m!=null),0>b||0>=j||b+j>M)return null;if(!f.Cc){if(f.ga==null){var $;if(f.ga=new Ft,($=f.ga==null)||($=m.width*m.o,e(f.Gb.length==0),f.Gb=o($),f.Uc=0,f.Gb==null?$=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,$=1),$=!$),!$){$=f.ga;var z=f.Fa,W=f.P,Q=f.qc,fe=f.mb,Se=f.nb,Z=W+1,ye=Q-1,_e=$.l;if(e(z!=null&&fe!=null&&m!=null),An[0]=null,An[1]=Yt,An[2]=Ar,An[3]=Kr,$.ca=fe,$.tb=Se,$.c=m.width,$.i=m.height,e(0<$.c&&0<$.i),1>=Q)m=0;else if($.$a=3&z[W+0],$.Z=z[W+0]>>2&3,$.Lc=z[W+0]>>4&3,W=z[W+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||W)m=0;else if(_e.put=St,_e.ac=ps,_e.bc=ts,_e.ma=$,_e.width=m.width,_e.height=m.height,_e.Da=m.Da,_e.v=m.v,_e.va=m.va,_e.j=m.j,_e.o=m.o,$.$a)e:{e($.$a==1),m=va();t:for(;;){if(m==null){m=0;break e}if(e($!=null),$.mc=m,m.c=$.c,m.i=$.i,m.l=$.l,m.l.ma=$,m.l.width=$.c,m.l.height=$.i,m.a=0,ne(m.m,z,Z,ye),!Is($.c,$.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Os(m.s)?($.ic=1,z=m.c*m.i,m.Ta=null,m.Ua=0,m.V=o(z),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):($.ic=0,m=Ji(m,$.c)),!m))break t;m=1;break e}$.mc=null,m=0}else m=ye>=$.c*$.i;$=!m}if($)return null;f.ga.Lc!=1?f.Ga=0:j=M-b}e(f.ga!=null),e(b+j<=M);e:{if(m=(z=f.ga).c,M=z.l.o,z.$a==0){if(Z=f.rc,ye=f.Vc,_e=f.Fa,W=f.P+1+b*m,Q=f.mb,fe=f.nb+b*m,e(W<=f.P+f.qc),z.Z!=0)for(e(An[z.Z]!=null),$=0;$<j;++$)An[z.Z](Z,ye,_e,W,Q,fe,m),Z=Q,ye=fe,fe+=m,W+=m;else for($=0;$<j;++$)s(Q,fe,_e,W,m),Z=Q,ye=fe,fe+=m,W+=m;f.rc=Z,f.Vc=ye}else{if(e(z.mc!=null),m=b+j,e(($=z.mc)!=null),e(m<=$.i),$.C>=m)m=1;else if(z.ic||Fs(),z.ic){z=$.V,Z=$.Ba,ye=$.c;var Oe=$.i,je=(_e=1,W=$.$/ye,Q=$.$%ye,fe=$.m,Se=$.s,$.$),Le=ye*Oe,Te=ye*m,De=Se.wc,Fe=je<Te?Hr(Se,Q,W):null;e(je<=Le),e(m<=Oe),e(Os(Se));t:for(;;){for(;!fe.h&&je<Te;){if(Q&De||(Fe=Hr(Se,Q,W)),e(Fe!=null),se(fe),256>(Oe=vr(Fe.G[0],Fe.H[0],fe)))z[Z+je]=Oe,++je,++Q>=ye&&(Q=0,++W<=m&&!(W%16)&&vn($,W));else{if(!(280>Oe)){_e=0;break t}Oe=kn(Oe-256,fe);var ft,rt=vr(Fe.G[4],Fe.H[4],fe);if(se(fe),!(je>=(rt=gs(ye,rt=kn(rt,fe)))&&Le-je>=Oe)){_e=0;break t}for(ft=0;ft<Oe;++ft)z[Z+je+ft]=z[Z+je+ft-rt];for(je+=Oe,Q+=Oe;Q>=ye;)Q-=ye,++W<=m&&!(W%16)&&vn($,W);je<Te&&Q&De&&(Fe=Hr(Se,Q,W))}e(fe.h==le(fe))}vn($,W>m?m:W);break t}!_e||fe.h&&je<Le?(_e=0,$.a=fe.h?5:3):$.$=je,m=_e}else m=ms($,$.V,$.Ba,$.c,$.i,m,ya);if(!m){j=0;break e}}b+j>=M&&(f.Cc=1),j=1}if(!j)return null;if(f.Cc&&((j=f.ga)!=null&&(j.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+b*O}function nn(f,m,b,j,O,M){for(;0<O--;){var $,z=f,W=m+(b?1:0),Q=f,fe=m+(b?0:3);for($=0;$<j;++$){var Se=Q[fe+4*$];Se!=255&&(Se*=32897,z[W+4*$+0]=z[W+4*$+0]*Se>>23,z[W+4*$+1]=z[W+4*$+1]*Se>>23,z[W+4*$+2]=z[W+4*$+2]*Se>>23)}m+=M}}function Fr(f,m,b,j,O){for(;0<j--;){var M;for(M=0;M<b;++M){var $=f[m+2*M+0],z=15&(Q=f[m+2*M+1]),W=4369*z,Q=(240&Q|Q>>4)*W>>16;f[m+2*M+0]=(240&$|$>>4)*W>>16&240|(15&$|$<<4)*W>>16>>4&15,f[m+2*M+1]=240&Q|z}m+=O}}function yn(f,m,b,j,O,M,$,z){var W,Q,fe=255;for(Q=0;Q<O;++Q){for(W=0;W<j;++W){var Se=f[m+W];M[$+4*W]=Se,fe&=Se}m+=b,$+=z}return fe!=255}function Ni(f,m,b,j,O){var M;for(M=0;M<O;++M)b[j+M]=f[m+M]>>8}function Fs(){$a=nn,$c=Fr,al=yn,qc=Ni}function Si(f,m,b){J[f]=function(j,O,M,$,z,W,Q,fe,Se,Z,ye,_e,Oe,je,Le,Te,De){var Fe,ft=De-1>>1,rt=z[W+0]|Q[fe+0]<<16,Mt=Se[Z+0]|ye[_e+0]<<16;e(j!=null);var at=3*rt+Mt+131074>>2;for(m(j[O+0],255&at,at>>16,Oe,je),M!=null&&(at=3*Mt+rt+131074>>2,m(M[$+0],255&at,at>>16,Le,Te)),Fe=1;Fe<=ft;++Fe){var Vt=z[W+Fe]|Q[fe+Fe]<<16,Tr=Se[Z+Fe]|ye[_e+Fe]<<16,Ut=rt+Vt+Mt+Tr+524296,nt=Ut+2*(Vt+Mt)>>3;at=nt+rt>>1,rt=(Ut=Ut+2*(rt+Tr)>>3)+Vt>>1,m(j[O+2*Fe-1],255&at,at>>16,Oe,je+(2*Fe-1)*b),m(j[O+2*Fe-0],255&rt,rt>>16,Oe,je+(2*Fe-0)*b),M!=null&&(at=Ut+Mt>>1,rt=nt+Tr>>1,m(M[$+2*Fe-1],255&at,at>>16,Le,Te+(2*Fe-1)*b),m(M[$+2*Fe+0],255&rt,rt>>16,Le,Te+(2*Fe+0)*b)),rt=Vt,Mt=Tr}1&De||(at=3*rt+Mt+131074>>2,m(j[O+De-1],255&at,at>>16,Oe,je+(De-1)*b),M!=null&&(at=3*Mt+rt+131074>>2,m(M[$+De-1],255&at,at>>16,Le,Te+(De-1)*b)))}}function La(){Hn[Ql]=eh,Hn[oa]=la,Hn[Bu]=th,Hn[ol]=ko,Hn[ll]=Ha,Hn[ur]=fl,Hn[Zl]=Xc,Hn[_o]=la,Hn[qa]=ko,Hn[cl]=Ha,Hn[ul]=fl}function po(f){return f&-16384?0>f?0:255:f>>ca}function Zi(f,m){return po((19077*f>>8)+(26149*m>>8)-14234)}function Ta(f,m,b){return po((19077*f>>8)-(6419*m>>8)-(13320*b>>8)+8708)}function ea(f,m){return po((19077*f>>8)+(33050*m>>8)-17685)}function ta(f,m,b,j,O){j[O+0]=Zi(f,b),j[O+1]=Ta(f,m,b),j[O+2]=ea(f,m)}function xn(f,m,b,j,O){j[O+0]=ea(f,m),j[O+1]=Ta(f,m,b),j[O+2]=Zi(f,b)}function Oa(f,m,b,j,O){var M=Ta(f,m,b);m=M<<3&224|ea(f,m)>>3,j[O+0]=248&Zi(f,b)|M>>5,j[O+1]=m}function Ia(f,m,b,j,O){var M=240&ea(f,m)|15;j[O+0]=240&Zi(f,b)|Ta(f,m,b)>>4,j[O+1]=M}function rl(f,m,b,j,O){j[O+0]=255,ta(f,m,b,j,O+1)}function nl(f,m,b,j,O){xn(f,m,b,j,O),j[O+3]=255}function On(f,m,b,j,O){ta(f,m,b,j,O),j[O+3]=255}function Bs(f,m,b){J[f]=function(j,O,M,$,z,W,Q,fe,Se){for(var Z=fe+(-2&Se)*b;fe!=Z;)m(j[O+0],M[$+0],z[W+0],Q,fe),m(j[O+1],M[$+0],z[W+0],Q,fe+b),O+=2,++$,++W,fe+=2*b;1&Se&&m(j[O+0],M[$+0],z[W+0],Q,fe)}}function li(f,m,b){return b==0?f==0?m==0?6:5:m==0?4:0:b}function Jl(f,m,b,j,O){switch(f>>>30){case 3:Ma(m,b,j,O,0);break;case 2:Pr(m,b,j,O);break;case 1:Zt(m,b,j,O)}}function os(f,m){var b,j,O=m.M,M=m.Nb,$=f.oc,z=f.pc+40,W=f.oc,Q=f.pc+584,fe=f.oc,Se=f.pc+600;for(b=0;16>b;++b)$[z+32*b-1]=129;for(b=0;8>b;++b)W[Q+32*b-1]=129,fe[Se+32*b-1]=129;for(0<O?$[z-1-32]=W[Q-1-32]=fe[Se-1-32]=129:(a($,z-32-1,127,21),a(W,Q-32-1,127,9),a(fe,Se-32-1,127,9)),j=0;j<f.za;++j){var Z=m.ya[m.aa+j];if(0<j){for(b=-1;16>b;++b)s($,z+32*b-4,$,z+32*b+12,4);for(b=-1;8>b;++b)s(W,Q+32*b-4,W,Q+32*b+4,4),s(fe,Se+32*b-4,fe,Se+32*b+4,4)}var ye=f.Gd,_e=f.Hd+j,Oe=Z.ad,je=Z.Hc;if(0<O&&(s($,z-32,ye[_e].y,0,16),s(W,Q-32,ye[_e].f,0,8),s(fe,Se-32,ye[_e].ea,0,8)),Z.Za){var Le=$,Te=z-32+16;for(0<O&&(j>=f.za-1?a(Le,Te,ye[_e].y[15],4):s(Le,Te,ye[_e+1].y,0,4)),b=0;4>b;b++)Le[Te+128+b]=Le[Te+256+b]=Le[Te+384+b]=Le[Te+0+b];for(b=0;16>b;++b,je<<=2)Le=$,Te=z+Qc[b],ks[Z.Ob[b]](Le,Te),Jl(je,Oe,16*+b,Le,Te)}else if(Le=li(j,O,Z.Ob[0]),Rn[Le]($,z),je!=0)for(b=0;16>b;++b,je<<=2)Jl(je,Oe,16*+b,$,z+Qc[b]);for(b=Z.Gc,Le=li(j,O,Z.Dd),Wn[Le](W,Q),Wn[Le](fe,Se),je=Oe,Le=W,Te=Q,255&(Z=0|b)&&(170&Z?zn(je,256,Le,Te):or(je,256,Le,Te)),Z=fe,je=Se,255&(b>>=8)&&(170&b?zn(Oe,320,Z,je):or(Oe,320,Z,je)),O<f.Ub-1&&(s(ye[_e].y,0,$,z+480,16),s(ye[_e].f,0,W,Q+224,8),s(ye[_e].ea,0,fe,Se+224,8)),b=8*M*f.B,ye=f.sa,_e=f.ta+16*j+16*M*f.R,Oe=f.qa,Z=f.ra+8*j+b,je=f.Ha,Le=f.Ia+8*j+b,b=0;16>b;++b)s(ye,_e+b*f.R,$,z+32*b,16);for(b=0;8>b;++b)s(Oe,Z+b*f.B,W,Q+32*b,8),s(je,Le+b*f.B,fe,Se+32*b,8)}}function ra(f,m,b,j,O,M,$,z,W){var Q=[0],fe=[0],Se=0,Z=W!=null?W.kd:0,ye=W??new $e;if(f==null||12>b)return 7;ye.data=f,ye.w=m,ye.ha=b,m=[m],b=[b],ye.gb=[ye.gb];e:{var _e=m,Oe=b,je=ye.gb;if(e(f!=null),e(Oe!=null),e(je!=null),je[0]=0,12<=Oe[0]&&!t(f,_e[0],"RIFF")){if(t(f,_e[0]+8,"WEBP")){je=3;break e}var Le=Xe(f,_e[0]+4);if(12>Le||4294967286<Le){je=3;break e}if(Z&&Le>Oe[0]-8){je=7;break e}je[0]=Le,_e[0]+=12,Oe[0]-=12}je=0}if(je!=0)return je;for(Le=0<ye.gb[0],b=b[0];;){e:{var Te=f;Oe=m,je=b;var De=Q,Fe=fe,ft=_e=[0];if((at=Se=[Se])[0]=0,8>je[0])je=7;else{if(!t(Te,Oe[0],"VP8X")){if(Xe(Te,Oe[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var rt=Xe(Te,Oe[0]+8),Mt=1+Me(Te,Oe[0]+12);if(2147483648<=Mt*(Te=1+Me(Te,Oe[0]+15))){je=3;break e}ft!=null&&(ft[0]=rt),De!=null&&(De[0]=Mt),Fe!=null&&(Fe[0]=Te),Oe[0]+=18,je[0]-=18,at[0]=1}je=0}}if(Se=Se[0],_e=_e[0],je!=0)return je;if(Oe=!!(2&_e),!Le&&Se)return 3;if(M!=null&&(M[0]=!!(16&_e)),$!=null&&($[0]=Oe),z!=null&&(z[0]=0),$=Q[0],_e=fe[0],Se&&Oe&&W==null){je=0;break}if(4>b){je=7;break}if(Le&&Se||!Le&&!Se&&!t(f,m[0],"ALPH")){b=[b],ye.na=[ye.na],ye.P=[ye.P],ye.Sa=[ye.Sa];e:{rt=f,je=m,Le=b;var at=ye.gb;De=ye.na,Fe=ye.P,ft=ye.Sa,Mt=22,e(rt!=null),e(Le!=null),Te=je[0];var Vt=Le[0];for(e(De!=null),e(ft!=null),De[0]=null,Fe[0]=null,ft[0]=0;;){if(je[0]=Te,Le[0]=Vt,8>Vt){je=7;break e}var Tr=Xe(rt,Te+4);if(4294967286<Tr){je=3;break e}var Ut=8+Tr+1&-2;if(Mt+=Ut,0<at&&Mt>at){je=3;break e}if(!t(rt,Te,"VP8 ")||!t(rt,Te,"VP8L")){je=0;break e}if(Vt[0]<Ut){je=7;break e}t(rt,Te,"ALPH")||(De[0]=rt,Fe[0]=Te+8,ft[0]=Tr),Te+=Ut,Vt-=Ut}}if(b=b[0],ye.na=ye.na[0],ye.P=ye.P[0],ye.Sa=ye.Sa[0],je!=0)break}b=[b],ye.Ja=[ye.Ja],ye.xa=[ye.xa];e:if(at=f,je=m,Le=b,De=ye.gb[0],Fe=ye.Ja,ft=ye.xa,rt=je[0],Te=!t(at,rt,"VP8 "),Mt=!t(at,rt,"VP8L"),e(at!=null),e(Le!=null),e(Fe!=null),e(ft!=null),8>Le[0])je=7;else{if(Te||Mt){if(at=Xe(at,rt+4),12<=De&&at>De-12){je=3;break e}if(Z&&at>Le[0]-8){je=7;break e}Fe[0]=at,je[0]+=8,Le[0]-=8,ft[0]=Mt}else ft[0]=5<=Le[0]&&at[rt+0]==47&&!(at[rt+4]>>5),Fe[0]=Le[0];je=0}if(b=b[0],ye.Ja=ye.Ja[0],ye.xa=ye.xa[0],m=m[0],je!=0)break;if(4294967286<ye.Ja)return 3;if(z==null||Oe||(z[0]=ye.xa?2:1),$=[$],_e=[_e],ye.xa){if(5>b){je=7;break}z=$,Z=_e,Oe=M,f==null||5>b?f=0:5<=b&&f[m+0]==47&&!(f[m+4]>>5)?(Le=[0],at=[0],De=[0],ne(Fe=new K,f,m,b),Ts(Fe,Le,at,De)?(z!=null&&(z[0]=Le[0]),Z!=null&&(Z[0]=at[0]),Oe!=null&&(Oe[0]=De[0]),f=1):f=0):f=0}else{if(10>b){je=7;break}z=_e,f==null||10>b||!ba(f,m+3,b-3)?f=0:(Z=f[m+0]|f[m+1]<<8|f[m+2]<<16,Oe=16383&(f[m+7]<<8|f[m+6]),f=16383&(f[m+9]<<8|f[m+8]),1&Z||3<(Z>>1&7)||!(Z>>4&1)||Z>>5>=ye.Ja||!Oe||!f?f=0:($&&($[0]=Oe),z&&(z[0]=f),f=1))}if(!f||($=$[0],_e=_e[0],Se&&(Q[0]!=$||fe[0]!=_e)))return 3;W!=null&&(W[0]=ye,W.offset=m-W.w,e(4294967286>m-W.w),e(W.offset==W.ha-b));break}return je==0||je==7&&Se&&W==null?(M!=null&&(M[0]|=ye.na!=null&&0<ye.na.length),j!=null&&(j[0]=$),O!=null&&(O[0]=_e),0):je}function go(f,m,b){var j=m.width,O=m.height,M=0,$=0,z=j,W=O;if(m.Da=f!=null&&0<f.Da,m.Da&&(z=f.cd,W=f.bd,M=f.v,$=f.j,11>b||(M&=-2,$&=-2),0>M||0>$||0>=z||0>=W||M+z>j||$+W>O))return 0;if(m.v=M,m.j=$,m.va=M+z,m.o=$+W,m.U=z,m.T=W,m.da=f!=null&&0<f.da,m.da){if(!bt(z,W,b=[f.ib],M=[f.hb]))return 0;m.ib=b[0],m.hb=M[0]}return m.ob=f!=null&&f.ob,m.Kb=f==null||!f.Sd,m.da&&(m.ob=m.ib<3*j/4&&m.hb<3*O/4,m.Kb=0),1}function mo(f){if(f==null)return 2;if(11>f.S){var m=f.f.RGBA;m.fb+=(f.height-1)*m.A,m.A=-m.A}else m=f.f.kb,f=f.height,m.O+=(f-1)*m.fa,m.fa=-m.fa,m.N+=(f-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(f-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(f-1)*m.lb,m.lb=-m.lb);return 0}function ki(f,m,b,j){if(j==null||0>=f||0>=m)return 2;if(b!=null){if(b.Da){var O=b.cd,M=b.bd,$=-2&b.v,z=-2&b.j;if(0>$||0>z||0>=O||0>=M||$+O>f||z+M>m)return 2;f=O,m=M}if(b.da){if(!bt(f,m,O=[b.ib],M=[b.hb]))return 2;f=O[0],m=M[0]}}j.width=f,j.height=m;e:{var W=j.width,Q=j.height;if(f=j.S,0>=W||0>=Q||!(f>=Ql&&13>f))f=2;else{if(0>=j.Rd&&j.sd==null){$=M=O=m=0;var fe=(z=W*pl[f])*Q;if(11>f||(M=(Q+1)/2*(m=(W+1)/2),f==12&&($=(O=W)*Q)),(Q=o(fe+2*M+$))==null){f=1;break e}j.sd=Q,11>f?((W=j.f.RGBA).eb=Q,W.fb=0,W.A=z,W.size=fe):((W=j.f.kb).y=Q,W.O=0,W.fa=z,W.Fd=fe,W.f=Q,W.N=0+fe,W.Ab=m,W.Cd=M,W.ea=Q,W.W=0+fe+M,W.Db=m,W.Ed=M,f==12&&(W.F=Q,W.J=0+fe+2*M),W.Tc=$,W.lb=O)}if(m=1,O=j.S,M=j.width,$=j.height,O>=Ql&&13>O)if(11>O)f=j.f.RGBA,m&=(z=Math.abs(f.A))*($-1)+M<=f.size,m&=z>=M*pl[O],m&=f.eb!=null;else{f=j.f.kb,z=(M+1)/2,fe=($+1)/2,W=Math.abs(f.fa),Q=Math.abs(f.Ab);var Se=Math.abs(f.Db),Z=Math.abs(f.lb),ye=Z*($-1)+M;m&=W*($-1)+M<=f.Fd,m&=Q*(fe-1)+z<=f.Cd,m=(m&=Se*(fe-1)+z<=f.Ed)&W>=M&Q>=z&Se>=z,m&=f.y!=null,m&=f.f!=null,m&=f.ea!=null,O==12&&(m&=Z>=M,m&=ye<=f.Tc,m&=f.F!=null)}else m=0;f=m?0:2}}return f!=0||b!=null&&b.fd&&(f=mo(j)),f}var Ns=64,ls=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cs=24,na=32,ci=8,ji=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(f){return f},J.Predictor2=function(f,m,b){return m[b+0]},J.Predictor3=function(f,m,b){return m[b+1]},J.Predictor4=function(f,m,b){return m[b-1]},J.Predictor5=function(f,m,b){return gt(gt(f,m[b+1]),m[b+0])},J.Predictor6=function(f,m,b){return gt(f,m[b-1])},J.Predictor7=function(f,m,b){return gt(f,m[b+0])},J.Predictor8=function(f,m,b){return gt(m[b-1],m[b+0])},J.Predictor9=function(f,m,b){return gt(m[b+0],m[b+1])},J.Predictor10=function(f,m,b){return gt(gt(f,m[b-1]),gt(m[b+0],m[b+1]))},J.Predictor11=function(f,m,b){var j=m[b+0];return 0>=Lt(j>>24&255,f>>24&255,(m=m[b-1])>>24&255)+Lt(j>>16&255,f>>16&255,m>>16&255)+Lt(j>>8&255,f>>8&255,m>>8&255)+Lt(255&j,255&f,255&m)?j:f},J.Predictor12=function(f,m,b){var j=m[b+0];return(Jt((f>>24&255)+(j>>24&255)-((m=m[b-1])>>24&255))<<24|Jt((f>>16&255)+(j>>16&255)-(m>>16&255))<<16|Jt((f>>8&255)+(j>>8&255)-(m>>8&255))<<8|Jt((255&f)+(255&j)-(255&m)))>>>0},J.Predictor13=function(f,m,b){var j=m[b-1];return(zt((f=gt(f,m[b+0]))>>24&255,j>>24&255)<<24|zt(f>>16&255,j>>16&255)<<16|zt(f>>8&255,j>>8&255)<<8|zt(255&f,255&j))>>>0};var Ai=J.PredictorAdd0;J.PredictorAdd1=Wt,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var ui=J.PredictorAdd2;Ge("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Ge("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Br,Ra=J.ColorIndexInverseTransform,di=J.MapARGB,Ms=J.VP8LColorIndexInverseTransformAlpha,Da=J.MapAlpha,Fa=J.VP8LPredictorsAdd=[];Fa.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var vo,yo,Ei,sa,ia,Ba,aa,Ma,Pr,zn,Zt,or,Lr,Jr,Us,sl,xo,Ci,Yl,wo,Xl,Uc,il,Ua,$a,$c,al,qc,zc=o(511),Wc=o(2041),Hc=o(225),Vc=o(767),Gc=0,hi=Wc,bo=Hc,In=Vc,Ss=zc,Ql=0,oa=1,Bu=2,ol=3,ll=4,ur=5,Zl=6,_o=7,qa=8,cl=9,ul=10,dl=[2,3,7],ec=[3,3,11],za=[280,256,256,256,40],Mu=[0,1,1,1,0],Yd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Uu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tc=8,No=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],hl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wa=null,Kc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Jc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$u=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qd=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Zd=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Yc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Rn=[],ks=[],Wn=[],fi=1,So=2,An=[],Hn=[];Si("UpsampleRgbLinePair",ta,3),Si("UpsampleBgrLinePair",xn,3),Si("UpsampleRgbaLinePair",On,4),Si("UpsampleBgraLinePair",nl,4),Si("UpsampleArgbLinePair",rl,4),Si("UpsampleRgba4444LinePair",Ia,2),Si("UpsampleRgb565LinePair",Oa,2);var eh=J.UpsampleRgbLinePair,th=J.UpsampleBgrLinePair,la=J.UpsampleRgbaLinePair,ko=J.UpsampleBgraLinePair,Ha=J.UpsampleArgbLinePair,fl=J.UpsampleRgba4444LinePair,Xc=J.UpsampleRgb565LinePair,Pi=16,$s=1<<Pi-1,ir=-227,lr=482,ca=6,wn=0,Vn=o(256),Va=o(256),jo=o(256),Gn=o(256),rc=o(lr-ir),zu=o(lr-ir);Bs("YuvToRgbRow",ta,3),Bs("YuvToBgrRow",xn,3),Bs("YuvToRgbaRow",On,4),Bs("YuvToBgraRow",nl,4),Bs("YuvToArgbRow",rl,4),Bs("YuvToRgba4444Row",Ia,2),Bs("YuvToRgb565Row",Oa,2);var Qc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ga=[0,2,8],Wu=[8,7,6,4,4,2,2,2,1,1,1,1],Li=1;this.WebPDecodeRGBA=function(f,m,b,j,O){var M=oa,$=new Re,z=new Bt;$.ba=z,z.S=M,z.width=[z.width],z.height=[z.height];var W=z.width,Q=z.height,fe=new Nt;if(fe==null||f==null)var Se=2;else e(fe!=null),Se=ra(f,m,b,fe.width,fe.height,fe.Pd,fe.Qd,fe.format,null);if(Se!=0?W=0:(W!=null&&(W[0]=fe.width[0]),Q!=null&&(Q[0]=fe.height[0]),W=1),W){z.width=z.width[0],z.height=z.height[0],j!=null&&(j[0]=z.width),O!=null&&(O[0]=z.height);e:{if(j=new io,(O=new $e).data=f,O.w=m,O.ha=b,O.kd=1,m=[0],e(O!=null),((f=ra(O.data,O.w,O.ha,null,null,null,m,null,O))==0||f==7)&&m[0]&&(f=4),(m=f)==0){if(e($!=null),j.data=O.data,j.w=O.w+O.offset,j.ha=O.ha-O.offset,j.put=St,j.ac=ps,j.bc=ts,j.ma=$,O.xa){if((f=va())==null){$=1;break e}if((function(Z,ye){var _e=[0],Oe=[0],je=[0];t:for(;;){if(Z==null)return 0;if(ye==null)return Z.a=2,0;if(Z.l=ye,Z.a=0,ne(Z.m,ye.data,ye.w,ye.ha),!Ts(Z.m,_e,Oe,je)){Z.a=3;break t}if(Z.xb=So,ye.width=_e[0],ye.height=Oe[0],!Is(_e[0],Oe[0],1,Z,null))break t;return 1}return e(Z.a!=0),0})(f,j)){if(j=(m=ki(j.width,j.height,$.Oa,$.ba))==0){t:{j=f;r:for(;;){if(j==null){j=0;break t}if(e(j.s.yc!=null),e(j.s.Ya!=null),e(0<j.s.Wb),e((b=j.l)!=null),e((O=b.ma)!=null),j.xb!=0){if(j.ca=O.ba,j.tb=O.tb,e(j.ca!=null),!go(O.Oa,b,ol)){j.a=2;break r}if(!Ji(j,b.width)||b.da)break r;if((b.da||_t(j.ca.S))&&Fs(),11>j.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),j.ca.f.kb.F!=null&&Fs()),j.Pb&&0<j.s.ua&&j.s.vb.X==null&&!X(j.s.vb,j.s.Wa.Xa)){j.a=1;break r}j.xb=0}if(!ms(j,j.V,j.Ba,j.c,j.i,b.o,Ki))break r;O.Dc=j.Ma,j=1;break t}e(j.a!=0),j=0}j=!j}j&&(m=f.a)}else m=f.a}else{if((f=new Bc)==null){$=1;break e}if(f.Fa=O.na,f.P=O.P,f.qc=O.Sa,is(f,j)){if((m=ki(j.width,j.height,$.Oa,$.ba))==0){if(f.Aa=0,b=$.Oa,e((O=f)!=null),b!=null){if(0<(W=0>(W=b.Md)?0:100<W?255:255*W/100)){for(Q=fe=0;4>Q;++Q)12>(Se=O.pb[Q]).lc&&(Se.ia=W*Wu[0>Se.lc?0:Se.lc]>>3),fe|=Se.ia;fe&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=b.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(Z,ye){if(Z==null)return 0;if(ye==null)return Gr(Z,2,"NULL VP8Io parameter in VP8Decode().");if(!Z.cb&&!is(Z,ye))return 0;if(e(Z.cb),ye.ac==null||ye.ac(ye)){ye.ob&&(Z.L=0);var _e=Ga[Z.L];if(Z.L==2?(Z.yb=0,Z.zb=0):(Z.yb=ye.v-_e>>4,Z.zb=ye.j-_e>>4,0>Z.yb&&(Z.yb=0),0>Z.zb&&(Z.zb=0)),Z.Va=ye.o+15+_e>>4,Z.Hb=ye.va+15+_e>>4,Z.Hb>Z.za&&(Z.Hb=Z.za),Z.Va>Z.Ub&&(Z.Va=Z.Ub),0<Z.L){var Oe=Z.ed;for(_e=0;4>_e;++_e){var je;if(Z.Qa.Cb){var Le=Z.Qa.Lb[_e];Z.Qa.Fb||(Le+=Oe.Tb)}else Le=Oe.Tb;for(je=0;1>=je;++je){var Te=Z.gd[_e][je],De=Le;if(Oe.Pc&&(De+=Oe.vd[0],je&&(De+=Oe.od[0])),0<(De=0>De?0:63<De?63:De)){var Fe=De;0<Oe.wb&&(Fe=4<Oe.wb?Fe>>2:Fe>>1)>9-Oe.wb&&(Fe=9-Oe.wb),1>Fe&&(Fe=1),Te.dd=Fe,Te.tc=2*De+Fe,Te.ld=40<=De?2:15<=De?1:0}else Te.tc=0;Te.La=je}}}_e=0}else Gr(Z,6,"Frame setup failed"),_e=Z.a;if(_e=_e==0){if(_e){Z.$c=0,0<Z.Aa||(Z.Ic=Li);t:{_e=Z.Ic,Oe=4*(Fe=Z.za);var ft=32*Fe,rt=Fe+1,Mt=0<Z.L?Fe*(0<Z.Aa?2:1):0,at=(Z.Aa==2?2:1)*Fe;if((Te=Oe+832+(je=3*(16*_e+Ga[Z.L])/2*ft)+(Le=Z.Fa!=null&&0<Z.Fa.length?Z.Kc.c*Z.Kc.i:0))!=Te)_e=0;else{if(Te>Z.Vb){if(Z.Vb=0,Z.Ec=o(Te),Z.Fc=0,Z.Ec==null){_e=Gr(Z,1,"no memory during frame initialization.");break t}Z.Vb=Te}Te=Z.Ec,De=Z.Fc,Z.Ac=Te,Z.Bc=De,De+=Oe,Z.Gd=u(ft,ss),Z.Hd=0,Z.rb=u(rt+1,Yi),Z.sb=1,Z.wa=Mt?u(Mt,ns):null,Z.Y=0,Z.D.Nb=0,Z.D.wa=Z.wa,Z.D.Y=Z.Y,0<Z.Aa&&(Z.D.Y+=Fe),e(!0),Z.oc=Te,Z.pc=De,De+=832,Z.ya=u(at,so),Z.aa=0,Z.D.ya=Z.ya,Z.D.aa=Z.aa,Z.Aa==2&&(Z.D.aa+=Fe),Z.R=16*Fe,Z.B=8*Fe,Fe=(ft=Ga[Z.L])*Z.R,ft=ft/2*Z.B,Z.sa=Te,Z.ta=De+Fe,Z.qa=Z.sa,Z.ra=Z.ta+16*_e*Z.R+ft,Z.Ha=Z.qa,Z.Ia=Z.ra+8*_e*Z.B+ft,Z.$c=0,De+=je,Z.mb=Le?Te:null,Z.nb=Le?De:null,e(De+Le<=Z.Fc+Z.Vb),_a(Z),a(Z.Ac,Z.Bc,0,Oe),_e=1}}if(_e){if(ye.ka=0,ye.y=Z.sa,ye.O=Z.ta,ye.f=Z.qa,ye.N=Z.ra,ye.ea=Z.Ha,ye.Vd=Z.Ia,ye.fa=Z.R,ye.Rc=Z.B,ye.F=null,ye.J=0,!Gc){for(_e=-255;255>=_e;++_e)zc[255+_e]=0>_e?-_e:_e;for(_e=-1020;1020>=_e;++_e)Wc[1020+_e]=-128>_e?-128:127<_e?127:_e;for(_e=-112;112>=_e;++_e)Hc[112+_e]=-16>_e?-16:15<_e?15:_e;for(_e=-255;510>=_e;++_e)Vc[255+_e]=0>_e?0:255<_e?255:_e;Gc=1}aa=Sa,Ma=Na,zn=si,Zt=ao,or=Xt,Pr=Yo,Lr=jn,Jr=_s,Us=I,sl=re,xo=fo,Ci=x,Yl=de,wo=be,Xl=_i,Uc=Qi,il=tl,Ua=Pa,ks[0]=Gl,ks[1]=Xo,ks[2]=ai,ks[3]=Mc,ks[4]=as,ks[5]=Kl,ks[6]=bi,ks[7]=co,ks[8]=Qo,ks[9]=ja,Rn[0]=ii,Rn[1]=Vl,Rn[2]=oo,Rn[3]=lo,Rn[4]=$n,Rn[5]=ys,Rn[6]=ka,Wn[0]=uo,Wn[1]=Hl,Wn[2]=Ds,Wn[3]=Aa,Wn[4]=el,Wn[5]=Zo,Wn[6]=ho,_e=1}else _e=0}_e&&(_e=(function(Vt,Tr){for(Vt.M=0;Vt.M<Vt.Va;++Vt.M){var Ut,nt=Vt.Jc[Vt.M&Vt.Xb],Je=Vt.m,Mr=Vt;for(Ut=0;Ut<Mr.za;++Ut){var Tt=Je,Ht=Mr,xr=Ht.Ac,dn=Ht.Bc+4*Ut,Yr=Ht.zc,Er=Ht.ya[Ht.aa+Ut];if(Ht.Qa.Bb?Er.$b=Ne(Tt,Ht.Pa.jb[0])?2+Ne(Tt,Ht.Pa.jb[2]):Ne(Tt,Ht.Pa.jb[1]):Er.$b=0,Ht.kc&&(Er.Ad=Ne(Tt,Ht.Bd)),Er.Za=!Ne(Tt,145)+0,Er.Za){var sn=Er.Ob,hn=0;for(Ht=0;4>Ht;++Ht){var Nr,Kt=Yr[0+Ht];for(Nr=0;4>Nr;++Nr){Kt=Qd[xr[dn+Nr]][Kt];for(var er=$u[Ne(Tt,Kt[0])];0<er;)er=$u[2*er+Ne(Tt,Kt[er])];Kt=-er,xr[dn+Nr]=Kt}s(sn,hn,xr,dn,4),hn+=4,Yr[0+Ht]=Kt}}else Kt=Ne(Tt,156)?Ne(Tt,128)?1:3:Ne(Tt,163)?2:0,Er.Ob[0]=Kt,a(xr,dn,Kt,4),a(Yr,0,Kt,4);Er.Dd=Ne(Tt,142)?Ne(Tt,114)?Ne(Tt,183)?1:3:2:0}if(Mr.m.Ka)return Gr(Vt,7,"Premature end-of-partition0 encountered.");for(;Vt.ja<Vt.za;++Vt.ja){if(Mr=nt,Tt=(Je=Vt).rb[Je.sb-1],xr=Je.rb[Je.sb+Je.ja],Ut=Je.ya[Je.aa+Je.ja],dn=Je.kc?Ut.Ad:0)Tt.la=xr.la=0,Ut.Za||(Tt.Na=xr.Na=0),Ut.Hc=0,Ut.Gc=0,Ut.ia=0;else{var Sr,tr;if(Tt=xr,xr=Mr,dn=Je.Pa.Xc,Yr=Je.ya[Je.aa+Je.ja],Er=Je.pb[Yr.$b],Ht=Yr.ad,sn=0,hn=Je.rb[Je.sb-1],Kt=Nr=0,a(Ht,sn,0,384),Yr.Za)var Or=0,Ir=dn[3];else{er=o(16);var dr=Tt.Na+hn.Na;if(dr=Wa(xr,dn[1],dr,Er.Eb,0,er,0),Tt.Na=hn.Na=(0<dr)+0,1<dr)aa(er,0,Ht,sn);else{var En=er[0]+3>>3;for(er=0;256>er;er+=16)Ht[sn+er]=En}Or=1,Ir=dn[0]}var cr=15&Tt.la,hr=15&hn.la;for(er=0;4>er;++er){var Xr=1&hr;for(En=tr=0;4>En;++En)cr=cr>>1|(Xr=(dr=Wa(xr,Ir,dr=Xr+(1&cr),Er.Sc,Or,Ht,sn))>Or)<<7,tr=tr<<2|(3<dr?3:1<dr?2:Ht[sn+0]!=0),sn+=16;cr>>=4,hr=hr>>1|Xr<<7,Nr=(Nr<<8|tr)>>>0}for(Ir=cr,Or=hr>>4,Sr=0;4>Sr;Sr+=2){for(tr=0,cr=Tt.la>>4+Sr,hr=hn.la>>4+Sr,er=0;2>er;++er){for(Xr=1&hr,En=0;2>En;++En)dr=Xr+(1&cr),cr=cr>>1|(Xr=0<(dr=Wa(xr,dn[2],dr,Er.Qc,0,Ht,sn)))<<3,tr=tr<<2|(3<dr?3:1<dr?2:Ht[sn+0]!=0),sn+=16;cr>>=2,hr=hr>>1|Xr<<5}Kt|=tr<<4*Sr,Ir|=cr<<4<<Sr,Or|=(240&hr)<<Sr}Tt.la=Ir,hn.la=Or,Yr.Hc=Nr,Yr.Gc=Kt,Yr.ia=43690&Kt?0:Er.ia,dn=!(Nr|Kt)}if(0<Je.L&&(Je.wa[Je.Y+Je.ja]=Je.gd[Ut.$b][Ut.Za],Je.wa[Je.Y+Je.ja].La|=!dn),Mr.Ka)return Gr(Vt,7,"Premature end-of-file encountered.")}if(_a(Vt),Je=Tr,Mr=1,Ut=(nt=Vt).D,Tt=0<nt.L&&nt.M>=nt.zb&&nt.M<=nt.Va,nt.Aa==0)t:{if(Ut.M=nt.M,Ut.uc=Tt,os(nt,Ut),Mr=1,Ut=(tr=nt.D).Nb,Tt=(Kt=Ga[nt.L])*nt.R,xr=Kt/2*nt.B,er=16*Ut*nt.R,En=8*Ut*nt.B,dn=nt.sa,Yr=nt.ta-Tt+er,Er=nt.qa,Ht=nt.ra-xr+En,sn=nt.Ha,hn=nt.Ia-xr+En,hr=(cr=tr.M)==0,Nr=cr>=nt.Va-1,nt.Aa==2&&os(nt,tr),tr.uc)for(Xr=(dr=nt).D.M,e(dr.D.uc),tr=dr.yb;tr<dr.Hb;++tr){Or=tr,Ir=Xr;var bn=(Kn=(qr=dr).D).Nb;Sr=qr.R;var Kn=Kn.wa[Kn.Y+Or],Ur=qr.sa,$r=qr.ta+16*bn*Sr+16*Or,Cn=Kn.dd,fr=Kn.tc;if(fr!=0)if(e(3<=fr),qr.L==1)0<Or&&Uc(Ur,$r,Sr,fr+4),Kn.La&&Ua(Ur,$r,Sr,fr),0<Ir&&Xl(Ur,$r,Sr,fr+4),Kn.La&&il(Ur,$r,Sr,fr);else{var Pn=qr.B,js=qr.qa,qs=qr.ra+8*bn*Pn+8*Or,fn=qr.Ha,qr=qr.Ia+8*bn*Pn+8*Or;bn=Kn.ld,0<Or&&(Jr(Ur,$r,Sr,fr+4,Cn,bn),sl(js,qs,fn,qr,Pn,fr+4,Cn,bn)),Kn.La&&(Ci(Ur,$r,Sr,fr,Cn,bn),wo(js,qs,fn,qr,Pn,fr,Cn,bn)),0<Ir&&(Lr(Ur,$r,Sr,fr+4,Cn,bn),Us(js,qs,fn,qr,Pn,fr+4,Cn,bn)),Kn.La&&(xo(Ur,$r,Sr,fr,Cn,bn),Yl(js,qs,fn,qr,Pn,fr,Cn,bn))}}if(nt.ia&&alert("todo:DitherRow"),Je.put!=null){if(tr=16*cr,cr=16*(cr+1),hr?(Je.y=nt.sa,Je.O=nt.ta+er,Je.f=nt.qa,Je.N=nt.ra+En,Je.ea=nt.Ha,Je.W=nt.Ia+En):(tr-=Kt,Je.y=dn,Je.O=Yr,Je.f=Er,Je.N=Ht,Je.ea=sn,Je.W=hn),Nr||(cr-=Kt),cr>Je.o&&(cr=Je.o),Je.F=null,Je.J=null,nt.Fa!=null&&0<nt.Fa.length&&tr<cr&&(Je.J=yr(nt,Je,tr,cr-tr),Je.F=nt.mb,Je.F==null&&Je.F.length==0)){Mr=Gr(nt,3,"Could not decode alpha data.");break t}tr<Je.j&&(Kt=Je.j-tr,tr=Je.j,e(!(1&Kt)),Je.O+=nt.R*Kt,Je.N+=nt.B*(Kt>>1),Je.W+=nt.B*(Kt>>1),Je.F!=null&&(Je.J+=Je.width*Kt)),tr<cr&&(Je.O+=Je.v,Je.N+=Je.v>>1,Je.W+=Je.v>>1,Je.F!=null&&(Je.J+=Je.v),Je.ka=tr-Je.j,Je.U=Je.va-Je.v,Je.T=cr-tr,Mr=Je.put(Je))}Ut+1!=nt.Ic||Nr||(s(nt.sa,nt.ta-Tt,dn,Yr+16*nt.R,Tt),s(nt.qa,nt.ra-xr,Er,Ht+8*nt.B,xr),s(nt.Ha,nt.Ia-xr,sn,hn+8*nt.B,xr))}if(!Mr)return Gr(Vt,6,"Output aborted.")}return 1})(Z,ye)),ye.bc!=null&&ye.bc(ye),_e&=1}return _e?(Z.cb=0,_e):0})(f,j)||(m=f.a)}}else m=f.a}m==0&&$.Oa!=null&&$.Oa.fd&&(m=mo($.ba))}$=m}M=$!=0?null:11>M?z.f.RGBA.eb:z.f.kb.y}else M=null;return M};var pl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(J,he){for(var U="",q=0;q<4;q++)U+=String.fromCharCode(J[he++]);return U}function v(J,he){return J[he+0]|J[he+1]<<8}function _(J,he){return(J[he+0]|J[he+1]<<8|J[he+2]<<16)>>>0}function N(J,he){return(J[he+0]|J[he+1]<<8|J[he+2]<<16|J[he+3]<<24)>>>0}new h;var y=[0],k=[0],A=[],C=new h,L=r,R=(function(J,he){var U={},q=0,D=!1,G=0,ge=0;if(U.frames=[],!(function(P,K){for(var ee=0;ee<4;ee++)if(P[K+ee]!="RIFF".charCodeAt(ee))return!0;return!1})(J,he)){for(N(J,he+=4),he+=8;he<J.length;){var ae=g(J,he),we=N(J,he+=4);he+=4;var ie=we+(1&we);switch(ae){case"VP8 ":case"VP8L":U.frames[q]===void 0&&(U.frames[q]={}),(V=U.frames[q]).src_off=D?ge:he-8,V.src_size=G+we+8,q++,D&&(D=!1,G=0,ge=0);break;case"VP8X":(V=U.header={}).feature_flags=J[he];var ne=he+4;V.canvas_width=1+_(J,ne),ne+=3,V.canvas_height=1+_(J,ne),ne+=3;break;case"ALPH":D=!0,G=ie+8,ge=he-8;break;case"ANIM":(V=U.header).bgcolor=N(J,he),ne=he+4,V.loop_count=v(J,ne),ne+=2;break;case"ANMF":var ve,V;(V=U.frames[q]={}).offset_x=2*_(J,he),he+=3,V.offset_y=2*_(J,he),he+=3,V.width=1+_(J,he),he+=3,V.height=1+_(J,he),he+=3,V.duration=_(J,he),he+=3,ve=J[he++],V.dispose=1&ve,V.blend=ve>>1&1}ae!="ANMF"&&(he+=ie)}return U}})(L,0);R.response=L,R.rgbaoutput=!0,R.dataurl=!1;var E=R.header?R.header:null,T=R.frames?R.frames:null;if(E){E.loop_counter=E.loop_count,y=[E.canvas_height],k=[E.canvas_width];for(var te=0;te<T.length&&T[te].blend!=0;te++);}var B=T[0],H=C.WebPDecodeRGBA(L,B.src_off,B.src_size,k,y);B.rgba=H,B.imgwidth=k[0],B.imgheight=y[0];for(var Y=0;Y<k[0]*y[0]*4;Y++)A[Y]=H[Y];return this.width=k,this.height=y,this.data=A,this}(function(r){var e,t,s,a,o,u,d,h,g,v=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new h,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new u,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new u,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new _(this),e=this.internal.f2,t=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,g=new v}]);var _=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=P;Object.defineProperty(this,"pdf",{get:function(){return K}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(X){ee=!!X}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(X){le=!!X}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(X){isNaN(X)||(ue=X)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(X){isNaN(X)||(se=X)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(X){var Ye;typeof X=="number"?Ye=[X,X,X,X]:((Ye=new Array(4))[0]=X[0],Ye[1]=X.length>=2?X[1]:Ye[0],Ye[2]=X.length>=3?X[2]:Ye[0],Ye[3]=X.length>=4?X[3]:Ye[1]),g.margin=Ye}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(X){ce=X}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(X){me=X}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(X){Ne=X}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(X){X instanceof v&&(g=X)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(X){g.path=X}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(X){Ie=X}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(X){var Ye;Ye=N(X),this.ctx.fillStyle=Ye.style,this.ctx.isFillTransparent=Ye.a===0,this.ctx.fillOpacity=Ye.a,this.pdf.setFillColor(Ye.r,Ye.g,Ye.b,{a:Ye.a}),this.pdf.setTextColor(Ye.r,Ye.g,Ye.b,{a:Ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(X){var Ye=N(X);this.ctx.strokeStyle=Ye.style,this.ctx.isStrokeTransparent=Ye.a===0,this.ctx.strokeOpacity=Ye.a,Ye.a===0?this.pdf.setDrawColor(255,255,255):(Ye.a,this.pdf.setDrawColor(Ye.r,Ye.g,Ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(X){["butt","round","square"].indexOf(X)!==-1&&(this.ctx.lineCap=X,this.pdf.setLineCap(X))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(X){isNaN(X)||(this.ctx.lineWidth=X,this.pdf.setLineWidth(X))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(X){["bevel","round","miter"].indexOf(X)!==-1&&(this.ctx.lineJoin=X,this.pdf.setLineJoin(X))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(X){isNaN(X)||(this.ctx.miterLimit=X,this.pdf.setMiterLimit(X))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(X){this.ctx.textBaseline=X}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(X){["right","end","center","left","start"].indexOf(X)!==-1&&(this.ctx.textAlign=X)}});var He=null,Me=null,Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(X){He=null,Me=null,Xe=X}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(X){var Ye;if(this.ctx.font=X,(Ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(X))!==null){var dt=Ye[1];Ye[2];var bt=Ye[3],qe=Ye[4];Ye[5];var pt=Ye[6],Qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(qe)[2];qe=Math.floor(Qe==="px"?parseFloat(qe)*this.pdf.internal.scaleFactor:Qe==="em"?parseFloat(qe)*this.pdf.getFontSize():parseFloat(qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(qe);var vt=(function(Ge){var Ze,At,yt=[],qt=Ge.trim();if(qt==="")return vf;if(qt in Fg)return[Fg[qt]];for(;qt!=="";){switch(At=null,Ze=(qt=Mg(qt)).charAt(0)){case'"':case"'":At=Pw(qt.substring(1),Ze);break;default:At=Lw(qt)}if(At===null||(yt.push(At[0]),(qt=Mg(At[1]))!==""&&qt.charAt(0)!==","))return vf;qt=qt.replace(/^,/,"")}return yt})(pt);if(this.fontFaces){var gt=(function(Ge,Ze){var At=Ge.getFontList(),yt=JSON.stringify(At);if(He===null||Me!==yt){var qt=(function(mr){var wt=[];return Object.keys(mr).forEach(function(ar){mr[ar].forEach(function(_t){var It=null;switch(_t){case"bold":It={family:ar,weight:"bold"};break;case"italic":It={family:ar,style:"italic"};break;case"bolditalic":It={family:ar,weight:"bold",style:"italic"};break;case"":case"normal":It={family:ar}}It!==null&&(It.ref={name:ar,style:_t},wt.push(It))})}),wt})(At);He=(function(mr){for(var wt={},ar=0;ar<mr.length;++ar){var _t=mf(mr[ar]),It=_t.family,sr=_t.stretch,Bt=_t.style,Nt=_t.weight;wt[It]=wt[It]||{},wt[It][sr]=wt[It][sr]||{},wt[It][sr][Bt]=wt[It][sr][Bt]||{},wt[It][sr][Bt][Nt]=_t}return wt})(qt.concat(Ze)),Me=yt}return He})(this.pdf,this.fontFaces),Jt=vt.map(function(Ge){return{family:Ge,stretch:"normal",weight:bt,style:dt}}),zt=(function(Ge,Ze,At){for(var yt=(At=At||{}).defaultFontFamily||"times",qt=Object.assign({},Cw,At.genericFontFamilies||{}),mr=null,wt=null,ar=0;ar<Ze.length;++ar)if(qt[(mr=mf(Ze[ar])).family]&&(mr.family=qt[mr.family]),Ge.hasOwnProperty(mr.family)){wt=Ge[mr.family];break}if(!(wt=wt||Ge[yt]))throw new Error("Could not find a font-family for the rule '"+Bg(mr)+"' and default family '"+yt+"'.");if(wt=(function(_t,It){if(It[_t])return It[_t];var sr=Vf[_t],Bt=sr<=Vf.normal?-1:1,Nt=Dg(It,a1,sr,Bt);if(!Nt)throw new Error("Could not find a matching font-stretch value for "+_t);return Nt})(mr.stretch,wt),wt=(function(_t,It){if(It[_t])return It[_t];for(var sr=i1[_t],Bt=0;Bt<sr.length;++Bt)if(It[sr[Bt]])return It[sr[Bt]];throw new Error("Could not find a matching font-style for "+_t)})(mr.style,wt),!(wt=(function(_t,It){if(It[_t])return It[_t];if(_t===400&&It[500])return It[500];if(_t===500&&It[400])return It[400];var sr=Ew[_t],Bt=Dg(It,o1,sr,_t<400?-1:1);if(!Bt)throw new Error("Could not find a matching font-weight for value "+_t);return Bt})(mr.weight,wt)))throw new Error("Failed to resolve a font for the rule '"+Bg(mr)+"'.");return wt})(gt,Jt);this.pdf.setFont(zt.ref.name,zt.ref.style)}else{var Lt="";(bt==="bold"||parseInt(bt,10)>=700||dt==="bold")&&(Lt="bold"),dt==="italic"&&(Lt+="italic"),Lt.length===0&&(Lt="normal");for(var Wt="",Ae={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<vt.length;Be++){if(this.pdf.internal.getFont(vt[Be],Lt,{noFallback:!0,disableWarning:!0})!==void 0){Wt=vt[Be];break}if(Lt==="bolditalic"&&this.pdf.internal.getFont(vt[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Wt=vt[Be],Lt="bold";else if(this.pdf.internal.getFont(vt[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Wt=vt[Be],Lt="normal";break}}if(Wt===""){for(var Ue=0;Ue<vt.length;Ue++)if(Ae[vt[Ue]]){Wt=Ae[vt[Ue]];break}}Wt=Wt===""?"Times":Wt,this.pdf.setFont(Wt,Lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(X){this.ctx.globalCompositeOperation=X}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(X){this.ctx.globalAlpha=X}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(X){this.ctx.lineDashOffset=X,V.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(X){this.ctx.lineDash=X,V.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(X){this.ctx.ignoreClearRect=!!X}})};_.prototype.setLineDash=function(P){this.lineDash=P},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){T.call(this,"fill",!1)},_.prototype.stroke=function(){T.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(P,K){if(isNaN(P)||isNaN(K))throw _r.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new u(P,K));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(P,K)},_.prototype.closePath=function(){var P=new u(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&gr(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){P=new u(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(P.x,P.y)},_.prototype.lineTo=function(P,K){if(isNaN(P)||isNaN(K))throw _r.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new u(P,K));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new u(ee.x,ee.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},_.prototype.quadraticCurveTo=function(P,K,ee,le){if(isNaN(ee)||isNaN(le)||isNaN(P)||isNaN(K))throw _r.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new u(ee,le)),se=this.ctx.transform.applyToPoint(new u(P,K));this.path.push({type:"qct",x1:se.x,y1:se.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new u(ue.x,ue.y)},_.prototype.bezierCurveTo=function(P,K,ee,le,ue,se){if(isNaN(ue)||isNaN(se)||isNaN(P)||isNaN(K)||isNaN(ee)||isNaN(le))throw _r.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new u(ue,se)),me=this.ctx.transform.applyToPoint(new u(P,K)),Ne=this.ctx.transform.applyToPoint(new u(ee,le));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Ne.x,y2:Ne.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new u(ce.x,ce.y)},_.prototype.arc=function(P,K,ee,le,ue,se){if(isNaN(P)||isNaN(K)||isNaN(ee)||isNaN(le)||isNaN(ue))throw _r.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new u(P,K));P=ce.x,K=ce.y;var me=this.ctx.transform.applyToPoint(new u(0,ee)),Ne=this.ctx.transform.applyToPoint(new u(0,0));ee=Math.sqrt(Math.pow(me.x-Ne.x,2)+Math.pow(me.y-Ne.y,2))}Math.abs(ue-le)>=2*Math.PI&&(le=0,ue=2*Math.PI),this.path.push({type:"arc",x:P,y:K,radius:ee,startAngle:le,endAngle:ue,counterclockwise:se})},_.prototype.arcTo=function(P,K,ee,le,ue){throw new Error("arcTo not implemented.")},_.prototype.rect=function(P,K,ee,le){if(isNaN(P)||isNaN(K)||isNaN(ee)||isNaN(le))throw _r.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,K),this.lineTo(P+ee,K),this.lineTo(P+ee,K+le),this.lineTo(P,K+le),this.lineTo(P,K),this.lineTo(P+ee,K),this.lineTo(P,K)},_.prototype.fillRect=function(P,K,ee,le){if(isNaN(P)||isNaN(K)||isNaN(ee)||isNaN(le))throw _r.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,K,ee,le),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},_.prototype.strokeRect=function(P,K,ee,le){if(isNaN(P)||isNaN(K)||isNaN(ee)||isNaN(le))throw _r.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(P,K,ee,le),this.stroke())},_.prototype.clearRect=function(P,K,ee,le){if(isNaN(P)||isNaN(K)||isNaN(ee)||isNaN(le))throw _r.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,K,ee,le))},_.prototype.save=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},_.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(K),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(P){var K,ee,le,ue;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))K=0,ee=0,le=0,ue=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(se!==null)K=parseInt(se[1]),ee=parseInt(se[2]),le=parseInt(se[3]),ue=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)K=parseInt(se[1]),ee=parseInt(se[2]),le=parseInt(se[3]),ue=parseFloat(se[4]);else{if(ue=1,typeof P=="string"&&P.charAt(0)!=="#"){var ce=new Qm(P);P=ce.ok?ce.toHex():"#000000"}P.length===4?(K=P.substring(1,2),K+=K,ee=P.substring(2,3),ee+=ee,le=P.substring(3,4),le+=le):(K=P.substring(1,3),ee=P.substring(3,5),le=P.substring(5,7)),K=parseInt(K,16),ee=parseInt(ee,16),le=parseInt(le,16)}}return{r:K,g:ee,b:le,a:ue,style:P}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(P,K,ee,le){if(isNaN(K)||isNaN(ee)||typeof P!="string")throw _r.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!y.call(this)){var ue=ie(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;q.call(this,{text:P,x:K,y:ee,scale:se,angle:ue,align:this.textAlign,maxWidth:le})}},_.prototype.strokeText=function(P,K,ee,le){if(isNaN(K)||isNaN(ee)||typeof P!="string")throw _r.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){le=isNaN(le)?void 0:le;var ue=ie(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;q.call(this,{text:P,x:K,y:ee,scale:se,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:le})}},_.prototype.measureText=function(P){if(typeof P!="string")throw _r.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,ee=this.pdf.internal.scaleFactor,le=K.internal.getFontSize(),ue=K.getStringUnitWidth(P)*le/K.internal.scaleFactor;return new function(se){var ce=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this}({width:ue*=Math.round(96*ee/72*1e4)/1e4})},_.prototype.scale=function(P,K){if(isNaN(P)||isNaN(K))throw _r.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new h(P,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},_.prototype.rotate=function(P){if(isNaN(P))throw _r.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new h(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},_.prototype.translate=function(P,K){if(isNaN(P)||isNaN(K))throw _r.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new h(1,0,0,1,P,K);this.ctx.transform=this.ctx.transform.multiply(ee)},_.prototype.transform=function(P,K,ee,le,ue,se){if(isNaN(P)||isNaN(K)||isNaN(ee)||isNaN(le)||isNaN(ue)||isNaN(se))throw _r.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new h(P,K,ee,le,ue,se);this.ctx.transform=this.ctx.transform.multiply(ce)},_.prototype.setTransform=function(P,K,ee,le,ue,se){P=isNaN(P)?1:P,K=isNaN(K)?0:K,ee=isNaN(ee)?0:ee,le=isNaN(le)?1:le,ue=isNaN(ue)?0:ue,se=isNaN(se)?0:se,this.ctx.transform=new h(P,K,ee,le,ue,se)};var A=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(P,K,ee,le,ue,se,ce,me,Ne){var Ie=this.pdf.getImageProperties(P),He=1,Me=1,Xe=1,X=1;le!==void 0&&me!==void 0&&(Xe=me/le,X=Ne/ue,He=Ie.width/le*me/le,Me=Ie.height/ue*Ne/ue),se===void 0&&(se=K,ce=ee,K=0,ee=0),le!==void 0&&me===void 0&&(me=le,Ne=ue),le===void 0&&me===void 0&&(me=Ie.width,Ne=Ie.height);var Ye=this.ctx.transform.decompose(),dt=ie(Ye.rotate.shx),bt=new h,qe=(bt=(bt=(bt=bt.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale)).applyToRectangle(new d(se-K*Xe,ce-ee*X,le*He,ue*Me));if(this.autoPaging){for(var pt,Qe=C.call(this,qe),vt=[],gt=0;gt<Qe.length;gt+=1)vt.indexOf(Qe[gt])===-1&&vt.push(Qe[gt]);E(vt);for(var Jt=vt[0],zt=vt[vt.length-1],Lt=Jt;Lt<zt+1;Lt++){this.pdf.setPage(Lt);var Wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=Lt===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=Lt===1?0:Be+(Lt-2)*Ue;if(this.ctx.clip_path.length!==0){var Ze=this.path;pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(pt,this.posX+this.margin[3],-Ge+Ae+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Ze}var At=JSON.parse(JSON.stringify(qe));At=R([At],this.posX+this.margin[3],-Ge+Ae+this.ctx.prevPageLastElemOffset)[0];var yt=(Lt>Jt||Lt<zt)&&A.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,Ue,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",At.x,At.y,At.w,At.h,null,null,dt),yt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",qe.x,qe.y,qe.w,qe.h,null,null,dt)};var C=function(P,K,ee){var le=[];K=K||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":le.push(Math.floor((P.y+ue)/ee)+1);break;case"arc":le.push(Math.floor((P.y+ue-P.radius)/ee)+1),le.push(Math.floor((P.y+ue+P.radius)/ee)+1);break;case"qct":var se=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);le.push(Math.floor((se.y+ue)/ee)+1),le.push(Math.floor((se.y+se.h+ue)/ee)+1);break;case"bct":var ce=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);le.push(Math.floor((ce.y+ue)/ee)+1),le.push(Math.floor((ce.y+ce.h+ue)/ee)+1);break;case"rect":le.push(Math.floor((P.y+ue)/ee)+1),le.push(Math.floor((P.y+P.h+ue)/ee)+1)}for(var me=0;me<le.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<le[me];)L.call(this);return le},L=function(){var P=this.fillStyle,K=this.strokeStyle,ee=this.font,le=this.lineCap,ue=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=K,this.font=ee,this.lineCap=le,this.lineWidth=ue,this.lineJoin=se},R=function(P,K,ee){for(var le=0;le<P.length;le++)switch(P[le].type){case"bct":P[le].x2+=K,P[le].y2+=ee;case"qct":P[le].x1+=K,P[le].y1+=ee;default:P[le].x+=K,P[le].y+=ee}return P},E=function(P){return P.sort(function(K,ee){return K-ee})},T=function(P,K){var ee=this.fillStyle,le=this.strokeStyle,ue=this.lineCap,se=this.lineWidth,ce=Math.abs(se*this.ctx.transform.scaleX),me=this.lineJoin;if(this.autoPaging){for(var Ne,Ie,He=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),Xe=[],X=0;X<Me.length;X++)if(Me[X].x!==void 0)for(var Ye=C.call(this,Me[X]),dt=0;dt<Ye.length;dt+=1)Xe.indexOf(Ye[dt])===-1&&Xe.push(Ye[dt]);for(var bt=0;bt<Xe.length;bt++)for(;this.pdf.internal.getNumberOfPages()<Xe[bt];)L.call(this);E(Xe);for(var qe=Xe[0],pt=Xe[Xe.length-1],Qe=qe;Qe<pt+1;Qe++){this.pdf.setPage(Qe),this.fillStyle=ee,this.strokeStyle=le,this.lineCap=ue,this.lineWidth=ce,this.lineJoin=me;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gt=Qe===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Lt=Qe===1?0:Jt+(Qe-2)*zt;if(this.ctx.clip_path.length!==0){var Wt=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Ne,this.posX+this.margin[3],-Lt+gt+this.ctx.prevPageLastElemOffset),te.call(this,P,!0),this.path=Wt}if(Ie=JSON.parse(JSON.stringify(He)),this.path=R(Ie,this.posX+this.margin[3],-Lt+gt+this.ctx.prevPageLastElemOffset),K===!1||Qe===0){var Ae=(Qe>qe||Qe<pt)&&A.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,zt,null).clip().discardPath()),te.call(this,P,K),Ae&&this.pdf.restoreGraphicsState()}this.lineWidth=se}this.path=He}else this.lineWidth=ce,te.call(this,P,K),this.lineWidth=se},te=function(P,K){if((P!=="stroke"||K||!k.call(this))&&(P==="stroke"||K||!y.call(this))){for(var ee,le,ue=[],se=this.path,ce=0;ce<se.length;ce++){var me=se[ce];switch(me.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:me,deltas:[],abs:[]});break;case"lt":var Ne=ue.length;if(se[ce-1]&&!isNaN(se[ce-1].x)&&(ee=[me.x-se[ce-1].x,me.y-se[ce-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ue[Ne-1].close!==!0&&ue[Ne-1].begin!==!0){ue[Ne-1].deltas.push(ee),ue[Ne-1].abs.push(me);break}}break;case"bct":ee=[me.x1-se[ce-1].x,me.y1-se[ce-1].y,me.x2-se[ce-1].x,me.y2-se[ce-1].y,me.x-se[ce-1].x,me.y-se[ce-1].y],ue[ue.length-1].deltas.push(ee);break;case"qct":var Ie=se[ce-1].x+2/3*(me.x1-se[ce-1].x),He=se[ce-1].y+2/3*(me.y1-se[ce-1].y),Me=me.x+2/3*(me.x1-me.x),Xe=me.y+2/3*(me.y1-me.y),X=me.x,Ye=me.y;ee=[Ie-se[ce-1].x,He-se[ce-1].y,Me-se[ce-1].x,Xe-se[ce-1].y,X-se[ce-1].x,Ye-se[ce-1].y],ue[ue.length-1].deltas.push(ee);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(me)}}le=K?null:P==="stroke"?"stroke":"fill";for(var dt=!1,bt=0;bt<ue.length;bt++)if(ue[bt].arc)for(var qe=ue[bt].abs,pt=0;pt<qe.length;pt++){var Qe=qe[pt];Qe.type==="arc"?Y.call(this,Qe.x,Qe.y,Qe.radius,Qe.startAngle,Qe.endAngle,Qe.counterclockwise,void 0,K,!dt):D.call(this,Qe.x,Qe.y),dt=!0}else if(ue[bt].close===!0)this.pdf.internal.out("h"),dt=!1;else if(ue[bt].begin!==!0){var vt=ue[bt].start.x,gt=ue[bt].start.y;G.call(this,ue[bt].deltas,vt,gt),dt=!0}le&&J.call(this,le),K&&he.call(this)}},B=function(P){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-ee;case"top":return P+K-ee;case"hanging":return P+K-2*ee;case"middle":return P+K/2-ee;default:return P}},H=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(K,ee){this.colorStops.push([K,ee])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Y=function(P,K,ee,le,ue,se,ce,me,Ne){for(var Ie=ae.call(this,ee,le,ue,se),He=0;He<Ie.length;He++){var Me=Ie[He];He===0&&(Ne?U.call(this,Me.x1+P,Me.y1+K):D.call(this,Me.x1+P,Me.y1+K)),ge.call(this,P,K,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}me?he.call(this):J.call(this,ce)},J=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(P,K){this.pdf.internal.out(t(P)+" "+s(K)+" m")},q=function(P){var K;switch(P.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var ee,le,ue,se=this.pdf.getTextDimensions(P.text),ce=B.call(this,P.y),me=H.call(this,ce)-se.h,Ne=this.ctx.transform.applyToPoint(new u(P.x,ce));if(this.autoPaging){var Ie=this.ctx.transform.decompose(),He=new h;He=(He=(He=He.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var Me=this.ctx.transform.applyToRectangle(new d(P.x,ce,se.w,se.h)),Xe=He.applyToRectangle(new d(P.x,me,se.w,se.h)),X=C.call(this,Xe),Ye=[],dt=0;dt<X.length;dt+=1)Ye.indexOf(X[dt])===-1&&Ye.push(X[dt]);E(Ye);for(var bt=Ye[0],qe=Ye[Ye.length-1],pt=bt;pt<qe+1;pt++){this.pdf.setPage(pt);var Qe=pt===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[2],Jt=gt-this.margin[0],zt=this.pdf.internal.pageSize.width-this.margin[1],Lt=zt-this.margin[3],Wt=pt===1?0:vt+(pt-2)*Jt;if(this.ctx.clip_path.length!==0){var Ae=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ee,this.posX+this.margin[3],-1*Wt+Qe),te.call(this,"fill",!0),this.path=Ae}var Be=R([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Wt+Qe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*P.scale),ue=this.lineWidth,this.lineWidth=ue*P.scale);var Ue=this.autoPaging!=="text";if(Ue||Be.y+Be.h<=gt){if(Ue||Be.y>=Qe&&Be.x<=zt){var Ge=Ue?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||zt-Be.x)[0],Ze=R([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-Wt+Qe+this.ctx.prevPageLastElemOffset)[0],At=Ue&&(pt>bt||pt<qe)&&A.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,Jt,null).clip().discardPath()),this.pdf.text(Ge,Ze.x,Ze.y,{angle:P.angle,align:K,renderingMode:P.renderingMode}),At&&this.pdf.restoreGraphicsState()}}else Be.y<gt&&(this.ctx.prevPageLastElemOffset+=gt-Be.y);P.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ue)}}else P.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*P.scale),ue=this.lineWidth,this.lineWidth=ue*P.scale),this.pdf.text(P.text,Ne.x+this.posX,Ne.y+this.posY,{angle:P.angle,align:K,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ue)},D=function(P,K,ee,le){ee=ee||0,le=le||0,this.pdf.internal.out(t(P+ee)+" "+s(K+le)+" l")},G=function(P,K,ee){return this.pdf.lines(P,K,ee,null,null)},ge=function(P,K,ee,le,ue,se,ce,me){this.pdf.internal.out([e(a(ee+P)),e(o(le+K)),e(a(ue+P)),e(o(se+K)),e(a(ce+P)),e(o(me+K)),"c"].join(" "))},ae=function(P,K,ee,le){for(var ue=2*Math.PI,se=Math.PI/2;K>ee;)K-=ue;var ce=Math.abs(ee-K);ce<ue&&le&&(ce=ue-ce);for(var me=[],Ne=le?-1:1,Ie=K;ce>1e-5;){var He=Ie+Ne*Math.min(ce,se);me.push(we.call(this,P,Ie,He)),ce-=Math.abs(He-Ie),Ie=He}return me},we=function(P,K,ee){var le=(ee-K)/2,ue=P*Math.cos(le),se=P*Math.sin(le),ce=ue,me=-se,Ne=ce*ce+me*me,Ie=Ne+ce*ue+me*se,He=4/3*(Math.sqrt(2*Ne*Ie)-Ie)/(ce*se-me*ue),Me=ce-He*me,Xe=me+He*ce,X=Me,Ye=-Xe,dt=le+K,bt=Math.cos(dt),qe=Math.sin(dt);return{x1:P*Math.cos(K),y1:P*Math.sin(K),x2:Me*bt-Xe*qe,y2:Me*qe+Xe*bt,x3:X*bt-Ye*qe,y3:X*qe+Ye*bt,x4:P*Math.cos(ee),y4:P*Math.sin(ee)}},ie=function(P){return 180*P/Math.PI},ne=function(P,K,ee,le,ue,se){var ce=P+.5*(ee-P),me=K+.5*(le-K),Ne=ue+.5*(ee-ue),Ie=se+.5*(le-se),He=Math.min(P,ue,ce,Ne),Me=Math.max(P,ue,ce,Ne),Xe=Math.min(K,se,me,Ie),X=Math.max(K,se,me,Ie);return new d(He,Xe,Me-He,X-Xe)},ve=function(P,K,ee,le,ue,se,ce,me){var Ne,Ie,He,Me,Xe,X,Ye,dt,bt,qe,pt,Qe,vt,gt,Jt=ee-P,zt=le-K,Lt=ue-ee,Wt=se-le,Ae=ce-ue,Be=me-se;for(Ie=0;Ie<41;Ie++)bt=(Ye=(He=P+(Ne=Ie/40)*Jt)+Ne*((Xe=ee+Ne*Lt)-He))+Ne*(Xe+Ne*(ue+Ne*Ae-Xe)-Ye),qe=(dt=(Me=K+Ne*zt)+Ne*((X=le+Ne*Wt)-Me))+Ne*(X+Ne*(se+Ne*Be-X)-dt),Ie==0?(pt=bt,Qe=qe,vt=bt,gt=qe):(pt=Math.min(pt,bt),Qe=Math.min(Qe,qe),vt=Math.max(vt,bt),gt=Math.max(gt,qe));return new d(Math.round(pt),Math.round(Qe),Math.round(vt-pt),Math.round(gt-Qe))},V=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,K,ee=(P=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:K}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(ct.API),(function(r){var e=function(u){var d,h,g,v,_,N,y,k,A,C;for(h=[],g=0,v=(u+=d="\0\0\0\0".slice(u.length%4||4)).length;v>g;g+=4)(_=(u.charCodeAt(g)<<24)+(u.charCodeAt(g+1)<<16)+(u.charCodeAt(g+2)<<8)+u.charCodeAt(g+3))!==0?(N=(_=((_=((_=((_=(_-(C=_%85))/85)-(A=_%85))/85)-(k=_%85))/85)-(y=_%85))/85)%85,h.push(N+33,y+33,k+33,A+33,C+33)):h.push(122);return(function(L,R){for(var E=R;E>0;E--)L.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(u){var d,h,g,v,_,N=String,y="length",k=255,A="charCodeAt",C="slice",L="replace";for(u[C](-2),u=u[C](0,-2)[L](/\s/g,"")[L]("z","!!!!!"),g=[],v=0,_=(u+=d="uuuuu"[C](u[y]%5||5))[y];_>v;v+=5)h=52200625*(u[A](v)-33)+614125*(u[A](v+1)-33)+7225*(u[A](v+2)-33)+85*(u[A](v+3)-33)+(u[A](v+4)-33),g.push(k&h>>24,k&h>>16,k&h>>8,k&h);return(function(R,E){for(var T=E;T>0;T--)R.pop()})(g,d[y]),N.fromCharCode.apply(N,g)},s=function(u){return u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(u){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),d.test(u)===!1)return"";for(var h="",g=0;g<u.length;g+=2)h+=String.fromCharCode("0x"+(u[g]+u[g+1]));return h},o=function(u){for(var d=new Uint8Array(u.length),h=u.length;h--;)d[h]=u.charCodeAt(h);return(d=Mf(d)).reduce(function(g,v){return g+String.fromCharCode(v)},"")};r.processDataByFilters=function(u,d){var h=0,g=u||"",v=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":g=t(g),v.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=e(g),v.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=a(g),v.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=s(g),v.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=o(g),v.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:g,reverseChain:v.reverse().join(" ")}}})(ct.API),(function(r){r.loadFile=function(e,t,s){return(function(a,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(h,g,v){var _=new XMLHttpRequest,N=0,y=function(k){var A=k.length,C=[],L=String.fromCharCode;for(N=0;N<A;N+=1)C.push(L(255&k.charCodeAt(N)));return C.join("")};if(_.open("GET",h,!g),_.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(_.onload=function(){_.status===200?v(y(this.responseText)):v(void 0)}),_.send(null),g&&_.status===200)return y(_.responseText)})(a,o,u)}catch{}return d})(e,t,s)},r.loadImageFile=r.loadFile})(ct.API),(function(r){function e(){return(Dt.html2canvas?Promise.resolve(Dt.html2canvas):yu(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(Dt.DOMPurify?Promise.resolve(Dt.DOMPurify):yu(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var h=gr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},a=function(d,h){var g=document.createElement(d);for(var v in h.className&&(g.className=h.className),h.innerHTML&&h.dompurify&&(g.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)g.style[v]=h.style[v];return g},o=function d(h,g){for(var v=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),_=h.firstChild;_;_=_.nextSibling)g!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||v.appendChild(d(_,g));return h.nodeType===1&&(h.nodeName==="CANVAS"?(v.width=h.width,v.height=h.height,v.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(v.value=h.value),v.addEventListener("load",function(){v.scrollTop=h.scrollTop,v.scrollLeft=h.scrollLeft},!0)),v},u=function d(h){var g=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),v=d.convert(Promise.resolve(),g);return(v=v.setProgress(1,d,1,[d])).set(h)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(d,h){return d.__proto__=h||u.prototype,d},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(g){switch(s(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(g){return this.set({src:a("div",{innerHTML:d,dompurify:g})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},u.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,h(this.prop.container,g)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var g=this.opt.jsPDF,v=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,N=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete N.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=v,v)for(var y=0;y<v.length;++y){var k=v[y],A=k.src.find(function(C){return C.format==="truetype"});A&&g.addFont(A.url,k.ref.name,k.ref.style)}return N.windowHeight=N.windowHeight||0,N.windowHeight=N.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):N.windowHeight,g.context2d.save(!0),h(this.prop.container,N)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(d,h,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},u.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},u.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},u.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(d){if(s(d)!=="object")return this;var h=Object.keys(d||{}).map(function(g){if(g in u.template.prop)return function(){this.prop[g]=d[g]};switch(g){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[g]=d[g]}}},this);return this.then(function(){return this.thenList(h)})},u.prototype.get=function(d,h){return this.then(function(){var g=d in u.template.prop?this.prop[d]:this.opt[d];return h?h(g):g})},u.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},u.prototype.setPageSize=function(d){function h(g,v){return Math.floor(g*v/72*96)}return this.then(function(){(d=d||ct.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},u.prototype.setProgress=function(d,h,g,v){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),g!=null&&(this.progress.n=g),v!=null&&(this.progress.stack=v),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(d,h,g,v){return this.setProgress(d?this.progress.val+d:null,h||null,g?this.progress.n+g:null,v?this.progress.stack.concat(v):null)},u.prototype.then=function(d,h){var g=this;return this.thenCore(d,h,function(v,_){return g.updateProgress(null,null,1,[v]),Promise.prototype.then.call(this,function(N){return g.updateProgress(null,v),N}).then(v,_).then(function(N){return g.updateProgress(1),N})})},u.prototype.thenCore=function(d,h,g){g=g||Promise.prototype.then;var v=this;d&&(d=d.bind(v)),h&&(h=h.bind(v));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?v:u.convert(Object.assign({},v),Promise.prototype),N=g.call(_,d,h);return u.convert(N,v.__proto__)},u.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},u.prototype.thenList=function(d){var h=this;return d.forEach(function(g){h=h.thenCore(g)}),h},u.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return u.convert(h,this)},u.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},u.prototype.error=function(d){return this.then(function(){throw new Error(d)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,ct.getPageSize=function(d,h,g){if(gr(d)==="object"){var v=d;d=v.orientation,h=v.unit||h,g=v.format||g}h=h||"mm",g=g||"a4",d=(""+(d||"P")).toLowerCase();var _,N=(""+g).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+h}var k,A=0,C=0;if(y.hasOwnProperty(N))A=y[N][1]/_,C=y[N][0]/_;else try{A=g[1],C=g[0]}catch{throw new Error("Invalid format: "+g)}if(d==="p"||d==="portrait")d="p",C>A&&(k=C,C=A,A=k);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",A>C&&(k=C,C=A,A=k)}return{width:C,height:A,unit:h,k:_,orientation:d}},r.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(mf):null;var g=new u(h);return h.worker?g:g.from(d).doCallback()}})(ct.API),ct.API.addJS=function(r){return $g=r,this.internal.events.subscribe("postPutResources",function(){Pd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Pd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ug=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$g+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Pd!==void 0&&Ug!==void 0&&this.internal.out("/Names <</JavaScript "+Pd+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),o=0;o<a.length;o++){var u=a[o],d=s.exec(u);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,v=[];for(o=0;o<g;o++){var _=t.internal.newObject();v.push(_);var N=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<v.length;o++)t.internal.write("(page_"+(o+1)+")"+v[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(s,a,o){var u={title:a,options:o,children:[]};return s==null&&(s=this.root),s.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(s){s.id=t.internal.newObjectDeferred();for(var a=0;a<s.children.length;a++)this.genIds_r(s.children[a])},t.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},t.outline.renderItems=function(s){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<s.children.length;o++){var u=s.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(s)),o>0&&this.line("/Prev "+this.makeRef(s.children[o-1])),o<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var h=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var g=0;g<s.children.length;g++)this.renderItems(s.children[g])},t.outline.line=function(s){this.ctx.val+=s+`\r
`},t.outline.makeRef=function(s){return s.id+" 0 R"},t.outline.makeString=function(s){return"("+t.internal.pdfEscape(s)+")"},t.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(s,a){for(var o=0;o<a.children.length;o++)s.count++,this.count_r(s,a.children[o]);return s.count}}])})(ct.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,s,a,o,u,d){var h,g=this.decode.DCT_DECODE,v=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(_){for(var N,y=256*_.charCodeAt(4)+_.charCodeAt(5),k=_.length,A={width:0,height:0,numcomponents:1},C=4;C<k;C+=2){if(C+=y,e.indexOf(_.charCodeAt(C+1))!==-1){N=256*_.charCodeAt(C+5)+_.charCodeAt(C+6),A={width:256*_.charCodeAt(C+7)+_.charCodeAt(C+8),height:N,numcomponents:_.charCodeAt(C+9)};break}y=256*_.charCodeAt(C+2)+_.charCodeAt(C+3)}return A})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}v={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:g,index:s,alias:a}}return v}})(ct.API),ct.API.processPNG=function(r,e,t,s){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var a,o=pw(r,{checkCrc:!0}),u=o.width,d=o.height,h=o.channels,g=o.palette,v=o.depth;a=g&&h===1?(function(Y){for(var J=Y.width,he=Y.height,U=Y.data,q=Y.palette,D=Y.depth,G=!1,ge=[],ae=[],we=void 0,ie=!1,ne=0,ve=0;ve<q.length;ve++){var V=H0(q[ve],4),P=V[0],K=V[1],ee=V[2],le=V[3];ge.push(P,K,ee),le!=null&&(le===0?(ne++,ae.length<1&&ae.push(ve)):le<255&&(ie=!0))}if(ie||ne>1){G=!0,ae=void 0;var ue=J*he;we=new Uint8Array(ue);for(var se=new DataView(U.buffer),ce=0;ce<ue;ce++){var me=yf(se,ce,D),Ne=H0(q[me],4)[3];we[ce]=Ne}}else ne===0&&(ae=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:G?8:void 0,colorBytes:U,alphaBytes:we,needSMask:G,palette:ge,mask:ae}})(o):h===2||h===4?(function(Y){for(var J=Y.data,he=Y.width,U=Y.height,q=Y.channels,D=Y.depth,G=q===2?"DeviceGray":"DeviceRGB",ge=q-1,ae=he*U,we=ge,ie=ae*we,ne=1*ae,ve=Math.ceil(ie*D/8),V=Math.ceil(ne*D/8),P=new Uint8Array(ve),K=new Uint8Array(V),ee=new DataView(J.buffer),le=new DataView(P.buffer),ue=new DataView(K.buffer),se=!1,ce=0;ce<ae;ce++){for(var me=ce*q,Ne=0;Ne<we;Ne++)Yg(le,yf(ee,me+Ne,D),ce*we+Ne,D);var Ie=yf(ee,me+we,D);Ie<(1<<D)-1&&(se=!0),Yg(ue,Ie,1*ce,D)}return{colorSpace:G,colorsPerPixel:ge,sMaskBitsPerComponent:se?D:void 0,colorBytes:P,alphaBytes:K,needSMask:se}})(o):(function(Y){var J=Y.data,he=Y.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:he,colorsPerPixel:he==="DeviceGray"?1:3,colorBytes:J instanceof Uint16Array?(function(U){for(var q=U.length,D=new Uint8Array(2*q),G=new DataView(D.buffer,D.byteOffset,D.byteLength),ge=0;ge<q;ge++)G.setUint16(2*ge,U[ge],!1);return D})(J):J,needSMask:!1}})(o);var _,N,y,k=a,A=k.colorSpace,C=k.colorsPerPixel,L=k.sMaskBitsPerComponent,R=k.colorBytes,E=k.alphaBytes,T=k.needSMask,te=k.palette,B=k.mask,H=null;return s!==ct.API.image_compression.NONE&&typeof Mf=="function"?(H=(function(Y){var J;switch(Y){case ct.API.image_compression.FAST:J=11;break;case ct.API.image_compression.MEDIUM:J=13;break;case ct.API.image_compression.SLOW:J=14;break;default:J=12}return J})(s),_=this.decode.FLATE_DECODE,N="/Predictor ".concat(H," /Colors ").concat(C," /BitsPerComponent ").concat(v," /Columns ").concat(u),r=Hg(R,Math.ceil(u*C*v/8),C,v,s),T&&(y=Hg(E,Math.ceil(u*L/8),1,L,s))):(_=void 0,N=void 0,r=R,T&&(y=E)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:r,index:e,filter:_,decodeParameters:N,transparency:B,palette:te,sMask:y,predictor:H,width:u,height:d,bitsPerComponent:v,sMaskBitsPerComponent:L,colorSpace:A}}},(function(r){r.processGIF89A=function(e,t,s,a){var o=new Rw(e),u=o.width,d=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var g={data:h,width:u,height:d},v=new xf(100).encode(g,100);return r.processJPEG.call(this,v,t,s,a)},r.processGIF87A=r.processGIF89A})(ct.API),Mi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:s,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Mi.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){_r.log("bit decode error:"+t)}},Mi.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+8*a*4,d=0;d<8&&8*a+d<this.width;d++){var h=this.palette[o>>7-d&1];this.data[u+4*d]=h.blue,this.data[u+4*d+1]=h.green,this.data[u+4*d+2]=h.red,this.data[u+4*d+3]=255}t!==0&&(this.pos+=4-t)}},Mi.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<r;a++){var o=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+2*a*4,d=o>>4,h=15&o,g=this.palette[d];if(this.data[u]=g.blue,this.data[u+1]=g.green,this.data[u+2]=g.red,this.data[u+3]=255,2*a+1>=this.width)break;g=this.palette[h],this.data[u+4]=g.blue,this.data[u+4+1]=g.green,this.data[u+4+2]=g.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Mi.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*s;if(a<this.palette.length){var u=this.palette[a];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}r!==0&&(this.pos+=4-r)}},Mi.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,g=o>>15?255:0,v=s*this.width*4+4*a;this.data[v]=h,this.data[v+1]=d,this.data[v+2]=u,this.data[v+3]=g}this.pos+=r}},Mi.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&e)/e*255|0,h=(u>>5&t)/t*255|0,g=(u>>11)/e*255|0,v=a*this.width*4+4*o;this.data[v]=g,this.data[v+1]=h,this.data[v+2]=d,this.data[v+3]=255}this.pos+=r}},Mi.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=255}this.pos+=this.width%4}},Mi.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=a,this.data[d+2]=s,this.data[d+3]=u}},Mi.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,s,a){var o=new Mi(e,!1),u=o.width,d=o.height,h={data:o.getData(),width:u,height:d},g=new xf(100).encode(h,100);return r.processJPEG.call(this,g,t,s,a)}})(ct.API),Qg.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,s,a){var o=new Qg(e),u=o.width,d=o.height,h={data:o.getData(),width:u,height:d},g=new xf(100).encode(h,100);return r.processJPEG.call(this,g,t,s,a)}})(ct.API),ct.API.processRGBA=function(r,e,t){for(var s=r.data,a=s.length,o=new Uint8Array(a/4*3),u=new Uint8Array(a/4),d=0,h=0,g=0;g<a;g+=4){var v=s[g],_=s[g+1],N=s[g+2],y=s[g+3];o[d++]=v,o[d++]=_,o[d++]=N,u[h++]=y}var k=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:k,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},ct.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},kc=ct.API,Ld=kc.getCharWidthsArray=function(r,e){var t,s,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:a.metadata.Unicode.widths,h=d.fof?d.fof:1,g=e.kerning?e.kerning:a.metadata.Unicode.kerning,v=g.fof?g.fof:1,_=e.doKerning!==!1,N=0,y=r.length,k=0,A=d[0]||h,C=[];for(t=0;t<y;t++)s=r.charCodeAt(t),typeof a.metadata.widthOfString=="function"?C.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(s))+u*(1e3/o)||0)/1e3):(N=_&&gr(g[s])==="object"&&!isNaN(parseInt(g[s][k],10))?g[s][k]/v:0,C.push((d[s]||A)/h+N)),k=s;return C},qg=kc.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return kc.processArabic&&(r=kc.processArabic(r)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(r,t,a)/t:Ld.apply(this,arguments).reduce(function(o,u){return o+u},0)},zg=function(r,e,t,s){for(var a=[],o=0,u=r.length,d=0;o!==u&&d+e[o]<t;)d+=e[o],o++;a.push(r.slice(0,o));var h=o;for(d=0;o!==u;)d+e[o]>s&&(a.push(r.slice(h,o)),d=0,h=o),d+=e[o],o++;return h!==o&&a.push(r.slice(h,o)),a},Wg=function(r,e,t){t||(t={});var s,a,o,u,d,h,g,v=[],_=[v],N=t.textIndent||0,y=0,k=0,A=r.split(" "),C=Ld.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?A[0].length+2:t.lineIndent||0){var L=Array(h).join(" "),R=[];A.map(function(T){(T=T.split(/\s*\n/)).length>1?R=R.concat(T.map(function(te,B){return(B&&te.length?`
`:"")+te})):R.push(T[0])}),A=R,h=qg.apply(this,[L,t])}for(o=0,u=A.length;o<u;o++){var E=0;if(s=A[o],h&&s[0]==`
`&&(s=s.substr(1),E=1),N+y+(k=(a=Ld.apply(this,[s,t])).reduce(function(T,te){return T+te},0))>e||E){if(k>e){for(d=zg.apply(this,[s,a,e-(N+y),e]),v.push(d.shift()),v=[d.pop()];d.length;)_.push([d.shift()]);k=a.slice(s.length-(v[0]?v[0].length:0)).reduce(function(T,te){return T+te},0)}else v=[s];_.push(v),N=k+h,y=C}else v.push(s),N+=y+k,y=C}return g=h?function(T,te){return(te?L:"")+T.join(" ")}:function(T){return T.join(" ")},_.map(g)},kc.splitTextToSize=function(r,e,t){var s,a=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var _=this.internal.getFont(v.fontName,v.fontStyle),N="Unicode";return _.metadata[N]?{widths:_.metadata[N].widths||{0:1},kerning:_.metadata[N].kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);s=Array.isArray(r)?r:String(r).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/a;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=t.lineIndent;var d,h,g=[];for(d=0,h=s.length;d<h;d++)g=g.concat(Wg.apply(this,[s[d],u,o]));return g},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",s={},a={},o=0;o<16;o++)s[t[o]]=e[o],a[e[o]]=t[o];var u=function(N){return"0x"+parseInt(N,10).toString(16)},d=r.__fontmetrics__.compress=function(N){var y,k,A,C,L=["{"];for(var R in N){if(y=N[R],isNaN(parseInt(R,10))?k="'"+R+"'":(R=parseInt(R,10),k=(k=u(R).slice(2)).slice(0,-1)+a[k.slice(-1)]),typeof y=="number")y<0?(A=u(y).slice(3),C="-"):(A=u(y).slice(2),C=""),A=C+A.slice(0,-1)+a[A.slice(-1)];else{if(gr(y)!=="object")throw new Error("Don't know what to do with value type "+gr(y)+".");A=d(y)}L.push(k+A)}return L.push("}"),L.join("")},h=r.__fontmetrics__.uncompress=function(N){if(typeof N!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,k,A,C,L={},R=1,E=L,T=[],te="",B="",H=N.length-1,Y=1;Y<H;Y+=1)(C=N[Y])=="'"?y?(A=y.join(""),y=void 0):y=[]:y?y.push(C):C=="{"?(T.push([E,A]),E={},A=void 0):C=="}"?((k=T.pop())[0][k[1]]=E,A=void 0,E=k[0]):C=="-"?R=-1:A===void 0?s.hasOwnProperty(C)?(te+=s[C],A=parseInt(te,16)*R,R=1,te=""):te+=C:s.hasOwnProperty(C)?(B+=s[C],E[A]=parseInt(B,16)*R,R=1,A=void 0,B=""):B+=C;return L},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},v={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},_={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(N){var y=N.font,k=_.Unicode[y.postScriptName];k&&(y.metadata.Unicode={},y.metadata.Unicode.widths=k.widths,y.metadata.Unicode.kerning=k.kerning);var A=v.Unicode[y.postScriptName];A&&(y.metadata.Unicode.encoding=A,y.encoding=A.codePages[0])}])})(ct.API),(function(r){var e=function(t){for(var s=t.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=t.charCodeAt(o);return a};r.API.events.push(["addFont",function(t){var s=void 0,a=t.font,o=t.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(s=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Rd(d)),u.metadata=r.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(a,s)}}])})(ct),ct.API.addSvgAsImage=function(r,e,t,s,a,o,u,d){if(isNaN(e)||isNaN(t))throw _r.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw _r.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=a;var g=h.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return(Dt.canvg?Promise.resolve(Dt.canvg):yu(()=>import("./index.es-TP3A2Dra.js"),[])).catch(function(N){return Promise.reject(new Error("Could not load canvg: "+N))}).then(function(N){return N.default?N.default:N}).then(function(N){return N.fromString(g,r,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(v)}).then(function(){_.addImage(h.toDataURL("image/jpeg",1),e,t,s,a,u,d)})},ct.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var a=0;a<this.internal.pages[s].length;a++)this.internal.pages[s][a]=this.internal.pages[s][a].replace(e,t);return this},ct.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var s,a,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),h=[],g=0,v=0,_=0;function N(k,A){var C,L=!1;for(C=0;C<k.length;C+=1)k[C]===A&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var y=d.length;for(_=0;_<y;_+=1)t[d[_]].value=t[d[_]].defaultValue,t[d[_]].explicitSet=!1}if(gr(r)==="object"){for(a in r)if(o=r[a],N(d,a)&&o!==void 0){if(t[a].type==="boolean"&&typeof o=="boolean")t[a].value=o;else if(t[a].type==="name"&&N(t[a].valueSet,o))t[a].value=o;else if(t[a].type==="integer"&&Number.isInteger(o))t[a].value=o;else if(t[a].type==="array"){for(g=0;g<o.length;g+=1)if(s=!0,o[g].length===1&&typeof o[g][0]=="number")h.push(String(o[g]-1));else if(o[g].length>1){for(v=0;v<o[g].length;v+=1)typeof o[g][v]!="number"&&(s=!1);s===!0&&h.push([o[g][0]-1,o[g][1]-1].join(" "))}t[a].value="["+h.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,A=[];for(k in t)t[k].explicitSet===!0&&(t[k].type==="name"?A.push("/"+k+" /"+t[k].value):A.push("/"+k+" "+t[k].value));A.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+A.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(s)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),g=o.length+u.length+d.length+a.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(a+o+u+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(s,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(ct.API),(function(r){var e=r.API,t=e.pdfEscape16=function(o,u){for(var d,h=u.metadata.Unicode.widths,g=["","0","00","000","0000"],v=[""],_=0,N=o.length;_<N;++_){if(d=u.metadata.characterToGlyph(o.charCodeAt(_)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(_),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return v.join("");d=d.toString(16),v.push(g[4-d.length],d)}return v.join("")},s=function(o){var u,d,h,g,v,_,N;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],_=0,N=(d=Object.keys(o).sort(function(y,k){return y-k})).length;_<N;_++)u=d[_],h.length>=100&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(g=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),h.push("<"+u+"><"+g+">"));return h.length&&(v+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),v+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var d=u.font,h=u.out,g=u.newObject,v=u.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="Identity-H"){for(var _=d.metadata.Unicode.widths,N=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),y="",k=0;k<N.length;k++)y+=String.fromCharCode(N[k]);var A=g();v({data:y,addLength1:!0,objectId:A}),h("endobj");var C=g();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:C}),h("endobj");var L=g();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Lc(d.fontName)),h("/FontFile2 "+A+" 0 R"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var R=g();h("<<"),h("/Type /Font"),h("/BaseFont /"+Lc(d.fontName)),h("/FontDescriptor "+L+" 0 R"),h("/W "+r.API.PDFObject.convert(_)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=g(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+C+" 0 R"),h("/BaseFont /"+Lc(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+R+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var d=u.font,h=u.out,g=u.newObject,v=u.putStream;if(d.metadata instanceof r.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var _=d.metadata.rawData,N="",y=0;y<_.length;y++)N+=String.fromCharCode(_[y]);var k=g();v({data:N,addLength1:!0,objectId:k}),h("endobj");var A=g();v({data:s(d.metadata.toUnicode),addLength1:!0,objectId:A}),h("endobj");var C=g();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+k+" 0 R"),h("/Flags 96"),h("/FontBBox "+r.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+Lc(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=g();for(var L=0;L<d.metadata.hmtx.widths.length;L++)d.metadata.hmtx.widths[L]=parseInt(d.metadata.hmtx.widths[L]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+Lc(d.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]);var a=function(o){var u,d=o.text||"",h=o.x,g=o.y,v=o.options||{},_=o.mutex||{},N=_.pdfEscape,y=_.activeFontKey,k=_.fonts,A=y,C="",L=0,R="",E=k[A].encoding;if(k[A].encoding!=="Identity-H")return{text:d,x:h,y:g,options:v,mutex:_};for(R=d,A=y,Array.isArray(d)&&(R=d[0]),L=0;L<R.length;L+=1)k[A].metadata.hasOwnProperty("cmap")&&(u=k[A].metadata.cmap.unicode.codeMap[R[L].charCodeAt(0)]),u||R[L].charCodeAt(0)<256&&k[A].metadata.hasOwnProperty("Unicode")?C+=R[L]:C+="";var T="";return parseInt(A.slice(1))<14||E==="WinAnsiEncoding"?T=N(C,A).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(T=t(C,k[A])),_.isHex=!0,{text:T,x:h,y:g,options:v,mutex:_}};e.events.push(["postProcessText",function(o){var u=o.text||"",d=[],h={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var g=0;for(g=0;g<u.length;g+=1)Array.isArray(u[g])&&u[g].length===3?d.push([a(Object.assign({},h,{text:u[g][0]})).text,u[g][1],u[g][2]]):d.push(a(Object.assign({},h,{text:u[g]})).text);o.text=d}else o.text=a(Object.assign({},h,{text:u})).text}])})(ct),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,s){return e.call(this),this.internal.vFS[t]=s,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(ct.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(s){var a,o,u,d,h,g,v,_=e,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},A={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,E=0;this.__bidiEngine__={};var T=function(U){var q=U.charCodeAt(),D=q>>8,G=A[D];return G!==void 0?_[256*G+(255&q)]:D===252||D===253?"AL":L.test(D)?"L":D===8?"R":"N"},te=function(U){for(var q,D=0;D<U.length;D++){if((q=T(U.charAt(D)))==="L")return!1;if(q==="R")return!0}return!1},B=function(U,q,D,G){var ge,ae,we,ie,ne=q[G];switch(ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"N":case"AN":break;case"EN":R&&(ne="AN");break;case"AL":R=!0,ne="R";break;case"WS":case"BN":ne="N";break;case"CS":G<1||G+1>=q.length||(ge=D[G-1])!=="EN"&&ge!=="AN"||(ae=q[G+1])!=="EN"&&ae!=="AN"?ne="N":R&&(ae="AN"),ne=ae===ge?ae:"N";break;case"ES":ne=(ge=G>0?D[G-1]:"B")==="EN"&&G+1<q.length&&q[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&D[G-1]==="EN"){ne="EN";break}if(R){ne="N";break}for(we=G+1,ie=q.length;we<ie&&q[we]==="ET";)we++;ne=we<ie&&q[we]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(ie=q.length,we=G+1;we<ie&&q[we]==="NSM";)we++;if(we<ie){var ve=U[G],V=ve>=1425&&ve<=2303||ve===64286;if(ge=q[we],V&&(ge==="R"||ge==="AL")){ne="R";break}}}ne=G<1||(ge=q[G-1])==="B"?"N":D[G-1];break;case"B":R=!1,a=!0,ne=E;break;case"S":o=!0,ne="N"}return ne},H=function(U,q,D){var G=U.split("");return D&&Y(G,D,{hiLevel:E}),G.reverse(),q&&q.reverse(),G.join("")},Y=function(U,q,D){var G,ge,ae,we,ie,ne=-1,ve=U.length,V=0,P=[],K=E?y:N,ee=[];for(R=!1,a=!1,o=!1,ge=0;ge<ve;ge++)ee[ge]=T(U[ge]);for(ae=0;ae<ve;ae++){if(ie=V,P[ae]=B(U,ee,P,ae),G=240&(V=K[ie][k[P[ae]]]),V&=15,q[ae]=we=K[V][5],G>0)if(G===16){for(ge=ne;ge<ae;ge++)q[ge]=1;ne=-1}else ne=-1;if(K[V][6])ne===-1&&(ne=ae);else if(ne>-1){for(ge=ne;ge<ae;ge++)q[ge]=we;ne=-1}ee[ae]==="B"&&(q[ae]=0),D.hiLevel|=we}o&&(function(le,ue,se){for(var ce=0;ce<se;ce++)if(le[ce]==="S"){ue[ce]=E;for(var me=ce-1;me>=0&&le[me]==="WS";me--)ue[me]=E}})(ee,q,ve)},J=function(U,q,D,G,ge){if(!(ge.hiLevel<U)){if(U===1&&E===1&&!a)return q.reverse(),void(D&&D.reverse());for(var ae,we,ie,ne,ve=q.length,V=0;V<ve;){if(G[V]>=U){for(ie=V+1;ie<ve&&G[ie]>=U;)ie++;for(ne=V,we=ie-1;ne<we;ne++,we--)ae=q[ne],q[ne]=q[we],q[we]=ae,D&&(ae=D[ne],D[ne]=D[we],D[we]=ae);V=ie}V++}}},he=function(U,q,D){var G=U.split(""),ge={hiLevel:E};return D||(D=[]),Y(G,D,ge),(function(ae,we,ie){if(ie.hiLevel!==0&&v)for(var ne,ve=0;ve<ae.length;ve++)we[ve]===1&&(ne=C.indexOf(ae[ve]))>=0&&(ae[ve]=C[ne+1])})(G,D,ge),J(2,G,q,D,ge),J(1,G,q,D,ge),G.join("")};return this.__bidiEngine__.doBidiReorder=function(U,q,D){if((function(ge,ae){if(ae)for(var we=0;we<ge.length;we++)ae[we]=we;d===void 0&&(d=te(ge)),g===void 0&&(g=te(ge))})(U,q),u||!h||g)if(u&&h&&d^g)E=d?1:0,U=H(U,q,D);else if(!u&&h&&g)E=d?1:0,U=he(U,q,D),U=H(U,q);else if(!u||d||h||g){if(u&&!h&&d^g)U=H(U,q),d?(E=0,U=he(U,q,D)):(E=1,U=he(U,q,D),U=H(U,q));else if(u&&d&&!h&&g)E=1,U=he(U,q,D),U=H(U,q);else if(!u&&!h&&d^g){var G=v;d?(E=1,U=he(U,q,D),E=0,v=!1,U=he(U,q,D),v=G):(E=0,U=he(U,q,D),U=H(U,q),E=1,v=!1,U=he(U,q,D),v=G,U=H(U,q))}}else E=0,U=he(U,q,D);else E=d?1:0,U=he(U,q,D);return U},this.__bidiEngine__.setOptions=function(U){U&&(u=U.isInputVisual,h=U.isOutputVisual,d=U.isInputRtl,g=U.isOutputRtl,v=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(s){var a=s.text;s.x,s.y;var o=s.options||{};s.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var d=0;for(u=[],d=0;d<a.length;d+=1)Object.prototype.toString.call(a[d])==="[object Array]"?u.push([t.doBidiReorder(a[d][0]),a[d][1],a[d][2]]):u.push([t.doBidiReorder(a[d])]);s.text=u}else s.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])})(ct),ct.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new Ko(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Yw(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new Dw(this.contents),this.head=new Bw(this),this.name=new zw(this),this.cmap=new c1(this),this.toUnicode={},this.hhea=new Mw(this),this.maxp=new Ww(this),this.hmtx=new Hw(this),this.post=new $w(this),this.os2=new Uw(this),this.loca=new Jw(this),this.glyf=new Vw(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,s,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,h,g;for(g=[],u=0,d=(h=this.bbox).length;u<d;u++)e=h[u],g.push(Math.round(e*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(s=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,s){var a,o,u,d;for(u=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)a=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(a))+s*(1e3/t)||0;return u*(t/1e3)},r.prototype.lineHeight=function(e,t){var s;return t==null&&(t=!1),s=t?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},r})();var Vi,Ko=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,s;for(s=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)s[t]=String.fromCharCode(this.readByte());return s.join("")},r.prototype.writeString=function(e){var t,s,a;for(a=[],t=0,s=e.length;0<=s?t<s:t>s;t=0<=s?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,s,a,o,u,d,h;return e=this.readByte(),t=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^s)+4294967296*(255^a)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*s+4294967296*a+16777216*o+65536*u+256*d+h},r.prototype.writeLongLong=function(e){var t,s;return t=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,s;for(t=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)t.push(this.readByte());return t},r.prototype.write=function(e){var t,s,a,o;for(o=[],s=0,a=e.length;s<a;s++)t=e[s],o.push(this.writeByte(t));return o},r})(),Dw=(function(){var r;function e(t){var s,a,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)s={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(t){var s,a,o,u,d,h,g,v,_,N,y,k,A;for(A in y=Object.keys(t).length,h=Math.log(2),_=16*Math.floor(Math.log(y)/h),u=Math.floor(_/h),v=16*y-_,(a=new Ko).writeInt(this.scalarType),a.writeShort(y),a.writeShort(_),a.writeShort(u),a.writeShort(v),o=16*y,g=a.pos+o,d=null,k=[],t)for(N=t[A],a.writeString(A),a.writeInt(r(N)),a.writeInt(g),a.writeInt(N.length),k=k.concat(N),A==="head"&&(d=g),g+=N.length;g%4;)k.push(0),g++;return a.write(k),s=2981146554-r(a.data),a.pos=d+8,a.writeUInt32(s),a.data},r=function(t){var s,a,o,u;for(t=u1.call(t);t.length%4;)t.push(0);for(o=new Ko(t),a=0,s=0,u=t.length;s<u;s=s+=4)a+=o.readUInt32();return 4294967295&a},e})(),Fw={}.hasOwnProperty,ma=function(r,e){for(var t in e)Fw.call(e,t)&&(r[t]=e[t]);function s(){this.constructor=r}return s.prototype=e.prototype,r.prototype=new s,r.__super__=e.prototype,r};Vi=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var Bw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new Ko).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),Zg=(function(){function r(e,t){var s,a,o,u,d,h,g,v,_,N,y,k,A,C,L,R,E;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),_=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(y=e.readUInt16(),N=y/2,e.pos+=6,o=(function(){var T,te;for(te=[],h=T=0;0<=N?T<N:T>N;h=0<=N?++T:--T)te.push(e.readUInt16());return te})(),e.pos+=2,A=(function(){var T,te;for(te=[],h=T=0;0<=N?T<N:T>N;h=0<=N?++T:--T)te.push(e.readUInt16());return te})(),g=(function(){var T,te;for(te=[],h=T=0;0<=N?T<N:T>N;h=0<=N?++T:--T)te.push(e.readUInt16());return te})(),v=(function(){var T,te;for(te=[],h=T=0;0<=N?T<N:T>N;h=0<=N?++T:--T)te.push(e.readUInt16());return te})(),a=(this.length-e.pos+this.offset)/2,d=(function(){var T,te;for(te=[],h=T=0;0<=a?T<a:T>a;h=0<=a?++T:--T)te.push(e.readUInt16());return te})(),h=L=0,E=o.length;L<E;h=++L)for(C=o[h],s=R=k=A[h];k<=C?R<=C:R>=C;s=k<=C?++R:--R)v[h]===0?u=s+g[h]:(u=d[v[h]/2+(s-k)-(N-h)]||0)!==0&&(u+=g[h]),this.codeMap[s]=65535&u}e.pos=_}return r.encode=function(e,t){var s,a,o,u,d,h,g,v,_,N,y,k,A,C,L,R,E,T,te,B,H,Y,J,he,U,q,D,G,ge,ae,we,ie,ne,ve,V,P,K,ee,le,ue,se,ce,me,Ne,Ie,He;switch(G=new Ko,u=Object.keys(e).sort(function(Me,Xe){return Me-Xe}),t){case"macroman":for(A=0,C=(function(){var Me=[];for(k=0;k<256;++k)Me.push(0);return Me})(),R={0:0},o={},ge=0,ne=u.length;ge<ne;ge++)R[me=e[a=u[ge]]]==null&&(R[me]=++A),o[a]={old:e[a],new:R[e[a]]},C[a]=R[e[a]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(C),{charMap:o,subtable:G.data,maxGlyphID:A+1};case"unicode":for(q=[],_=[],E=0,R={},s={},L=g=null,ae=0,ve=u.length;ae<ve;ae++)R[te=e[a=u[ae]]]==null&&(R[te]=++E),s[a]={old:te,new:R[te]},d=R[te]-a,L!=null&&d===g||(L&&_.push(L),q.push(a),g=d),L=a;for(L&&_.push(L),_.push(65535),q.push(65535),he=2*(J=q.length),Y=2*Math.pow(Math.log(J)/Math.LN2,2),N=Math.log(Y/2)/Math.LN2,H=2*J-Y,h=[],B=[],y=[],k=we=0,V=q.length;we<V;k=++we){if(U=q[k],v=_[k],U===65535){h.push(0),B.push(0);break}if(U-(D=s[U].new)>=32768)for(h.push(0),B.push(2*(y.length+J-k)),a=ie=U;U<=v?ie<=v:ie>=v;a=U<=v?++ie:--ie)y.push(s[a].new);else h.push(D-U),B.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*J+2*y.length),G.writeUInt16(0),G.writeUInt16(he),G.writeUInt16(Y),G.writeUInt16(N),G.writeUInt16(H),se=0,P=_.length;se<P;se++)a=_[se],G.writeUInt16(a);for(G.writeUInt16(0),ce=0,K=q.length;ce<K;ce++)a=q[ce],G.writeUInt16(a);for(Ne=0,ee=h.length;Ne<ee;Ne++)d=h[Ne],G.writeUInt16(d);for(Ie=0,le=B.length;Ie<le;Ie++)T=B[Ie],G.writeUInt16(T);for(He=0,ue=y.length;He<ue;He++)A=y[He],G.writeUInt16(A);return{charMap:s,subtable:G.data,maxGlyphID:E+1}}},r})(),c1=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,s,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)t=new Zg(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var s,a;return t==null&&(t="macroman"),s=Zg.encode(e,t),(a=new Ko).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},r})(),Mw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),Uw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,s;for(s=[],t=0;t<10;++t)s.push(e.readByte());return s})(),this.charRange=(function(){var t,s;for(s=[],t=0;t<4;++t)s.push(e.readInt());return s})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,s;for(s=[],t=0;t<2;t=++t)s.push(e.readInt());return s})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),$w=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="post",r.prototype.parse=function(e){var t,s,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(s=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return s=e.readUInt16(),this.offsets=e.read(s);case 262144:return this.map=(function(){var u,d,h;for(h=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)h.push(e.readUInt32());return h}).call(this)}},r})(),qw=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="name",r.prototype.parse=function(e){var t,s,a,o,u,d,h,g,v,_,N;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),s=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)s.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},o=v=0,_=s.length;v<_;o=++v)a=s[o],e.pos=a.offset,g=e.readString(a.length),u=new qw(g,a),h[N=a.nameID]==null&&(h[N]=[]),h[a.nameID].push(u);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},r})(),Ww=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),Hw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,s,a,o,u,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var g,v;for(v=[],t=g=0;0<=a?g<a:g>a;t=0<=a?++g:--g)v.push(e.readInt16());return v})(),this.widths=(function(){var g,v,_,N;for(N=[],g=0,v=(_=this.metrics).length;g<v;g++)o=_[g],N.push(o.advance);return N}).call(this),s=this.widths[this.widths.length-1],h=[],t=u=0;0<=a?u<a:u>a;t=0<=a?++u:--u)h.push(this.widths.push(s));return h},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),u1=[].slice,Vw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,s,a,o,u,d,h,g,v,_;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,s=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+s,u=(d=new Ko(t.read(a))).readShort(),g=d.readShort(),_=d.readShort(),h=d.readShort(),v=d.readShort(),this.cache[e]=u===-1?new Kw(d,g,_,h,v):new Gw(d,u,g,_,h,v),this.cache[e]))},r.prototype.encode=function(e,t,s){var a,o,u,d,h;for(u=[],o=[],d=0,h=t.length;d<h;d++)a=e[t[d]],o.push(u.length),a&&(u=u.concat(a.encode(s)));return o.push(u.length),{table:u,offsets:o}},r})(),Gw=(function(){function r(e,t,s,a,o,u){this.raw=e,this.numberOfContours=t,this.xMin=s,this.yMin=a,this.xMax=o,this.yMax=u,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),Kw=(function(){function r(e,t,s,a,o){var u,d;for(this.raw=e,this.xMin=t,this.yMin=s,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return r.prototype.encode=function(){var e,t,s;for(t=new Ko(u1.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),Jw=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return ma(r,Vi),r.prototype.tag="loca",r.prototype.parse=function(e){var t,s;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],s=0,a=this.length;s<a;s+=4)o.push(e.readUInt32());return o}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var s=new Uint32Array(this.offsets.length),a=0,o=0,u=0;u<s.length;++u)if(s[u]=a,o<t.length&&t[o]==u){++o,s[u]=a;var d=this.offsets[u],h=this.offsets[u+1]-d;h>0&&(a+=h)}for(var g=new Array(4*s.length),v=0;v<s.length;++v)g[4*v+3]=255&s[v],g[4*v+2]=(65280&s[v])>>8,g[4*v+1]=(16711680&s[v])>>16,g[4*v]=(4278190080&s[v])>>24;return g},r})(),Yw=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,s,a,o;for(t in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)s=o[t],e[t]=a[s];return e},r.prototype.glyphsFor=function(e){var t,s,a,o,u,d,h;for(a={},u=0,d=e.length;u<d;u++)a[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],a)(s=a[o])!=null&&s.compound&&t.push.apply(t,s.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))s=h[o],a[o]=s;return a},r.prototype.encode=function(e,t){var s,a,o,u,d,h,g,v,_,N,y,k,A,C,L;for(a in s=c1.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),y={0:0},L=s.charMap)y[(h=L[a]).old]=h.new;for(k in N=s.maxGlyphID,u)k in y||(y[k]=N++);return v=(function(R){var E,T;for(E in T={},R)T[R[E]]=E;return T})(y),_=Object.keys(v).sort(function(R,E){return R-E}),A=(function(){var R,E,T;for(T=[],R=0,E=_.length;R<E;R++)d=_[R],T.push(v[d]);return T})(),o=this.font.glyf.encode(u,A,y),g=this.font.loca.encode(o.offsets,A),C={cmap:this.font.cmap.raw(),glyf:o.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},r})();ct.API.PDFObject=(function(){var r;function e(){}return r=function(t,s){return(Array(s+1).join("0")+t).slice(-s)},e.convert=function(t){var s,a,o,u;if(Array.isArray(t))return"["+(function(){var d,h,g;for(g=[],d=0,h=t.length;d<h;d++)s=t[d],g.push(e.convert(s));return g})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(a in o=["<<"],t)u=t[a],o.push("/"+a+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();const Xw=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:ot,AcroFormButton:Sn,AcroFormCheckBox:Nu,AcroFormChoiceField:Il,AcroFormComboBox:Dl,AcroFormEditBox:bu,AcroFormListBox:Rl,AcroFormPasswordField:Su,AcroFormPushButton:_u,AcroFormRadioButton:Fl,AcroFormTextField:Go,GState:Ru,ShadingPattern:Wo,TilingPattern:Tl,default:ct,jsPDF:ct},Symbol.toStringTag,{value:"Module"}));function Qw({userRole:r,assignedDepotId:e}){const[t,s]=Pe.useState("trips"),[a,o]=Pe.useState([]),[u,d]=Pe.useState([]),[h,g]=Pe.useState([]),[v,_]=Pe.useState(!0),[N,y]=Pe.useState("all"),[k,A]=Pe.useState({}),[C,L]=Pe.useState(new Set),R=zi(D=>D.isOnline);ei(D=>D.pendingOperations),Pe.useEffect(()=>{E()},[]);const E=async()=>{_(!0);try{const[D,G,ge]=await Promise.all([Vo.getAllWithProgress(),Xs.getAll(),Qs.getAll()]),ae=D.trips||[];let we=G.bookings||[],ie=[];if(r==="depot_manager"&&e)try{const{depotRoutesApi:V}=await yu(async()=>{const{depotRoutesApi:K}=await Promise.resolve().then(()=>Ry);return{depotRoutesApi:K}},void 0);ie=(await V.getByDepotId(e)).forwardingDepotIds||[],console.log("Forwarding destinations for Trips & Deliveries:",ie)}catch(V){console.error("Error fetching depot routes:",V)}const ne=r==="depot_manager"&&e?ae.filter(V=>V.origin_depot_id===e||V.destination_depot_id===e||ie.includes(V.destination_depot_id)):ae,ve=r==="depot_manager"&&e?we.filter(V=>(V.destination_depot_id===e||V.origin_depot_id===e)&&V.status!=="booked"):we;o(ne),d(ve),g(ge.depots||[])}catch(D){console.error("Error loading data:",D)}finally{_(!1)}},T=async(D,G)=>{const ge=G?{status:"delivered",to_pay_collected_method:G,to_pay_collected_at:new Date().toISOString()}:null;if(R)try{const ae=u.find(ie=>ie.id===D),we=(ae==null?void 0:ae.trip_id)||(ae==null?void 0:ae.trip_id);if(G?await Xs.update(D,ge):await Xs.updateStatus(D,"delivered"),we){const{autoCompleted:ie}=await Vo.checkAndAutoComplete(we);ie&&console.log(`Trip ${we} auto-completed after all managed deliveries done`)}if(k[D]){const ie={...k};delete ie[D],A(ie)}await E()}catch(ae){console.error("Error marking delivered:",ae),Rf(ae)?(console.log("[TripsDeliveries] Network error detected, queuing delivery"),te(D,G,ge)):alert("Error marking as delivered")}else te(D,G,ge)},te=(D,G,ge)=>{if(Ol("MARK_DELIVERED",{bookingId:D,paymentMethod:G,updates:ge},{entityType:"delivery",entityId:D,optimisticData:{status:"delivered",markedAt:new Date().toISOString()}}),L(ae=>new Set([...ae,D])),d(ae=>ae.map(we=>we.id===D?{...we,status:"delivered"}:we)),k[D]){const ae={...k};delete ae[D],A(ae)}},B=async(D,G)=>{if(R)try{await Vo.update(D,{status:G}),await E()}catch(ge){console.error("Error updating trip status:",ge),Rf(ge)?(console.log("[TripsDeliveries] Network error detected, queuing trip update"),Ol("UPDATE_TRIP_STATUS",{tripId:D,status:G},{entityType:"trip",entityId:D}),o(ae=>ae.map(we=>we.id===D?{...we,status:G}:we))):alert("Error updating trip status")}else Ol("UPDATE_TRIP_STATUS",{tripId:D,status:G},{entityType:"trip",entityId:D}),o(ge=>ge.map(ae=>ae.id===D?{...ae,status:G}:ae))},H=D=>{const G=new ct,ge=G.internal.pageSize.getWidth();let ae=15;G.setFontSize(18),G.setFont("helvetica","bold"),G.text("DRIVER'S MEMO",ge/2,ae,{align:"center"}),ae+=8,G.setFontSize(12),G.setFont("helvetica","normal"),G.text("DRT Mango Transport",ge/2,ae,{align:"center"}),ae+=12,G.setFontSize(11),G.setFont("helvetica","bold"),G.text("Trip Details",14,ae),ae+=6,G.setFont("helvetica","normal"),G.setFontSize(10),G.text(`Trip Number: ${D.trip_number||D.id}`,14,ae),ae+=5,G.text(`Driver: ${D.driver_name} | Phone: ${D.driver_phone||"N/A"}`,14,ae),ae+=5,G.text(`Vehicle: ${D.vehicle_number}`,14,ae),ae+=5,G.text(`Date: ${new Date().toLocaleDateString("en-IN")}`,14,ae),ae+=10;const we={};h.forEach((ne,ve)=>{we[ne.name]=ve+1});const ie=u.filter(ne=>ne.status==="in_transit").sort((ne,ve)=>{const V=we[ne.destination_depot_name]||999,P=we[ve.destination_depot_name]||999;return V-P});G.setFontSize(11),G.setFont("helvetica","bold"),G.text(`Bookings (${ie.length} items)`,14,ae),ae+=8,G.setDrawColor(200),G.line(14,ae-2,ge-14,ae-2),ie.forEach((ne,ve)=>{ae>260&&(G.addPage(),ae=15),G.setFillColor(245,245,245),G.rect(14,ae,ge-28,8,"F"),G.setFontSize(10),G.setFont("helvetica","bold"),G.text(`${ve+1}. ${ne.receipt_number} - ${ne.destination_depot_name}`,16,ae+5),ae+=10,G.setFont("helvetica","normal"),G.setFontSize(9),G.text(`Sender: ${ne.sender_name} | ${ne.sender_phone}`,16,ae),ae+=4,G.text(`From: ${ne.origin_depot_name}  To: ${ne.destination_depot_name}`,16,ae),ae+=4,G.text(`Amount: Rs. ${(Number(ne.total_amount)||0).toLocaleString("en-IN")}`,16,ae),ae+=5,Array.isArray(ne.receivers)&&ne.receivers.forEach((V,P)=>{ae>265&&(G.addPage(),ae=15),G.setFont("helvetica","bold"),G.text(`  Receiver ${P+1}: ${V.name} | ${V.phone}`,16,ae),ae+=4,G.setFont("helvetica","normal"),V.address&&(G.text(`    Address: ${V.address}`,16,ae),ae+=4),Array.isArray(V.packages)&&V.packages.forEach(K=>{ae>265&&(G.addPage(),ae=15),G.text(`    - ${K.size}: ${K.quantity} pcs @ Rs.${K.price_per_unit||0} = Rs.${K.total_price||0}`,16,ae),ae+=4})}),ae+=4}),ae>260&&(G.addPage(),ae=15),ae+=5,G.setDrawColor(200),G.line(14,ae,ge-14,ae),ae+=8,G.setFontSize(8),G.text(`Generated on: ${new Date().toLocaleString("en-IN")}`,14,ae),G.text("Driver Signature: _________________",ge-80,ae),G.save(`DriverMemo_${D.trip_number||D.id}_${new Date().toISOString().split("T")[0]}.pdf`)},Y=D=>{switch(D){case"in_transit":return"bg-blue-100 text-blue-700";case"loading":case"planned":return"bg-orange-100 text-orange-700";case"completed":case"delivered":return"bg-green-100 text-green-700";case"booked":return"bg-yellow-100 text-yellow-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},J=D=>D?new Date(D).toLocaleString("en-IN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",he=D=>{let G=0;return Array.isArray(D.receivers)&&D.receivers.forEach(ge=>{Array.isArray(ge.packages)&&ge.packages.forEach(ae=>{G+=Number(ae.quantity)||0})}),G},U=u.filter(D=>D.status!=="booked"&&(N==="all"?["in_transit","delivered"].includes(D.status):D.status===N)),q=a.filter(D=>N==="all"||D.status===N);return v?c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading trips and deliveries..."})]})}):c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Trips & Deliveries"}),c.jsx("p",{className:"text-gray-600",children:"Track all trips and manage deliveries"})]}),!R&&c.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-amber-800",children:"You're currently offline. "}),c.jsx("span",{className:"text-amber-700",children:"Delivery updates will be synced when you're back online."})]})]})}),c.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 border-b border-gray-200",children:[c.jsxs("button",{onClick:()=>{s("trips"),y("all")},className:`px-6 py-3 font-medium border-b-2 transition-colors ${t==="trips"?"border-orange-500 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["All Trips (",a.length,")"]}),c.jsxs("button",{onClick:()=>{s("deliveries"),y("all")},className:`px-6 py-3 font-medium border-b-2 transition-colors ${t==="deliveries"?"border-orange-500 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Deliveries (",u.filter(D=>["in_transit","delivered"].includes(D.status)).length,")"]})]}),c.jsxs("div",{className:"mb-6 flex gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>y("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N==="all"?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),t==="trips"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>y("in_transit"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N==="in_transit"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Transit"}),c.jsx("button",{onClick:()=>y("completed"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N==="completed"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Completed"})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>y("in_transit"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N==="in_transit"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Transit"}),c.jsx("button",{onClick:()=>y("delivered"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${N==="delivered"?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Delivered"})]})]}),t==="trips"&&c.jsx("div",{className:"space-y-4",children:q.length>0?q.map(D=>{var G;return c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:D.trip_number||D.id}),c.jsx("p",{className:"text-sm text-gray-600",children:D.id})]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Y(D.status)}`,children:(G=D.status)==null?void 0:G.replace("_"," ")})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Driver"}),c.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.driver_name}),D.driver_phone&&c.jsx("p",{className:"text-xs text-gray-500",children:D.driver_phone})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Vehicle"}),c.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.vehicle_number})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Trip Cost"}),c.jsxs("p",{className:"text-sm font-medium text-red-600",children:["",(Number(D.trip_cost)||0).toLocaleString("en-IN")]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Revenue"}),c.jsxs("p",{className:"text-sm font-medium text-green-600",children:["",u.filter(ge=>ge.status==="in_transit"||ge.status==="delivered").reduce((ge,ae)=>ge+(Number(ae.total_amount)||0),0).toLocaleString("en-IN")]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Delivery Progress"}),c.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[D.delivered_bookings||0,"/",D.total_bookings||0," delivered"]}),D.total_bookings>0&&c.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all ${D.delivered_bookings===D.total_bookings?"bg-green-500":"bg-orange-500"}`,style:{width:`${D.delivered_bookings/D.total_bookings*100}%`}})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Departure"}),c.jsx("p",{className:"text-sm font-medium text-gray-900",children:J(D.departure_time)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"ETA"}),c.jsx("p",{className:"text-sm font-medium text-gray-900",children:J(D.arrival_time)})]})]}),D.status==="in_transit"&&D.total_bookings>0&&c.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("p",{className:"text-xs text-blue-700",children:[" This trip will auto-complete when all ",D.total_bookings," receipts are marked as delivered."]})}),c.jsxs("div",{className:"flex gap-3 mt-4 flex-wrap",children:[c.jsx("button",{onClick:()=>H(D),className:"px-4 py-2 text-sm bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-colors",children:" Download Memo"}),D.status==="planned"&&c.jsx("button",{onClick:()=>B(D.id,"in_transit"),className:"px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Start Trip"})]})]})},D.id)}):c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[c.jsx("p",{className:"text-gray-500 text-lg",children:"No trips found"}),c.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Create a new trip from the Trip Creation page"})]})}),t==="deliveries"&&c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:U.length>0?U.map(D=>{var G;return c.jsxs("div",{className:"p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-gray-900",children:D.receipt_number}),c.jsx("p",{className:"text-xs text-gray-500",children:J(D.created_at)})]}),c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y(D.status)}`,children:(G=D.status)==null?void 0:G.replace("_"," ")})]}),c.jsxs("div",{className:"mb-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.sender_name}),c.jsx("p",{className:"text-xs text-gray-500",children:D.sender_phone})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm mb-3 p-2 bg-gray-50 rounded",children:[c.jsxs("span",{className:"text-gray-600",children:[D.origin_depot_name,"  ",D.destination_depot_name]}),c.jsxs("span",{className:"font-medium text-gray-900",children:[he(D)," pkgs"]})]}),c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("span",{className:"text-lg font-bold text-green-600",children:["",(Number(D.total_amount)||0).toLocaleString("en-IN")]}),c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D.payment_method==="cash"?"bg-green-100 text-green-700":D.payment_method==="online"?"bg-purple-100 text-purple-700":D.payment_method==="credit"?"bg-yellow-100 text-yellow-700":D.payment_method==="to_pay"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:D.payment_method==="cash"?"Cash":D.payment_method==="online"?"Online":D.payment_method==="credit"?"Credit":D.payment_method==="to_pay"?"To-Pay":D.payment_method||"N/A"})]}),C.has(D.id)&&c.jsxs("div",{className:"mb-2 text-xs text-amber-600 flex items-center gap-1",children:[c.jsx("span",{className:"animate-pulse",children:""})," Pending sync"]}),D.status==="in_transit"&&D.payment_method==="to_pay"?c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsxs("select",{value:k[D.id]||"",onChange:ge=>A({...k,[D.id]:ge.target.value}),className:"w-full text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500",children:[c.jsx("option",{value:"",children:"Select Payment Method"}),c.jsx("option",{value:"cash",children:"Cash"}),c.jsx("option",{value:"online",children:"Online/UPI"})]}),c.jsx("button",{onClick:()=>T(D.id,k[D.id]),disabled:!k[D.id],className:`w-full py-3 rounded-lg font-medium text-center ${k[D.id]?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:R?" Mark Delivered":" Mark Delivered (Offline)"})]}):D.status==="in_transit"?c.jsx("button",{onClick:()=>T(D.id),className:"w-full py-3 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600",children:R?" Mark Delivered":" Mark Delivered (Offline)"}):D.status==="delivered"?c.jsxs("div",{className:"w-full py-3 bg-green-100 text-green-700 rounded-lg font-medium text-center",children:[" Delivered ",C.has(D.id)&&"(syncing...)"]}):null]},D.id)}):c.jsx("div",{className:"p-12 text-center text-gray-500",children:"No deliveries found"})}),c.jsx("div",{className:"hidden md:block overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt #"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sender"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Route"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Packages"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:U.length>0?U.map(D=>{var G;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("p",{className:"font-medium text-gray-900",children:D.receipt_number}),c.jsx("p",{className:"text-xs text-gray-500",children:J(D.created_at)})]}),c.jsxs("td",{className:"px-6 py-4",children:[c.jsx("p",{className:"font-medium text-gray-900",children:D.sender_name}),c.jsx("p",{className:"text-xs text-gray-500",children:D.sender_phone})]}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("p",{className:"text-sm text-gray-900",children:[D.origin_depot_name,"  ",D.destination_depot_name]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("p",{className:"text-sm font-medium text-gray-900",children:he(D)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("p",{className:"text-sm font-medium text-green-600",children:["",(Number(D.total_amount)||0).toLocaleString("en-IN")]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${D.payment_method==="cash"?"bg-green-100 text-green-700":D.payment_method==="online"?"bg-purple-100 text-purple-700":D.payment_method==="credit"?"bg-yellow-100 text-yellow-700":D.payment_method==="to_pay"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:D.payment_method==="cash"?"Cash":D.payment_method==="online"?"Online":D.payment_method==="credit"?"Credit":D.payment_method==="to_pay"?"To-Pay":D.payment_method||"N/A"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Y(D.status)}`,children:(G=D.status)==null?void 0:G.replace("_"," ")})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[C.has(D.id)&&c.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-amber-600 mb-1",children:[c.jsx("span",{className:"animate-pulse",children:""})," Pending sync"]}),D.status==="in_transit"&&D.payment_method==="to_pay"?c.jsxs("div",{className:"flex flex-col gap-2 min-w-[140px]",children:[c.jsxs("select",{value:k[D.id]||"",onChange:ge=>A({...k,[D.id]:ge.target.value}),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-orange-500",children:[c.jsx("option",{value:"",children:"Select Payment"}),c.jsx("option",{value:"cash",children:"Cash"}),c.jsx("option",{value:"online",children:"Online/UPI"})]}),c.jsx("button",{onClick:()=>T(D.id,k[D.id]),disabled:!k[D.id],className:`text-sm font-medium px-2 py-1 rounded ${k[D.id]?"text-green-600 hover:text-green-700 hover:bg-green-50":"text-gray-400 cursor-not-allowed bg-gray-50"}`,children:R?"Mark Delivered":" Mark (Offline)"})]}):D.status==="in_transit"?c.jsx("button",{onClick:()=>T(D.id),className:"text-sm text-green-600 hover:text-green-700 font-medium",children:R?"Mark Delivered":" Mark (Offline)"}):D.status==="delivered"?c.jsxs("span",{className:"text-sm text-green-600",children:[" Delivered ",C.has(D.id)&&"(syncing...)"]}):null]})]},D.id)}):c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:"No deliveries found"})})})]})})]})]})}function Zw({assignedDepotId:r}){const[e,t]=Pe.useState({from:"",to:""}),[s,a]=Pe.useState("bookings"),[o,u]=Pe.useState(!0),[d,h]=Pe.useState({totalBookings:0,bookedCount:0,inTransitCount:0,deliveredCount:0,pendingCount:0,totalRevenue:0,totalPackages:0,revenueByMethod:{cash:0,online:0,to_pay:0,credit:0}}),[g,v]=Pe.useState({totalTrips:0,completedTrips:0,activeTrips:0,pendingTrips:0,totalTripCost:0}),[_,N]=Pe.useState([]),[y,k]=Pe.useState([]),[A,C]=Pe.useState({accounts:[],totalCredit:0,totalAdvancePaid:0,totalNetOutstanding:0});Pe.useEffect(()=>{L()},[]);const L=async()=>{u(!0);try{const B=e.from||void 0,H=e.to||void 0,[Y,J,he,U,q]=await Promise.all([gu.getBookingSummary(B,H,r),gu.getTripSummary(B,H,r),gu.getTopCustomers(5,B,H,r),gu.getTopRoutes(5,B,H,r),qo.getCreditSummary(r)]);h(Y),v(J),N(he.customers),k(U.routes),C(q)}catch(B){console.error("Error loading reports:",B)}finally{u(!1)}},R=()=>{L()},E=B=>B>=1e5?`${(B/1e5).toFixed(2)}L`:`${B.toLocaleString("en-IN")}`,T=()=>{const B=new ct,H=B.internal.pageSize.getWidth();let Y=20;B.setFontSize(20),B.setFont("helvetica","bold"),B.text("DRT Mango Transport - Reports",H/2,Y,{align:"center"}),Y+=10,B.setFontSize(10),B.setFont("helvetica","normal");const J=e.from&&e.to?`Period: ${e.from} to ${e.to}`:"Period: All Time";B.text(J,H/2,Y,{align:"center"}),Y+=15,B.setFontSize(14),B.setFont("helvetica","bold"),B.text("Booking Summary",14,Y),Y+=8,B.setFontSize(10),B.setFont("helvetica","normal"),B.text(`Total Bookings: ${d.totalBookings}`,14,Y),Y+=6,B.text(`Delivered: ${d.deliveredCount}`,14,Y),Y+=6,B.text(`In Transit: ${d.inTransitCount}`,14,Y),Y+=6,B.text(`Booked (Pending): ${d.bookedCount}`,14,Y),Y+=6,B.text(`Total Revenue: ${E(d.totalRevenue)}`,14,Y),Y+=6,B.text(`Total Packages: ${d.totalPackages}`,14,Y),Y+=12,B.setFontSize(14),B.setFont("helvetica","bold"),B.text("Trip Summary",14,Y),Y+=8,B.setFontSize(10),B.setFont("helvetica","normal"),B.text(`Total Trips: ${g.totalTrips}`,14,Y),Y+=6,B.text(`Completed: ${g.completedTrips}`,14,Y),Y+=6,B.text(`Active: ${g.activeTrips}`,14,Y),Y+=6,B.text(`Total Trip Cost: ${E(g.totalTripCost)}`,14,Y),Y+=12,B.setFontSize(14),B.setFont("helvetica","bold"),B.text("Revenue by Payment Method",14,Y),Y+=8,B.setFontSize(10),B.setFont("helvetica","normal"),B.text(`Cash: ${E(d.revenueByMethod.cash)}`,14,Y),Y+=6,B.text(`Online: ${E(d.revenueByMethod.online)}`,14,Y),Y+=6,B.text(`To Pay: ${E(d.revenueByMethod.to_pay)}`,14,Y),Y+=6,B.text(`Credit: ${E(d.revenueByMethod.credit)}`,14,Y),Y+=12,_.length>0&&(B.setFontSize(14),B.setFont("helvetica","bold"),B.text("Top Customers",14,Y),Y+=8,B.setFontSize(10),B.setFont("helvetica","normal"),_.forEach((he,U)=>{B.text(`${U+1}. ${he.name} - ${he.bookings} bookings - ${E(he.revenue)}`,14,Y),Y+=6}),Y+=6),y.length>0&&(B.setFontSize(14),B.setFont("helvetica","bold"),B.text("Top Routes",14,Y),Y+=8,B.setFontSize(10),B.setFont("helvetica","normal"),y.forEach((he,U)=>{B.text(`${U+1}. ${he.route} - ${he.trips} bookings - ${E(he.revenue)}`,14,Y),Y+=6})),B.setFontSize(8),B.text(`Generated on: ${new Date().toLocaleString("en-IN")}`,14,285),B.save(`DRT_Report_${new Date().toISOString().split("T")[0]}.pdf`)},te=()=>{let B=`DRT Mango Transport - Reports

`;B+=`BOOKING SUMMARY
`,B+=`Total Bookings,${d.totalBookings}
`,B+=`Delivered,${d.deliveredCount}
`,B+=`In Transit,${d.inTransitCount}
`,B+=`Booked (Pending),${d.bookedCount}
`,B+=`Total Revenue,${d.totalRevenue}
`,B+=`Total Packages,${d.totalPackages}

`,B+=`TRIP SUMMARY
`,B+=`Total Trips,${g.totalTrips}
`,B+=`Completed,${g.completedTrips}
`,B+=`Active,${g.activeTrips}
`,B+=`Total Trip Cost,${g.totalTripCost}

`,B+=`REVENUE BY PAYMENT METHOD
`,B+=`Cash,${d.revenueByMethod.cash}
`,B+=`Online,${d.revenueByMethod.online}
`,B+=`To Pay,${d.revenueByMethod.to_pay}
`,B+=`Credit,${d.revenueByMethod.credit}

`,B+=`TOP CUSTOMERS
`,B+=`Rank,Name,Phone,Bookings,Revenue
`,_.forEach((J,he)=>{B+=`${he+1},${J.name},${J.phone},${J.bookings},${J.revenue}
`}),B+=`
`,B+=`TOP ROUTES
`,B+=`Rank,Route,Bookings,Revenue
`,y.forEach((J,he)=>{B+=`${he+1},"${J.route}",${J.trips},${J.revenue}
`});const H=new Blob([B],{type:"text/csv;charset=utf-8;"}),Y=document.createElement("a");Y.href=URL.createObjectURL(H),Y.download=`DRT_Report_${new Date().toISOString().split("T")[0]}.csv`,Y.click()};return o?c.jsx("div",{className:"p-8",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading reports..."})]})}):c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reports"}),c.jsx("p",{className:"text-gray-600",children:"Analytics and business insights"})]}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),c.jsxs("select",{id:"reportType",value:s,onChange:B=>a(B.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[c.jsx("option",{value:"bookings",children:"Bookings Report"}),c.jsx("option",{value:"trips",children:"Trips Report"}),c.jsx("option",{value:"revenue",children:"Revenue Report"}),c.jsx("option",{value:"customers",children:"Customer Report"}),c.jsx("option",{value:"credit",children:"Credit Customers Report"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),c.jsx("input",{id:"dateFrom",type:"date",value:e.from,onChange:B=>t({...e,from:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),c.jsx("input",{id:"dateTo",type:"date",value:e.to,onChange:B=>t({...e,to:B.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),c.jsx("div",{className:"flex items-end",children:c.jsx("button",{onClick:R,className:"w-full px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium",children:"Generate Report"})})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h2",{className:"font-bold text-gray-900",children:"Booking Summary"})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Total Bookings"}),c.jsx("span",{className:"font-bold text-gray-900",children:d.totalBookings})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Delivered"}),c.jsx("span",{className:"font-bold text-green-600",children:d.deliveredCount})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"In Transit"}),c.jsx("span",{className:"font-bold text-blue-600",children:d.inTransitCount})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Booked (Pending)"}),c.jsx("span",{className:"font-bold text-yellow-600",children:d.bookedCount})]}),c.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-gray-600",children:"Total Revenue"}),c.jsx("span",{className:"font-bold text-orange-600",children:E(d.totalRevenue)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Total Packages"}),c.jsx("span",{className:"font-bold text-gray-900",children:d.totalPackages})]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h2",{className:"font-bold text-gray-900",children:"Trip Summary"})}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Total Trips"}),c.jsx("span",{className:"font-bold text-gray-900",children:g.totalTrips})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Completed"}),c.jsx("span",{className:"font-bold text-green-600",children:g.completedTrips})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Active"}),c.jsx("span",{className:"font-bold text-blue-600",children:g.activeTrips})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Pending"}),c.jsx("span",{className:"font-bold text-yellow-600",children:g.pendingTrips})]}),c.jsx("div",{className:"pt-4 border-t border-gray-200",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-600",children:"Total Trip Cost"}),c.jsx("span",{className:"font-bold text-orange-600",children:E(g.totalTripCost)})]})})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 mb-6",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h2",{className:"font-bold text-gray-900",children:"Revenue by Payment Method"})}),c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cash"}),c.jsx("p",{className:"text-xl font-bold text-green-600",children:E(d.revenueByMethod.cash)})]}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Online"}),c.jsx("p",{className:"text-xl font-bold text-blue-600",children:E(d.revenueByMethod.online)})]}),c.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"To Pay"}),c.jsx("p",{className:"text-xl font-bold text-yellow-600",children:E(d.revenueByMethod.to_pay)})]}),c.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Credit"}),c.jsx("p",{className:"text-xl font-bold text-purple-600",children:E(d.revenueByMethod.credit)})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h2",{className:"font-bold text-gray-900",children:"Top Customers"})}),c.jsx("div",{className:"divide-y divide-gray-200",children:_.length>0?_.map((B,H)=>c.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"font-bold text-orange-600",children:H+1})}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-gray-900",children:B.name}),c.jsx("p",{className:"text-xs text-gray-500",children:B.phone})]})]}),c.jsx("span",{className:"font-bold text-orange-600",children:E(B.revenue)})]}),c.jsx("div",{className:"ml-11",children:c.jsxs("span",{className:"text-sm text-gray-600",children:[B.bookings," bookings"]})})]},H)):c.jsx("div",{className:"p-6 text-center text-gray-500",children:"No customers found"})})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsx("div",{className:"p-6 border-b border-gray-200",children:c.jsx("h2",{className:"font-bold text-gray-900",children:"Top Routes"})}),c.jsx("div",{className:"divide-y divide-gray-200",children:y.length>0?y.map((B,H)=>c.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"font-bold text-blue-600",children:H+1})}),c.jsx("span",{className:"font-medium text-gray-900",children:B.route})]}),c.jsx("span",{className:"font-bold text-orange-600",children:E(B.revenue)})]}),c.jsx("div",{className:"ml-11",children:c.jsxs("span",{className:"text-sm text-gray-600",children:[B.trips," bookings"]})})]},H)):c.jsx("div",{className:"p-6 text-center text-gray-500",children:"No routes found"})})]})]}),s==="credit"&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Credit Issued"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E(A.totalCredit)}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[A.accounts.length," credit customers"]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Paid"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:E(A.totalAdvancePaid)}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.totalCredit>0?`${Math.round(A.totalAdvancePaid/A.totalCredit*100)}% collected`:"0% collected"})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Outstanding"}),c.jsx("p",{className:"text-2xl font-bold text-orange-600",children:E(A.totalNetOutstanding)}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[A.accounts.filter(B=>B.netOutstanding>0).length," customers with balance"]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Credit Customers"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Customers with credit payment method bookings"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bookings"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Credit"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Outstanding"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:A.accounts.length>0?[...A.accounts].sort((B,H)=>H.netOutstanding-B.netOutstanding).map(B=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:B.customer}),c.jsx("p",{className:"text-xs text-gray-500",children:B.phone})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:B.bookingCount}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900 font-medium",children:E(B.totalCredit)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600 font-medium",children:E(B.advancePaid)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-orange-600 font-bold",children:E(B.netOutstanding)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${B.netOutstanding===0?"bg-green-100 text-green-800":B.totalCredit>0&&B.advancePaid/B.totalCredit>=.5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:B.netOutstanding===0?"Cleared":B.totalCredit>0&&B.advancePaid/B.totalCredit>=.5?"Partial":"Pending"})})]},B.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No credit customers found"})})})]})})]})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:T,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Export as PDF"}),c.jsx("button",{onClick:te,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Export as Excel"})]})]})}function eb({assignedDepotId:r}){const[e,t]=Pe.useState({from:"",to:""}),[s,a]=Pe.useState(null),[o,u]=Pe.useState(null),[d,h]=Pe.useState(!1);Pe.useEffect(()=>{r&&g()},[r]);const g=async()=>{if(r){h(!0);try{const N=e.from||void 0,y=e.to||void 0,[k,A]=await Promise.all([Tf.getPaymentReport(r,N,y),Tf.getDeliveryReport(r,N,y)]);a(k),u(A)}catch(N){console.error("Error loading reports:",N),alert("Failed to load reports")}finally{h(!1)}}},v=()=>{g()},_=(N,y)=>{if(!N||N.length===0){alert("No data to export");return}const k=Object.keys(N[0]).join(","),A=N.map(T=>Object.values(T).map(te=>typeof te=="string"&&te.includes(",")?`"${te}"`:te).join(",")),C=[k,...A].join(`
`),L=new Blob([C],{type:"text/csv"}),R=URL.createObjectURL(L),E=document.createElement("a");E.href=R,E.download=`${y}_${new Date().toISOString().split("T")[0]}.csv`,E.click(),URL.revokeObjectURL(R)};return r?c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Depot Reports"}),c.jsx("p",{className:"text-gray-600",children:"Payment and delivery tracking for your depot"})]}),c.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-200 mb-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),c.jsx("input",{type:"date",value:e.from,onChange:N=>t({...e,from:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),c.jsx("input",{type:"date",value:e.to,onChange:N=>t({...e,to:N.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),c.jsx("div",{className:"self-end",children:c.jsx("button",{onClick:v,disabled:d,className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:bg-gray-300",children:d?"Loading...":"Apply Filter"})})]})}),c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Payment Report (To-Pay Collections)"}),c.jsx("button",{onClick:()=>s&&_(s.payments,"payment_report"),className:"px-4 py-2 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Export Excel"})]}),s&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Collections"}),c.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",s.summary.total.toLocaleString("en-IN")]})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Cash"}),c.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",s.summary.cash.toLocaleString("en-IN")]})]}),c.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Online/UPI"}),c.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",s.summary.online.toLocaleString("en-IN")]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Payments"}),c.jsx("p",{className:"text-2xl font-bold text-gray-700",children:s.summary.count})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Receipt"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),c.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Amount"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.payments.map((N,y)=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(N.date).toLocaleDateString("en-IN")}),c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:N.receipt_number}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:N.customer_name}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.destination}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.payment_method==="cash"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:N.payment_method==="cash"?"Cash":"Online"})}),c.jsxs("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:["",N.amount.toLocaleString("en-IN")]})]},y))})]})})]}),!s&&!d&&c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No payment data available"})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:" Delivery Report"}),c.jsx("button",{onClick:()=>o&&_(o.deliveries,"delivery_report"),className:"px-4 py-2 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Export Excel"})]}),o&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Bookings"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.summary.total})]}),c.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Delivered"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.summary.delivered})]}),c.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),c.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o.summary.pending})]}),c.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Packages"}),c.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.summary.totalPackages})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Receipt"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Destination"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Packages"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.deliveries.map((N,y)=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(N.date).toLocaleDateString("en-IN")}),c.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:N.receipt_number}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:N.customer_name}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.destination}),c.jsx("td",{className:"px-4 py-3 text-sm text-center font-medium text-gray-900",children:N.packages}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:N.delivery_instructions.includes("Home")?"Home Delivery":"Pickup"}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.status==="delivered"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:N.status==="delivered"?"Delivered":"Pending"})})]},y))})]})})]}),!o&&!d&&c.jsx("p",{className:"text-center text-gray-500 py-8",children:"No delivery data available"})]})]}):c.jsx("div",{className:"p-8",children:c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600",children:"No depot assigned"})})})}function tb({assignedDepotId:r}){const[e,t]=Pe.useState(""),[s,a]=Pe.useState("all"),[o,u]=Pe.useState(null),[d,h]=Pe.useState([]),[g,v]=Pe.useState(!0),[_,N]=Pe.useState(!1);Pe.useEffect(()=>{y()},[]);const y=async()=>{try{const{bookings:R}=await Xs.getAll();let E=(R||[]).map(T=>{var te,B;return{id:T.receipt_number||T.id,bookingId:T.id,customer:T.sender_name||T.customer_name||"N/A",customerPhone:T.sender_phone||T.customer_phone||"",destination:T.destination_depot_name||T.destination_location||"N/A",date:T.created_at,amount:Number(T.total_amount)||0,paymentMode:((B=(te=T.payment_method)==null?void 0:te.replace("_"," "))==null?void 0:B.toUpperCase())||"Cash",status:T.payment_method==="credit"||T.payment_method==="to_pay"?"pending":"paid",booking_status:T.status,invoiceNumber:T.receipt_number||T.id,receivers:T.receivers||[],destination_depot_id:T.destination_depot_id,origin_depot_id:T.origin_depot_id}});r&&(E=E.filter(T=>(T.destination_depot_id===r||T.origin_depot_id===r)&&T.booking_status!=="booked")),h(E)}catch(R){console.error("Error loading receipts:",R)}finally{v(!1)}},k=R=>{u(R),N(!0)},A=R=>{u(R),N(!0),setTimeout(()=>window.print(),100)},C=R=>{const E=new ct({format:"a5",unit:"mm",orientation:"landscape"}),T=E.internal.pageSize.getWidth(),te=E.internal.pageSize.getHeight(),B=15;let H=15;if(E.setFontSize(16),E.setFont("helvetica","bold"),E.setTextColor(0,0,0),E.text("DRT MANGO TRANSPORT",T/2,H,{align:"center"}),H+=6,E.setFontSize(8),E.setFont("helvetica","normal"),E.text("AT POST JAMSANDE, TAL.DEVGAD, DIST. SINDHUDURG MOB: 9422584166, 9422435348",T/2,H,{align:"center"}),H+=8,E.setFontSize(10),E.setFont("helvetica","normal"),E.text("Receipt Number",T/2,H,{align:"center"}),H+=5,E.setFontSize(12),E.setFont("helvetica","bold"),E.text(R.id,T/2,H,{align:"center"}),H+=10,E.setFontSize(10),E.setFont("helvetica","normal"),E.text(`Destination: ${R.destination||"N/A"}`,B,H),E.text(`Date: ${new Date(R.date).toLocaleDateString("en-IN")}`,T-B,H,{align:"right"}),H+=8,E.setFontSize(10),E.setFont("helvetica","normal"),E.text(`Sender: ${R.customer||"N/A"} (${R.customerPhone||"N/A"})`,T/2,H,{align:"center"}),H+=10,R.receivers&&R.receivers.length>0){E.setFontSize(10),E.setFont("helvetica","bold"),E.text("RECEIVERS & PACKAGES",B,H),H+=10,E.setFont("helvetica","normal"),E.setFontSize(10);const he=B+30,U=te-40;R.receivers.forEach((q,D)=>{var ge;H>U&&(E.addPage(),H=15,E.setFontSize(10),E.setFont("helvetica","normal"));const G=`${D+1}. ${((ge=q.name)==null?void 0:ge.toUpperCase())||"N/A"} (${q.phone||"N/A"})`;E.text(G,he,H),H+=6,q.packages&&q.packages.length>0&&(E.setFontSize(9),q.packages.forEach(ae=>{H>U&&(E.addPage(),H=15,E.setFontSize(9));const we=`${ae.size}  ${ae.quantity} = ${(ae.quantity*ae.price_per_unit).toFixed(0)}`;E.text(we,T-B-10,H,{align:"right"}),H+=5}),E.setFontSize(10)),H+=3})}H+=5,E.setFontSize(11),E.setFont("helvetica","bold"),E.text(`TOTAL: ${R.amount.toLocaleString("en-IN")}`,T-B,H,{align:"right"}),H+=6,E.setFontSize(9),E.setFont("helvetica","normal"),E.text(`(${R.paymentMode||"CASH"})`,T-B,H,{align:"right"}),H+=12,E.setFontSize(10),E.setFont("helvetica","bold"),E.text("THANK YOU FOR USING OUR SERVICES",T/2,H,{align:"center"}),H+=15;const Y=40,J=T-B-Y;E.setLineWidth(.5),E.line(J,H,J+Y,H),H+=4,E.setFontSize(8),E.setFont("helvetica","normal"),E.text("SIGN",J+Y/2,H,{align:"center"}),E.save(`${R.id}.pdf`)},L=d.filter(R=>{if(!e.trim())return s==="all"||R.status===s;const E=e.toLowerCase(),T=(R.customer||"").toLowerCase().includes(E)||(R.bookingId||"").toLowerCase().includes(E)||(R.id||"").toLowerCase().includes(E)||(R.destination||"").toLowerCase().includes(E),te=s==="all"||R.status===s;return T&&te});return L.reduce((R,E)=>R+E.amount,0),L.filter(R=>R.status==="paid").reduce((R,E)=>R+E.amount,0),L.filter(R=>R.status==="pending").reduce((R,E)=>R+E.amount,0),g?c.jsx("div",{className:"p-8",children:"Loading receipts..."}):c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"All Receipts"}),c.jsx("p",{className:"text-gray-600",children:"View and manage all payment receipts"})]}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx("input",{type:"text",placeholder:"Search by customer, booking ID, or receipt number...",value:e,onChange:R=>t(R.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),c.jsx("div",{children:c.jsxs("select",{value:s,onChange:R=>a(R.target.value),className:"w-full md:w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[c.jsx("option",{value:"all",children:"All Status"}),c.jsx("option",{value:"paid",children:"Paid"}),c.jsx("option",{value:"pending",children:"Pending"})]})})]})}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt Details"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Mode"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:L.map(R=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:R.id}),c.jsx("p",{className:"text-sm text-gray-600",children:R.invoiceNumber}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Booking: ",R.bookingId]})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("p",{className:"font-medium text-gray-900",children:R.customer})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("p",{className:"text-sm text-gray-900",children:new Date(R.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("p",{className:"font-bold text-gray-900",children:["",R.amount.toLocaleString("en-IN")]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("p",{className:"text-sm text-gray-900",children:R.paymentMode})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${R.status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:R.status})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>k(R),className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View"}),c.jsx("button",{onClick:()=>A(R),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Print"}),c.jsx("button",{onClick:()=>C(R),className:"text-sm text-green-600 hover:text-green-700 font-medium",children:"Download"})]})})]},R.id))})]})}),L.length===0&&c.jsx("div",{className:"p-12 text-center",children:c.jsx("p",{className:"text-gray-500",children:"No receipts found matching your criteria"})})]}),_&&o&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 print:bg-white print:relative",children:c.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto print:rounded-none print:max-w-full print:mx-0",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 print:hidden",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Receipt Details"}),c.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-orange-500",children:"DRT MANGO TRANSPORT"}),c.jsx("p",{className:"text-lg font-medium mt-2",children:o.id}),c.jsx("p",{className:"text-sm text-gray-600",children:new Date(o.date).toLocaleDateString("en-IN")})]}),c.jsxs("div",{className:"space-y-3 border-t border-b py-4",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Destination:"}),c.jsx("span",{className:"font-medium",children:o.destination})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Customer:"}),c.jsx("span",{className:"font-medium",children:o.customer})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Payment Mode:"}),c.jsx("span",{className:"font-medium",children:o.paymentMode})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Status:"}),c.jsx("span",{className:`font-medium ${o.status==="paid"?"text-green-600":"text-orange-600"}`,children:o.status.toUpperCase()})]})]}),o.receivers&&o.receivers.length>0&&c.jsxs("div",{className:"mt-4",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Receivers & Packages:"}),o.receivers.map((R,E)=>{var T;return c.jsxs("div",{className:"ml-2 mb-2",children:[c.jsxs("p",{className:"font-medium",children:[R.name," (",R.phone,")"]}),(T=R.packages)==null?void 0:T.map((te,B)=>c.jsxs("p",{className:"text-sm text-gray-600 ml-4",children:[te.size,"  ",te.quantity," = ",(te.quantity*te.price_per_unit).toFixed(0)]},B))]},E)})]}),c.jsx("div",{className:"mt-6 bg-yellow-50 rounded-lg p-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-lg font-bold",children:"TOTAL:"}),c.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["",o.amount.toLocaleString("en-IN")]})]})}),c.jsxs("div",{className:"mt-6 flex gap-3 print:hidden",children:[c.jsx("button",{onClick:()=>window.print(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Print"}),c.jsx("button",{onClick:()=>C(o),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:"Download PDF"})]})]})})]})}function rb({assignedDepotId:r}){var pt,Qe,vt,gt,Jt,zt,Lt,Wt;const[e,t]=Pe.useState(""),[s,a]=Pe.useState(null),[o,u]=Pe.useState("bookings"),[d,h]=Pe.useState([]),[g,v]=Pe.useState(!0),[_,N]=Pe.useState({totalCredit:0,totalAdvancePaid:0,totalNetOutstanding:0}),[y,k]=Pe.useState(!1),[A,C]=Pe.useState(""),[L,R]=Pe.useState("cash"),[E,T]=Pe.useState(""),[te,B]=Pe.useState(!1),[H,Y]=Pe.useState([]),[J,he]=Pe.useState([]),[U,q]=Pe.useState([]),[D,G]=Pe.useState([]),[ge,ae]=Pe.useState({}),[we,ie]=Pe.useState(!1),[ne,ve]=Pe.useState(null),[V,P]=Pe.useState(!1),[K,ee]=Pe.useState("");Pe.useEffect(()=>{le(),ue()},[]);const le=async()=>{try{const{accounts:Ae,totalCredit:Be,totalAdvancePaid:Ue,totalNetOutstanding:Ge}=await qo.getCreditSummary(r);h(Ae),N({totalCredit:Be,totalAdvancePaid:Ue,totalNetOutstanding:Ge})}catch(Ae){console.error("Error loading credit data:",Ae)}finally{v(!1)}},ue=async()=>{try{const[Ae,Be,Ue]=await Promise.all([Ll.getAll(),Qs.getAll(),Lu.getAll()]);Y(Ae.packages||[]),he(Be.depots||[]),q(Ue.pricing||[])}catch(Ae){console.error("Error loading pricing data:",Ae)}},se=async Ae=>{try{const{pricing:Be}=await qo.getCustomerPricing(Ae);G(Be);const Ue={};Be.forEach(Ze=>{Ue[`${Ze.packageId}_${Ze.depotId}`]=Ze.discountedPrice}),ae(Ue);const Ge=await qo.getDiscountSummary(Ae);ve(Ge)}catch(Be){console.error("Error loading customer pricing:",Be),G([]),ae({})}};Pe.useEffect(()=>{s&&se(s)},[s]);const ce=()=>d.find(Ae=>Ae.id===s),me=async()=>{const Ae=parseFloat(A);if(!Ae||Ae<=0){alert("Please enter a valid payment amount");return}const Be=ce();if(Be){B(!0);try{const{payment:Ue}=await qo.recordPayment({customer_name:Be.customer,customer_phone:Be.phone,amount:Ae,payment_method:L,notes:E});X(Ue,Be),alert(`Payment of ${Ae.toLocaleString("en-IN")} recorded! Receipt: ${Ue.receipt_number}`),k(!1),C(""),T(""),v(!0),await le()}catch(Ue){console.error("Error recording payment:",Ue),alert("Failed to record payment. Please try again.")}finally{B(!1)}}},Ne=async()=>{if(!(!s||!K.trim()))try{await qo.updateCustomerDisplayName(s,K.trim()),await le(),P(!1)}catch(Ae){console.error("Error updating name:",Ae),alert("Failed to update name. Please try again.")}},Ie=(Ae,Be,Ue)=>{const Ge=`${Ae}_${Be}`,Ze=parseFloat(Ue);if(!isNaN(Ze)&&Ze>=0)ae(At=>({...At,[Ge]:Ze}));else if(Ue===""){const At={...ge};delete At[Ge],ae(At)}},He=async()=>{if(s){ie(!0);try{const Ae=Object.entries(ge).map(([Be,Ue])=>{const[Ge,Ze]=Be.split("_");return{packageId:Ge,depotId:Ze,discountedPrice:Ue}});await qo.setCustomerPricing(s,Ae),await se(s),alert("Pricing saved successfully!")}catch(Ae){console.error("Error saving pricing:",Ae),alert("Failed to save pricing. Make sure the database tables are created.")}finally{ie(!1)}}},Me=(Ae,Be)=>{const Ue=U.find(Ze=>Ze.packageId===Ae&&Ze.depotId===Be);if(Ue)return Ue.price;const Ge=H.find(Ze=>Ze.id===Ae);return(Ge==null?void 0:Ge.basePrice)||0},Xe=()=>{const Ae=ce();if(!Ae)return;const Be=[];Be.push(["CREDIT LEDGER STATEMENT"]),Be.push(["Customer",Ae.customer]),Be.push(["Phone",Ae.phone]),Be.push(["Generated",new Date().toLocaleString("en-IN")]),Be.push([]),Be.push(["SUMMARY"]),Be.push(["Total Credit",Ae.totalCredit]),Be.push(["Advance Paid",Ae.advancePaid]),Be.push(["Net Outstanding",Ae.netOutstanding]),Be.push([]),Be.push(["BOOKINGS"]),Be.push(["Date","Receipt No","Destination","Amount"]),(Ae.bookings||[]).forEach(yt=>{Be.push([new Date(yt.date).toLocaleDateString("en-IN"),yt.receiptNumber||yt.id,yt.destination,yt.amount])}),Be.push([]),Be.push(["ADVANCE PAYMENTS"]),Be.push(["Date","Receipt No","Method","Amount"]),(Ae.payments||[]).forEach(yt=>{Be.push([new Date(yt.date).toLocaleDateString("en-IN"),yt.receiptNumber||"-",yt.method||"cash",yt.amount])});const Ue=Be.map(yt=>yt.map(qt=>`"${String(qt||"").replace(/"/g,'""')}"`).join(",")).join(`
`),Ge="\uFEFF",Ze=new Blob([Ge+Ue],{type:"text/csv;charset=utf-8;"}),At=document.createElement("a");At.href=URL.createObjectURL(Ze),At.download=`Credit_Ledger_${Ae.customer.replace(/[^a-zA-Z0-9]/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`,At.click()},X=(Ae,Be)=>{const Ue=new ct,Ge=Ue.internal.pageSize.getWidth();let Ze=20;Ue.setFontSize(20),Ue.setFont("helvetica","bold"),Ue.setTextColor(247,137,30),Ue.text("DRT MANGO TRANSPORT",Ge/2,Ze,{align:"center"}),Ze+=10,Ue.setFontSize(14),Ue.setTextColor(0,0,0),Ue.text("ADVANCE PAYMENT RECEIPT",Ge/2,Ze,{align:"center"}),Ze+=15,Ue.setFontSize(11),Ue.setFont("helvetica","normal"),Ue.text(`Receipt No: ${Ae.receipt_number}`,15,Ze),Ze+=8,Ue.text(`Date: ${new Date(Ae.payment_date).toLocaleDateString("en-IN")}`,15,Ze),Ze+=12,Ue.setFont("helvetica","bold"),Ue.text(`Customer: ${Be.customer}`,15,Ze),Ue.setFont("helvetica","normal"),Ze+=6,Ue.text(`Phone: ${Be.phone}`,15,Ze),Ze+=12,Ue.setFillColor(254,243,199),Ue.roundedRect(15,Ze,Ge-30,45,3,3,"F"),Ze+=10,Ue.setFont("helvetica","bold"),Ue.text("Credit Summary",Ge/2,Ze,{align:"center"}),Ze+=10,Ue.setFont("helvetica","normal"),Ue.text("Total Credit:",25,Ze),Ue.text(`${Be.totalCredit.toLocaleString("en-IN")}`,Ge-25,Ze,{align:"right"}),Ze+=8,Ue.text("Advance Paid (including this):",25,Ze);const At=Be.advancePaid+Number(Ae.amount);Ue.text(`${At.toLocaleString("en-IN")}`,Ge-25,Ze,{align:"right"}),Ze+=8,Ue.setFont("helvetica","bold"),Ue.setTextColor(220,38,38),Ue.text("Net Outstanding:",25,Ze);const yt=Math.max(0,Be.totalCredit-At);Ue.text(`${yt.toLocaleString("en-IN")}`,Ge-25,Ze,{align:"right"}),Ze+=15,Ue.setTextColor(22,163,74),Ue.setFontSize(14),Ue.text(`THIS PAYMENT: ${Number(Ae.amount).toLocaleString("en-IN")}`,Ge/2,Ze,{align:"center"}),Ue.save(`${Ae.receipt_number}.pdf`)};s&&[...(((pt=ce())==null?void 0:pt.bookings)||[]).map(Ae=>({id:Ae.id,type:"debit",amount:Ae.amount,description:`Booking ${Ae.receiptNumber||Ae.id}`,date:Ae.date,destination:Ae.destination})),...(((Qe=ce())==null?void 0:Qe.payments)||[]).map(Ae=>({id:Ae.id,type:"credit",amount:Ae.amount,description:`Payment ${Ae.receiptNumber||""}`,date:Ae.date,method:Ae.method}))].sort((Ae,Be)=>new Date(Be.date).getTime()-new Date(Ae.date).getTime());const Ye=d.filter(Ae=>(Ae.customer||"").toLowerCase().includes(e.toLowerCase())||(Ae.id||"").toLowerCase().includes(e.toLowerCase())||(Ae.phone||"").toLowerCase().includes(e.toLowerCase())),dt=ce(),bt=(dt==null?void 0:dt.depots)||[],qe=J.filter(Ae=>bt.includes(Ae.id));return g?c.jsx("div",{className:"p-8",children:"Loading credit data..."}):c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Credit Ledger"}),c.jsx("p",{className:"text-gray-600",children:"Manage customer credit accounts, pricing, and payments"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Credit Issued"}),c.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",(_.totalCredit/1e5).toFixed(2),"L"]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Advance Paid"}),c.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",_.totalAdvancePaid>=1e5?(_.totalAdvancePaid/1e5).toFixed(2)+"L":_.totalAdvancePaid.toLocaleString("en-IN")]})]}),c.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Net Outstanding"}),c.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",_.totalNetOutstanding>=1e5?(_.totalNetOutstanding/1e5).toFixed(2)+"L":_.totalNetOutstanding.toLocaleString("en-IN")]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsxs("div",{className:"p-4 border-b border-gray-200",children:[c.jsx("h2",{className:"font-bold text-gray-900 mb-3",children:"Credit Accounts"}),c.jsx("input",{type:"text",placeholder:"Search by name or phone...",value:e,onChange:Ae=>t(Ae.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),c.jsxs("div",{className:"divide-y divide-gray-200 max-h-[600px] overflow-y-auto",children:[Ye.map(Ae=>{var Be,Ue;return c.jsxs("div",{className:`p-4 cursor-pointer transition-colors ${s===Ae.id?"bg-orange-50 border-l-4 border-orange-500":"hover:bg-gray-50"}`,onClick:()=>{a(Ae.id),u("bookings")},children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-gray-900",children:Ae.customer}),c.jsxs("p",{className:"text-sm text-orange-600 font-medium",children:[" ",Ae.phone]}),((Be=Ae.nameVariations)==null?void 0:Be.length)>1&&c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Also: ",Ae.nameVariations.filter(Ge=>Ge!==Ae.customer).join(", ")]})]}),c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ae.netOutstanding===0?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:Ae.netOutstanding===0?"Clear":""+Ae.netOutstanding.toLocaleString("en-IN")})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsxs("span",{children:[Ae.bookingCount," bookings"]}),c.jsxs("span",{children:[((Ue=Ae.depots)==null?void 0:Ue.length)||0," depots"]})]})]},Ae.id)}),Ye.length===0&&c.jsx("div",{className:"p-8 text-center text-gray-500",children:"No credit accounts found"})]})]})}),c.jsx("div",{className:"lg:col-span-2",children:dt?c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.jsxs("div",{className:"p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[V?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:K,onChange:Ae=>ee(Ae.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-lg font-bold",autoFocus:!0}),c.jsx("button",{onClick:Ne,className:"px-3 py-1 bg-green-500 text-white rounded text-sm",children:"Save"}),c.jsx("button",{onClick:()=>P(!1),className:"px-3 py-1 bg-gray-200 text-gray-700 rounded text-sm",children:"Cancel"})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:dt.customer}),c.jsx("button",{onClick:()=>{P(!0),ee(dt.customer)},className:"text-sm text-orange-600 hover:text-orange-700",children:" Edit"})]}),c.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-gray-600 text-xl",children:""})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("p",{className:"text-orange-600 font-medium",children:[" ",dt.phone]}),c.jsx("button",{onClick:Xe,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200 flex items-center gap-1",children:" Export CSV"})]})]}),c.jsx("div",{className:"flex border-b border-gray-200",children:["bookings","payments","pricing","settlement"].map(Ae=>c.jsxs("button",{onClick:()=>u(Ae),className:`px-6 py-3 text-sm font-medium transition-colors ${o===Ae?"text-orange-600 border-b-2 border-orange-500 bg-orange-50":"text-gray-500 hover:text-gray-700"}`,children:[Ae==="bookings"&&" Bookings",Ae==="payments"&&" Payments",Ae==="pricing"&&" Set Pricing",Ae==="settlement"&&" Settlement"]},Ae))}),c.jsxs("div",{className:"p-6 max-h-[500px] overflow-y-auto",children:[o==="bookings"&&c.jsxs("div",{className:"space-y-3",children:[(vt=dt.bookings)==null?void 0:vt.map(Ae=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:Ae.receiptNumber}),c.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(Ae.date).toLocaleDateString("en-IN"),"  ",Ae.destination]})]}),c.jsxs("p",{className:"font-bold text-orange-600",children:["",Ae.amount.toLocaleString("en-IN")]})]},Ae.id)),!((gt=dt.bookings)!=null&&gt.length)&&c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No bookings found"})]}),o==="payments"&&c.jsxs("div",{children:[c.jsx("button",{onClick:()=>k(!0),className:"w-full mb-4 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium",children:"+ Record New Payment"}),c.jsxs("div",{className:"space-y-3",children:[(Jt=dt.payments)==null?void 0:Jt.map(Ae=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-gray-900",children:Ae.receiptNumber||"Payment"}),c.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(Ae.date).toLocaleDateString("en-IN"),"  ",Ae.method]})]}),c.jsxs("p",{className:"font-bold text-green-600",children:["+",Ae.amount.toLocaleString("en-IN")]})]},Ae.id)),!((zt=dt.payments)!=null&&zt.length)&&c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No payments recorded yet"})]})]}),o==="pricing"&&c.jsxs("div",{children:[c.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Set discounted prices"})," for this customer. Only depots where they have shipped are shown."]})}),qe.length===0?c.jsx("p",{className:"text-gray-500 text-center py-8",children:"No shipping history found for this customer."}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"overflow-y-auto max-h-[400px]",children:c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-100 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700 bg-gray-100",children:"Depot"}),H.map(Ae=>c.jsxs("th",{className:"px-3 py-3 text-center font-semibold text-gray-700 bg-gray-100",children:[c.jsx("div",{children:Ae.name}),c.jsxs("div",{className:"text-xs font-normal text-gray-500",children:["Base: ",Ae.basePrice]})]},Ae.id))]})}),c.jsx("tbody",{className:"divide-y divide-gray-200",children:qe.map(Ae=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 whitespace-nowrap",children:Ae.name}),H.map(Be=>{const Ue=`${Be.id}_${Ae.id}`,Ge=Me(Be.id,Ae.id),Ze=ge[Ue],At=Ze!==void 0&&Ze<Ge;return c.jsx("td",{className:"px-3 py-3 text-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-gray-400 text-xs",children:""}),c.jsx("input",{type:"number",placeholder:String(Ge),value:Ze??"",onChange:yt=>Ie(Be.id,Ae.id,yt.target.value),className:`w-16 px-2 py-1 border rounded text-sm text-center ${At?"border-orange-500 bg-orange-50 text-orange-900 font-medium":"border-gray-200 bg-gray-50"}`})]}),At&&c.jsxs("span",{className:"text-xs text-green-600",children:["-",(Ge-Ze).toFixed(0)]})]})},Be.id)})]},Ae.id))})]})}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx("button",{onClick:He,disabled:we,className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 font-medium disabled:opacity-50",children:we?"Saving...":"Save Pricing"})})]})]}),o==="settlement"&&c.jsxs("div",{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Credit"}),c.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",dt.totalCredit.toLocaleString("en-IN")]})]}),c.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Advance Paid"}),c.jsxs("p",{className:"text-xl font-bold text-green-600",children:["",dt.advancePaid.toLocaleString("en-IN")]})]})]}),ne&&ne.totalSavings>0&&c.jsxs("div",{className:"mb-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-orange-800 mb-2",children:" Discount Applied"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[c.jsx("p",{className:"text-gray-600",children:"Original Total:"}),c.jsxs("p",{className:"text-right",children:["",ne.originalTotal.toLocaleString("en-IN")]}),c.jsx("p",{className:"text-gray-600",children:"Discounted Total:"}),c.jsxs("p",{className:"text-right font-medium",children:["",ne.discountedTotal.toLocaleString("en-IN")]}),c.jsx("p",{className:"font-bold text-green-700",children:"Total Savings:"}),c.jsxs("p",{className:"text-right font-bold text-green-700",children:["",ne.totalSavings.toLocaleString("en-IN")," (",ne.savingsPercent,"%)"]})]})]}),c.jsxs("div",{className:"p-4 bg-orange-100 rounded-lg border-2 border-orange-500",children:[c.jsx("p",{className:"text-sm text-orange-800",children:"Net Outstanding"}),c.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:["",dt.netOutstanding.toLocaleString("en-IN")]})]}),c.jsx("button",{onClick:()=>k(!0),className:"w-full mt-4 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium",children:"Record Payment"})]})]})]}):c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[c.jsx("p",{className:"text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-500",children:"Select a customer to view details and manage pricing"})]})})]}),y&&s&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Record Advance Payment"}),c.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),c.jsxs("div",{className:"mb-4 bg-gray-50 rounded-lg p-3",children:[c.jsxs("p",{className:"text-sm",children:[c.jsx("strong",{children:"Customer:"})," ",(Lt=ce())==null?void 0:Lt.customer]}),c.jsxs("p",{className:"text-sm",children:[c.jsx("strong",{children:"Outstanding:"})," ",(((Wt=ce())==null?void 0:Wt.netOutstanding)||0).toLocaleString("en-IN")]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount ()"}),c.jsx("input",{type:"number",value:A,onChange:Ae=>C(Ae.target.value),placeholder:"Enter amount",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Method"}),c.jsxs("select",{value:L,onChange:Ae=>R(Ae.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500",children:[c.jsx("option",{value:"cash",children:"Cash"}),c.jsx("option",{value:"upi",children:"UPI"}),c.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),c.jsx("option",{value:"cheque",children:"Cheque"})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),c.jsx("input",{type:"text",value:E,onChange:Ae=>T(Ae.target.value),placeholder:"e.g., Season 2024 partial",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{onClick:me,disabled:!A||te,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:te?"Processing...":"Record Payment"})]})]})})]})}function nb({userRole:r}){const[e,t]=Pe.useState("users");return r!=="owner"?c.jsx("div",{className:"p-8",children:c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:c.jsx("p",{className:"text-red-700",children:"You don't have permission to access Settings."})})}):c.jsxs("div",{className:"p-8",children:[c.jsx("div",{className:"mb-8 flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Settings"}),c.jsx("p",{className:"text-gray-600",children:"Manage system configuration and preferences"})]})}),c.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200 overflow-x-auto",children:[c.jsx(jc,{active:e==="users",onClick:()=>t("users"),children:"User Management"}),c.jsx(jc,{active:e==="depots",onClick:()=>t("depots"),children:"Depots"}),c.jsx(jc,{active:e==="routes",onClick:()=>t("routes"),children:"Depot Routes"}),c.jsx(jc,{active:e==="pricing",onClick:()=>t("pricing"),children:"Packages & Pricing"}),c.jsx(jc,{active:e==="season",onClick:()=>t("season"),children:"Season"}),c.jsx(jc,{active:e==="backup",onClick:()=>t("backup"),children:"Backup & Restore"})]}),e==="users"&&c.jsx(sb,{}),e==="depots"&&c.jsx(ib,{}),e==="routes"&&c.jsx(ab,{}),e==="pricing"&&c.jsx(ob,{}),e==="season"&&c.jsx(lb,{}),e==="backup"&&c.jsx(cb,{})]})}function jc({active:r,onClick:e,children:t}){return c.jsx("button",{onClick:e,className:`px-6 py-3 font-medium border-b-2 transition-colors whitespace-nowrap ${r?"border-orange-500 text-orange-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:t})}function sb(){const[r,e]=Pe.useState([]),[t,s]=Pe.useState([]),[a,o]=Pe.useState(!0),[u,d]=Pe.useState(!1),[h,g]=Pe.useState(null),[v,_]=Pe.useState({name:"",email:"",password:"",role:"booking_clerk",assignedDepot:"",status:"active"});Pe.useEffect(()=>{N()},[]);const N=async()=>{try{const[C,L]=await Promise.all([pu.getAll(),Qs.getAll()]);e(C.users||[]),s(L.depots||[])}catch(C){console.error("Error loading data:",C)}finally{o(!1)}},y=async C=>{C.preventDefault();try{if(h){const L={...v};L.password||delete L.password,await pu.update(h.id,L)}else{if(!v.password){alert("Password is required for new users");return}await pu.create(v)}d(!1),g(null),_({name:"",email:"",password:"",role:"booking_clerk",assignedDepot:"",status:"active"}),N()}catch(L){console.error("Error saving user:",L),alert("Failed to save user")}},k=C=>{g(C),_({name:C.name,email:C.email,password:"",role:C.role==="owner"?"booking_clerk":C.role,assignedDepot:C.assignedDepot||"",status:C.status}),d(!0)},A=async C=>{if(confirm("Are you sure you want to delete this user?"))try{await pu.delete(C),N()}catch(L){console.error("Error deleting user:",L),alert("Failed to delete user")}};return a?c.jsx("div",{className:"p-6",children:"Loading..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Users"}),c.jsx("button",{onClick:()=>{d(!0),g(null),_({name:"",email:"",password:"",role:"booking_clerk",assignedDepot:"",status:"active"})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add User"})]}),u&&c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:h?"Edit User":"New User"}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),c.jsx("input",{type:"text",value:v.name,onChange:C=>_({...v,name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),c.jsx("input",{type:"email",value:v.email,onChange:C=>_({...v,email:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,disabled:!!h})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",h?"(leave blank to keep current)":"*"]}),c.jsx("input",{type:"password",value:v.password,onChange:C=>_({...v,password:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!h,placeholder:h?"Leave blank to keep current password":""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),c.jsxs("select",{value:v.role,onChange:C=>_({...v,role:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[c.jsx("option",{value:"booking_clerk",children:"Booking Clerk"}),c.jsx("option",{value:"depot_manager",children:"Depot Manager"})]})]}),v.role==="depot_manager"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Depot *"}),c.jsxs("select",{value:v.assignedDepot,onChange:C=>_({...v,assignedDepot:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[c.jsx("option",{value:"",children:"Select a depot"}),t.map(C=>{var L;return c.jsxs("option",{value:C.name,children:[C.number,". ",C.name," (",(L=C.type)==null?void 0:L.replace("_"," "),")"]},C.id)})]})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[h?"Update":"Create"," User"]}),c.jsx("button",{type:"button",onClick:()=>{d(!1),g(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assigned Depot"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-200",children:[r.map(C=>{var L,R;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:C.name}),c.jsx("td",{className:"px-6 py-4",children:C.email}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs capitalize",children:(L=C.role)==null?void 0:L.replace("_"," ")})}),c.jsx("td",{className:"px-6 py-4",children:C.assignedDepot?((R=t.find(E=>E.id===C.assignedDepot))==null?void 0:R.name)||C.assignedDepot:"-"}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs ${C.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:C.status})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>k(C),className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>A(C.id),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})})]},C.id)}),r.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:'No users found. Click "Add User" to create one.'})})]})]})})]})}function ib(){const[r,e]=Pe.useState([]),[t,s]=Pe.useState(!0),[a,o]=Pe.useState(!1),[u,d]=Pe.useState(null),[h,g]=Pe.useState({name:"",type:"origin",address:"",contactPerson:"",contactPhone:""});Pe.useEffect(()=>{v()},[]);const v=async()=>{try{const k=await Qs.getAll();e(k.depots||[])}catch(k){console.error("Error loading depots:",k)}finally{s(!1)}},_=async k=>{k.preventDefault();try{u?await Qs.update(u.id,h):await Qs.create(h),o(!1),d(null),g({name:"",type:"origin",address:"",contactPerson:"",contactPhone:""}),v()}catch(A){console.error("Error saving depot:",A),alert("Failed to save depot")}},N=k=>{d(k),g({name:k.name,type:k.type,address:k.address||"",contactPerson:k.contactPerson||"",contactPhone:k.contactPhone||""}),o(!0)},y=async k=>{if(confirm("Are you sure you want to delete this depot?"))try{await Qs.delete(k),v()}catch(A){console.error("Error deleting depot:",A),alert("Failed to delete depot")}};return t?c.jsx("div",{className:"p-6",children:"Loading..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Depots"}),c.jsx("button",{onClick:()=>{o(!0),d(null),g({name:"",type:"origin",address:"",contactPerson:"",contactPhone:""})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add Depot"})]}),a&&c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:u?"Edit Depot":"New Depot"}),c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Depot Name *"}),c.jsx("input",{type:"text",value:h.name,onChange:k=>g({...h,name:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., Devgad",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),c.jsxs("select",{value:h.type,onChange:k=>g({...h,type:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[c.jsx("option",{value:"origin",children:"Origin Depot"}),c.jsx("option",{value:"managed",children:"Managed Depot"}),c.jsx("option",{value:"direct_pickup",children:"Direct Pickup by Customer"})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),c.jsx("input",{type:"text",value:h.address,onChange:k=>g({...h,address:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Full address"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person"}),c.jsx("input",{type:"text",value:h.contactPerson,onChange:k=>g({...h,contactPerson:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),c.jsx("input",{type:"tel",value:h.contactPhone,onChange:k=>g({...h,contactPhone:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[u?"Update":"Create"," Depot"]}),c.jsx("button",{type:"button",onClick:()=>{o(!1),d(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Number"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-200",children:[r.map(k=>{var A;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 font-medium",children:k.number}),c.jsx("td",{className:"px-6 py-4 font-medium",children:k.name}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("span",{className:`px-2 py-1 rounded text-xs ${k.type==="origin"?"bg-purple-100 text-purple-700":k.type==="managed"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:(A=k.type)==null?void 0:A.replace("_"," ")})}),c.jsxs("td",{className:"px-6 py-4 text-sm",children:[k.contactPerson&&c.jsx("div",{children:k.contactPerson}),k.contactPhone&&c.jsx("div",{className:"text-gray-500",children:k.contactPhone}),!k.contactPerson&&!k.contactPhone&&"-"]}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>N(k),className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>y(k.id),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})})]},k.id)}),r.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:'No depots found. Click "Add Depot" to create one.'})})]})]})})]})}function ab(){const[r,e]=Pe.useState([]),[t,s]=Pe.useState([]),[a,o]=Pe.useState(!0),[u,d]=Pe.useState(!1),[h,g]=Pe.useState(null),[v,_]=Pe.useState({originDepotId:"",forwardingDepotIds:[]});Pe.useEffect(()=>{N()},[]);const N=async()=>{try{const[C,L]=await Promise.all([Oc.getAll(),Qs.getAll()]);e(C.routes||[]),s(L.depots||[])}catch(C){console.error("Error loading data:",C)}finally{o(!1)}},y=async C=>{C.preventDefault();try{h?await Oc.update(h.id,v):await Oc.create(v),d(!1),g(null),_({originDepotId:"",forwardingDepotIds:[]}),N()}catch(L){console.error("Error saving route:",L),alert("Failed to save route")}},k=async C=>{if(confirm("Are you sure you want to delete this route?"))try{await Oc.delete(C),N()}catch(L){console.error("Error deleting route:",L),alert("Failed to delete route")}},A=t.filter(C=>C.type==="managed");return a?c.jsx("div",{className:"p-6",children:"Loading..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Info:"})," Depot Routes allow managed depots to forward packages to other depots. When configured, packages meant for forwarded depots will appear in the origin depot manager's dashboard."]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Depot Routes"}),c.jsx("button",{onClick:()=>{d(!0),g(null),_({originDepotId:"",forwardingDepotIds:[]})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add Route"})]}),u&&c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:h?"Edit Route":"New Route"}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Origin Depot (Managed) *"}),c.jsxs("select",{value:v.originDepotId,onChange:C=>_({...v,originDepotId:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[c.jsx("option",{value:"",children:"Select a managed depot"}),A.map(C=>c.jsx("option",{value:C.id,children:C.name},C.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Forwarding Depots *"}),c.jsx("div",{className:"border border-gray-300 rounded-lg p-4 space-y-2 max-h-64 overflow-y-auto",children:t.filter(C=>C.id!==v.originDepotId).map(C=>{var L;return c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:v.forwardingDepotIds.includes(C.id),onChange:R=>{R.target.checked?_({...v,forwardingDepotIds:[...v.forwardingDepotIds,C.id]}):_({...v,forwardingDepotIds:v.forwardingDepotIds.filter(E=>E!==C.id)})},className:"w-4 h-4 text-orange-500 border-gray-300 rounded"}),c.jsxs("span",{className:"text-sm",children:[C.name," (",(L=C.type)==null?void 0:L.replace("_"," "),")"]})]},C.id)})})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[h?"Update":"Create"," Route"]}),c.jsx("button",{type:"button",onClick:()=>{d(!1),g(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[r.map(C=>{const L=t.find(E=>E.id===C.originDepotId),R=t.filter(E=>{var T;return(T=C.forwardingDepotIds)==null?void 0:T.includes(E.id)});return c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-gray-900",children:(L==null?void 0:L.name)||"Unknown"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Origin Depot"})]}),c.jsx("button",{onClick:()=>k(C.id),className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Delete"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Forwards to:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(E=>c.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm",children:E.name},E.id))})]})]},C.id)}),r.length===0&&c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:c.jsx("p",{className:"text-gray-500",children:'No depot routes configured. Click "Add Route" to create one.'})})]})]})}function ob(){const[r,e]=Pe.useState([]),[t,s]=Pe.useState([]),[a,o]=Pe.useState([]),[u,d]=Pe.useState(!0),[h,g]=Pe.useState(!1),[v,_]=Pe.useState(null),[N,y]=Pe.useState({name:"",basePrice:0});Pe.useEffect(()=>{k()},[]);const k=async()=>{try{const[E,T,te]=await Promise.all([Ll.getAll(),Qs.getAll(),Lu.getAll()]);e(E.packages||[]),s(T.depots||[]),o(te.pricing||[])}catch(E){console.error("Error loading data:",E)}finally{d(!1)}},A=async E=>{E.preventDefault();try{v?await Ll.update(v.id,N):await Ll.create(N),g(!1),_(null),y({name:"",basePrice:0}),k()}catch(T){console.error("Error saving package:",T),alert("Failed to save package")}},C=async E=>{if(confirm("Are you sure you want to delete this package?"))try{await Ll.delete(E),k()}catch(T){console.error("Error deleting package:",T),alert("Failed to delete package")}},L=async(E,T,te)=>{const B=parseFloat(te);if(!isNaN(B))try{await Lu.update(E,T,B),k()}catch(H){console.error("Error updating price:",H),alert("Failed to update price")}},R=(E,T)=>{const te=a.find(H=>H.packageId===E&&H.depotId===T);if(te)return te.price;const B=r.find(H=>H.id===E);return(B==null?void 0:B.basePrice)||0};return u?c.jsx("div",{className:"p-6",children:"Loading..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Packages & Pricing"}),c.jsx("button",{onClick:()=>{g(!0),_(null),y({name:"",basePrice:0})},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Add Package Size"})]}),h&&c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:v?"Edit Package":"New Package"}),c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Package Size Name *"}),c.jsx("input",{type:"text",value:N.name,onChange:E=>y({...N,name:E.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 1 Dz",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Price () *"}),c.jsx("input",{type:"number",value:N.basePrice,onChange:E=>y({...N,basePrice:Number(E.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 50",required:!0})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:[v?"Update":"Create"," Package"]}),c.jsx("button",{type:"button",onClick:()=>{g(!1),_(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm",style:{width:0,minWidth:"100%"},children:[c.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[c.jsx("h3",{className:"font-bold text-gray-900",children:"Pricing Overview"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Base prices can be overridden per depot. Use horizontal scroll to view all depots."})]}),c.jsx("div",{style:{overflowX:"auto",maxHeight:"70vh",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white"},children:c.jsxs("table",{className:"w-full text-sm",style:{minWidth:"1200px"},children:[c.jsx("thead",{style:{position:"sticky",top:0,zIndex:40},children:c.jsxs("tr",{className:"bg-gray-100",children:[c.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase",style:{position:"sticky",left:0,zIndex:30,backgroundColor:"#f3f4f6",minWidth:"180px",borderRight:"2px solid #e5e7eb"},children:"Package Size"}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase",style:{position:"sticky",left:"180px",zIndex:30,backgroundColor:"#f3f4f6",minWidth:"130px",borderRight:"2px solid #e5e7eb"},children:"Base Price"}),t.filter(E=>!["Devgad","Shirgaon"].includes(E.name)).map(E=>{var T;return c.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase whitespace-nowrap",style:{minWidth:"130px"},children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{children:E.name}),c.jsx("span",{className:"text-[10px] text-gray-500 font-normal lowercase",children:(T=E.type)==null?void 0:T.replace("_"," ")})]})},E.id)}),c.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase",style:{minWidth:"130px"},children:"Actions"})]})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.map(E=>c.jsxs("tr",{className:"hover:bg-amber-50 transition-colors border-b border-gray-200",children:[c.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",style:{position:"sticky",left:0,zIndex:20,backgroundColor:"white",minWidth:"180px",borderRight:"2px solid #e5e7eb"},children:E.name}),c.jsxs("td",{className:"px-6 py-4 font-bold text-orange-600",style:{position:"sticky",left:"180px",zIndex:20,backgroundColor:"white",minWidth:"130px",borderRight:"2px solid #e5e7eb"},children:["",E.basePrice]}),t.filter(T=>!["Devgad","Shirgaon"].includes(T.name)).map(T=>{const te=R(E.id,T.id),B=a.some(H=>H.packageId===E.id&&H.depotId===T.id);return c.jsxs("td",{className:"px-6 py-4 border-r border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-gray-500 text-xs",children:""}),c.jsx("input",{type:"number",defaultValue:te,onBlur:H=>{const Y=H.target.value;Y&&parseFloat(Y)!==te&&L(E.id,T.id,Y)},className:`w-20 px-2 py-1 border rounded text-sm transition-all focus:ring-2 focus:ring-orange-500 focus:border-transparent ${B?"border-orange-500 bg-orange-50 text-orange-900 font-medium":"border-gray-200 text-gray-600 bg-gray-50 hover:bg-white hover:border-gray-300"}`,placeholder:String(E.basePrice)})]}),B&&c.jsx("span",{className:"text-[10px] text-orange-600 block mt-1 font-medium",children:"Custom Price"})]},T.id)}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{_(E),y({name:E.name,basePrice:E.basePrice}),g(!0)},className:"text-xs font-medium text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded transition-colors",children:"Edit"}),c.jsx("button",{onClick:()=>C(E.id),className:"text-xs font-medium text-red-600 hover:text-red-800 bg-red-50 hover:bg-red-100 px-3 py-1.5 rounded transition-colors",children:"Delete"})]})})]},E.id)),r.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:t.length+3,className:"px-6 py-12 text-center text-gray-500",children:c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("span",{className:"text-4xl mb-4",children:""}),c.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No packages found"}),c.jsx("p",{className:"text-sm",children:'Click "Add Package Size" above to create your first package.'})]})})})]})]})})]})]})}function lb(){const[r,e]=Pe.useState({startDate:"",endDate:"",year:new Date().getFullYear()}),[t,s]=Pe.useState(!0),[a,o]=Pe.useState(!1),[u,d]=Pe.useState(!1);Pe.useEffect(()=>{h()},[]);const h=async()=>{try{const N=await Tu.get();N.season&&Object.keys(N.season).length>0&&e(N.season)}catch(N){console.error("Error loading season:",N)}finally{s(!1)}},g=async N=>{N.preventDefault(),o(!0);try{await Tu.update(r),await h(),d(!1),alert("Season updated successfully!")}catch(y){console.error("Error updating season:",y),alert("Failed to update season")}finally{o(!1)}},v=()=>{if(!r.startDate||!r.endDate)return!1;const N=new Date;N.setHours(0,0,0,0);const y=new Date(r.startDate+"T00:00:00"),k=new Date(r.endDate+"T23:59:59");return isNaN(y.getTime())||isNaN(k.getTime())?(console.error("Invalid season dates:",{startDate:r.startDate,endDate:r.endDate}),!1):N>=y&&N<=k},_=N=>N?new Date(N+"T00:00:00").toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return t?c.jsx("div",{className:"p-6",children:"Loading..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:`rounded-xl border p-6 ${v()?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`,children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-2xl",children:v()?"":""}),c.jsxs("h3",{className:"font-bold text-gray-900",children:["Season Status: ",v()?"Active":"Inactive"]})]}),c.jsx("p",{className:"text-sm text-gray-700",children:v()?`The mango season is currently active. Bookings and trips can be created.${r.startDate&&r.endDate?` Current season is from ${_(r.startDate)} to ${_(r.endDate)}.`:""}`:`The season is currently inactive. No bookings or trips can be created outside the season dates.${r.startDate&&r.endDate?` Season dates: ${_(r.startDate)} to ${_(r.endDate)}.`:""}`}),!u&&c.jsx("button",{onClick:()=>d(!0),className:"mt-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium text-sm",children:"Edit Season"})]}),u&&c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-8 max-w-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Season Configuration"}),c.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),c.jsxs("form",{onSubmit:g,className:"space-y-6",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Season Year *"}),c.jsx("input",{type:"number",value:r.year,onChange:N=>e({...r,year:Number(N.target.value)}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),c.jsx("input",{type:"date",value:r.startDate,onChange:N=>e({...r,startDate:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),c.jsx("input",{type:"date",value:r.endDate,onChange:N=>e({...r,endDate:N.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]})]}),c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[c.jsx("strong",{children:"Warning:"})," After the end date, no new bookings or trips can be created until the next season is configured."]})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"submit",disabled:a,className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50",children:a?"Saving...":"Update Season"}),c.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"Cancel"})]})]})]})]})}function cb(){const[r,e]=Pe.useState(!1),[t,s]=Pe.useState(!1),[a,o]=Pe.useState(null),u=async()=>{e(!0);try{const v=(await Lf.create()).backup,_=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),N=URL.createObjectURL(_),y=document.createElement("a");y.href=N,y.download=`mango-express-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(N),alert("Backup created and downloaded successfully!")}catch(g){console.error("Error creating backup:",g),alert("Failed to create backup")}finally{e(!1)}},d=g=>{var N;const v=(N=g.target.files)==null?void 0:N[0];if(!v)return;const _=new FileReader;_.onload=y=>{var k;try{const A=JSON.parse((k=y.target)==null?void 0:k.result);o(A)}catch(A){console.error("Error parsing backup file:",A),alert("Invalid backup file format")}},_.readAsText(v)},h=async()=>{if(!a){alert("Please select a backup file first");return}if(confirm("Are you sure you want to restore this backup? This will overwrite all current data!")){s(!0);try{await Lf.restore(a.data),alert("Data restored successfully! Please refresh the page."),o(null)}catch(g){console.error("Error restoring backup:",g),alert("Failed to restore backup")}finally{s(!1)}}};return c.jsxs("div",{className:"space-y-6 max-w-3xl",children:[c.jsx("h2",{className:"font-bold text-gray-900",children:"Backup & Restore"}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Create Backup"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Download a complete backup of all system data including bookings, trips, users, depots, and settings."}),c.jsx("button",{onClick:u,disabled:r,className:"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-medium disabled:opacity-50",children:r?"Creating Backup...":"Download Backup"})]}),c.jsx("div",{className:"text-6xl",children:""})]})}),c.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-8",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Restore Backup"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a backup file to restore all data. This will overwrite all current data."}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{children:c.jsxs("label",{className:"block",children:[c.jsx("span",{className:"sr-only",children:"Choose backup file"}),c.jsx("input",{type:"file",accept:".json",onChange:d,className:`block w-full text-sm text-gray-500\r
                      file:mr-4 file:py-2 file:px-4\r
                      file:rounded-lg file:border-0\r
                      file:bg-orange-50 file:text-orange-700\r
                      hover:file:bg-orange-100\r
                      file:cursor-pointer cursor-pointer`})]})}),a&&c.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-green-800",children:[c.jsx("strong",{children:"Backup loaded:"})," Created on ",new Date(a.timestamp).toLocaleString("en-IN")]})}),c.jsx("button",{onClick:h,disabled:t||!a,className:"px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium disabled:opacity-50",children:t?"Restoring...":"Restore Backup"})]})]}),c.jsx("div",{className:"text-6xl",children:""})]})}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-red-800",children:[c.jsx("strong",{children:" Warning:"})," Restoring a backup will permanently overwrite all current data. Make sure to create a backup of your current data before restoring."]})})]})}function ub(){const{isOnline:r,setOnline:e,lastOnlineAt:t}=zi();return Pe.useEffect(()=>{e(navigator.onLine);const s=()=>{console.log("[Network] Connection restored"),e(!0)},a=()=>{console.log("[Network] Connection lost"),e(!1)};return window.addEventListener("online",s),window.addEventListener("offline",a),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}},[e]),{isOnline:r,lastOnlineAt:t}}function db(){ub();const r=zi(h=>h.isOnline),e=ei(h=>h.pendingOperations),t=ei(h=>h.isSyncing),s=e.filter(h=>h.status==="pending"||h.status==="syncing").length,a=e.filter(h=>h.status==="failed").length,[o,u]=Cl.useState(!1),d=async()=>{u(!0);try{await Zy()}finally{u(!1)}};return r&&s===0&&a===0?null:c.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[!r&&c.jsxs("div",{className:"bg-amber-500 text-white px-4 py-2 flex items-center justify-center gap-2 shadow-lg",children:[c.jsx("svg",{className:"w-5 h-5 animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3"})}),c.jsx("span",{className:"font-medium",children:"You're offline"}),c.jsx("span",{className:"text-amber-100",children:" Changes will sync when connection is restored"})]}),(s>0||a>0)&&c.jsxs("div",{className:`px-4 py-2 flex items-center justify-center gap-3 ${a>0?"bg-red-500 text-white":t?"bg-blue-500 text-white":"bg-gray-700 text-white"}`,children:[t&&c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{className:"font-medium",children:"Syncing changes..."})]}),!t&&s>0&&c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("span",{className:"font-medium",children:[s," pending ",s===1?"change":"changes"]}),r&&c.jsx("span",{className:"text-gray-300",children:" Will sync shortly"})]}),a>0&&c.jsxs(c.Fragment,{children:[c.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),c.jsxs("span",{className:"font-medium",children:[a," failed ",a===1?"operation":"operations"]}),c.jsx("button",{onClick:d,disabled:o||!r,className:"ml-2 px-3 py-1 bg-white text-red-500 rounded-md text-sm font-medium hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Retrying...":"Retry"})]})]})]})}function hb(){const r=ei(o=>o.conflicts),e=ei(o=>o.resolveConflict);if(r.length===0)return null;const t=async(o,u)=>{e(o,u),u==="keep_local"&&setTimeout(()=>Rc(),500)},s=o=>{switch(o){case"booking":return"Booking";case"trip":return"Trip";case"delivery":return"Delivery";default:return o}},a=o=>o?o.sender_name?`Sender: ${o.sender_name}`:o.driver_name?`Driver: ${o.driver_name}`:o.status?`Status: ${o.status}`:JSON.stringify(o,null,2).slice(0,200)+"...":"No data available";return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[c.jsx("div",{className:"p-6 border-b border-gray-200 bg-red-50",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-3xl",children:""}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Sync Conflict Detected"}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.length," ",r.length===1?"item has":"items have"," been modified elsewhere. Please choose how to resolve."]})]})]})}),c.jsx("div",{className:"divide-y divide-gray-200",children:r.map(o=>c.jsx(fb,{conflict:o,onResolve:t,formatEntityType:s,formatData:a},o.operationId))}),r.length>1&&c.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>r.forEach(o=>t(o.operationId,"keep_server")),className:"px-4 py-2 text-sm text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Keep All Server Changes"}),c.jsx("button",{onClick:()=>r.forEach(o=>t(o.operationId,"keep_local")),className:"px-4 py-2 text-sm text-white bg-orange-500 rounded-lg hover:bg-orange-600",children:"Keep All My Changes"})]})]})})}function fb({conflict:r,onResolve:e,formatEntityType:t,formatData:s}){const[a,o]=Cl.useState(!1);return c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"inline-block px-2 py-1 bg-orange-100 text-orange-700 text-xs font-medium rounded mb-2",children:t(r.entityType)}),c.jsx("p",{className:"font-medium text-gray-900",children:r.entityId!=="unknown"?`ID: ${r.entityId}`:"New Item"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Conflicted at: ",new Date(r.conflictedAt).toLocaleString()]})]}),c.jsx("button",{onClick:()=>o(!a),className:"text-sm text-blue-600 hover:underline",children:a?"Hide Details":"Show Details"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx("p",{className:"text-xs font-medium text-blue-700 mb-2",children:" Your Changes"}),c.jsx("p",{className:"text-sm text-gray-700",children:s(r.localData)}),a&&c.jsx("pre",{className:"mt-2 text-xs text-gray-600 bg-white p-2 rounded overflow-auto max-h-32",children:JSON.stringify(r.localData,null,2)})]}),c.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("p",{className:"text-xs font-medium text-green-700 mb-2",children:" Server Version"}),c.jsx("p",{className:"text-sm text-gray-700",children:r.serverData?s(r.serverData):"Modified by another user"}),a&&r.serverData&&c.jsx("pre",{className:"mt-2 text-xs text-gray-600 bg-white p-2 rounded overflow-auto max-h-32",children:JSON.stringify(r.serverData,null,2)})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>e(r.operationId,"keep_local"),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm font-medium",children:"Keep My Changes"}),c.jsx("button",{onClick:()=>e(r.operationId,"keep_server"),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm font-medium",children:"Use Server Version"}),c.jsx("button",{onClick:()=>e(r.operationId,"cancel"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-sm font-medium",children:"Discard"})]})]})}function pb(){const[r,e]=Pe.useState(!1),[t,s]=Pe.useState("dashboard"),[a,o]=Pe.useState(null),[u,d]=Pe.useState(null),[h,g]=Pe.useState(null),[v,_]=Pe.useState(null),[N,y]=Pe.useState(!1);Pe.useEffect(()=>(e5(),()=>{t5()}),[]);const k=L=>{s(L),y(!1)},A=async(L,R,E)=>{if(e(!0),o(L),d(R),g(E||null),console.log("handleLogin called:",{role:L,id:R,depotId:E}),L==="depot_manager"&&E){console.log("Fetching depot info for:",E);try{const T=await Qs.getById(E);console.log("Depot info fetched:",T),_(T)}catch(T){console.error("Error fetching depot info:",T)}}s("dashboard")},C=()=>{e(!1),s("dashboard"),y(!1)};return r?c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(db,{}),c.jsx(hb,{}),c.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-40 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[c.jsx("button",{onClick:()=>y(!0),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Open menu",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center overflow-hidden",children:c.jsx("img",{src:"/logo.webp",alt:"Logo",className:"w-full h-full object-contain p-0.5"})}),c.jsx("span",{className:"font-bold text-gray-900",children:"Mango Express"})]}),c.jsx("div",{className:"w-10"})," "]}),N&&c.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>y(!1)}),c.jsxs("div",{className:"flex",children:[c.jsx("aside",{className:`
          fixed lg:relative inset-y-0 left-0 z-50
          w-64 bg-white border-r border-gray-200 min-h-screen
          transform transition-transform duration-300 ease-in-out
          ${N?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        `,children:c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"lg:hidden flex justify-end mb-4",children:c.jsx("button",{onClick:()=>y(!1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close menu",children:c.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),c.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[c.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center overflow-hidden",children:c.jsx("img",{src:"/logo.webp",alt:"Mango Express Logo",className:"w-full h-full object-contain p-1"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"font-bold text-gray-900",children:"Mango Express"}),c.jsx("p",{className:"text-sm text-gray-500 capitalize",children:a==null?void 0:a.replace("_"," ")})]})]}),c.jsxs("nav",{className:"space-y-1",children:[c.jsx(Uo,{icon:"",label:"Dashboard",active:t==="dashboard",onClick:()=>k("dashboard")}),(a==="owner"||a==="booking_clerk")&&c.jsx(Uo,{icon:"",label:"New Booking",active:t==="new_booking",onClick:()=>k("new_booking")}),(a==="owner"||a==="booking_clerk"||a==="depot_manager"&&(v==null?void 0:v.forwarding_enabled))&&c.jsx(Uo,{icon:"",label:v!=null&&v.forwarding_enabled?"Create Forwarding Trip":"Create Trip",active:t==="trip_creation",onClick:()=>k("trip_creation")}),c.jsx(Uo,{icon:"",label:"Trips & Deliveries",active:t==="trips_deliveries",onClick:()=>k("trips_deliveries")}),(a==="owner"||a==="depot_manager")&&c.jsx(Uo,{icon:"",label:"Reports",active:t==="reports",onClick:()=>k("reports")}),(a==="owner"||a==="depot_manager")&&c.jsx(Uo,{icon:"",label:"All Receipts",active:t==="receipts",onClick:()=>k("receipts")}),a==="owner"&&c.jsx(Uo,{icon:"",label:"Credit Ledger",active:t==="credit_ledger",onClick:()=>k("credit_ledger")}),a==="owner"&&c.jsx(Uo,{icon:"",label:"Settings",active:t==="settings",onClick:()=>k("settings")})]}),c.jsx("button",{onClick:C,className:"mt-8 w-full px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Logout"})]})}),c.jsxs("main",{className:"flex-1 pt-16 lg:pt-0",children:[t==="dashboard"&&c.jsx(Fy,{userRole:a,assignedDepotId:h}),t==="new_booking"&&(a==="owner"||a==="booking_clerk")&&c.jsx(r5,{onNavigate:k}),t==="trip_creation"&&(a==="owner"||a==="booking_clerk"||a==="depot_manager"&&(v==null?void 0:v.forwarding_enabled))&&c.jsx(l5,{userRole:a,assignedDepotId:h}),t==="trips_deliveries"&&c.jsx(Qw,{userRole:a,assignedDepotId:h}),t==="reports"&&a==="owner"&&c.jsx(Zw,{assignedDepotId:h}),t==="reports"&&a==="depot_manager"&&h&&c.jsx(eb,{assignedDepotId:h}),t==="receipts"&&(a==="owner"||a==="depot_manager")&&c.jsx(tb,{assignedDepotId:h}),t==="credit_ledger"&&a==="owner"&&c.jsx(rb,{assignedDepotId:h}),t==="settings"&&a==="owner"&&c.jsx(nb,{userRole:a})]})]})]}):c.jsx(Dy,{onLogin:A})}function Uo({icon:r,label:e,active:t,onClick:s}){return c.jsxs("button",{onClick:s,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors touch-target ${t?"bg-orange-50 text-orange-600":"text-gray-600 hover:bg-gray-50"}`,children:[c.jsx("span",{children:r}),c.jsx("span",{className:"font-medium",children:e})]})}e2.createRoot(document.getElementById("root")).render(c.jsx(pb,{}));export{gr as _,mb as c,H1 as g};
