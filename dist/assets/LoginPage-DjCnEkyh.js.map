{"version":3,"file":"LoginPage-DjCnEkyh.js","sources":["../../src/app/components/LoginPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { authApi } from '../utils/api';\r\n\r\ninterface LoginPageProps {\r\n  onLogin: (role: string, userId: string, depotId?: string | null) => void;\r\n}\r\n\r\nexport default function LoginPage({ onLogin }: LoginPageProps) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!email || !password) return;\r\n\r\n    setIsLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // Authenticate and get user role and depot from database\r\n      const response = await authApi.signIn(email, password);\r\n\r\n      // Get user role, ID, and assigned depot ID from the response\r\n      const userRole = response.user?.role || 'owner';\r\n      const userId = response.user?.id || '';\r\n      const depotId = (response.user as any)?.assigned_depot_id || null;\r\n\r\n      console.log('Login successful:', { userRole, userId, depotId }); // Debug log\r\n      onLogin(userRole, userId, depotId);\r\n    } catch (err: any) {\r\n      console.error('Login error:', err);\r\n      setError(err.message || 'Invalid email or password. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-100 to-yellow-100 flex items-center justify-center p-4\">\r\n      <div className=\"w-full max-w-md\">\r\n        <div className=\"bg-white rounded-2xl shadow-xl p-8\">\r\n          <div className=\"text-center mb-8\">\r\n            <div className=\"inline-flex items-center justify-center w-16 h-16 bg-green-600 rounded-2xl mb-4 overflow-hidden\">\r\n              <img src=\"/logo.webp\" alt=\"Mango Express Logo\" className=\"w-full h-full object-contain p-2\" />\r\n            </div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Mango Express</h1>\r\n            <p className=\"text-gray-600\">Seasonal Transport Management</p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                placeholder=\"Enter your email\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Password\r\n              </label>\r\n              <input\r\n                id=\"password\"\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent\"\r\n                placeholder=\"Enter your password\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors font-medium\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? 'Logging in...' : 'Login'}\r\n            </button>\r\n          </form>\r\n\r\n          {error && (\r\n            <div className=\"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n            <p className=\"text-xs text-gray-500 text-center\">\r\n              Need help? Contact your system administrator.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":["LoginPage","onLogin","email","setEmail","useState","password","setPassword","isLoading","setIsLoading","error","setError","handleSubmit","e","response","authApi","userRole","_a","userId","_b","depotId","_c","err","jsx","jsxs"],"mappings":"qMAOA,SAAwBA,EAAU,CAAE,QAAAC,GAA2B,CAC7D,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAS,EAAE,EACrC,CAACG,EAAWC,CAAY,EAAIJ,EAAAA,SAAS,EAAK,EAC1C,CAACK,EAAOC,CAAQ,EAAIN,EAAAA,SAAS,EAAE,EAE/BO,EAAe,MAAOC,GAAuB,WAEjD,GADAA,EAAE,eAAA,EACE,GAACV,GAAS,CAACG,GAEf,CAAAG,EAAa,EAAI,EACjBE,EAAS,EAAE,EAEX,GAAI,CAEF,MAAMG,EAAW,MAAMC,EAAQ,OAAOZ,EAAOG,CAAQ,EAG/CU,IAAWC,EAAAH,EAAS,OAAT,YAAAG,EAAe,OAAQ,QAClCC,IAASC,EAAAL,EAAS,OAAT,YAAAK,EAAe,KAAM,GAC9BC,IAAWC,EAAAP,EAAS,OAAT,YAAAO,EAAuB,oBAAqB,KAE7D,QAAQ,IAAI,oBAAqB,CAAE,SAAAL,EAAU,OAAAE,EAAQ,QAAAE,EAAS,EAC9DlB,EAAQc,EAAUE,EAAQE,CAAO,CACnC,OAASE,EAAU,CACjB,QAAQ,MAAM,eAAgBA,CAAG,EACjCX,EAASW,EAAI,SAAW,8CAA8C,CACxE,QAAA,CACEb,EAAa,EAAK,CACpB,EACF,EAEA,OACEc,EAAAA,IAAC,MAAA,CAAI,UAAU,oGACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kBACb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAD,EAAAA,IAAC,MAAA,CAAI,UAAU,kGACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,IAAI,aAAa,IAAI,qBAAqB,UAAU,kCAAA,CAAmC,EAC9F,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,wCAAwC,SAAA,gBAAa,EACnEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,+BAAA,CAA6B,CAAA,EAC5D,EAEAC,EAAAA,KAAC,OAAA,CAAK,SAAUZ,EAAc,UAAU,YACtC,SAAA,CAAAY,OAAC,MAAA,CACC,SAAA,CAAAD,MAAC,QAAA,CAAM,QAAQ,QAAQ,UAAU,+CAA+C,SAAA,QAEhF,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,QACH,KAAK,QACL,MAAOpB,EACP,SAAWU,GAAMT,EAASS,EAAE,OAAO,KAAK,EACxC,UAAU,iHACV,YAAY,mBACZ,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAAU,MAAC,QAAA,CAAM,QAAQ,WAAW,UAAU,+CAA+C,SAAA,WAEnF,EACAA,EAAAA,IAAC,QAAA,CACC,GAAG,WACH,KAAK,WACL,MAAOjB,EACP,SAAWO,GAAMN,EAAYM,EAAE,OAAO,KAAK,EAC3C,UAAU,iHACV,YAAY,sBACZ,SAAQ,EAAA,CAAA,CACV,EACF,EAEAU,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,UAAU,kGACV,SAAUf,EAET,WAAY,gBAAkB,OAAA,CAAA,CACjC,EACF,EAECE,GACCa,EAAAA,IAAC,MAAA,CAAI,UAAU,2EACZ,SAAAb,EACH,EAGFa,EAAAA,IAAC,OAAI,UAAU,qCACb,eAAC,IAAA,CAAE,UAAU,oCAAoC,SAAA,+CAAA,CAEjD,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,CAEJ"}